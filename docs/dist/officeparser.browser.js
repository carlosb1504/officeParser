#!/usr/bin/env node

// Shim for setImmediate
if (typeof setImmediate === 'undefined') {
  window.setImmediate = function(callback) {
    return setTimeout(callback, 0);
  };
}

"use strict";var officeParser=(()=>{var OP=Object.create;var fd=Object.defineProperty;var NP=Object.getOwnPropertyDescriptor;var PP=Object.getOwnPropertyNames;var kP=Object.getPrototypeOf,BP=Object.prototype.hasOwnProperty;var sE=n=>{throw TypeError(n)};var LP=(n,t,e)=>t in n?fd(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var _l=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var Qe=(n,t)=>()=>(n&&(t=n(n=0)),t);var Zt=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),Mm=(n,t)=>{for(var e in t)fd(n,e,{get:t[e],enumerable:!0})},oE=(n,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of PP(t))!BP.call(n,i)&&i!==e&&fd(n,i,{get:()=>t[i],enumerable:!(r=NP(t,i))||r.enumerable});return n};var dd=(n,t,e)=>(e=n!=null?OP(kP(n)):{},oE(t||!n||!n.__esModule?fd(e,"default",{value:n,enumerable:!0}):e,n)),aE=n=>oE(fd({},"__esModule",{value:!0}),n);var Dt=(n,t,e)=>LP(n,typeof t!="symbol"?t+"":t,e),rb=(n,t,e)=>t.has(n)||sE("Cannot "+e);var l=(n,t,e)=>(rb(n,t,"read from private field"),e?e.call(n):t.get(n)),O=(n,t,e)=>t.has(n)?sE("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),C=(n,t,e,r)=>(rb(n,t,"write to private field"),r?r.call(n,e):t.set(n,e),e),F=(n,t,e)=>(rb(n,t,"access private method"),e);var vr=(n,t,e,r)=>({set _(i){C(n,t,i,e)},get _(){return l(n,t,r)}});var wt=Qe(()=>{});var process={};Mm(process,{_debugEnd:()=>KE,_debugProcess:()=>YE,_events:()=>fS,_eventsCount:()=>dS,_exiting:()=>IE,_fatalExceptions:()=>WE,_getActiveHandles:()=>kE,_getActiveRequests:()=>PE,_kill:()=>LE,_linkedBinding:()=>DE,_maxListeners:()=>hS,_preload_modules:()=>lS,_rawDebug:()=>CE,_startProfilerIdleNotifier:()=>JE,_stopProfilerIdleNotifier:()=>ZE,_tickCallback:()=>XE,abort:()=>rS,addListener:()=>pS,allowedNodeEnvironmentFlags:()=>qE,arch:()=>fE,argv:()=>gE,argv0:()=>aS,assert:()=>zE,binding:()=>wE,browser:()=>_E,chdir:()=>EE,config:()=>OE,cpuUsage:()=>$m,cwd:()=>xE,debugPort:()=>oS,default:()=>ES,dlopen:()=>NE,domain:()=>RE,emit:()=>bS,emitWarning:()=>bE,env:()=>pE,execArgv:()=>mE,execPath:()=>sS,exit:()=>jE,features:()=>HE,hasUncaughtExceptionCaptureCallback:()=>VE,hrtime:()=>jm,kill:()=>UE,listeners:()=>xS,memoryUsage:()=>ME,moduleLoadList:()=>TE,nextTick:()=>cE,off:()=>mS,on:()=>to,once:()=>gS,openStdin:()=>$E,pid:()=>nS,platform:()=>dE,ppid:()=>iS,prependListener:()=>wS,prependOnceListener:()=>AS,reallyExit:()=>BE,release:()=>SE,removeAllListeners:()=>vS,removeListener:()=>yS,resourceUsage:()=>FE,setSourceMapsEnabled:()=>cS,setUncaughtExceptionCaptureCallback:()=>GE,stderr:()=>tS,stdin:()=>eS,stdout:()=>QE,title:()=>hE,umask:()=>AE,uptime:()=>uS,version:()=>yE,versions:()=>vE});function sb(n){throw new Error("Node.js process "+n+" is not supported by JSPM core outside of Node.js")}function FP(){!Pu||!Cl||(Pu=!1,Cl.length?Qs=Cl.concat(Qs):Um=-1,Qs.length&&lE())}function lE(){if(!Pu){var n=setTimeout(FP,0);Pu=!0;for(var t=Qs.length;t;){for(Cl=Qs,Qs=[];++Um<t;)Cl&&Cl[Um].run();Um=-1,t=Qs.length}Cl=null,Pu=!1,clearTimeout(n)}}function cE(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];Qs.push(new uE(n,t)),Qs.length===1&&!Pu&&setTimeout(lE,0)}function uE(n,t){this.fun=n,this.array=t}function Yr(){}function DE(n){sb("_linkedBinding")}function NE(n){sb("dlopen")}function PE(){return[]}function kE(){return[]}function zE(n,t){if(!n)throw new Error(t||"assertion error")}function VE(){return!1}function uS(){return ga.now()/1e3}function jm(n){var t=Math.floor((Date.now()-ga.now())*.001),e=ga.now()*.001,r=Math.floor(e)+t,i=Math.floor(e%1*1e9);return n&&(r=r-n[0],i=i-n[1],i<0&&(r--,i+=ib)),[r,i]}function to(){return ES}function xS(n){return[]}var Qs,Pu,Cl,Um,hE,fE,dE,pE,gE,mE,yE,vE,bE,wE,AE,xE,EE,SE,_E,CE,TE,RE,IE,OE,BE,LE,$m,FE,ME,UE,jE,$E,qE,HE,WE,GE,XE,YE,KE,JE,ZE,QE,tS,eS,rS,nS,iS,sS,oS,aS,lS,cS,ga,nb,ib,hS,fS,dS,pS,gS,mS,yS,vS,bS,wS,AS,ES,SS=Qe(()=>{wt();xt();At();Qs=[],Pu=!1,Um=-1;uE.prototype.run=function(){this.fun.apply(null,this.array)};hE="browser",fE="x64",dE="browser",pE={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},gE=["/usr/bin/node"],mE=[],yE="v16.8.0",vE={},bE=function(n,t){console.warn((t?t+": ":"")+n)},wE=function(n){sb("binding")},AE=function(n){return 0},xE=function(){return"/"},EE=function(n){},SE={name:"node",sourceUrl:"",headersUrl:"",libUrl:""};_E=!0,CE=Yr,TE=[];RE={},IE=!1,OE={};BE=Yr,LE=Yr,$m=function(){return{}},FE=$m,ME=$m,UE=Yr,jE=Yr,$E=Yr,qE={};HE={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},WE=Yr,GE=Yr;XE=Yr,YE=Yr,KE=Yr,JE=Yr,ZE=Yr,QE=void 0,tS=void 0,eS=void 0,rS=Yr,nS=2,iS=1,sS="/bin/usr/node",oS=9229,aS="node",lS=[],cS=Yr,ga={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0};ga.now===void 0&&(nb=Date.now(),ga.timing&&ga.timing.navigationStart&&(nb=ga.timing.navigationStart),ga.now=()=>Date.now()-nb);ib=1e9;jm.bigint=function(n){var t=jm(n);return typeof BigInt>"u"?t[0]*ib+t[1]:BigInt(t[0]*ib)+BigInt(t[1])};hS=10,fS={},dS=0;pS=to,gS=to,mS=to,yS=to,vS=to,bS=Yr,wS=to,AS=to;ES={version:yE,versions:vE,arch:fE,platform:dE,browser:_E,release:SE,_rawDebug:CE,moduleLoadList:TE,binding:wE,_linkedBinding:DE,_events:fS,_eventsCount:dS,_maxListeners:hS,on:to,addListener:pS,once:gS,off:mS,removeListener:yS,removeAllListeners:vS,emit:bS,prependListener:wS,prependOnceListener:AS,listeners:xS,domain:RE,_exiting:IE,config:OE,dlopen:NE,uptime:uS,_getActiveRequests:PE,_getActiveHandles:kE,reallyExit:BE,_kill:LE,cpuUsage:$m,resourceUsage:FE,memoryUsage:ME,kill:UE,exit:jE,openStdin:$E,allowedNodeEnvironmentFlags:qE,assert:zE,features:HE,_fatalExceptions:WE,setUncaughtExceptionCaptureCallback:GE,hasUncaughtExceptionCaptureCallback:VE,emitWarning:bE,nextTick:cE,_tickCallback:XE,_debugProcess:YE,_debugEnd:KE,_startProfilerIdleNotifier:JE,_stopProfilerIdleNotifier:ZE,stdout:QE,stdin:eS,stderr:tS,abort:rS,umask:AE,chdir:EE,cwd:xE,env:pE,title:hE,argv:gE,execArgv:mE,pid:nS,ppid:iS,execPath:sS,debugPort:oS,hrtime:jm,argv0:aS,_preload_modules:lS,setSourceMapsEnabled:cS}});var At=Qe(()=>{SS()});function MP(){if(_S)return pd;_S=!0,pd.byteLength=a,pd.toByteArray=u,pd.fromByteArray=g;for(var n=[],t=[],e=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)n[i]=r[i],t[r.charCodeAt(i)]=i;t[45]=62,t[95]=63;function s(m){var y=m.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=m.indexOf("=");b===-1&&(b=y);var v=b===y?0:4-b%4;return[b,v]}function a(m){var y=s(m),b=y[0],v=y[1];return(b+v)*3/4-v}function c(m,y,b){return(y+b)*3/4-b}function u(m){var y,b=s(m),v=b[0],w=b[1],x=new e(c(m,v,w)),E=0,D=w>0?v-4:v,_;for(_=0;_<D;_+=4)y=t[m.charCodeAt(_)]<<18|t[m.charCodeAt(_+1)]<<12|t[m.charCodeAt(_+2)]<<6|t[m.charCodeAt(_+3)],x[E++]=y>>16&255,x[E++]=y>>8&255,x[E++]=y&255;return w===2&&(y=t[m.charCodeAt(_)]<<2|t[m.charCodeAt(_+1)]>>4,x[E++]=y&255),w===1&&(y=t[m.charCodeAt(_)]<<10|t[m.charCodeAt(_+1)]<<4|t[m.charCodeAt(_+2)]>>2,x[E++]=y>>8&255,x[E++]=y&255),x}function h(m){return n[m>>18&63]+n[m>>12&63]+n[m>>6&63]+n[m&63]}function f(m,y,b){for(var v,w=[],x=y;x<b;x+=3)v=(m[x]<<16&16711680)+(m[x+1]<<8&65280)+(m[x+2]&255),w.push(h(v));return w.join("")}function g(m){for(var y,b=m.length,v=b%3,w=[],x=16383,E=0,D=b-v;E<D;E+=x)w.push(f(m,E,E+x>D?D:E+x));return v===1?(y=m[b-1],w.push(n[y>>2]+n[y<<4&63]+"==")):v===2&&(y=(m[b-2]<<8)+m[b-1],w.push(n[y>>10]+n[y>>4&63]+n[y<<2&63]+"=")),w.join("")}return pd}function UP(){if(CS)return qm;CS=!0;return qm.read=function(n,t,e,r,i){var o,s,a=i*8-r-1,c=(1<<a)-1,u=c>>1,h=-7,f=e?i-1:0,g=e?-1:1,m=n[t+f];for(f+=g,o=m&(1<<-h)-1,m>>=-h,h+=a;h>0;o=o*256+n[t+f],f+=g,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;h>0;s=s*256+n[t+f],f+=g,h-=8);if(o===0)o=1-u;else{if(o===c)return s?NaN:(m?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-u}return(m?-1:1)*s*Math.pow(2,o-r)},qm.write=function(n,t,e,r,i,o){var s,a,c,u=o*8-i-1,h=(1<<u)-1,f=h>>1,g=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=r?0:o-1,y=r?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+f>=1?t+=g/c:t+=g*Math.pow(2,1-f),t*c>=2&&(s++,c/=2),s+f>=h?(a=0,s=h):s+f>=1?(a=(t*c-1)*Math.pow(2,i),s=s+f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;n[e+m]=a&255,m+=y,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;n[e+m]=s&255,m+=y,s/=256,u-=8);n[e+m-y]|=b*128},qm}function zm(){if(TS)return Tl;TS=!0;let n=MP(),t=UP(),e=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Tl.Buffer=s,Tl.SlowBuffer=w,Tl.INSPECT_MAX_BYTES=50;let r=2147483647;Tl.kMaxLength=r,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let A=new Uint8Array(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(A,p),A.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(A){if(A>r)throw new RangeError('The value "'+A+'" is invalid for option "size"');let p=new Uint8Array(A);return Object.setPrototypeOf(p,s.prototype),p}function s(A,p,d){if(typeof A=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(A)}return a(A,p,d)}s.poolSize=8192;function a(A,p,d){if(typeof A=="string")return f(A,p);if(ArrayBuffer.isView(A))return m(A);if(A==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A);if(Ft(A,ArrayBuffer)||A&&Ft(A.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ft(A,SharedArrayBuffer)||A&&Ft(A.buffer,SharedArrayBuffer)))return y(A,p,d);if(typeof A=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let S=A.valueOf&&A.valueOf();if(S!=null&&S!==A)return s.from(S,p,d);let M=b(A);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof A[Symbol.toPrimitive]=="function")return s.from(A[Symbol.toPrimitive]("string"),p,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A)}s.from=function(A,p,d){return a(A,p,d)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function c(A){if(typeof A!="number")throw new TypeError('"size" argument must be of type number');if(A<0)throw new RangeError('The value "'+A+'" is invalid for option "size"')}function u(A,p,d){return c(A),A<=0?o(A):p!==void 0?typeof d=="string"?o(A).fill(p,d):o(A).fill(p):o(A)}s.alloc=function(A,p,d){return u(A,p,d)};function h(A){return c(A),o(A<0?0:v(A)|0)}s.allocUnsafe=function(A){return h(A)},s.allocUnsafeSlow=function(A){return h(A)};function f(A,p){if((typeof p!="string"||p==="")&&(p="utf8"),!s.isEncoding(p))throw new TypeError("Unknown encoding: "+p);let d=x(A,p)|0,S=o(d),M=S.write(A,p);return M!==d&&(S=S.slice(0,M)),S}function g(A){let p=A.length<0?0:v(A.length)|0,d=o(p);for(let S=0;S<p;S+=1)d[S]=A[S]&255;return d}function m(A){if(Ft(A,Uint8Array)){let p=new Uint8Array(A);return y(p.buffer,p.byteOffset,p.byteLength)}return g(A)}function y(A,p,d){if(p<0||A.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(A.byteLength<p+(d||0))throw new RangeError('"length" is outside of buffer bounds');let S;return p===void 0&&d===void 0?S=new Uint8Array(A):d===void 0?S=new Uint8Array(A,p):S=new Uint8Array(A,p,d),Object.setPrototypeOf(S,s.prototype),S}function b(A){if(s.isBuffer(A)){let p=v(A.length)|0,d=o(p);return d.length===0||A.copy(d,0,0,p),d}if(A.length!==void 0)return typeof A.length!="number"||Xt(A.length)?o(0):g(A);if(A.type==="Buffer"&&Array.isArray(A.data))return g(A.data)}function v(A){if(A>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return A|0}function w(A){return+A!=A&&(A=0),s.alloc(+A)}s.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==s.prototype},s.compare=function(p,d){if(Ft(p,Uint8Array)&&(p=s.from(p,p.offset,p.byteLength)),Ft(d,Uint8Array)&&(d=s.from(d,d.offset,d.byteLength)),!s.isBuffer(p)||!s.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===d)return 0;let S=p.length,M=d.length;for(let G=0,Q=Math.min(S,M);G<Q;++G)if(p[G]!==d[G]){S=p[G],M=d[G];break}return S<M?-1:M<S?1:0},s.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(p,d){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return s.alloc(0);let S;if(d===void 0)for(d=0,S=0;S<p.length;++S)d+=p[S].length;let M=s.allocUnsafe(d),G=0;for(S=0;S<p.length;++S){let Q=p[S];if(Ft(Q,Uint8Array))G+Q.length>M.length?(s.isBuffer(Q)||(Q=s.from(Q)),Q.copy(M,G)):Uint8Array.prototype.set.call(M,Q,G);else if(s.isBuffer(Q))Q.copy(M,G);else throw new TypeError('"list" argument must be an Array of Buffers');G+=Q.length}return M};function x(A,p){if(s.isBuffer(A))return A.length;if(ArrayBuffer.isView(A)||Ft(A,ArrayBuffer))return A.byteLength;if(typeof A!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof A);let d=A.length,S=arguments.length>2&&arguments[2]===!0;if(!S&&d===0)return 0;let M=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return _t(A).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return Rt(A).length;default:if(M)return S?-1:_t(A).length;p=(""+p).toLowerCase(),M=!0}}s.byteLength=x;function E(A,p,d){let S=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,p>>>=0,d<=p))return"";for(A||(A="utf8");;)switch(A){case"hex":return T(this,p,d);case"utf8":case"utf-8":return at(this,p,d);case"ascii":return J(this,p,d);case"latin1":case"binary":return R(this,p,d);case"base64":return lt(this,p,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,p,d);default:if(S)throw new TypeError("Unknown encoding: "+A);A=(A+"").toLowerCase(),S=!0}}s.prototype._isBuffer=!0;function D(A,p,d){let S=A[p];A[p]=A[d],A[d]=S}s.prototype.swap16=function(){let p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<p;d+=2)D(this,d,d+1);return this},s.prototype.swap32=function(){let p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<p;d+=4)D(this,d,d+3),D(this,d+1,d+2);return this},s.prototype.swap64=function(){let p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<p;d+=8)D(this,d,d+7),D(this,d+1,d+6),D(this,d+2,d+5),D(this,d+3,d+4);return this},s.prototype.toString=function(){let p=this.length;return p===0?"":arguments.length===0?at(this,0,p):E.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(p){if(!s.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:s.compare(this,p)===0},s.prototype.inspect=function(){let p="",d=Tl.INSPECT_MAX_BYTES;return p=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(p+=" ... "),"<Buffer "+p+">"},e&&(s.prototype[e]=s.prototype.inspect),s.prototype.compare=function(p,d,S,M,G){if(Ft(p,Uint8Array)&&(p=s.from(p,p.offset,p.byteLength)),!s.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(d===void 0&&(d=0),S===void 0&&(S=p?p.length:0),M===void 0&&(M=0),G===void 0&&(G=this.length),d<0||S>p.length||M<0||G>this.length)throw new RangeError("out of range index");if(M>=G&&d>=S)return 0;if(M>=G)return-1;if(d>=S)return 1;if(d>>>=0,S>>>=0,M>>>=0,G>>>=0,this===p)return 0;let Q=G-M,nt=S-d,ht=Math.min(Q,nt),It=this.slice(M,G),Nt=p.slice(d,S);for(let Ot=0;Ot<ht;++Ot)if(It[Ot]!==Nt[Ot]){Q=It[Ot],nt=Nt[Ot];break}return Q<nt?-1:nt<Q?1:0};function _(A,p,d,S,M){if(A.length===0)return-1;if(typeof d=="string"?(S=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,Xt(d)&&(d=M?0:A.length-1),d<0&&(d=A.length+d),d>=A.length){if(M)return-1;d=A.length-1}else if(d<0)if(M)d=0;else return-1;if(typeof p=="string"&&(p=s.from(p,S)),s.isBuffer(p))return p.length===0?-1:q(A,p,d,S,M);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?M?Uint8Array.prototype.indexOf.call(A,p,d):Uint8Array.prototype.lastIndexOf.call(A,p,d):q(A,[p],d,S,M);throw new TypeError("val must be string, number or Buffer")}function q(A,p,d,S,M){let G=1,Q=A.length,nt=p.length;if(S!==void 0&&(S=String(S).toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(A.length<2||p.length<2)return-1;G=2,Q/=2,nt/=2,d/=2}function ht(Nt,Ot){return G===1?Nt[Ot]:Nt.readUInt16BE(Ot*G)}let It;if(M){let Nt=-1;for(It=d;It<Q;It++)if(ht(A,It)===ht(p,Nt===-1?0:It-Nt)){if(Nt===-1&&(Nt=It),It-Nt+1===nt)return Nt*G}else Nt!==-1&&(It-=It-Nt),Nt=-1}else for(d+nt>Q&&(d=Q-nt),It=d;It>=0;It--){let Nt=!0;for(let Ot=0;Ot<nt;Ot++)if(ht(A,It+Ot)!==ht(p,Ot)){Nt=!1;break}if(Nt)return It}return-1}s.prototype.includes=function(p,d,S){return this.indexOf(p,d,S)!==-1},s.prototype.indexOf=function(p,d,S){return _(this,p,d,S,!0)},s.prototype.lastIndexOf=function(p,d,S){return _(this,p,d,S,!1)};function N(A,p,d,S){d=Number(d)||0;let M=A.length-d;S?(S=Number(S),S>M&&(S=M)):S=M;let G=p.length;S>G/2&&(S=G/2);let Q;for(Q=0;Q<S;++Q){let nt=parseInt(p.substr(Q*2,2),16);if(Xt(nt))return Q;A[d+Q]=nt}return Q}function rt(A,p,d,S){return Ht(_t(p,A.length-d),A,d,S)}function Y(A,p,d,S){return Ht(gt(p),A,d,S)}function et(A,p,d,S){return Ht(Rt(p),A,d,S)}function st(A,p,d,S){return Ht(Et(p,A.length-d),A,d,S)}s.prototype.write=function(p,d,S,M){if(d===void 0)M="utf8",S=this.length,d=0;else if(S===void 0&&typeof d=="string")M=d,S=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(S)?(S=S>>>0,M===void 0&&(M="utf8")):(M=S,S=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let G=this.length-d;if((S===void 0||S>G)&&(S=G),p.length>0&&(S<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");M||(M="utf8");let Q=!1;for(;;)switch(M){case"hex":return N(this,p,d,S);case"utf8":case"utf-8":return rt(this,p,d,S);case"ascii":case"latin1":case"binary":return Y(this,p,d,S);case"base64":return et(this,p,d,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return st(this,p,d,S);default:if(Q)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),Q=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function lt(A,p,d){return p===0&&d===A.length?n.fromByteArray(A):n.fromByteArray(A.slice(p,d))}function at(A,p,d){d=Math.min(A.length,d);let S=[],M=p;for(;M<d;){let G=A[M],Q=null,nt=G>239?4:G>223?3:G>191?2:1;if(M+nt<=d){let ht,It,Nt,Ot;switch(nt){case 1:G<128&&(Q=G);break;case 2:ht=A[M+1],(ht&192)===128&&(Ot=(G&31)<<6|ht&63,Ot>127&&(Q=Ot));break;case 3:ht=A[M+1],It=A[M+2],(ht&192)===128&&(It&192)===128&&(Ot=(G&15)<<12|(ht&63)<<6|It&63,Ot>2047&&(Ot<55296||Ot>57343)&&(Q=Ot));break;case 4:ht=A[M+1],It=A[M+2],Nt=A[M+3],(ht&192)===128&&(It&192)===128&&(Nt&192)===128&&(Ot=(G&15)<<18|(ht&63)<<12|(It&63)<<6|Nt&63,Ot>65535&&Ot<1114112&&(Q=Ot))}}Q===null?(Q=65533,nt=1):Q>65535&&(Q-=65536,S.push(Q>>>10&1023|55296),Q=56320|Q&1023),S.push(Q),M+=nt}return ct(S)}let X=4096;function ct(A){let p=A.length;if(p<=X)return String.fromCharCode.apply(String,A);let d="",S=0;for(;S<p;)d+=String.fromCharCode.apply(String,A.slice(S,S+=X));return d}function J(A,p,d){let S="";d=Math.min(A.length,d);for(let M=p;M<d;++M)S+=String.fromCharCode(A[M]&127);return S}function R(A,p,d){let S="";d=Math.min(A.length,d);for(let M=p;M<d;++M)S+=String.fromCharCode(A[M]);return S}function T(A,p,d){let S=A.length;(!p||p<0)&&(p=0),(!d||d<0||d>S)&&(d=S);let M="";for(let G=p;G<d;++G)M+=Bt[A[G]];return M}function L(A,p,d){let S=A.slice(p,d),M="";for(let G=0;G<S.length-1;G+=2)M+=String.fromCharCode(S[G]+S[G+1]*256);return M}s.prototype.slice=function(p,d){let S=this.length;p=~~p,d=d===void 0?S:~~d,p<0?(p+=S,p<0&&(p=0)):p>S&&(p=S),d<0?(d+=S,d<0&&(d=0)):d>S&&(d=S),d<p&&(d=p);let M=this.subarray(p,d);return Object.setPrototypeOf(M,s.prototype),M};function k(A,p,d){if(A%1!==0||A<0)throw new RangeError("offset is not uint");if(A+p>d)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(p,d,S){p=p>>>0,d=d>>>0,S||k(p,d,this.length);let M=this[p],G=1,Q=0;for(;++Q<d&&(G*=256);)M+=this[p+Q]*G;return M},s.prototype.readUintBE=s.prototype.readUIntBE=function(p,d,S){p=p>>>0,d=d>>>0,S||k(p,d,this.length);let M=this[p+--d],G=1;for(;d>0&&(G*=256);)M+=this[p+--d]*G;return M},s.prototype.readUint8=s.prototype.readUInt8=function(p,d){return p=p>>>0,d||k(p,1,this.length),this[p]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(p,d){return p=p>>>0,d||k(p,2,this.length),this[p]|this[p+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(p,d){return p=p>>>0,d||k(p,2,this.length),this[p]<<8|this[p+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(p,d){return p=p>>>0,d||k(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(p,d){return p=p>>>0,d||k(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},s.prototype.readBigUInt64LE=Mt(function(p){p=p>>>0,j(p,"offset");let d=this[p],S=this[p+7];(d===void 0||S===void 0)&&z(p,this.length-8);let M=d+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,G=this[++p]+this[++p]*2**8+this[++p]*2**16+S*2**24;return BigInt(M)+(BigInt(G)<<BigInt(32))}),s.prototype.readBigUInt64BE=Mt(function(p){p=p>>>0,j(p,"offset");let d=this[p],S=this[p+7];(d===void 0||S===void 0)&&z(p,this.length-8);let M=d*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],G=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+S;return(BigInt(M)<<BigInt(32))+BigInt(G)}),s.prototype.readIntLE=function(p,d,S){p=p>>>0,d=d>>>0,S||k(p,d,this.length);let M=this[p],G=1,Q=0;for(;++Q<d&&(G*=256);)M+=this[p+Q]*G;return G*=128,M>=G&&(M-=Math.pow(2,8*d)),M},s.prototype.readIntBE=function(p,d,S){p=p>>>0,d=d>>>0,S||k(p,d,this.length);let M=d,G=1,Q=this[p+--M];for(;M>0&&(G*=256);)Q+=this[p+--M]*G;return G*=128,Q>=G&&(Q-=Math.pow(2,8*d)),Q},s.prototype.readInt8=function(p,d){return p=p>>>0,d||k(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},s.prototype.readInt16LE=function(p,d){p=p>>>0,d||k(p,2,this.length);let S=this[p]|this[p+1]<<8;return S&32768?S|4294901760:S},s.prototype.readInt16BE=function(p,d){p=p>>>0,d||k(p,2,this.length);let S=this[p+1]|this[p]<<8;return S&32768?S|4294901760:S},s.prototype.readInt32LE=function(p,d){return p=p>>>0,d||k(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},s.prototype.readInt32BE=function(p,d){return p=p>>>0,d||k(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},s.prototype.readBigInt64LE=Mt(function(p){p=p>>>0,j(p,"offset");let d=this[p],S=this[p+7];(d===void 0||S===void 0)&&z(p,this.length-8);let M=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(S<<24);return(BigInt(M)<<BigInt(32))+BigInt(d+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),s.prototype.readBigInt64BE=Mt(function(p){p=p>>>0,j(p,"offset");let d=this[p],S=this[p+7];(d===void 0||S===void 0)&&z(p,this.length-8);let M=(d<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(M)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+S)}),s.prototype.readFloatLE=function(p,d){return p=p>>>0,d||k(p,4,this.length),t.read(this,p,!0,23,4)},s.prototype.readFloatBE=function(p,d){return p=p>>>0,d||k(p,4,this.length),t.read(this,p,!1,23,4)},s.prototype.readDoubleLE=function(p,d){return p=p>>>0,d||k(p,8,this.length),t.read(this,p,!0,52,8)},s.prototype.readDoubleBE=function(p,d){return p=p>>>0,d||k(p,8,this.length),t.read(this,p,!1,52,8)};function B(A,p,d,S,M,G){if(!s.isBuffer(A))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>M||p<G)throw new RangeError('"value" argument is out of bounds');if(d+S>A.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(p,d,S,M){if(p=+p,d=d>>>0,S=S>>>0,!M){let nt=Math.pow(2,8*S)-1;B(this,p,d,S,nt,0)}let G=1,Q=0;for(this[d]=p&255;++Q<S&&(G*=256);)this[d+Q]=p/G&255;return d+S},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(p,d,S,M){if(p=+p,d=d>>>0,S=S>>>0,!M){let nt=Math.pow(2,8*S)-1;B(this,p,d,S,nt,0)}let G=S-1,Q=1;for(this[d+G]=p&255;--G>=0&&(Q*=256);)this[d+G]=p/Q&255;return d+S},s.prototype.writeUint8=s.prototype.writeUInt8=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,1,255,0),this[d]=p&255,d+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,2,65535,0),this[d]=p&255,this[d+1]=p>>>8,d+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,2,65535,0),this[d]=p>>>8,this[d+1]=p&255,d+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,4,4294967295,0),this[d+3]=p>>>24,this[d+2]=p>>>16,this[d+1]=p>>>8,this[d]=p&255,d+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,4,4294967295,0),this[d]=p>>>24,this[d+1]=p>>>16,this[d+2]=p>>>8,this[d+3]=p&255,d+4};function $(A,p,d,S,M){mt(p,S,M,A,d,7);let G=Number(p&BigInt(4294967295));A[d++]=G,G=G>>8,A[d++]=G,G=G>>8,A[d++]=G,G=G>>8,A[d++]=G;let Q=Number(p>>BigInt(32)&BigInt(4294967295));return A[d++]=Q,Q=Q>>8,A[d++]=Q,Q=Q>>8,A[d++]=Q,Q=Q>>8,A[d++]=Q,d}function H(A,p,d,S,M){mt(p,S,M,A,d,7);let G=Number(p&BigInt(4294967295));A[d+7]=G,G=G>>8,A[d+6]=G,G=G>>8,A[d+5]=G,G=G>>8,A[d+4]=G;let Q=Number(p>>BigInt(32)&BigInt(4294967295));return A[d+3]=Q,Q=Q>>8,A[d+2]=Q,Q=Q>>8,A[d+1]=Q,Q=Q>>8,A[d]=Q,d+8}s.prototype.writeBigUInt64LE=Mt(function(p,d=0){return $(this,p,d,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Mt(function(p,d=0){return H(this,p,d,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(p,d,S,M){if(p=+p,d=d>>>0,!M){let ht=Math.pow(2,8*S-1);B(this,p,d,S,ht-1,-ht)}let G=0,Q=1,nt=0;for(this[d]=p&255;++G<S&&(Q*=256);)p<0&&nt===0&&this[d+G-1]!==0&&(nt=1),this[d+G]=(p/Q>>0)-nt&255;return d+S},s.prototype.writeIntBE=function(p,d,S,M){if(p=+p,d=d>>>0,!M){let ht=Math.pow(2,8*S-1);B(this,p,d,S,ht-1,-ht)}let G=S-1,Q=1,nt=0;for(this[d+G]=p&255;--G>=0&&(Q*=256);)p<0&&nt===0&&this[d+G+1]!==0&&(nt=1),this[d+G]=(p/Q>>0)-nt&255;return d+S},s.prototype.writeInt8=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,1,127,-128),p<0&&(p=255+p+1),this[d]=p&255,d+1},s.prototype.writeInt16LE=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,2,32767,-32768),this[d]=p&255,this[d+1]=p>>>8,d+2},s.prototype.writeInt16BE=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,2,32767,-32768),this[d]=p>>>8,this[d+1]=p&255,d+2},s.prototype.writeInt32LE=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,4,2147483647,-2147483648),this[d]=p&255,this[d+1]=p>>>8,this[d+2]=p>>>16,this[d+3]=p>>>24,d+4},s.prototype.writeInt32BE=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[d]=p>>>24,this[d+1]=p>>>16,this[d+2]=p>>>8,this[d+3]=p&255,d+4},s.prototype.writeBigInt64LE=Mt(function(p,d=0){return $(this,p,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Mt(function(p,d=0){return H(this,p,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function tt(A,p,d,S,M,G){if(d+S>A.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function it(A,p,d,S,M){return p=+p,d=d>>>0,M||tt(A,p,d,4),t.write(A,p,d,S,23,4),d+4}s.prototype.writeFloatLE=function(p,d,S){return it(this,p,d,!0,S)},s.prototype.writeFloatBE=function(p,d,S){return it(this,p,d,!1,S)};function ut(A,p,d,S,M){return p=+p,d=d>>>0,M||tt(A,p,d,8),t.write(A,p,d,S,52,8),d+8}s.prototype.writeDoubleLE=function(p,d,S){return ut(this,p,d,!0,S)},s.prototype.writeDoubleBE=function(p,d,S){return ut(this,p,d,!1,S)},s.prototype.copy=function(p,d,S,M){if(!s.isBuffer(p))throw new TypeError("argument should be a Buffer");if(S||(S=0),!M&&M!==0&&(M=this.length),d>=p.length&&(d=p.length),d||(d=0),M>0&&M<S&&(M=S),M===S||p.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("sourceEnd out of bounds");M>this.length&&(M=this.length),p.length-d<M-S&&(M=p.length-d+S);let G=M-S;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(d,S,M):Uint8Array.prototype.set.call(p,this.subarray(S,M),d),G},s.prototype.fill=function(p,d,S,M){if(typeof p=="string"){if(typeof d=="string"?(M=d,d=0,S=this.length):typeof S=="string"&&(M=S,S=this.length),M!==void 0&&typeof M!="string")throw new TypeError("encoding must be a string");if(typeof M=="string"&&!s.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(p.length===1){let Q=p.charCodeAt(0);(M==="utf8"&&Q<128||M==="latin1")&&(p=Q)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(d<0||this.length<d||this.length<S)throw new RangeError("Out of range index");if(S<=d)return this;d=d>>>0,S=S===void 0?this.length:S>>>0,p||(p=0);let G;if(typeof p=="number")for(G=d;G<S;++G)this[G]=p;else{let Q=s.isBuffer(p)?p:s.from(p,M),nt=Q.length;if(nt===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(G=0;G<S-d;++G)this[G+d]=Q[G%nt]}return this};let V={};function K(A,p,d){V[A]=class extends d{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${A}]`,this.stack,delete this.name}get code(){return A}set code(M){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:M,writable:!0})}toString(){return`${this.name} [${A}]: ${this.message}`}}}K("ERR_BUFFER_OUT_OF_BOUNDS",function(A){return A?`${A} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),K("ERR_INVALID_ARG_TYPE",function(A,p){return`The "${A}" argument must be of type number. Received type ${typeof p}`},TypeError),K("ERR_OUT_OF_RANGE",function(A,p,d){let S=`The value of "${A}" is out of range.`,M=d;return Number.isInteger(d)&&Math.abs(d)>2**32?M=ot(String(d)):typeof d=="bigint"&&(M=String(d),(d>BigInt(2)**BigInt(32)||d<-(BigInt(2)**BigInt(32)))&&(M=ot(M)),M+="n"),S+=` It must be ${p}. Received ${M}`,S},RangeError);function ot(A){let p="",d=A.length,S=A[0]==="-"?1:0;for(;d>=S+4;d-=3)p=`_${A.slice(d-3,d)}${p}`;return`${A.slice(0,d)}${p}`}function yt(A,p,d){j(p,"offset"),(A[p]===void 0||A[p+d]===void 0)&&z(p,A.length-(d+1))}function mt(A,p,d,S,M,G){if(A>d||A<p){let Q=typeof p=="bigint"?"n":"",nt;throw p===0||p===BigInt(0)?nt=`>= 0${Q} and < 2${Q} ** ${(G+1)*8}${Q}`:nt=`>= -(2${Q} ** ${(G+1)*8-1}${Q}) and < 2 ** ${(G+1)*8-1}${Q}`,new V.ERR_OUT_OF_RANGE("value",nt,A)}yt(S,M,G)}function j(A,p){if(typeof A!="number")throw new V.ERR_INVALID_ARG_TYPE(p,"number",A)}function z(A,p,d){throw Math.floor(A)!==A?(j(A,d),new V.ERR_OUT_OF_RANGE("offset","an integer",A)):p<0?new V.ERR_BUFFER_OUT_OF_BOUNDS:new V.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${p}`,A)}let ft=/[^+/0-9A-Za-z-_]/g;function vt(A){if(A=A.split("=")[0],A=A.trim().replace(ft,""),A.length<2)return"";for(;A.length%4!==0;)A=A+"=";return A}function _t(A,p){p=p||1/0;let d,S=A.length,M=null,G=[];for(let Q=0;Q<S;++Q){if(d=A.charCodeAt(Q),d>55295&&d<57344){if(!M){if(d>56319){(p-=3)>-1&&G.push(239,191,189);continue}else if(Q+1===S){(p-=3)>-1&&G.push(239,191,189);continue}M=d;continue}if(d<56320){(p-=3)>-1&&G.push(239,191,189),M=d;continue}d=(M-55296<<10|d-56320)+65536}else M&&(p-=3)>-1&&G.push(239,191,189);if(M=null,d<128){if((p-=1)<0)break;G.push(d)}else if(d<2048){if((p-=2)<0)break;G.push(d>>6|192,d&63|128)}else if(d<65536){if((p-=3)<0)break;G.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((p-=4)<0)break;G.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return G}function gt(A){let p=[];for(let d=0;d<A.length;++d)p.push(A.charCodeAt(d)&255);return p}function Et(A,p){let d,S,M,G=[];for(let Q=0;Q<A.length&&!((p-=2)<0);++Q)d=A.charCodeAt(Q),S=d>>8,M=d%256,G.push(M),G.push(S);return G}function Rt(A){return n.toByteArray(vt(A))}function Ht(A,p,d,S){let M;for(M=0;M<S&&!(M+d>=p.length||M>=A.length);++M)p[M+d]=A[M];return M}function Ft(A,p){return A instanceof p||A!=null&&A.constructor!=null&&A.constructor.name!=null&&A.constructor.name===p.name}function Xt(A){return A!==A}let Bt=(function(){let A="0123456789abcdef",p=new Array(256);for(let d=0;d<16;++d){let S=d*16;for(let M=0;M<16;++M)p[S+M]=A[d]+A[M]}return p})();function Mt(A){return typeof BigInt>"u"?Vt:A}function Vt(){throw new Error("BigInt not supported")}return Tl}var pd,_S,qm,CS,Tl,TS,ob=Qe(()=>{wt();xt();At();pd={},_S=!1;qm={},CS=!1;Tl={},TS=!1});var Dl,Buffer,F5,M5,ab=Qe(()=>{wt();xt();At();ob();Dl=zm();Dl.Buffer;Dl.SlowBuffer;Dl.INSPECT_MAX_BYTES;Dl.kMaxLength;Buffer=Dl.Buffer,F5=Dl.INSPECT_MAX_BYTES,M5=Dl.kMaxLength});var xt=Qe(()=>{ab()});function fb(){throw new Error("setTimeout has not been defined")}function db(){throw new Error("clearTimeout has not been defined")}function $S(n){if(ro===setTimeout)return setTimeout(n,0);if((ro===fb||!ro)&&setTimeout)return ro=setTimeout,setTimeout(n,0);try{return ro(n,0)}catch{try{return ro.call(null,n,0)}catch{return ro.call(this||Bu,n,0)}}}function jP(){ku&&Il&&(ku=!1,Il.length?io=Il.concat(io):Ym=-1,io.length&&qS())}function qS(){if(!ku){var n=$S(jP);ku=!0;for(var t=io.length;t;){for(Il=io,io=[];++Ym<t;)Il&&Il[Ym].run();Ym=-1,t=io.length}Il=null,ku=!1,(function(e){if(no===clearTimeout)return clearTimeout(e);if((no===db||!no)&&clearTimeout)return no=clearTimeout,clearTimeout(e);try{no(e)}catch{try{return no.call(null,e)}catch{return no.call(this||Bu,e)}}})(n)}}function DS(n,t){(this||Bu).fun=n,(this||Bu).array=t}function eo(){}function Nl(n){return n.call.bind(n)}function vd(n,t){if(typeof n!="object")return!1;try{return t(n),!0}catch{return!1}}function IS(n){return wn&&Mn?gi(n)!==void 0:XS(n)||YS(n)||KS(n)||JS(n)||ZS(n)||QS(n)||t_(n)||e_(n)||r_(n)||n_(n)||i_(n)}function XS(n){return wn&&Mn?gi(n)==="Uint8Array":Xe(n)==="[object Uint8Array]"||KP(n)&&n.buffer!==void 0}function YS(n){return wn&&Mn?gi(n)==="Uint8ClampedArray":Xe(n)==="[object Uint8ClampedArray]"}function KS(n){return wn&&Mn?gi(n)==="Uint16Array":Xe(n)==="[object Uint16Array]"}function JS(n){return wn&&Mn?gi(n)==="Uint32Array":Xe(n)==="[object Uint32Array]"}function ZS(n){return wn&&Mn?gi(n)==="Int8Array":Xe(n)==="[object Int8Array]"}function QS(n){return wn&&Mn?gi(n)==="Int16Array":Xe(n)==="[object Int16Array]"}function t_(n){return wn&&Mn?gi(n)==="Int32Array":Xe(n)==="[object Int32Array]"}function e_(n){return wn&&Mn?gi(n)==="Float32Array":Xe(n)==="[object Float32Array]"}function r_(n){return wn&&Mn?gi(n)==="Float64Array":Xe(n)==="[object Float64Array]"}function n_(n){return wn&&Mn?gi(n)==="BigInt64Array":Xe(n)==="[object BigInt64Array]"}function i_(n){return wn&&Mn?gi(n)==="BigUint64Array":Xe(n)==="[object BigUint64Array]"}function Hm(n){return Xe(n)==="[object Map]"}function Wm(n){return Xe(n)==="[object Set]"}function Gm(n){return Xe(n)==="[object WeakMap]"}function lb(n){return Xe(n)==="[object WeakSet]"}function Jm(n){return Xe(n)==="[object ArrayBuffer]"}function OS(n){return typeof ArrayBuffer<"u"&&(Jm.working?Jm(n):n instanceof ArrayBuffer)}function Zm(n){return Xe(n)==="[object DataView]"}function NS(n){return typeof DataView<"u"&&(Zm.working?Zm(n):n instanceof DataView)}function Qm(n){return Xe(n)==="[object SharedArrayBuffer]"}function PS(n){return typeof SharedArrayBuffer<"u"&&(Qm.working?Qm(n):n instanceof SharedArrayBuffer)}function kS(n){return vd(n,ek)}function BS(n){return vd(n,rk)}function LS(n){return vd(n,nk)}function FS(n){return VS&&vd(n,ik)}function MS(n){return gb&&vd(n,sk)}function ma(n,t){var e={seen:[],stylize:lk};return arguments.length>=3&&(e.depth=arguments[2]),arguments.length>=4&&(e.colors=arguments[3]),mb(t)?e.showHidden=t:t&&St._extend(e,t),Ol(e.showHidden)&&(e.showHidden=!1),Ol(e.depth)&&(e.depth=2),Ol(e.colors)&&(e.colors=!1),Ol(e.customInspect)&&(e.customInspect=!0),e.colors&&(e.stylize=ak),t0(e,n,e.depth)}function ak(n,t){var e=ma.styles[t];return e?"\x1B["+ma.colors[e][0]+"m"+n+"\x1B["+ma.colors[e][1]+"m":n}function lk(n,t){return n}function t0(n,t,e){if(n.customInspect&&t&&Km(t.inspect)&&t.inspect!==St.inspect&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(e,n);return e0(r)||(r=t0(n,r,e)),r}var i=(function(g,m){if(Ol(m))return g.stylize("undefined","undefined");if(e0(m)){var y="'"+JSON.stringify(m).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return g.stylize(y,"string")}if(a_(m))return g.stylize(""+m,"number");if(mb(m))return g.stylize(""+m,"boolean");if(i0(m))return g.stylize("null","null")})(n,t);if(i)return i;var o=Object.keys(t),s=(function(g){var m={};return g.forEach((function(y,b){m[y]=!0})),m})(o);if(n.showHidden&&(o=Object.getOwnPropertyNames(t)),yd(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return cb(t);if(o.length===0){if(Km(t)){var a=t.name?": "+t.name:"";return n.stylize("[Function"+a+"]","special")}if(md(t))return n.stylize(RegExp.prototype.toString.call(t),"regexp");if(r0(t))return n.stylize(Date.prototype.toString.call(t),"date");if(yd(t))return cb(t)}var c,u="",h=!1,f=["{","}"];return o_(t)&&(h=!0,f=["[","]"]),Km(t)&&(u=" [Function"+(t.name?": "+t.name:"")+"]"),md(t)&&(u=" "+RegExp.prototype.toString.call(t)),r0(t)&&(u=" "+Date.prototype.toUTCString.call(t)),yd(t)&&(u=" "+cb(t)),o.length!==0||h&&t.length!=0?e<0?md(t)?n.stylize(RegExp.prototype.toString.call(t),"regexp"):n.stylize("[Object]","special"):(n.seen.push(t),c=h?(function(g,m,y,b,v){for(var w=[],x=0,E=m.length;x<E;++x)l_(m,String(x))?w.push(ub(g,m,y,b,String(x),!0)):w.push("");return v.forEach((function(D){D.match(/^\d+$/)||w.push(ub(g,m,y,b,D,!0))})),w})(n,t,e,s,o):o.map((function(g){return ub(n,t,e,s,g,h)})),n.seen.pop(),(function(g,m,y){var b=0;return g.reduce((function(v,w){return b++,w.indexOf(`
`)>=0&&b++,v+w.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?y[0]+(m===""?"":m+`
 `)+" "+g.join(`,
  `)+" "+y[1]:y[0]+m+" "+g.join(", ")+" "+y[1]})(c,u,f)):f[0]+u+f[1]}function cb(n){return"["+Error.prototype.toString.call(n)+"]"}function ub(n,t,e,r,i,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=c.set?n.stylize("[Getter/Setter]","special"):n.stylize("[Getter]","special"):c.set&&(a=n.stylize("[Setter]","special")),l_(r,i)||(s="["+i+"]"),a||(n.seen.indexOf(c.value)<0?(a=i0(e)?t0(n,c.value,null):t0(n,c.value,e-1)).indexOf(`
`)>-1&&(a=o?a.split(`
`).map((function(u){return"  "+u})).join(`
`).substr(2):`
`+a.split(`
`).map((function(u){return"   "+u})).join(`
`)):a=n.stylize("[Circular]","special")),Ol(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=n.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=n.stylize(s,"string"))}return s+": "+a}function o_(n){return Array.isArray(n)}function mb(n){return typeof n=="boolean"}function i0(n){return n===null}function a_(n){return typeof n=="number"}function e0(n){return typeof n=="string"}function Ol(n){return n===void 0}function md(n){return Lu(n)&&yb(n)==="[object RegExp]"}function Lu(n){return typeof n=="object"&&n!==null}function r0(n){return Lu(n)&&yb(n)==="[object Date]"}function yd(n){return Lu(n)&&(yb(n)==="[object Error]"||n instanceof Error)}function Km(n){return typeof n=="function"}function yb(n){return Object.prototype.toString.call(n)}function hb(n){return n<10?"0"+n.toString(10):n.toString(10)}function uk(){var n=new Date,t=[hb(n.getHours()),hb(n.getMinutes()),hb(n.getSeconds())].join(":");return[n.getDate(),ck[n.getMonth()],t].join(" ")}function l_(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function hk(n,t){if(!n){var e=new Error("Promise was rejected with a falsy value");e.reason=n,n=e}return t(n)}var jS,ro,no,Bu,ar,Il,io,ku,Ym,ke,$P,pb,n0,zS,qP,zP,HP,WP,GP,HS,WS,RS,VP,XP,YP,GS,le,KP,JP,ZP,VS,gb,Mn,wn,QP,Xe,ek,rk,nk,gd,St,ps,US,ok,Vm,s_,Xm,ck,Rl,W5,Pl=Qe(()=>{wt();xt();At();Bu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,ar=jS={};(function(){try{ro=typeof setTimeout=="function"?setTimeout:fb}catch{ro=fb}try{no=typeof clearTimeout=="function"?clearTimeout:db}catch{no=db}})();io=[],ku=!1,Ym=-1;ar.nextTick=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];io.push(new DS(n,t)),io.length!==1||ku||$S(qS)},DS.prototype.run=function(){(this||Bu).fun.apply(null,(this||Bu).array)},ar.title="browser",ar.browser=!0,ar.env={},ar.argv=[],ar.version="",ar.versions={},ar.on=eo,ar.addListener=eo,ar.once=eo,ar.off=eo,ar.removeListener=eo,ar.removeAllListeners=eo,ar.emit=eo,ar.prependListener=eo,ar.prependOnceListener=eo,ar.listeners=function(n){return[]},ar.binding=function(n){throw new Error("process.binding is not supported")},ar.cwd=function(){return"/"},ar.chdir=function(n){throw new Error("process.chdir is not supported")},ar.umask=function(){return 0};ke=jS;ke.addListener;ke.argv;ke.binding;ke.browser;ke.chdir;ke.cwd;ke.emit;ke.env;ke.listeners;ke.nextTick;ke.off;ke.on;ke.once;ke.prependListener;ke.prependOnceListener;ke.removeAllListeners;ke.removeListener;ke.title;ke.umask;ke.version;ke.versions;$P=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",pb=Object.prototype.toString,n0=function(n){return!($P&&n&&typeof n=="object"&&Symbol.toStringTag in n)&&pb.call(n)==="[object Arguments]"},zS=function(n){return!!n0(n)||n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&pb.call(n)!=="[object Array]"&&pb.call(n.callee)==="[object Function]"},qP=(function(){return n0(arguments)})();n0.isLegacyArguments=zS;zP=qP?n0:zS,HP=Object.prototype.toString,WP=Function.prototype.toString,GP=/^\s*(?:function)?\*/,HS=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",WS=Object.getPrototypeOf,RS=(function(){if(!HS)return!1;try{return Function("return function*() {}")()}catch{}})(),VP=RS?WS(RS):{},XP=function(n){return typeof n=="function"&&(!!GP.test(WP.call(n))||(HS?WS(n)===VP:HP.call(n)==="[object GeneratorFunction]"))},YP=typeof Object.create=="function"?function(n,t){t&&(n.super_=t,n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:function(n,t){if(t){n.super_=t;var e=function(){};e.prototype=t.prototype,n.prototype=new e,n.prototype.constructor=n}},GS=function(n){return n&&typeof n=="object"&&typeof n.copy=="function"&&typeof n.fill=="function"&&typeof n.readUInt8=="function"},le={},KP=GS,JP=zP,ZP=XP;VS=typeof BigInt<"u",gb=typeof Symbol<"u",Mn=gb&&Symbol.toStringTag!==void 0,wn=typeof Uint8Array<"u",QP=typeof ArrayBuffer<"u";if(wn&&Mn)var tk=Object.getPrototypeOf(Uint8Array.prototype),gi=Nl(Object.getOwnPropertyDescriptor(tk,Symbol.toStringTag).get);Xe=Nl(Object.prototype.toString),ek=Nl(Number.prototype.valueOf),rk=Nl(String.prototype.valueOf),nk=Nl(Boolean.prototype.valueOf);if(VS)var ik=Nl(BigInt.prototype.valueOf);if(gb)var sk=Nl(Symbol.prototype.valueOf);le.isArgumentsObject=JP,le.isGeneratorFunction=ZP,le.isPromise=function(n){return typeof Promise<"u"&&n instanceof Promise||n!==null&&typeof n=="object"&&typeof n.then=="function"&&typeof n.catch=="function"},le.isArrayBufferView=function(n){return QP&&ArrayBuffer.isView?ArrayBuffer.isView(n):IS(n)||NS(n)},le.isTypedArray=IS,le.isUint8Array=XS,le.isUint8ClampedArray=YS,le.isUint16Array=KS,le.isUint32Array=JS,le.isInt8Array=ZS,le.isInt16Array=QS,le.isInt32Array=t_,le.isFloat32Array=e_,le.isFloat64Array=r_,le.isBigInt64Array=n_,le.isBigUint64Array=i_,Hm.working=typeof Map<"u"&&Hm(new Map),le.isMap=function(n){return typeof Map<"u"&&(Hm.working?Hm(n):n instanceof Map)},Wm.working=typeof Set<"u"&&Wm(new Set),le.isSet=function(n){return typeof Set<"u"&&(Wm.working?Wm(n):n instanceof Set)},Gm.working=typeof WeakMap<"u"&&Gm(new WeakMap),le.isWeakMap=function(n){return typeof WeakMap<"u"&&(Gm.working?Gm(n):n instanceof WeakMap)},lb.working=typeof WeakSet<"u"&&lb(new WeakSet),le.isWeakSet=function(n){return lb(n)},Jm.working=typeof ArrayBuffer<"u"&&Jm(new ArrayBuffer),le.isArrayBuffer=OS,Zm.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Zm(new DataView(new ArrayBuffer(1),0,1)),le.isDataView=NS,Qm.working=typeof SharedArrayBuffer<"u"&&Qm(new SharedArrayBuffer),le.isSharedArrayBuffer=PS,le.isAsyncFunction=function(n){return Xe(n)==="[object AsyncFunction]"},le.isMapIterator=function(n){return Xe(n)==="[object Map Iterator]"},le.isSetIterator=function(n){return Xe(n)==="[object Set Iterator]"},le.isGeneratorObject=function(n){return Xe(n)==="[object Generator]"},le.isWebAssemblyCompiledModule=function(n){return Xe(n)==="[object WebAssembly.Module]"},le.isNumberObject=kS,le.isStringObject=BS,le.isBooleanObject=LS,le.isBigIntObject=FS,le.isSymbolObject=MS,le.isBoxedPrimitive=function(n){return kS(n)||BS(n)||LS(n)||FS(n)||MS(n)},le.isAnyArrayBuffer=function(n){return wn&&(OS(n)||PS(n))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(n){Object.defineProperty(le,n,{enumerable:!1,value:function(){throw new Error(n+" is not supported in userland")}})}));gd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,St={},ps=ke,US=Object.getOwnPropertyDescriptors||function(n){for(var t=Object.keys(n),e={},r=0;r<t.length;r++)e[t[r]]=Object.getOwnPropertyDescriptor(n,t[r]);return e},ok=/%[sdj%]/g;St.format=function(n){if(!e0(n)){for(var t=[],e=0;e<arguments.length;e++)t.push(ma(arguments[e]));return t.join(" ")}e=1;for(var r=arguments,i=r.length,o=String(n).replace(ok,(function(a){if(a==="%%")return"%";if(e>=i)return a;switch(a){case"%s":return String(r[e++]);case"%d":return Number(r[e++]);case"%j":try{return JSON.stringify(r[e++])}catch{return"[Circular]"}default:return a}})),s=r[e];e<i;s=r[++e])i0(s)||!Lu(s)?o+=" "+s:o+=" "+ma(s);return o},St.deprecate=function(n,t){if(ps!==void 0&&ps.noDeprecation===!0)return n;if(ps===void 0)return function(){return St.deprecate(n,t).apply(this||gd,arguments)};var e=!1;return function(){if(!e){if(ps.throwDeprecation)throw new Error(t);ps.traceDeprecation?console.trace(t):console.error(t),e=!0}return n.apply(this||gd,arguments)}};Vm={},s_=/^$/;ps.env.NODE_DEBUG&&(Xm=ps.env.NODE_DEBUG,Xm=Xm.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s_=new RegExp("^"+Xm+"$","i"));St.debuglog=function(n){if(n=n.toUpperCase(),!Vm[n])if(s_.test(n)){var t=ps.pid;Vm[n]=function(){var e=St.format.apply(St,arguments);console.error("%s %d: %s",n,t,e)}}else Vm[n]=function(){};return Vm[n]},St.inspect=ma,ma.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},ma.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},St.types=le,St.isArray=o_,St.isBoolean=mb,St.isNull=i0,St.isNullOrUndefined=function(n){return n==null},St.isNumber=a_,St.isString=e0,St.isSymbol=function(n){return typeof n=="symbol"},St.isUndefined=Ol,St.isRegExp=md,St.types.isRegExp=md,St.isObject=Lu,St.isDate=r0,St.types.isDate=r0,St.isError=yd,St.types.isNativeError=yd,St.isFunction=Km,St.isPrimitive=function(n){return n===null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||typeof n=="symbol"||n===void 0},St.isBuffer=GS;ck=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];St.log=function(){console.log("%s - %s",uk(),St.format.apply(St,arguments))},St.inherits=YP,St._extend=function(n,t){if(!t||!Lu(t))return n;for(var e=Object.keys(t),r=e.length;r--;)n[e[r]]=t[e[r]];return n};Rl=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;St.promisify=function(n){if(typeof n!="function")throw new TypeError('The "original" argument must be of type Function');if(Rl&&n[Rl]){var t;if(typeof(t=n[Rl])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,Rl,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var e,r,i=new Promise((function(a,c){e=a,r=c})),o=[],s=0;s<arguments.length;s++)o.push(arguments[s]);o.push((function(a,c){a?r(a):e(c)}));try{n.apply(this||gd,o)}catch(a){r(a)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(n)),Rl&&Object.defineProperty(t,Rl,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,US(n))},St.promisify.custom=Rl,St.callbackify=function(n){if(typeof n!="function")throw new TypeError('The "original" argument must be of type Function');function t(){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);var i=e.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var o=this||gd,s=function(){return i.apply(o,arguments)};n.apply(this||gd,e).then((function(a){ps.nextTick(s.bind(null,null,a))}),(function(a){ps.nextTick(hk.bind(null,a,s))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(n)),Object.defineProperties(t,US(n)),t};St._extend;St.callbackify;St.debuglog;St.deprecate;St.format;St.inherits;St.inspect;St.isArray;St.isBoolean;St.isBuffer;St.isDate;St.isError;St.isFunction;St.isNull;St.isNullOrUndefined;St.isNumber;St.isObject;St.isPrimitive;St.isRegExp;St.isString;St.isSymbol;St.isUndefined;St.log;St.promisify;St._extend;St.callbackify;St.debuglog;St.deprecate;St.format;St.inherits;St.inspect;St.isArray;St.isBoolean;St.isBuffer;St.isDate;St.isError;St.isFunction;St.isNull;St.isNullOrUndefined;St.isNumber;St.isObject;St.isPrimitive;St.isRegExp;St.isString;St.isSymbol;St.isUndefined;St.log;W5=St.promisify;St.types});function c_(n,t){if(n==null)throw new TypeError("Cannot convert first argument to object");for(var e=Object(n),r=1;r<arguments.length;r++){var i=arguments[r];if(i!=null)for(var o=Object.keys(Object(i)),s=0,a=o.length;s<a;s++){var c=o[s],u=Object.getOwnPropertyDescriptor(i,c);u!==void 0&&u.enumerable&&(e[c]=i[c])}}return e}function Q_(){if(x_)return Sb;function n(u){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(u)}function t(u,h){return!h||n(h)!=="object"&&typeof h!="function"?(function(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f})(u):h}function e(u){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(h){return h.__proto__||Object.getPrototypeOf(h)})(u)}function r(u,h){return(r=Object.setPrototypeOf||function(f,g){return f.__proto__=g,f})(u,h)}x_=!0;var i,o,s={};function a(u,h,f){f||(f=Error);var g=(function(m){function y(b,v,w){var x;return(function(E,D){if(!(E instanceof D))throw new TypeError("Cannot call a class as a function")})(this,y),(x=t(this,e(y).call(this,(function(E,D,_){return typeof h=="string"?h:h(E,D,_)})(b,v,w)))).code=u,x}return(function(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),v&&r(b,v)})(y,m),y})(f);s[u]=g}function c(u,h){if(Array.isArray(u)){var f=u.length;return u=u.map((function(g){return String(g)})),f>2?"one of ".concat(h," ").concat(u.slice(0,f-1).join(", "),", or ")+u[f-1]:f===2?"one of ".concat(h," ").concat(u[0]," or ").concat(u[1]):"of ".concat(h," ").concat(u[0])}return"of ".concat(h," ").concat(String(u))}return a("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),a("ERR_INVALID_ARG_TYPE",(function(u,h,f){var g,m,y;if(i===void 0&&(i=Ib()),i(typeof u=="string","'name' must be a string"),typeof h=="string"&&(m="not ",h.substr(0,m.length)===m)?(g="must not be",h=h.replace(/^not /,"")):g="must be",(function(v,w,x){return(x===void 0||x>v.length)&&(x=v.length),v.substring(x-w.length,x)===w})(u," argument"))y="The ".concat(u," ").concat(g," ").concat(c(h,"type"));else{var b=(function(v,w,x){return typeof x!="number"&&(x=0),!(x+w.length>v.length)&&v.indexOf(w,x)!==-1})(u,".")?"property":"argument";y='The "'.concat(u,'" ').concat(b," ").concat(g," ").concat(c(h,"type"))}return y+=". Received type ".concat(n(f))}),TypeError),a("ERR_INVALID_ARG_VALUE",(function(u,h){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";o===void 0&&(o=St);var g=o.inspect(h);return g.length>128&&(g="".concat(g.slice(0,128),"...")),"The argument '".concat(u,"' ").concat(f,". Received ").concat(g)}),TypeError),a("ERR_INVALID_RETURN_VALUE",(function(u,h,f){var g;return g=f&&f.constructor&&f.constructor.name?"instance of ".concat(f.constructor.name):"type ".concat(n(f)),"Expected ".concat(u,' to be returned from the "').concat(h,'"')+" function but got ".concat(g,".")}),TypeError),a("ERR_MISSING_ARGS",(function(){for(var u=arguments.length,h=new Array(u),f=0;f<u;f++)h[f]=arguments[f];i===void 0&&(i=Ib()),i(h.length>0,"At least one arg needs to be specified");var g="The ",m=h.length;switch(h=h.map((function(y){return'"'.concat(y,'"')})),m){case 1:g+="".concat(h[0]," argument");break;case 2:g+="".concat(h[0]," and ").concat(h[1]," arguments");break;default:g+=h.slice(0,m-1).join(", "),g+=", and ".concat(h[m-1]," arguments")}return"".concat(g," must be specified")}),TypeError),Sb.codes=s,Sb}function Kk(){if(S_)return E_;S_=!0;var n=ke;function t(N,rt,Y){return rt in N?Object.defineProperty(N,rt,{value:Y,enumerable:!0,configurable:!0,writable:!0}):N[rt]=Y,N}function e(N,rt){for(var Y=0;Y<rt.length;Y++){var et=rt[Y];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(N,et.key,et)}}function r(N,rt){return!rt||h(rt)!=="object"&&typeof rt!="function"?i(N):rt}function i(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function o(N){var rt=typeof Map=="function"?new Map:void 0;return(o=function(Y){if(Y===null||(et=Y,Function.toString.call(et).indexOf("[native code]")===-1))return Y;var et;if(typeof Y!="function")throw new TypeError("Super expression must either be null or a function");if(rt!==void 0){if(rt.has(Y))return rt.get(Y);rt.set(Y,st)}function st(){return a(Y,arguments,u(this).constructor)}return st.prototype=Object.create(Y.prototype,{constructor:{value:st,enumerable:!1,writable:!0,configurable:!0}}),c(st,Y)})(N)}function s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch{return!1}}function a(N,rt,Y){return(a=s()?Reflect.construct:function(et,st,lt){var at=[null];at.push.apply(at,st);var X=new(Function.bind.apply(et,at));return lt&&c(X,lt.prototype),X}).apply(null,arguments)}function c(N,rt){return(c=Object.setPrototypeOf||function(Y,et){return Y.__proto__=et,Y})(N,rt)}function u(N){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)})(N)}function h(N){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(rt){return typeof rt}:function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt})(N)}var f=St.inspect,g=Q_().codes.ERR_INVALID_ARG_TYPE;function m(N,rt,Y){return(Y===void 0||Y>N.length)&&(Y=N.length),N.substring(Y-rt.length,Y)===rt}var y="",b="",v="",w="",x={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function E(N){var rt=Object.keys(N),Y=Object.create(Object.getPrototypeOf(N));return rt.forEach((function(et){Y[et]=N[et]})),Object.defineProperty(Y,"message",{value:N.message}),Y}function D(N){return f(N,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function _(N,rt,Y){var et="",st="",lt=0,at="",X=!1,ct=D(N),J=ct.split(`
`),R=D(rt).split(`
`),T=0,L="";if(Y==="strictEqual"&&h(N)==="object"&&h(rt)==="object"&&N!==null&&rt!==null&&(Y="strictEqualObject"),J.length===1&&R.length===1&&J[0]!==R[0]){var k=J[0].length+R[0].length;if(k<=10){if(!(h(N)==="object"&&N!==null||h(rt)==="object"&&rt!==null||N===0&&rt===0))return"".concat(x[Y],`

`)+"".concat(J[0]," !== ").concat(R[0],`
`)}else if(Y!=="strictEqualObject"&&k<(n.stderr&&n.stderr.isTTY?n.stderr.columns:80)){for(;J[0][T]===R[0][T];)T++;T>2&&(L=`
  `.concat((function(j,z){if(z=Math.floor(z),j.length==0||z==0)return"";var ft=j.length*z;for(z=Math.floor(Math.log(z)/Math.log(2));z;)j+=j,z--;return j+=j.substring(0,ft-j.length)})(" ",T),"^"),T=0)}}for(var B=J[J.length-1],$=R[R.length-1];B===$&&(T++<2?at=`
  `.concat(B).concat(at):et=B,J.pop(),R.pop(),J.length!==0&&R.length!==0);)B=J[J.length-1],$=R[R.length-1];var H=Math.max(J.length,R.length);if(H===0){var tt=ct.split(`
`);if(tt.length>30)for(tt[26]="".concat(y,"...").concat(w);tt.length>27;)tt.pop();return"".concat(x.notIdentical,`

`).concat(tt.join(`
`),`
`)}T>3&&(at=`
`.concat(y,"...").concat(w).concat(at),X=!0),et!==""&&(at=`
  `.concat(et).concat(at),et="");var it=0,ut=x[Y]+`
`.concat(b,"+ actual").concat(w," ").concat(v,"- expected").concat(w),V=" ".concat(y,"...").concat(w," Lines skipped");for(T=0;T<H;T++){var K=T-lt;if(J.length<T+1)K>1&&T>2&&(K>4?(st+=`
`.concat(y,"...").concat(w),X=!0):K>3&&(st+=`
  `.concat(R[T-2]),it++),st+=`
  `.concat(R[T-1]),it++),lt=T,et+=`
`.concat(v,"-").concat(w," ").concat(R[T]),it++;else if(R.length<T+1)K>1&&T>2&&(K>4?(st+=`
`.concat(y,"...").concat(w),X=!0):K>3&&(st+=`
  `.concat(J[T-2]),it++),st+=`
  `.concat(J[T-1]),it++),lt=T,st+=`
`.concat(b,"+").concat(w," ").concat(J[T]),it++;else{var ot=R[T],yt=J[T],mt=yt!==ot&&(!m(yt,",")||yt.slice(0,-1)!==ot);mt&&m(ot,",")&&ot.slice(0,-1)===yt&&(mt=!1,yt+=","),mt?(K>1&&T>2&&(K>4?(st+=`
`.concat(y,"...").concat(w),X=!0):K>3&&(st+=`
  `.concat(J[T-2]),it++),st+=`
  `.concat(J[T-1]),it++),lt=T,st+=`
`.concat(b,"+").concat(w," ").concat(yt),et+=`
`.concat(v,"-").concat(w," ").concat(ot),it+=2):(st+=et,et="",K!==1&&T!==0||(st+=`
  `.concat(yt),it++))}if(it>20&&T<H-2)return"".concat(ut).concat(V,`
`).concat(st,`
`).concat(y,"...").concat(w).concat(et,`
`)+"".concat(y,"...").concat(w)}return"".concat(ut).concat(X?V:"",`
`).concat(st).concat(et).concat(at).concat(L)}var q=(function(N){function rt(st){var lt;if((function(tt,it){if(!(tt instanceof it))throw new TypeError("Cannot call a class as a function")})(this,rt),h(st)!=="object"||st===null)throw new g("options","Object",st);var at=st.message,X=st.operator,ct=st.stackStartFn,J=st.actual,R=st.expected,T=Error.stackTraceLimit;if(Error.stackTraceLimit=0,at!=null)lt=r(this,u(rt).call(this,String(at)));else if(n.stderr&&n.stderr.isTTY&&(n.stderr&&n.stderr.getColorDepth&&n.stderr.getColorDepth()!==1?(y="\x1B[34m",b="\x1B[32m",w="\x1B[39m",v="\x1B[31m"):(y="",b="",w="",v="")),h(J)==="object"&&J!==null&&h(R)==="object"&&R!==null&&"stack"in J&&J instanceof Error&&"stack"in R&&R instanceof Error&&(J=E(J),R=E(R)),X==="deepStrictEqual"||X==="strictEqual")lt=r(this,u(rt).call(this,_(J,R,X)));else if(X==="notDeepStrictEqual"||X==="notStrictEqual"){var L=x[X],k=D(J).split(`
`);if(X==="notStrictEqual"&&h(J)==="object"&&J!==null&&(L=x.notStrictEqualObject),k.length>30)for(k[26]="".concat(y,"...").concat(w);k.length>27;)k.pop();lt=k.length===1?r(this,u(rt).call(this,"".concat(L," ").concat(k[0]))):r(this,u(rt).call(this,"".concat(L,`

`).concat(k.join(`
`),`
`)))}else{var B=D(J),$="",H=x[X];X==="notDeepEqual"||X==="notEqual"?(B="".concat(x[X],`

`).concat(B)).length>1024&&(B="".concat(B.slice(0,1021),"...")):($="".concat(D(R)),B.length>512&&(B="".concat(B.slice(0,509),"...")),$.length>512&&($="".concat($.slice(0,509),"...")),X==="deepEqual"||X==="equal"?B="".concat(H,`

`).concat(B,`

should equal

`):$=" ".concat(X," ").concat($)),lt=r(this,u(rt).call(this,"".concat(B).concat($)))}return Error.stackTraceLimit=T,lt.generatedMessage=!at,Object.defineProperty(i(lt),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),lt.code="ERR_ASSERTION",lt.actual=J,lt.expected=R,lt.operator=X,Error.captureStackTrace&&Error.captureStackTrace(i(lt),ct),lt.stack,lt.name="AssertionError",r(lt)}var Y,et;return(function(st,lt){if(typeof lt!="function"&&lt!==null)throw new TypeError("Super expression must either be null or a function");st.prototype=Object.create(lt&&lt.prototype,{constructor:{value:st,writable:!0,configurable:!0}}),lt&&c(st,lt)})(rt,N),Y=rt,(et=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:f.custom,value:function(st,lt){return f(this,(function(at){for(var X=1;X<arguments.length;X++){var ct=arguments[X]!=null?arguments[X]:{},J=Object.keys(ct);typeof Object.getOwnPropertySymbols=="function"&&(J=J.concat(Object.getOwnPropertySymbols(ct).filter((function(R){return Object.getOwnPropertyDescriptor(ct,R).enumerable})))),J.forEach((function(R){t(at,R,ct[R])}))}return at})({},lt,{customInspect:!1,depth:0}))}}])&&e(Y.prototype,et),rt})(o(Error));return E_=q}function __(n,t){return(function(e){if(Array.isArray(e))return e})(n)||(function(e,r){var i=[],o=!0,s=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done)&&(i.push(c.value),!r||i.length!==r);o=!0);}catch(h){s=!0,a=h}finally{try{o||u.return==null||u.return()}finally{if(s)throw a}}return i})(n,t)||(function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")})()}function $i(n){return($i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Pb(n){return n.call.bind(n)}function sB(n){if(n.length===0||n.length>10)return!0;for(var t=0;t<n.length;t++){var e=n.charCodeAt(t);if(e<48||e>57)return!0}return n.length===10&&n>=Math.pow(2,32)}function l0(n){return Object.keys(n).filter(sB).concat(u0(n).filter(Object.prototype.propertyIsEnumerable.bind(n)))}function B_(n,t){if(n===t)return 0;for(var e=n.length,r=t.length,i=0,o=Math.min(e,r);i<o;++i)if(n[i]!==t[i]){e=n[i],r=t[i];break}return e<r?-1:r<e?1:0}function mi(n,t,e,r){if(n===t)return n!==0||!e||T_(n,t);if(e){if($i(n)!=="object")return typeof n=="number"&&Rb(n)&&Rb(t);if($i(t)!=="object"||n===null||t===null||Object.getPrototypeOf(n)!==Object.getPrototypeOf(t))return!1}else{if(n===null||$i(n)!=="object")return(t===null||$i(t)!=="object")&&n==t;if(t===null||$i(t)!=="object")return!1}var i,o,s,a,c=D_(n);if(c!==D_(t))return!1;if(Array.isArray(n)){if(n.length!==t.length)return!1;var u=l0(n),h=l0(t);return u.length===h.length&&Ad(n,t,e,r,1,u)}if(c==="[object Object]"&&(!o0(n)&&o0(t)||!a0(n)&&a0(t)))return!1;if(R_(n)){if(!R_(t)||Date.prototype.getTime.call(n)!==Date.prototype.getTime.call(t))return!1}else if(I_(n)){if(!I_(t)||(s=n,a=t,!(Jk?s.source===a.source&&s.flags===a.flags:RegExp.prototype.toString.call(s)===RegExp.prototype.toString.call(a))))return!1}else if(tB(n)||n instanceof Error){if(n.message!==t.message||n.name!==t.name)return!1}else{if(Qk(n)){if(e||!nB(n)&&!iB(n)){if(!(function(m,y){return m.byteLength===y.byteLength&&B_(new Uint8Array(m.buffer,m.byteOffset,m.byteLength),new Uint8Array(y.buffer,y.byteOffset,y.byteLength))===0})(n,t))return!1}else if(!(function(m,y){if(m.byteLength!==y.byteLength)return!1;for(var b=0;b<m.byteLength;b++)if(m[b]!==y[b])return!1;return!0})(n,t))return!1;var f=l0(n),g=l0(t);return f.length===g.length&&Ad(n,t,e,r,0,f)}if(a0(n))return!(!a0(t)||n.size!==t.size)&&Ad(n,t,e,r,2);if(o0(n))return!(!o0(t)||n.size!==t.size)&&Ad(n,t,e,r,3);if(Zk(n)){if(o=t,(i=n).byteLength!==o.byteLength||B_(new Uint8Array(i),new Uint8Array(o))!==0)return!1}else if(eB(n)&&!(function(m,y){return O_(m)?O_(y)&&T_(Number.prototype.valueOf.call(m),Number.prototype.valueOf.call(y)):N_(m)?N_(y)&&String.prototype.valueOf.call(m)===String.prototype.valueOf.call(y):P_(m)?P_(y)&&Boolean.prototype.valueOf.call(m)===Boolean.prototype.valueOf.call(y):k_(m)?k_(y)&&BigInt.prototype.valueOf.call(m)===BigInt.prototype.valueOf.call(y):rB(y)&&Symbol.prototype.valueOf.call(m)===Symbol.prototype.valueOf.call(y)})(n,t))return!1}return Ad(n,t,e,r,0)}function L_(n,t){return t.filter((function(e){return h0(n,e)}))}function Ad(n,t,e,r,i,o){if(arguments.length===5){o=Object.keys(n);var s=Object.keys(t);if(o.length!==s.length)return!1}for(var a=0;a<o.length;a++)if(!xd(t,o[a]))return!1;if(e&&arguments.length===5){var c=u0(n);if(c.length!==0){var u=0;for(a=0;a<c.length;a++){var h=c[a];if(h0(n,h)){if(!h0(t,h))return!1;o.push(h),u++}else if(h0(t,h))return!1}var f=u0(t);if(c.length!==f.length&&L_(t,f).length!==u)return!1}else{var g=u0(t);if(g.length!==0&&L_(t,g).length!==0)return!1}}if(o.length===0&&(i===0||i===1&&n.length===0||n.size===0))return!0;if(r===void 0)r={val1:new Map,val2:new Map,position:0};else{var m=r.val1.get(n);if(m!==void 0){var y=r.val2.get(t);if(y!==void 0)return m===y}r.position++}r.val1.set(n,r.position),r.val2.set(t,r.position);var b=lB(n,t,e,o,r,i);return r.val1.delete(n),r.val2.delete(t),b}function F_(n,t,e,r){for(var i=f0(n),o=0;o<i.length;o++){var s=i[o];if(mi(t,s,e,r))return n.delete(s),!0}return!1}function tC(n){switch($i(n)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":n=+n;case"number":if(Rb(n))return!1}return!0}function oB(n,t,e){var r=tC(e);return r??(t.has(r)&&!n.has(r))}function aB(n,t,e,r,i){var o=tC(e);if(o!=null)return o;var s=t.get(o);return!(s===void 0&&!t.has(o)||!mi(r,s,!1,i))&&!n.has(o)&&mi(r,s,!1,i)}function M_(n,t,e,r,i,o){for(var s=f0(n),a=0;a<s.length;a++){var c=s[a];if(mi(e,c,i,o)&&mi(r,t.get(c),i,o))return n.delete(c),!0}return!1}function lB(n,t,e,r,i,o){var s=0;if(o===2){if(!(function(h,f,g,m){for(var y=null,b=f0(h),v=0;v<b.length;v++){var w=b[v];if($i(w)==="object"&&w!==null)y===null&&(y=new Set),y.add(w);else if(!f.has(w)){if(g||!oB(h,f,w))return!1;y===null&&(y=new Set),y.add(w)}}if(y!==null){for(var x=f0(f),E=0;E<x.length;E++){var D=x[E];if($i(D)==="object"&&D!==null){if(!F_(y,D,g,m))return!1}else if(!g&&!h.has(D)&&!F_(y,D,g,m))return!1}return y.size===0}return!0})(n,t,e,i))return!1}else if(o===3){if(!(function(h,f,g,m){for(var y=null,b=C_(h),v=0;v<b.length;v++){var w=__(b[v],2),x=w[0],E=w[1];if($i(x)==="object"&&x!==null)y===null&&(y=new Set),y.add(x);else{var D=f.get(x);if(D===void 0&&!f.has(x)||!mi(E,D,g,m)){if(g||!aB(h,f,x,E,m))return!1;y===null&&(y=new Set),y.add(x)}}}if(y!==null){for(var _=C_(f),q=0;q<_.length;q++){var N=__(_[q],2),rt=(x=N[0],N[1]);if($i(x)==="object"&&x!==null){if(!M_(y,h,x,rt,g,m))return!1}else if(!(g||h.has(x)&&mi(h.get(x),rt,!1,m)||M_(y,h,x,rt,!1,m)))return!1}return y.size===0}return!0})(n,t,e,i))return!1}else if(o===1)for(;s<n.length;s++){if(!xd(n,s)){if(xd(t,s))return!1;for(var a=Object.keys(n);s<a.length;s++){var c=a[s];if(!xd(t,c)||!mi(n[c],t[c],e,i))return!1}return a.length===Object.keys(t).length}if(!xd(t,s)||!mi(n[s],t[s],e,i))return!1}for(s=0;s<r.length;s++){var u=r[s];if(!mi(n[u],t[u],e,i))return!1}return!0}function Ib(){if(j_)return _b;j_=!0;var n=ke;function t(R){return(t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T})(R)}var e,r,i=Q_().codes,o=i.ERR_AMBIGUOUS_ARGUMENT,s=i.ERR_INVALID_ARG_TYPE,a=i.ERR_INVALID_ARG_VALUE,c=i.ERR_INVALID_RETURN_VALUE,u=i.ERR_MISSING_ARGS,h=Kk(),f=St.inspect,g=St.types,m=g.isPromise,y=g.isRegExp,b=Object.assign?Object.assign:fk.assign,v=Object.is?Object.is:K_;function w(){e=U_.isDeepEqual,r=U_.isDeepStrictEqual}var x=!1,E=_b=N,D={};function _(R){throw R.message instanceof Error?R.message:new h(R)}function q(R,T,L,k){if(!L){var B=!1;if(T===0)B=!0,k="No value argument passed to `assert.ok()`";else if(k instanceof Error)throw k;var $=new h({actual:L,expected:!0,message:k,operator:"==",stackStartFn:R});throw $.generatedMessage=B,$}}function N(){for(var R=arguments.length,T=new Array(R),L=0;L<R;L++)T[L]=arguments[L];q.apply(void 0,[N,T.length].concat(T))}E.fail=function R(T,L,k,B,$){var H,tt=arguments.length;if(tt===0)H="Failed";else if(tt===1)k=T,T=void 0;else{if(x===!1){x=!0;var it=n.emitWarning?n.emitWarning:console.warn.bind(console);it("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}tt===2&&(B="!=")}if(k instanceof Error)throw k;var ut={actual:T,expected:L,operator:B===void 0?"fail":B,stackStartFn:$||R};k!==void 0&&(ut.message=k);var V=new h(ut);throw H&&(V.message=H,V.generatedMessage=!0),V},E.AssertionError=h,E.ok=N,E.equal=function R(T,L,k){if(arguments.length<2)throw new u("actual","expected");T!=L&&_({actual:T,expected:L,message:k,operator:"==",stackStartFn:R})},E.notEqual=function R(T,L,k){if(arguments.length<2)throw new u("actual","expected");T==L&&_({actual:T,expected:L,message:k,operator:"!=",stackStartFn:R})},E.deepEqual=function R(T,L,k){if(arguments.length<2)throw new u("actual","expected");e===void 0&&w(),e(T,L)||_({actual:T,expected:L,message:k,operator:"deepEqual",stackStartFn:R})},E.notDeepEqual=function R(T,L,k){if(arguments.length<2)throw new u("actual","expected");e===void 0&&w(),e(T,L)&&_({actual:T,expected:L,message:k,operator:"notDeepEqual",stackStartFn:R})},E.deepStrictEqual=function R(T,L,k){if(arguments.length<2)throw new u("actual","expected");e===void 0&&w(),r(T,L)||_({actual:T,expected:L,message:k,operator:"deepStrictEqual",stackStartFn:R})},E.notDeepStrictEqual=function R(T,L,k){if(arguments.length<2)throw new u("actual","expected");e===void 0&&w(),r(T,L)&&_({actual:T,expected:L,message:k,operator:"notDeepStrictEqual",stackStartFn:R})},E.strictEqual=function R(T,L,k){if(arguments.length<2)throw new u("actual","expected");v(T,L)||_({actual:T,expected:L,message:k,operator:"strictEqual",stackStartFn:R})},E.notStrictEqual=function R(T,L,k){if(arguments.length<2)throw new u("actual","expected");v(T,L)&&_({actual:T,expected:L,message:k,operator:"notStrictEqual",stackStartFn:R})};var rt=function R(T,L,k){var B=this;(function($,H){if(!($ instanceof H))throw new TypeError("Cannot call a class as a function")})(this,R),L.forEach((function($){$ in T&&(k!==void 0&&typeof k[$]=="string"&&y(T[$])&&T[$].test(k[$])?B[$]=k[$]:B[$]=T[$])}))};function Y(R,T,L,k,B,$){if(!(L in R)||!r(R[L],T[L])){if(!k){var H=new rt(R,B),tt=new rt(T,B,R),it=new h({actual:H,expected:tt,operator:"deepStrictEqual",stackStartFn:$});throw it.actual=R,it.expected=T,it.operator=$.name,it}_({actual:R,expected:T,message:k,operator:$.name,stackStartFn:$})}}function et(R,T,L,k){if(typeof T!="function"){if(y(T))return T.test(R);if(arguments.length===2)throw new s("expected",["Function","RegExp"],T);if(t(R)!=="object"||R===null){var B=new h({actual:R,expected:T,message:L,operator:"deepStrictEqual",stackStartFn:k});throw B.operator=k.name,B}var $=Object.keys(T);if(T instanceof Error)$.push("name","message");else if($.length===0)throw new a("error",T,"may not be an empty object");return e===void 0&&w(),$.forEach((function(H){typeof R[H]=="string"&&y(T[H])&&T[H].test(R[H])||Y(R,T,H,L,$,k)})),!0}return T.prototype!==void 0&&R instanceof T||!Error.isPrototypeOf(T)&&T.call({},R)===!0}function st(R){if(typeof R!="function")throw new s("fn","Function",R);try{R()}catch(T){return T}return D}function lt(R){return m(R)||R!==null&&t(R)==="object"&&typeof R.then=="function"&&typeof R.catch=="function"}function at(R){return Promise.resolve().then((function(){var T;if(typeof R=="function"){if(!lt(T=R()))throw new c("instance of Promise","promiseFn",T)}else{if(!lt(R))throw new s("promiseFn",["Function","Promise"],R);T=R}return Promise.resolve().then((function(){return T})).then((function(){return D})).catch((function(L){return L}))}))}function X(R,T,L,k){if(typeof L=="string"){if(arguments.length===4)throw new s("error",["Object","Error","Function","RegExp"],L);if(t(T)==="object"&&T!==null){if(T.message===L)throw new o("error/message",'The error message "'.concat(T.message,'" is identical to the message.'))}else if(T===L)throw new o("error/message",'The error "'.concat(T,'" is identical to the message.'));k=L,L=void 0}else if(L!=null&&t(L)!=="object"&&typeof L!="function")throw new s("error",["Object","Error","Function","RegExp"],L);if(T===D){var B="";L&&L.name&&(B+=" (".concat(L.name,")")),B+=k?": ".concat(k):".";var $=R.name==="rejects"?"rejection":"exception";_({actual:void 0,expected:L,operator:R.name,message:"Missing expected ".concat($).concat(B),stackStartFn:R})}if(L&&!et(T,L,k,R))throw T}function ct(R,T,L,k){if(T!==D){if(typeof L=="string"&&(k=L,L=void 0),!L||et(T,L)){var B=k?": ".concat(k):".",$=R.name==="doesNotReject"?"rejection":"exception";_({actual:T,expected:L,operator:R.name,message:"Got unwanted ".concat($).concat(B,`
`)+'Actual message: "'.concat(T&&T.message,'"'),stackStartFn:R})}throw T}}function J(){for(var R=arguments.length,T=new Array(R),L=0;L<R;L++)T[L]=arguments[L];q.apply(void 0,[J,T.length].concat(T))}return E.throws=function R(T){for(var L=arguments.length,k=new Array(L>1?L-1:0),B=1;B<L;B++)k[B-1]=arguments[B];X.apply(void 0,[R,st(T)].concat(k))},E.rejects=function R(T){for(var L=arguments.length,k=new Array(L>1?L-1:0),B=1;B<L;B++)k[B-1]=arguments[B];return at(T).then((function($){return X.apply(void 0,[R,$].concat(k))}))},E.doesNotThrow=function R(T){for(var L=arguments.length,k=new Array(L>1?L-1:0),B=1;B<L;B++)k[B-1]=arguments[B];ct.apply(void 0,[R,st(T)].concat(k))},E.doesNotReject=function R(T){for(var L=arguments.length,k=new Array(L>1?L-1:0),B=1;B<L;B++)k[B-1]=arguments[B];return at(T).then((function($){return ct.apply(void 0,[R,$].concat(k))}))},E.ifError=function R(T){if(T!=null){var L="ifError got unwanted exception: ";t(T)==="object"&&typeof T.message=="string"?T.message.length===0&&T.constructor?L+=T.constructor.name:L+=T.message:L+=f(T);var k=new h({actual:T,expected:null,operator:"ifError",message:L,stackStartFn:R}),B=T.stack;if(typeof B=="string"){var $=B.split(`
`);$.shift();for(var H=k.stack.split(`
`),tt=0;tt<$.length;tt++){var it=H.indexOf($[tt]);if(it!==-1){H=H.slice(0,it);break}}k.stack="".concat(H.join(`
`),`
`).concat($.join(`
`))}throw k}},E.strict=b(J,E,{equal:E.strictEqual,deepEqual:E.deepStrictEqual,notEqual:E.notStrictEqual,notDeepEqual:E.notDeepStrictEqual}),E.strict.strict=E.strict,_b}var fk,$_,u_,q_,bd,vb,h_,bb,f_,d_,wd,s0,p_,g_,dk,pk,gk,m_,c0,y_,mk,yk,vk,bk,wk,Cb,z_,Ak,H_,d0,xk,v_,Ek,Sk,_k,wb,Ck,Tk,W_,Ed,Ll,Ab,Dk,kl,Bl,xb,Eb,b_,Rk,Ik,Ok,Nk,Pk,G_,w_,V_,kk,Bk,Lk,Tb,Db,A_,Fk,Mk,Uk,jk,$k,X_,qk,Y_,K_,Ob,Nb,zk,Hk,Wk,Gk,Vk,J_,Xk,Z_,Yk,Sb,x_,E_,S_,Jk,f0,C_,T_,u0,Rb,xd,h0,D_,an,Zk,Qk,R_,o0,I_,a0,tB,eB,O_,N_,P_,k_,rB,nB,iB,U_,_b,j_,Yt,eC=Qe(()=>{wt();xt();At();Pl();fk={assign:c_,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:c_})}},u_=Object.prototype.toString,q_=function(n){var t=u_.call(n),e=t==="[object Arguments]";return e||(e=t!=="[object Array]"&&n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&u_.call(n.callee)==="[object Function]"),e};Object.keys||(bd=Object.prototype.hasOwnProperty,vb=Object.prototype.toString,h_=q_,bb=Object.prototype.propertyIsEnumerable,f_=!bb.call({toString:null},"toString"),d_=bb.call((function(){}),"prototype"),wd=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s0=function(n){var t=n.constructor;return t&&t.prototype===n},p_={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},g_=(function(){if(typeof window>"u")return!1;for(var n in window)try{if(!p_["$"+n]&&bd.call(window,n)&&window[n]!==null&&typeof window[n]=="object")try{s0(window[n])}catch{return!0}}catch{return!0}return!1})(),$_=function(n){var t=n!==null&&typeof n=="object",e=vb.call(n)==="[object Function]",r=h_(n),i=t&&vb.call(n)==="[object String]",o=[];if(!t&&!e&&!r)throw new TypeError("Object.keys called on a non-object");var s=d_&&e;if(i&&n.length>0&&!bd.call(n,0))for(var a=0;a<n.length;++a)o.push(String(a));if(r&&n.length>0)for(var c=0;c<n.length;++c)o.push(String(c));else for(var u in n)s&&u==="prototype"||!bd.call(n,u)||o.push(String(u));if(f_)for(var h=(function(g){if(typeof window>"u"||!g_)return s0(g);try{return s0(g)}catch{return!1}})(n),f=0;f<wd.length;++f)h&&wd[f]==="constructor"||!bd.call(n,wd[f])||o.push(wd[f]);return o});dk=$_,pk=Array.prototype.slice,gk=q_,m_=Object.keys,c0=m_?function(n){return m_(n)}:dk,y_=Object.keys;c0.shim=function(){return Object.keys?(function(){var n=Object.keys(arguments);return n&&n.length===arguments.length})(1,2)||(Object.keys=function(n){return gk(n)?y_(pk.call(n)):y_(n)}):Object.keys=c0,Object.keys||c0};mk=c0,yk=mk,vk=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",bk=Object.prototype.toString,wk=Array.prototype.concat,Cb=Object.defineProperty,z_=Cb&&(function(){var n={};try{for(var t in Cb(n,"x",{enumerable:!1,value:n}),n)return!1;return n.x===n}catch{return!1}})(),Ak=function(n,t,e,r){var i;(!(t in n)||typeof(i=r)=="function"&&bk.call(i)==="[object Function]"&&r())&&(z_?Cb(n,t,{configurable:!0,enumerable:!1,value:e,writable:!0}):n[t]=e)},H_=function(n,t){var e=arguments.length>2?arguments[2]:{},r=yk(t);vk&&(r=wk.call(r,Object.getOwnPropertySymbols(t)));for(var i=0;i<r.length;i+=1)Ak(n,r[i],t[r[i]],e[r[i]])};H_.supportsDescriptors=!!z_;d0=H_,xk=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var n={},t=Symbol("test"),e=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(e)!=="[object Symbol]")return!1;for(t in n[t]=42,n)return!1;if(typeof Object.keys=="function"&&Object.keys(n).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(n).length!==0)return!1;var r=Object.getOwnPropertySymbols(n);if(r.length!==1||r[0]!==t||!Object.prototype.propertyIsEnumerable.call(n,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var i=Object.getOwnPropertyDescriptor(n,t);if(i.value!==42||i.enumerable!==!0)return!1}return!0},v_=(typeof globalThis<"u"?globalThis:typeof self<"u"?self:window).Symbol,Ek=xk,Sk=function(){return typeof v_=="function"&&typeof Symbol=="function"&&typeof v_("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&Ek()},_k="Function.prototype.bind called on incompatible ",wb=Array.prototype.slice,Ck=Object.prototype.toString,Tk=function(n){var t=this;if(typeof t!="function"||Ck.call(t)!=="[object Function]")throw new TypeError(_k+t);for(var e,r=wb.call(arguments,1),i=function(){if(this instanceof e){var u=t.apply(this,r.concat(wb.call(arguments)));return Object(u)===u?u:this}return t.apply(n,r.concat(wb.call(arguments)))},o=Math.max(0,t.length-r.length),s=[],a=0;a<o;a++)s.push("$"+a);if(e=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(i),t.prototype){var c=function(){};c.prototype=t.prototype,e.prototype=new c,c.prototype=null}return e},W_=Function.prototype.bind||Tk,Ed=TypeError,Ll=Object.getOwnPropertyDescriptor;if(Ll)try{Ll({},"")}catch{Ll=null}Ab=function(){throw new Ed},Dk=Ll?(function(){try{return arguments.callee,Ab}catch{try{return Ll(arguments,"callee").get}catch{return Ab}}})():Ab,kl=Sk(),Bl=Object.getPrototypeOf||function(n){return n.__proto__},xb=typeof Uint8Array>"u"?void 0:Bl(Uint8Array),Eb={"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?void 0:ArrayBuffer,"%ArrayBufferPrototype%":typeof ArrayBuffer>"u"?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":kl?Bl([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":typeof Atomics>"u"?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":typeof DataView>"u"?void 0:DataView,"%DataViewPrototype%":typeof DataView>"u"?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":typeof Float32Array>"u"?void 0:Float32Array,"%Float32ArrayPrototype%":typeof Float32Array>"u"?void 0:Float32Array.prototype,"%Float64Array%":typeof Float64Array>"u"?void 0:Float64Array,"%Float64ArrayPrototype%":typeof Float64Array>"u"?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":typeof Int8Array>"u"?void 0:Int8Array,"%Int8ArrayPrototype%":typeof Int8Array>"u"?void 0:Int8Array.prototype,"%Int16Array%":typeof Int16Array>"u"?void 0:Int16Array,"%Int16ArrayPrototype%":typeof Int16Array>"u"?void 0:Int8Array.prototype,"%Int32Array%":typeof Int32Array>"u"?void 0:Int32Array,"%Int32ArrayPrototype%":typeof Int32Array>"u"?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":kl?Bl(Bl([][Symbol.iterator]())):void 0,"%JSON%":typeof JSON=="object"?JSON:void 0,"%JSONParse%":typeof JSON=="object"?JSON.parse:void 0,"%Map%":typeof Map>"u"?void 0:Map,"%MapIteratorPrototype%":typeof Map<"u"&&kl?Bl(new Map()[Symbol.iterator]()):void 0,"%MapPrototype%":typeof Map>"u"?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?void 0:Promise,"%PromisePrototype%":typeof Promise>"u"?void 0:Promise.prototype,"%PromiseProto_then%":typeof Promise>"u"?void 0:Promise.prototype.then,"%Promise_all%":typeof Promise>"u"?void 0:Promise.all,"%Promise_reject%":typeof Promise>"u"?void 0:Promise.reject,"%Promise_resolve%":typeof Promise>"u"?void 0:Promise.resolve,"%Proxy%":typeof Proxy>"u"?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":typeof Reflect>"u"?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":typeof Set>"u"?void 0:Set,"%SetIteratorPrototype%":typeof Set<"u"&&kl?Bl(new Set()[Symbol.iterator]()):void 0,"%SetPrototype%":typeof Set>"u"?void 0:Set.prototype,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":typeof SharedArrayBuffer>"u"?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":kl?Bl(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":kl?Symbol:void 0,"%SymbolPrototype%":kl?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":Dk,"%TypedArray%":xb,"%TypedArrayPrototype%":xb?xb.prototype:void 0,"%TypeError%":Ed,"%TypeErrorPrototype%":Ed.prototype,"%Uint8Array%":typeof Uint8Array>"u"?void 0:Uint8Array,"%Uint8ArrayPrototype%":typeof Uint8Array>"u"?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":typeof Uint16Array>"u"?void 0:Uint16Array,"%Uint16ArrayPrototype%":typeof Uint16Array>"u"?void 0:Uint16Array.prototype,"%Uint32Array%":typeof Uint32Array>"u"?void 0:Uint32Array,"%Uint32ArrayPrototype%":typeof Uint32Array>"u"?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":typeof WeakMap>"u"?void 0:WeakMap,"%WeakMapPrototype%":typeof WeakMap>"u"?void 0:WeakMap.prototype,"%WeakSet%":typeof WeakSet>"u"?void 0:WeakSet,"%WeakSetPrototype%":typeof WeakSet>"u"?void 0:WeakSet.prototype},b_=W_.call(Function.call,String.prototype.replace),Rk=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ik=/\\(\\)?/g,Ok=function(n){var t=[];return b_(n,Rk,(function(e,r,i,o){t[t.length]=i?b_(o,Ik,"$1"):r||e})),t},Nk=function(n,t){if(!(n in Eb))throw new SyntaxError("intrinsic "+n+" does not exist!");if(Eb[n]===void 0&&!t)throw new Ed("intrinsic "+n+" exists, but is not available. Please file an issue!");return Eb[n]},Pk=function(n,t){if(n.length===0)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new TypeError('"allowMissing" argument must be a boolean');for(var e=Ok(n),r=Nk("%"+(e.length>0?e[0]:"")+"%",t),i=1;i<e.length;i+=1)if(r!=null)if(Ll&&i+1>=e.length){var o=Ll(r,e[i]);if(!(e[i]in r))throw new Ed("base intrinsic for "+n+" exists, but the property is not available.");r=o?o.get||o.value:r[e[i]]}else r=r[e[i]];return r},w_=W_,V_=Pk("%Function%"),kk=V_.apply,Bk=V_.call;(G_=function(){return w_.apply(Bk,arguments)}).apply=function(){return w_.apply(kk,arguments)};Lk=G_,A_=function(n){return n!=n},Fk=(Tb=function(n,t){return n===0&&t===0?1/n==1/t:n===t||!(!A_(n)||!A_(t))},Tb),Mk=(Db=function(){return typeof Object.is=="function"?Object.is:Fk},Db),Uk=d0,jk=d0,$k=Tb,X_=Db,qk=function(){var n=Mk();return Uk(Object,{is:n},{is:function(){return Object.is!==n}}),n},Y_=Lk(X_(),Object);jk(Y_,{getPolyfill:X_,implementation:$k,shim:qk});K_=Y_;Ob=function(n){return n!=n};zk=Ob,Hk=(Nb=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:zk},d0),Wk=Nb,Gk=d0,Vk=Ob,J_=Nb,Xk=function(){var n=Wk();return Hk(Number,{isNaN:n},{isNaN:function(){return Number.isNaN!==n}}),n},Z_=J_();Gk(Z_,{getPolyfill:J_,implementation:Vk,shim:Xk});Yk=Z_,Sb={},x_=!1;E_={},S_=!1;Jk=/a/g.flags!==void 0,f0=function(n){var t=[];return n.forEach((function(e){return t.push(e)})),t},C_=function(n){var t=[];return n.forEach((function(e,r){return t.push([r,e])})),t},T_=Object.is?Object.is:K_,u0=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},Rb=Number.isNaN?Number.isNaN:Yk;xd=Pb(Object.prototype.hasOwnProperty),h0=Pb(Object.prototype.propertyIsEnumerable),D_=Pb(Object.prototype.toString),an=St.types,Zk=an.isAnyArrayBuffer,Qk=an.isArrayBufferView,R_=an.isDate,o0=an.isMap,I_=an.isRegExp,a0=an.isSet,tB=an.isNativeError,eB=an.isBoxedPrimitive,O_=an.isNumberObject,N_=an.isStringObject,P_=an.isBooleanObject,k_=an.isBigIntObject,rB=an.isSymbolObject,nB=an.isFloat32Array,iB=an.isFloat64Array;U_={isDeepEqual:function(n,t){return mi(n,t,!1)},isDeepStrictEqual:function(n,t){return mi(n,t,!0)}},_b={},j_=!1;Yt=Ib();Yt.AssertionError;Yt.deepEqual;Yt.deepStrictEqual;Yt.doesNotReject;Yt.doesNotThrow;Yt.equal;Yt.fail;Yt.ifError;Yt.notDeepEqual;Yt.notDeepStrictEqual;Yt.notEqual;Yt.notStrictEqual;Yt.ok;Yt.rejects;Yt.strict;Yt.strictEqual;Yt.throws;Yt.AssertionError;Yt.deepEqual;Yt.deepStrictEqual;Yt.doesNotReject;Yt.doesNotThrow;Yt.equal;Yt.fail;Yt.ifError;Yt.notDeepEqual;Yt.notDeepStrictEqual;Yt.notEqual;Yt.notStrictEqual;Yt.ok;Yt.rejects;Yt.strict;Yt.strictEqual;Yt.throws;Yt.AssertionError;Yt.deepEqual;Yt.deepStrictEqual;Yt.doesNotReject;Yt.doesNotThrow;Yt.equal;Yt.fail;Yt.ifError;Yt.notDeepEqual;Yt.notDeepStrictEqual;Yt.notEqual;Yt.notStrictEqual;Yt.ok;Yt.rejects;Yt.strict;Yt.strictEqual;Yt.throws});var kb,Bb=Qe(()=>{wt();xt();At();Pl();St._extend;St.callbackify;St.debuglog;St.deprecate;St.format;St.inherits;St.inspect;St.isArray;St.isBoolean;St.isBuffer;St.isDate;St.isError;St.isFunction;St.isNull;St.isNullOrUndefined;St.isNumber;St.isObject;St.isPrimitive;St.isRegExp;St.isString;St.isSymbol;St.isUndefined;St.log;kb=St.promisify;St.types;St.TextEncoder=globalThis.TextEncoder;St.TextDecoder=globalThis.TextDecoder});function cB(){if(rC)return Lb;rC=!0;var n=Lb={},t,e;function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=r}catch{t=r}try{typeof clearTimeout=="function"?e=clearTimeout:e=i}catch{e=i}})();function o(b){if(t===setTimeout)return setTimeout(b,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(b,0);try{return t(b,0)}catch{try{return t.call(null,b,0)}catch{return t.call(this||Fu,b,0)}}}function s(b){if(e===clearTimeout)return clearTimeout(b);if((e===i||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(b);try{return e(b)}catch{try{return e.call(null,b)}catch{return e.call(this||Fu,b)}}}var a=[],c=!1,u,h=-1;function f(){!c||!u||(c=!1,u.length?a=u.concat(a):h=-1,a.length&&g())}function g(){if(!c){var b=o(f);c=!0;for(var v=a.length;v;){for(u=a,a=[];++h<v;)u&&u[h].run();h=-1,v=a.length}u=null,c=!1,s(b)}}n.nextTick=function(b){var v=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)v[w-1]=arguments[w];a.push(new m(b,v)),a.length===1&&!c&&o(g)};function m(b,v){(this||Fu).fun=b,(this||Fu).array=v}m.prototype.run=function(){(this||Fu).fun.apply(null,(this||Fu).array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function y(){}return n.on=y,n.addListener=y,n.once=y,n.off=y,n.removeListener=y,n.removeAllListeners=y,n.emit=y,n.prependListener=y,n.prependOnceListener=y,n.listeners=function(b){return[]},n.binding=function(b){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(b){throw new Error("process.chdir is not supported")},n.umask=function(){return 0},Lb}var Lb,rC,Fu,be,Sd=Qe(()=>{wt();xt();At();Lb={},rC=!1,Fu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;be=cB();be.platform="browser";be.addListener;be.argv;be.binding;be.browser;be.chdir;be.cwd;be.emit;be.env;be.listeners;be.nextTick;be.off;be.on;be.once;be.prependListener;be.prependOnceListener;be.removeAllListeners;be.removeListener;be.title;be.umask;be.version;be.versions});function uB(){if(nC)return Fb;nC=!0;var n=be;function t(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function e(o,s){for(var a="",c=0,u=-1,h=0,f,g=0;g<=o.length;++g){if(g<o.length)f=o.charCodeAt(g);else{if(f===47)break;f=47}if(f===47){if(!(u===g-1||h===1))if(u!==g-1&&h===2){if(a.length<2||c!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var m=a.lastIndexOf("/");if(m!==a.length-1){m===-1?(a="",c=0):(a=a.slice(0,m),c=a.length-1-a.lastIndexOf("/")),u=g,h=0;continue}}else if(a.length===2||a.length===1){a="",c=0,u=g,h=0;continue}}s&&(a.length>0?a+="/..":a="..",c=2)}else a.length>0?a+="/"+o.slice(u+1,g):a=o.slice(u+1,g),c=g-u-1;u=g,h=0}else f===46&&h!==-1?++h:h=-1}return a}function r(o,s){var a=s.dir||s.root,c=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+c:a+o+c:c}var i={resolve:function(){for(var s="",a=!1,c,u=arguments.length-1;u>=-1&&!a;u--){var h;u>=0?h=arguments[u]:(c===void 0&&(c=n.cwd()),h=c),t(h),h.length!==0&&(s=h+"/"+s,a=h.charCodeAt(0)===47)}return s=e(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(t(s),s.length===0)return".";var a=s.charCodeAt(0)===47,c=s.charCodeAt(s.length-1)===47;return s=e(s,!a),s.length===0&&!a&&(s="."),s.length>0&&c&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return t(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var c=arguments[a];t(c),c.length>0&&(s===void 0?s=c:s+="/"+c)}return s===void 0?".":i.normalize(s)},relative:function(s,a){if(t(s),t(a),s===a||(s=i.resolve(s),a=i.resolve(a),s===a))return"";for(var c=1;c<s.length&&s.charCodeAt(c)===47;++c);for(var u=s.length,h=u-c,f=1;f<a.length&&a.charCodeAt(f)===47;++f);for(var g=a.length,m=g-f,y=h<m?h:m,b=-1,v=0;v<=y;++v){if(v===y){if(m>y){if(a.charCodeAt(f+v)===47)return a.slice(f+v+1);if(v===0)return a.slice(f+v)}else h>y&&(s.charCodeAt(c+v)===47?b=v:v===0&&(b=0));break}var w=s.charCodeAt(c+v),x=a.charCodeAt(f+v);if(w!==x)break;w===47&&(b=v)}var E="";for(v=c+b+1;v<=u;++v)(v===u||s.charCodeAt(v)===47)&&(E.length===0?E+="..":E+="/..");return E.length>0?E+a.slice(f+b):(f+=b,a.charCodeAt(f)===47&&++f,a.slice(f))},_makeLong:function(s){return s},dirname:function(s){if(t(s),s.length===0)return".";for(var a=s.charCodeAt(0),c=a===47,u=-1,h=!0,f=s.length-1;f>=1;--f)if(a=s.charCodeAt(f),a===47){if(!h){u=f;break}}else h=!1;return u===-1?c?"/":".":c&&u===1?"//":s.slice(0,u)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');t(s);var c=0,u=-1,h=!0,f;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var g=a.length-1,m=-1;for(f=s.length-1;f>=0;--f){var y=s.charCodeAt(f);if(y===47){if(!h){c=f+1;break}}else m===-1&&(h=!1,m=f+1),g>=0&&(y===a.charCodeAt(g)?--g===-1&&(u=f):(g=-1,u=m))}return c===u?u=m:u===-1&&(u=s.length),s.slice(c,u)}else{for(f=s.length-1;f>=0;--f)if(s.charCodeAt(f)===47){if(!h){c=f+1;break}}else u===-1&&(h=!1,u=f+1);return u===-1?"":s.slice(c,u)}},extname:function(s){t(s);for(var a=-1,c=0,u=-1,h=!0,f=0,g=s.length-1;g>=0;--g){var m=s.charCodeAt(g);if(m===47){if(!h){c=g+1;break}continue}u===-1&&(h=!1,u=g+1),m===46?a===-1?a=g:f!==1&&(f=1):a!==-1&&(f=-1)}return a===-1||u===-1||f===0||f===1&&a===u-1&&a===c+1?"":s.slice(a,u)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return r("/",s)},parse:function(s){t(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var c=s.charCodeAt(0),u=c===47,h;u?(a.root="/",h=1):h=0;for(var f=-1,g=0,m=-1,y=!0,b=s.length-1,v=0;b>=h;--b){if(c=s.charCodeAt(b),c===47){if(!y){g=b+1;break}continue}m===-1&&(y=!1,m=b+1),c===46?f===-1?f=b:v!==1&&(v=1):f!==-1&&(v=-1)}return f===-1||m===-1||v===0||v===1&&f===m-1&&f===g+1?m!==-1&&(g===0&&u?a.base=a.name=s.slice(1,m):a.base=a.name=s.slice(g,m)):(g===0&&u?(a.name=s.slice(1,f),a.base=s.slice(1,m)):(a.name=s.slice(g,f),a.base=s.slice(g,m)),a.ext=s.slice(f,m)),g>0?a.dir=s.slice(0,g-1):u&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,Fb=i,Fb}function Fl(n){throw new RangeError(pB[n])}function iC(n,t){let e=n.split("@"),r="";e.length>1&&(r=e[0]+"@",n=e[1]);let i=(function(o,s){let a=[],c=o.length;for(;c--;)a[c]=s(o[c]);return a})((n=n.replace(dB,".")).split("."),t).join(".");return r+i}function dC(n){let t=[],e=0,r=n.length;for(;e<r;){let i=n.charCodeAt(e++);if(i>=55296&&i<=56319&&e<r){let o=n.charCodeAt(e++);(64512&o)==56320?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),e--)}else t.push(i)}return t}function mB(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function yi(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Cd(n,t,e){if(n&&gs.isObject(n)&&n instanceof yi)return n;var r=new yi;return r.parse(n,t,e),r}function CB(){if(hC)return $b;hC=!0;var n=ke;function t(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function e(o,s){for(var a="",c=0,u=-1,h=0,f,g=0;g<=o.length;++g){if(g<o.length)f=o.charCodeAt(g);else{if(f===47)break;f=47}if(f===47){if(!(u===g-1||h===1))if(u!==g-1&&h===2){if(a.length<2||c!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var m=a.lastIndexOf("/");if(m!==a.length-1){m===-1?(a="",c=0):(a=a.slice(0,m),c=a.length-1-a.lastIndexOf("/")),u=g,h=0;continue}}else if(a.length===2||a.length===1){a="",c=0,u=g,h=0;continue}}s&&(a.length>0?a+="/..":a="..",c=2)}else a.length>0?a+="/"+o.slice(u+1,g):a=o.slice(u+1,g),c=g-u-1;u=g,h=0}else f===46&&h!==-1?++h:h=-1}return a}function r(o,s){var a=s.dir||s.root,c=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+c:a+o+c:c}var i={resolve:function(){for(var s="",a=!1,c,u=arguments.length-1;u>=-1&&!a;u--){var h;u>=0?h=arguments[u]:(c===void 0&&(c=n.cwd()),h=c),t(h),h.length!==0&&(s=h+"/"+s,a=h.charCodeAt(0)===47)}return s=e(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(t(s),s.length===0)return".";var a=s.charCodeAt(0)===47,c=s.charCodeAt(s.length-1)===47;return s=e(s,!a),s.length===0&&!a&&(s="."),s.length>0&&c&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return t(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var c=arguments[a];t(c),c.length>0&&(s===void 0?s=c:s+="/"+c)}return s===void 0?".":i.normalize(s)},relative:function(s,a){if(t(s),t(a),s===a||(s=i.resolve(s),a=i.resolve(a),s===a))return"";for(var c=1;c<s.length&&s.charCodeAt(c)===47;++c);for(var u=s.length,h=u-c,f=1;f<a.length&&a.charCodeAt(f)===47;++f);for(var g=a.length,m=g-f,y=h<m?h:m,b=-1,v=0;v<=y;++v){if(v===y){if(m>y){if(a.charCodeAt(f+v)===47)return a.slice(f+v+1);if(v===0)return a.slice(f+v)}else h>y&&(s.charCodeAt(c+v)===47?b=v:v===0&&(b=0));break}var w=s.charCodeAt(c+v),x=a.charCodeAt(f+v);if(w!==x)break;w===47&&(b=v)}var E="";for(v=c+b+1;v<=u;++v)(v===u||s.charCodeAt(v)===47)&&(E.length===0?E+="..":E+="/..");return E.length>0?E+a.slice(f+b):(f+=b,a.charCodeAt(f)===47&&++f,a.slice(f))},_makeLong:function(s){return s},dirname:function(s){if(t(s),s.length===0)return".";for(var a=s.charCodeAt(0),c=a===47,u=-1,h=!0,f=s.length-1;f>=1;--f)if(a=s.charCodeAt(f),a===47){if(!h){u=f;break}}else h=!1;return u===-1?c?"/":".":c&&u===1?"//":s.slice(0,u)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');t(s);var c=0,u=-1,h=!0,f;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var g=a.length-1,m=-1;for(f=s.length-1;f>=0;--f){var y=s.charCodeAt(f);if(y===47){if(!h){c=f+1;break}}else m===-1&&(h=!1,m=f+1),g>=0&&(y===a.charCodeAt(g)?--g===-1&&(u=f):(g=-1,u=m))}return c===u?u=m:u===-1&&(u=s.length),s.slice(c,u)}else{for(f=s.length-1;f>=0;--f)if(s.charCodeAt(f)===47){if(!h){c=f+1;break}}else u===-1&&(h=!1,u=f+1);return u===-1?"":s.slice(c,u)}},extname:function(s){t(s);for(var a=-1,c=0,u=-1,h=!0,f=0,g=s.length-1;g>=0;--g){var m=s.charCodeAt(g);if(m===47){if(!h){c=g+1;break}continue}u===-1&&(h=!1,u=g+1),m===46?a===-1?a=g:f!==1&&(f=1):a!==-1&&(f=-1)}return a===-1||u===-1||f===0||f===1&&a===u-1&&a===c+1?"":s.slice(a,u)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return r("/",s)},parse:function(s){t(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var c=s.charCodeAt(0),u=c===47,h;u?(a.root="/",h=1):h=0;for(var f=-1,g=0,m=-1,y=!0,b=s.length-1,v=0;b>=h;--b){if(c=s.charCodeAt(b),c===47){if(!y){g=b+1;break}continue}m===-1&&(y=!1,m=b+1),c===46?f===-1?f=b:v!==1&&(v=1):f!==-1&&(v=-1)}return f===-1||m===-1||v===0||v===1&&f===m-1&&f===g+1?m!==-1&&(g===0&&u?a.base=a.name=s.slice(1,m):a.base=a.name=s.slice(g,m)):(g===0&&u?(a.name=s.slice(1,f),a.base=s.slice(1,m)):(a.name=s.slice(g,f),a.base=s.slice(g,m)),a.ext=s.slice(f,m)),g>0?a.dir=s.slice(0,g-1):u&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,$b=i,$b}function MB(n){if(typeof n=="string")n=new URL(n);else if(!(n instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(n.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return zb?UB(n):jB(n)}function UB(n){let t=n.hostname,e=n.pathname;for(let r=0;r<e.length;r++)if(e[r]==="%"){let i=e.codePointAt(r+2)||32;if(e[r+1]==="2"&&i===102||e[r+1]==="5"&&i===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(e=e.replace(NB,"\\"),e=decodeURIComponent(e),t!=="")return`\\\\${t}${e}`;{let r=e.codePointAt(1)|32,i=e[2];if(r<IB||r>OB||i!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return e.slice(1)}}function jB(n){if(n.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let t=n.pathname;for(let e=0;e<t.length;e++)if(t[e]==="%"){let r=t.codePointAt(e+2)||32;if(t[e+1]==="2"&&r===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(t)}function $B(n){let t=fC.resolve(n),e=n.charCodeAt(n.length-1);(e===RB||zb&&e===DB)&&t[t.length-1]!==fC.sep&&(t+="/");let r=new URL("file://");return t.includes("%")&&(t=t.replace(PB,"%25")),!zb&&t.includes("\\")&&(t=t.replace(kB,"%5C")),t.includes(`
`)&&(t=t.replace(BB,"%0A")),t.includes("\r")&&(t=t.replace(LB,"%0D")),t.includes("	")&&(t=t.replace(FB,"%09")),r.pathname=t,r}function QB(n){if(typeof n=="string")n=new URL(n);else if(!(n instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(n.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Hb?tL(n):eL(n)}function tL(n){let t=n.hostname,e=n.pathname;for(let r=0;r<e.length;r++)if(e[r]==="%"){let i=e.codePointAt(r+2)||32;if(e[r+1]==="2"&&i===102||e[r+1]==="5"&&i===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(e=e.replace(VB,"\\"),e=decodeURIComponent(e),t!=="")return`\\\\${t}${e}`;{let r=e.codePointAt(1)|32,i=e[2];if(r<WB||r>GB||i!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return e.slice(1)}}function eL(n){if(n.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let t=n.pathname;for(let e=0;e<t.length;e++)if(t[e]==="%"){let r=t.codePointAt(e+2)||32;if(t[e+1]==="2"&&r===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(t)}function rL(n){let t=br.resolve(n),e=n.charCodeAt(n.length-1);(e===HB||Hb&&e===zB)&&t[t.length-1]!==br.sep&&(t+="/");let r=new URL("file://");return t.includes("%")&&(t=t.replace(XB,"%25")),!Hb&&t.includes("\\")&&(t=t.replace(YB,"%5C")),t.includes(`
`)&&(t=t.replace(KB,"%0A")),t.includes("\r")&&(t=t.replace(JB,"%0D")),t.includes("	")&&(t=t.replace(ZB,"%09")),r.pathname=t,r}var Fb,nC,br,Uu,hB,fB,dB,pB,ms,Mb,sC,pC,oC,aC,gB,yB,_d,vB,so,Ce,bB,gs,wB,AB,xB,EB,qb,lC,cC,uC,SB,_B,Ub,Mu,jb,$b,hC,fC,TB,DB,RB,IB,OB,zb,NB,PB,kB,BB,LB,FB,qB,zB,HB,WB,GB,Hb,VB,XB,YB,KB,JB,ZB,gC=Qe(()=>{wt();xt();At();Pl();Sd();Fb={},nC=!1;br=uB(),Uu=2147483647,hB=/^xn--/,fB=/[^\0-\x7E]/,dB=/[\x2E\u3002\uFF0E\uFF61]/g,pB={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ms=Math.floor,Mb=String.fromCharCode;sC=function(n,t){return n+22+75*(n<26)-((t!=0)<<5)},pC=function(n,t,e){let r=0;for(n=e?ms(n/700):n>>1,n+=ms(n/t);n>455;r+=36)n=ms(n/35);return ms(r+36*n/(n+38))},oC=function(n){let t=[],e=n.length,r=0,i=128,o=72,s=n.lastIndexOf("-");s<0&&(s=0);for(let c=0;c<s;++c)n.charCodeAt(c)>=128&&Fl("not-basic"),t.push(n.charCodeAt(c));for(let c=s>0?s+1:0;c<e;){let u=r;for(let f=1,g=36;;g+=36){c>=e&&Fl("invalid-input");let m=(a=n.charCodeAt(c++))-48<10?a-22:a-65<26?a-65:a-97<26?a-97:36;(m>=36||m>ms((Uu-r)/f))&&Fl("overflow"),r+=m*f;let y=g<=o?1:g>=o+26?26:g-o;if(m<y)break;let b=36-y;f>ms(Uu/b)&&Fl("overflow"),f*=b}let h=t.length+1;o=pC(r-u,h,u==0),ms(r/h)>Uu-i&&Fl("overflow"),i+=ms(r/h),r%=h,t.splice(r++,0,i)}var a;return String.fromCodePoint(...t)},aC=function(n){let t=[],e=(n=dC(n)).length,r=128,i=0,o=72;for(let c of n)c<128&&t.push(Mb(c));let s=t.length,a=s;for(s&&t.push("-");a<e;){let c=Uu;for(let h of n)h>=r&&h<c&&(c=h);let u=a+1;c-r>ms((Uu-i)/u)&&Fl("overflow"),i+=(c-r)*u,r=c;for(let h of n)if(h<r&&++i>Uu&&Fl("overflow"),h==r){let f=i;for(let g=36;;g+=36){let m=g<=o?1:g>=o+26?26:g-o;if(f<m)break;let y=f-m,b=36-m;t.push(Mb(sC(m+y%b,0))),f=ms(y/b)}t.push(Mb(sC(f,0))),o=pC(i,u,a==s),i=0,++a}++i,++r}return t.join("")},gB={version:"2.1.0",ucs2:{decode:dC,encode:n=>String.fromCodePoint(...n)},decode:oC,encode:aC,toASCII:function(n){return iC(n,(function(t){return fB.test(t)?"xn--"+aC(t):t}))},toUnicode:function(n){return iC(n,(function(t){return hB.test(t)?oC(t.slice(4).toLowerCase()):t}))}};yB=function(n,t,e,r){t=t||"&",e=e||"=";var i={};if(typeof n!="string"||n.length===0)return i;var o=/\+/g;n=n.split(t);var s=1e3;r&&typeof r.maxKeys=="number"&&(s=r.maxKeys);var a=n.length;s>0&&a>s&&(a=s);for(var c=0;c<a;++c){var u,h,f,g,m=n[c].replace(o,"%20"),y=m.indexOf(e);y>=0?(u=m.substr(0,y),h=m.substr(y+1)):(u=m,h=""),f=decodeURIComponent(u),g=decodeURIComponent(h),mB(i,f)?Array.isArray(i[f])?i[f].push(g):i[f]=[i[f],g]:i[f]=g}return i},_d=function(n){switch(typeof n){case"string":return n;case"boolean":return n?"true":"false";case"number":return isFinite(n)?n:"";default:return""}},vB=function(n,t,e,r){return t=t||"&",e=e||"=",n===null&&(n=void 0),typeof n=="object"?Object.keys(n).map((function(i){var o=encodeURIComponent(_d(i))+e;return Array.isArray(n[i])?n[i].map((function(s){return o+encodeURIComponent(_d(s))})).join(t):o+encodeURIComponent(_d(n[i]))})).join(t):r?encodeURIComponent(_d(r))+e+encodeURIComponent(_d(n)):""},so={};so.decode=so.parse=yB,so.encode=so.stringify=vB;so.decode;so.encode;so.parse;so.stringify;Ce={},bB=gB,gs={isString:function(n){return typeof n=="string"},isObject:function(n){return typeof n=="object"&&n!==null},isNull:function(n){return n===null},isNullOrUndefined:function(n){return n==null}};Ce.parse=Cd,Ce.resolve=function(n,t){return Cd(n,!1,!0).resolve(t)},Ce.resolveObject=function(n,t){return n?Cd(n,!1,!0).resolveObject(t):t},Ce.format=function(n){return gs.isString(n)&&(n=Cd(n)),n instanceof yi?n.format():yi.prototype.format.call(n)},Ce.Url=yi;wB=/^([a-z0-9.+-]+:)/i,AB=/:[0-9]*$/,xB=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,EB=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),qb=["'"].concat(EB),lC=["%","/","?",";","#"].concat(qb),cC=["/","?","#"],uC=/^[+a-z0-9A-Z_-]{0,63}$/,SB=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_B={javascript:!0,"javascript:":!0},Ub={javascript:!0,"javascript:":!0},Mu={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},jb=so;yi.prototype.parse=function(n,t,e){if(!gs.isString(n))throw new TypeError("Parameter 'url' must be a string, not "+typeof n);var r=n.indexOf("?"),i=r!==-1&&r<n.indexOf("#")?"?":"#",o=n.split(i);o[0]=o[0].replace(/\\/g,"/");var s=n=o.join(i);if(s=s.trim(),!e&&n.split("#").length===1){var a=xB.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=t?jb.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var c=wB.exec(s);if(c){var u=(c=c[0]).toLowerCase();this.protocol=u,s=s.substr(c.length)}if(e||c||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var h=s.substr(0,2)==="//";!h||c&&Ub[c]||(s=s.substr(2),this.slashes=!0)}if(!Ub[c]&&(h||c&&!Mu[c])){for(var f,g,m=-1,y=0;y<cC.length;y++)(b=s.indexOf(cC[y]))!==-1&&(m===-1||b<m)&&(m=b);for((g=m===-1?s.lastIndexOf("@"):s.lastIndexOf("@",m))!==-1&&(f=s.slice(0,g),s=s.slice(g+1),this.auth=decodeURIComponent(f)),m=-1,y=0;y<lC.length;y++){var b;(b=s.indexOf(lC[y]))!==-1&&(m===-1||b<m)&&(m=b)}m===-1&&(m=s.length),this.host=s.slice(0,m),s=s.slice(m),this.parseHost(),this.hostname=this.hostname||"";var v=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!v)for(var w=this.hostname.split(/\./),x=(y=0,w.length);y<x;y++){var E=w[y];if(E&&!E.match(uC)){for(var D="",_=0,q=E.length;_<q;_++)E.charCodeAt(_)>127?D+="x":D+=E[_];if(!D.match(uC)){var N=w.slice(0,y),rt=w.slice(y+1),Y=E.match(SB);Y&&(N.push(Y[1]),rt.unshift(Y[2])),rt.length&&(s="/"+rt.join(".")+s),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=bB.toASCII(this.hostname));var et=this.port?":"+this.port:"",st=this.hostname||"";this.host=st+et,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),s[0]!=="/"&&(s="/"+s))}if(!_B[u])for(y=0,x=qb.length;y<x;y++){var lt=qb[y];if(s.indexOf(lt)!==-1){var at=encodeURIComponent(lt);at===lt&&(at=escape(lt)),s=s.split(lt).join(at)}}var X=s.indexOf("#");X!==-1&&(this.hash=s.substr(X),s=s.slice(0,X));var ct=s.indexOf("?");if(ct!==-1?(this.search=s.substr(ct),this.query=s.substr(ct+1),t&&(this.query=jb.parse(this.query)),s=s.slice(0,ct)):t&&(this.search="",this.query={}),s&&(this.pathname=s),Mu[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){et=this.pathname||"";var J=this.search||"";this.path=et+J}return this.href=this.format(),this},yi.prototype.format=function(){var n=this.auth||"";n&&(n=(n=encodeURIComponent(n)).replace(/%3A/i,":"),n+="@");var t=this.protocol||"",e=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=n+this.host:this.hostname&&(i=n+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&gs.isObject(this.query)&&Object.keys(this.query).length&&(o=jb.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Mu[t])&&i!==!1?(i="//"+(i||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):i||(i=""),r&&r.charAt(0)!=="#"&&(r="#"+r),s&&s.charAt(0)!=="?"&&(s="?"+s),t+i+(e=e.replace(/[?#]/g,(function(a){return encodeURIComponent(a)})))+(s=s.replace("#","%23"))+r},yi.prototype.resolve=function(n){return this.resolveObject(Cd(n,!1,!0)).format()},yi.prototype.resolveObject=function(n){if(gs.isString(n)){var t=new yi;t.parse(n,!1,!0),n=t}for(var e=new yi,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];e[o]=this[o]}if(e.hash=n.hash,n.href==="")return e.href=e.format(),e;if(n.slashes&&!n.protocol){for(var s=Object.keys(n),a=0;a<s.length;a++){var c=s[a];c!=="protocol"&&(e[c]=n[c])}return Mu[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(n.protocol&&n.protocol!==e.protocol){if(!Mu[n.protocol]){for(var u=Object.keys(n),h=0;h<u.length;h++){var f=u[h];e[f]=n[f]}return e.href=e.format(),e}if(e.protocol=n.protocol,n.host||Ub[n.protocol])e.pathname=n.pathname;else{for(var g=(n.pathname||"").split("/");g.length&&!(n.host=g.shift()););n.host||(n.host=""),n.hostname||(n.hostname=""),g[0]!==""&&g.unshift(""),g.length<2&&g.unshift(""),e.pathname=g.join("/")}if(e.search=n.search,e.query=n.query,e.host=n.host||"",e.auth=n.auth,e.hostname=n.hostname||n.host,e.port=n.port,e.pathname||e.search){var m=e.pathname||"",y=e.search||"";e.path=m+y}return e.slashes=e.slashes||n.slashes,e.href=e.format(),e}var b=e.pathname&&e.pathname.charAt(0)==="/",v=n.host||n.pathname&&n.pathname.charAt(0)==="/",w=v||b||e.host&&n.pathname,x=w,E=e.pathname&&e.pathname.split("/")||[],D=(g=n.pathname&&n.pathname.split("/")||[],e.protocol&&!Mu[e.protocol]);if(D&&(e.hostname="",e.port=null,e.host&&(E[0]===""?E[0]=e.host:E.unshift(e.host)),e.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(g[0]===""?g[0]=n.host:g.unshift(n.host)),n.host=null),w=w&&(g[0]===""||E[0]==="")),v)e.host=n.host||n.host===""?n.host:e.host,e.hostname=n.hostname||n.hostname===""?n.hostname:e.hostname,e.search=n.search,e.query=n.query,E=g;else if(g.length)E||(E=[]),E.pop(),E=E.concat(g),e.search=n.search,e.query=n.query;else if(!gs.isNullOrUndefined(n.search))return D&&(e.hostname=e.host=E.shift(),(Y=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@"))&&(e.auth=Y.shift(),e.host=e.hostname=Y.shift())),e.search=n.search,e.query=n.query,gs.isNull(e.pathname)&&gs.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e;if(!E.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var _=E.slice(-1)[0],q=(e.host||n.host||E.length>1)&&(_==="."||_==="..")||_==="",N=0,rt=E.length;rt>=0;rt--)(_=E[rt])==="."?E.splice(rt,1):_===".."?(E.splice(rt,1),N++):N&&(E.splice(rt,1),N--);if(!w&&!x)for(;N--;N)E.unshift("..");!w||E[0]===""||E[0]&&E[0].charAt(0)==="/"||E.unshift(""),q&&E.join("/").substr(-1)!=="/"&&E.push("");var Y,et=E[0]===""||E[0]&&E[0].charAt(0)==="/";return D&&(e.hostname=e.host=et?"":E.length?E.shift():"",(Y=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@"))&&(e.auth=Y.shift(),e.host=e.hostname=Y.shift())),(w=w||e.host&&E.length)&&!et&&E.unshift(""),E.length?e.pathname=E.join("/"):(e.pathname=null,e.path=null),gs.isNull(e.pathname)&&gs.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=n.auth||e.auth,e.slashes=e.slashes||n.slashes,e.href=e.format(),e},yi.prototype.parseHost=function(){var n=this.host,t=AB.exec(n);t&&((t=t[0])!==":"&&(this.port=t.substr(1)),n=n.substr(0,n.length-t.length)),n&&(this.hostname=n)};Ce.Url;Ce.format;Ce.resolve;Ce.resolveObject;$b={},hC=!1;fC=CB(),TB=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0;Ce.URL=typeof URL<"u"?URL:null;Ce.pathToFileURL=$B;Ce.fileURLToPath=MB;Ce.Url;Ce.format;Ce.resolve;Ce.resolveObject;Ce.URL;DB=92,RB=47,IB=97,OB=122,zb=TB==="win32",NB=/\//g,PB=/%/g,kB=/\\/g,BB=/\n/g,LB=/\r/g,FB=/\t/g;qB=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0;Ce.URL=typeof URL<"u"?URL:null;Ce.pathToFileURL=rL;Ce.fileURLToPath=QB;Ce.Url;Ce.format;Ce.resolve;Ce.resolveObject;Ce.parse;Ce.URL;zB=92,HB=47,WB=97,GB=122,Hb=qB==="win32",VB=/\//g,XB=/%/g,YB=/\\/g,KB=/\n/g,JB=/\r/g,ZB=/\t/g});function Xb(n){throw new Error("Node.js process "+n+" is not supported by JSPM core outside of Node.js")}function nL(){!ju||!Ml||(ju=!1,Ml.length?oo=Ml.concat(oo):p0=-1,oo.length&&mC())}function mC(){if(!ju){var n=setTimeout(nL,0);ju=!0;for(var t=oo.length;t;){for(Ml=oo,oo=[];++p0<t;)Ml&&Ml[p0].run();p0=-1,t=oo.length}Ml=null,ju=!1,clearTimeout(n)}}function iL(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];oo.push(new yC(n,t)),oo.length===1&&!ju&&setTimeout(mC,0)}function yC(n,t){this.fun=n,this.array=t}function Kr(){}function AL(n){Xb("_linkedBinding")}function _L(n){Xb("dlopen")}function CL(){return[]}function TL(){return[]}function LL(n,t){if(!n)throw new Error(t||"assertion error")}function jL(){return!1}function nF(){return ya.now()/1e3}function Vb(n){var t=Math.floor((Date.now()-ya.now())*.001),e=ya.now()*.001,r=Math.floor(e)+t,i=Math.floor(e%1*1e9);return n&&(r=r-n[0],i=i-n[1],i<0&&(r--,i+=Gb)),[r,i]}function va(){return ba}function gF(n){return[]}var oo,ju,Ml,p0,sL,oL,aL,lL,cL,uL,hL,fL,dL,pL,gL,mL,yL,vL,bL,wL,xL,EL,SL,DL,RL,Yb,IL,OL,NL,PL,kL,BL,FL,ML,UL,$L,qL,zL,HL,WL,GL,VL,XL,YL,KL,JL,ZL,QL,tF,eF,rF,ya,Wb,Gb,iF,sF,oF,aF,lF,cF,uF,hF,fF,dF,pF,ba,g0=Qe(()=>{wt();xt();At();oo=[],ju=!1,p0=-1;yC.prototype.run=function(){this.fun.apply(null,this.array)};sL="browser",oL="x64",aL="browser",lL={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},cL=["/usr/bin/node"],uL=[],hL="v16.8.0",fL={},dL=function(n,t){console.warn((t?t+": ":"")+n)},pL=function(n){Xb("binding")},gL=function(n){return 0},mL=function(){return"/"},yL=function(n){},vL={name:"node",sourceUrl:"",headersUrl:"",libUrl:""};bL=Kr,wL=[];xL={},EL=!1,SL={};DL=Kr,RL=Kr,Yb=function(){return{}},IL=Yb,OL=Yb,NL=Kr,PL=Kr,kL=Kr,BL={};FL={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},ML=Kr,UL=Kr;$L=Kr,qL=Kr,zL=Kr,HL=Kr,WL=Kr,GL=void 0,VL=void 0,XL=void 0,YL=Kr,KL=2,JL=1,ZL="/bin/usr/node",QL=9229,tF="node",eF=[],rF=Kr,ya={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0};ya.now===void 0&&(Wb=Date.now(),ya.timing&&ya.timing.navigationStart&&(Wb=ya.timing.navigationStart),ya.now=()=>Date.now()-Wb);Gb=1e9;Vb.bigint=function(n){var t=Vb(n);return typeof BigInt>"u"?t[0]*Gb+t[1]:BigInt(t[0]*Gb)+BigInt(t[1])};iF=10,sF={},oF=0;aF=va,lF=va,cF=va,uF=va,hF=va,fF=Kr,dF=va,pF=va;ba={version:hL,versions:fL,arch:oL,platform:aL,release:vL,_rawDebug:bL,moduleLoadList:wL,binding:pL,_linkedBinding:AL,_events:sF,_eventsCount:oF,_maxListeners:iF,on:va,addListener:aF,once:lF,off:cF,removeListener:uF,removeAllListeners:hF,emit:fF,prependListener:dF,prependOnceListener:pF,listeners:gF,domain:xL,_exiting:EL,config:SL,dlopen:_L,uptime:nF,_getActiveRequests:CL,_getActiveHandles:TL,reallyExit:DL,_kill:RL,cpuUsage:Yb,resourceUsage:IL,memoryUsage:OL,kill:NL,exit:PL,openStdin:kL,allowedNodeEnvironmentFlags:BL,assert:LL,features:FL,_fatalExceptions:ML,setUncaughtExceptionCaptureCallback:UL,hasUncaughtExceptionCaptureCallback:jL,emitWarning:dL,nextTick:iL,_tickCallback:$L,_debugProcess:qL,_debugEnd:zL,_startProfilerIdleNotifier:HL,_stopProfilerIdleNotifier:WL,stdout:GL,stdin:XL,stderr:VL,abort:YL,umask:gL,chdir:yL,cwd:mL,env:lL,title:sL,argv:cL,execArgv:uL,pid:KL,ppid:JL,execPath:ZL,debugPort:QL,hrtime:Vb,argv0:tF,_preload_modules:eF,setSourceMapsEnabled:rF}});function Te(){Te.init.call(this)}function m0(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}function TC(n){return n._maxListeners===void 0?Te.defaultMaxListeners:n._maxListeners}function AC(n,t,e,r){var i,o,s,a;if(m0(e),(o=n._events)===void 0?(o=n._events=Object.create(null),n._eventsCount=0):(o.newListener!==void 0&&(n.emit("newListener",t,e.listener?e.listener:e),o=n._events),s=o[t]),s===void 0)s=o[t]=e,++n._eventsCount;else if(typeof s=="function"?s=o[t]=r?[e,s]:[s,e]:r?s.unshift(e):s.push(e),(i=TC(n))>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=n,c.type=t,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return n}function mF(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function xC(n,t,e){var r={fired:!1,wrapFn:void 0,target:n,type:t,listener:e},i=mF.bind(r);return i.listener=e,r.wrapFn=i,i}function EC(n,t,e){var r=n._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?e?[i.listener||i]:[i]:e?(function(o){for(var s=new Array(o.length),a=0;a<s.length;++a)s[a]=o[a].listener||o[a];return s})(i):DC(i,i.length)}function SC(n){var t=this._events;if(t!==void 0){var e=t[n];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}function DC(n,t){for(var e=new Array(t),r=0;r<t;++r)e[r]=n[r];return e}var _C,CC,$u,vC,bC,wC,wr,Td=Qe(()=>{wt();xt();At();$u=typeof Reflect=="object"?Reflect:null,vC=$u&&typeof $u.apply=="function"?$u.apply:function(n,t,e){return Function.prototype.apply.call(n,t,e)};CC=$u&&typeof $u.ownKeys=="function"?$u.ownKeys:Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:function(n){return Object.getOwnPropertyNames(n)};bC=Number.isNaN||function(n){return n!=n};_C=Te,Te.EventEmitter=Te,Te.prototype._events=void 0,Te.prototype._eventsCount=0,Te.prototype._maxListeners=void 0;wC=10;Object.defineProperty(Te,"defaultMaxListeners",{enumerable:!0,get:function(){return wC},set:function(n){if(typeof n!="number"||n<0||bC(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");wC=n}}),Te.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Te.prototype.setMaxListeners=function(n){if(typeof n!="number"||n<0||bC(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this},Te.prototype.getMaxListeners=function(){return TC(this)},Te.prototype.emit=function(n){for(var t=[],e=1;e<arguments.length;e++)t.push(arguments[e]);var r=n==="error",i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[n];if(a===void 0)return!1;if(typeof a=="function")vC(a,this,t);else{var c=a.length,u=DC(a,c);for(e=0;e<c;++e)vC(u[e],this,t)}return!0},Te.prototype.addListener=function(n,t){return AC(this,n,t,!1)},Te.prototype.on=Te.prototype.addListener,Te.prototype.prependListener=function(n,t){return AC(this,n,t,!0)},Te.prototype.once=function(n,t){return m0(t),this.on(n,xC(this,n,t)),this},Te.prototype.prependOnceListener=function(n,t){return m0(t),this.prependListener(n,xC(this,n,t)),this},Te.prototype.removeListener=function(n,t){var e,r,i,o,s;if(m0(t),(r=this._events)===void 0)return this;if((e=r[n])===void 0)return this;if(e===t||e.listener===t)--this._eventsCount==0?this._events=Object.create(null):(delete r[n],r.removeListener&&this.emit("removeListener",n,e.listener||t));else if(typeof e!="function"){for(i=-1,o=e.length-1;o>=0;o--)if(e[o]===t||e[o].listener===t){s=e[o].listener,i=o;break}if(i<0)return this;i===0?e.shift():(function(a,c){for(;c+1<a.length;c++)a[c]=a[c+1];a.pop()})(e,i),e.length===1&&(r[n]=e[0]),r.removeListener!==void 0&&this.emit("removeListener",n,s||t)}return this},Te.prototype.off=Te.prototype.removeListener,Te.prototype.removeAllListeners=function(n){var t,e,r;if((e=this._events)===void 0)return this;if(e.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):e[n]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete e[n]),this;if(arguments.length===0){var i,o=Object.keys(e);for(r=0;r<o.length;++r)(i=o[r])!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(t=e[n])=="function")this.removeListener(n,t);else if(t!==void 0)for(r=t.length-1;r>=0;r--)this.removeListener(n,t[r]);return this},Te.prototype.listeners=function(n){return EC(this,n,!0)},Te.prototype.rawListeners=function(n){return EC(this,n,!1)},Te.listenerCount=function(n,t){return typeof n.listenerCount=="function"?n.listenerCount(t):SC.call(n,t)},Te.prototype.listenerCount=SC,Te.prototype.eventNames=function(){return this._eventsCount>0?CC(this._events):[]};wr=_C;wr.EventEmitter;wr.defaultMaxListeners;wr.init;wr.listenerCount;wr.EventEmitter;wr.defaultMaxListeners;wr.init;wr.listenerCount});var Kb=Qe(()=>{wt();xt();At();Td();wr.once=function(n,t){return new Promise((e,r)=>{function i(...s){o!==void 0&&n.removeListener("error",o),e(s)}let o;t!=="error"&&(o=s=>{n.removeListener(name,i),r(s)},n.once("error",o)),n.once(t,i)})};wr.on=function(n,t){let e=[],r=[],i=null,o=!1,s={async next(){let u=e.shift();if(u)return createIterResult(u,!1);if(i){let h=Promise.reject(i);return i=null,h}return o?createIterResult(void 0,!0):new Promise((h,f)=>r.push({resolve:h,reject:f}))},async return(){n.removeListener(t,a),n.removeListener("error",c),o=!0;for(let u of r)u.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(u){i=u,n.removeListener(t,a),n.removeListener("error",c)},[Symbol.asyncIterator](){return this}};return n.on(t,a),n.on("error",c),s;function a(...u){let h=r.shift();h?h.resolve(createIterResult(u,!1)):e.push(u)}function c(u){o=!0;let h=r.shift();h?h.reject(u):i=u,s.return()}}});function OC(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");return e===-1&&(e=t),[e,e===t?0:4-e%4]}function yF(n,t,e){for(var r,i,o=[],s=t;s<e;s+=3)r=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(255&n[s+2]),o.push(qi[(i=r)>>18&63]+qi[i>>12&63]+qi[i>>6&63]+qi[63&i]);return o.join("")}function ao(n){if(n>2147483647)throw new RangeError('The value "'+n+'" is invalid for option "size"');var t=new Uint8Array(n);return Object.setPrototypeOf(t,Tt.prototype),t}function Tt(n,t,e){if(typeof n=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return mw(n)}return oT(n,t,e)}function oT(n,t,e){if(typeof n=="string")return(function(o,s){if(typeof s=="string"&&s!==""||(s="utf8"),!Tt.isEncoding(s))throw new TypeError("Unknown encoding: "+s);var a=0|lT(o,s),c=ao(a),u=c.write(o,s);return u!==a&&(c=c.slice(0,u)),c})(n,t);if(ArrayBuffer.isView(n))return Jb(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(lo(n,ArrayBuffer)||n&&lo(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(lo(n,SharedArrayBuffer)||n&&lo(n.buffer,SharedArrayBuffer)))return PC(n,t,e);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var r=n.valueOf&&n.valueOf();if(r!=null&&r!==n)return Tt.from(r,t,e);var i=(function(o){if(Tt.isBuffer(o)){var s=0|ww(o.length),a=ao(s);return a.length===0||o.copy(a,0,0,s),a}if(o.length!==void 0)return typeof o.length!="number"||Aw(o.length)?ao(0):Jb(o);if(o.type==="Buffer"&&Array.isArray(o.data))return Jb(o.data)})(n);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return Tt.from(n[Symbol.toPrimitive]("string"),t,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}function aT(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function mw(n){return aT(n),ao(n<0?0:0|ww(n))}function Jb(n){for(var t=n.length<0?0:0|ww(n.length),e=ao(t),r=0;r<t;r+=1)e[r]=255&n[r];return e}function PC(n,t,e){if(t<0||n.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<t+(e||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=t===void 0&&e===void 0?new Uint8Array(n):e===void 0?new Uint8Array(n,t):new Uint8Array(n,t,e),Object.setPrototypeOf(r,Tt.prototype),r}function ww(n){if(n>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|n}function lT(n,t){if(Tt.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||lo(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);var e=n.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&e===0)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return yw(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return fT(n).length;default:if(i)return r?-1:yw(n).length;t=(""+t).toLowerCase(),i=!0}}function bF(n,t,e){var r=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0)<=(t>>>=0))return"";for(n||(n="utf8");;)switch(n){case"hex":return DF(this,t,e);case"utf8":case"utf-8":return uT(this,t,e);case"ascii":return CF(this,t,e);case"latin1":case"binary":return TF(this,t,e);case"base64":return _F(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return RF(this,t,e);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),r=!0}}function jl(n,t,e){var r=n[t];n[t]=n[e],n[e]=r}function kC(n,t,e,r,i){if(n.length===0)return-1;if(typeof e=="string"?(r=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),Aw(e=+e)&&(e=i?0:n.length-1),e<0&&(e=n.length+e),e>=n.length){if(i)return-1;e=n.length-1}else if(e<0){if(!i)return-1;e=0}if(typeof t=="string"&&(t=Tt.from(t,r)),Tt.isBuffer(t))return t.length===0?-1:BC(n,t,e,r,i);if(typeof t=="number")return t&=255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(n,t,e):Uint8Array.prototype.lastIndexOf.call(n,t,e):BC(n,[t],e,r,i);throw new TypeError("val must be string, number or Buffer")}function BC(n,t,e,r,i){var o,s=1,a=n.length,c=t.length;if(r!==void 0&&((r=String(r).toLowerCase())==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(n.length<2||t.length<2)return-1;s=2,a/=2,c/=2,e/=2}function u(m,y){return s===1?m[y]:m.readUInt16BE(y*s)}if(i){var h=-1;for(o=e;o<a;o++)if(u(n,o)===u(t,h===-1?0:o-h)){if(h===-1&&(h=o),o-h+1===c)return h*s}else h!==-1&&(o-=o-h),h=-1}else for(e+c>a&&(e=a-c),o=e;o>=0;o--){for(var f=!0,g=0;g<c;g++)if(u(n,o+g)!==u(t,g)){f=!1;break}if(f)return o}return-1}function wF(n,t,e,r){e=Number(e)||0;var i=n.length-e;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(Aw(a))return s;n[e+s]=a}return s}function AF(n,t,e,r){return x0(yw(t,n.length-e),n,e,r)}function cT(n,t,e,r){return x0((function(i){for(var o=[],s=0;s<i.length;++s)o.push(255&i.charCodeAt(s));return o})(t),n,e,r)}function xF(n,t,e,r){return cT(n,t,e,r)}function EF(n,t,e,r){return x0(fT(t),n,e,r)}function SF(n,t,e,r){return x0((function(i,o){for(var s,a,c,u=[],h=0;h<i.length&&!((o-=2)<0);++h)s=i.charCodeAt(h),a=s>>8,c=s%256,u.push(c),u.push(a);return u})(t,n.length-e),n,e,r)}function _F(n,t,e){return t===0&&e===n.length?gw.fromByteArray(n):gw.fromByteArray(n.slice(t,e))}function uT(n,t,e){e=Math.min(n.length,e);for(var r=[],i=t;i<e;){var o,s,a,c,u=n[i],h=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=e)switch(f){case 1:u<128&&(h=u);break;case 2:(192&(o=n[i+1]))==128&&(c=(31&u)<<6|63&o)>127&&(h=c);break;case 3:o=n[i+1],s=n[i+2],(192&o)==128&&(192&s)==128&&(c=(15&u)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(h=c);break;case 4:o=n[i+1],s=n[i+2],a=n[i+3],(192&o)==128&&(192&s)==128&&(192&a)==128&&(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(h=c)}h===null?(h=65533,f=1):h>65535&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=f}return(function(g){var m=g.length;if(m<=4096)return String.fromCharCode.apply(String,g);for(var y="",b=0;b<m;)y+=String.fromCharCode.apply(String,g.slice(b,b+=4096));return y})(r)}function CF(n,t,e){var r="";e=Math.min(n.length,e);for(var i=t;i<e;++i)r+=String.fromCharCode(127&n[i]);return r}function TF(n,t,e){var r="";e=Math.min(n.length,e);for(var i=t;i<e;++i)r+=String.fromCharCode(n[i]);return r}function DF(n,t,e){var r=n.length;(!t||t<0)&&(t=0),(!e||e<0||e>r)&&(e=r);for(var i="",o=t;o<e;++o)i+=OF[n[o]];return i}function RF(n,t,e){for(var r=n.slice(t,e),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function Tr(n,t,e){if(n%1!=0||n<0)throw new RangeError("offset is not uint");if(n+t>e)throw new RangeError("Trying to access beyond buffer length")}function An(n,t,e,r,i,o){if(!Tt.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(e+r>n.length)throw new RangeError("Index out of range")}function hT(n,t,e,r,i,o){if(e+r>n.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function LC(n,t,e,r,i){return t=+t,e>>>=0,i||hT(n,0,e,4),qu.write(n,t,e,r,23,4),e+4}function FC(n,t,e,r,i){return t=+t,e>>>=0,i||hT(n,0,e,8),qu.write(n,t,e,r,52,8),e+8}function yw(n,t){var e;t=t||1/0;for(var r=n.length,i=null,o=[],s=0;s<r;++s){if((e=n.charCodeAt(s))>55295&&e<57344){if(!i){if(e>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(t-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((t-=1)<0)break;o.push(e)}else if(e<2048){if((t-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((t-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function fT(n){return gw.toByteArray((function(t){if((t=(t=t.split("=")[0]).trim().replace(IF,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t})(n))}function x0(n,t,e,r){for(var i=0;i<r&&!(i+e>=t.length||i>=n.length);++i)t[i+e]=n[i];return i}function lo(n,t){return n instanceof t||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===t.name}function Aw(n){return n!=n}function MC(n,t){for(var e in n)t[e]=n[e]}function $l(n,t,e){return ys(n,t,e)}function Dd(n){var t;switch(this.encoding=(function(e){var r=(function(i){if(!i)return"utf8";for(var o;;)switch(i){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return i;default:if(o)return;i=(""+i).toLowerCase(),o=!0}})(e);if(typeof r!="string"&&(bw.isEncoding===UC||!UC(e)))throw new Error("Unknown encoding: "+e);return r||e})(n),this.encoding){case"utf16le":this.text=kF,this.end=BF,t=4;break;case"utf8":this.fillLast=PF,t=4;break;case"base64":this.text=LF,this.end=FF,t=3;break;default:return this.write=MF,this.end=UF,void 0}this.lastNeed=0,this.lastTotal=0,this.lastChar=bw.allocUnsafe(t)}function Zb(n){return n<=127?0:n>>5==6?2:n>>4==14?3:n>>3==30?4:n>>6==2?-1:-2}function PF(n){var t=this.lastTotal-this.lastNeed,e=(function(r,i,o){if((192&i[0])!=128)return r.lastNeed=0,"\uFFFD";if(r.lastNeed>1&&i.length>1){if((192&i[1])!=128)return r.lastNeed=1,"\uFFFD";if(r.lastNeed>2&&i.length>2&&(192&i[2])!=128)return r.lastNeed=2,"\uFFFD"}})(this,n);return e!==void 0?e:this.lastNeed<=n.length?(n.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(n.copy(this.lastChar,t,0,n.length),this.lastNeed-=n.length,void 0)}function kF(n,t){if((n.length-t)%2==0){var e=n.toString("utf16le",t);if(e){var r=e.charCodeAt(e.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=n[n.length-2],this.lastChar[1]=n[n.length-1],e.slice(0,-1)}return e}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=n[n.length-1],n.toString("utf16le",t,n.length-1)}function BF(n){var t=n&&n.length?this.write(n):"";if(this.lastNeed){var e=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,e)}return t}function LF(n,t){var e=(n.length-t)%3;return e===0?n.toString("base64",t):(this.lastNeed=3-e,this.lastTotal=3,e===1?this.lastChar[0]=n[n.length-1]:(this.lastChar[0]=n[n.length-2],this.lastChar[1]=n[n.length-1]),n.toString("base64",t,n.length-e))}function FF(n){var t=n&&n.length?this.write(n):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function MF(n){return n.toString(this.encoding)}function UF(n){return n&&n.length?this.write(n):""}function jF(){if(jC)return Rd;jC=!0,Rd.byteLength=a,Rd.toByteArray=u,Rd.fromByteArray=g;for(var n=[],t=[],e=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)n[i]=r[i],t[r.charCodeAt(i)]=i;t[45]=62,t[95]=63;function s(m){var y=m.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=m.indexOf("=");b===-1&&(b=y);var v=b===y?0:4-b%4;return[b,v]}function a(m){var y=s(m),b=y[0],v=y[1];return(b+v)*3/4-v}function c(m,y,b){return(y+b)*3/4-b}function u(m){var y,b=s(m),v=b[0],w=b[1],x=new e(c(m,v,w)),E=0,D=w>0?v-4:v,_;for(_=0;_<D;_+=4)y=t[m.charCodeAt(_)]<<18|t[m.charCodeAt(_+1)]<<12|t[m.charCodeAt(_+2)]<<6|t[m.charCodeAt(_+3)],x[E++]=y>>16&255,x[E++]=y>>8&255,x[E++]=y&255;return w===2&&(y=t[m.charCodeAt(_)]<<2|t[m.charCodeAt(_+1)]>>4,x[E++]=y&255),w===1&&(y=t[m.charCodeAt(_)]<<10|t[m.charCodeAt(_+1)]<<4|t[m.charCodeAt(_+2)]>>2,x[E++]=y>>8&255,x[E++]=y&255),x}function h(m){return n[m>>18&63]+n[m>>12&63]+n[m>>6&63]+n[m&63]}function f(m,y,b){for(var v,w=[],x=y;x<b;x+=3)v=(m[x]<<16&16711680)+(m[x+1]<<8&65280)+(m[x+2]&255),w.push(h(v));return w.join("")}function g(m){for(var y,b=m.length,v=b%3,w=[],x=16383,E=0,D=b-v;E<D;E+=x)w.push(f(m,E,E+x>D?D:E+x));return v===1?(y=m[b-1],w.push(n[y>>2]+n[y<<4&63]+"==")):v===2&&(y=(m[b-2]<<8)+m[b-1],w.push(n[y>>10]+n[y>>4&63]+n[y<<2&63]+"=")),w.join("")}return Rd}function $F(){if($C)return v0;$C=!0;return v0.read=function(n,t,e,r,i){var o,s,a=i*8-r-1,c=(1<<a)-1,u=c>>1,h=-7,f=e?i-1:0,g=e?-1:1,m=n[t+f];for(f+=g,o=m&(1<<-h)-1,m>>=-h,h+=a;h>0;o=o*256+n[t+f],f+=g,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;h>0;s=s*256+n[t+f],f+=g,h-=8);if(o===0)o=1-u;else{if(o===c)return s?NaN:(m?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-u}return(m?-1:1)*s*Math.pow(2,o-r)},v0.write=function(n,t,e,r,i,o){var s,a,c,u=o*8-i-1,h=(1<<u)-1,f=h>>1,g=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=r?0:o-1,y=r?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+f>=1?t+=g/c:t+=g*Math.pow(2,1-f),t*c>=2&&(s++,c/=2),s+f>=h?(a=0,s=h):s+f>=1?(a=(t*c-1)*Math.pow(2,i),s=s+f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;n[e+m]=a&255,m+=y,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;n[e+m]=s&255,m+=y,s/=256,u-=8);n[e+m-y]|=b*128},v0}function qF(){if(qC)return ql;qC=!0;let n=jF(),t=$F(),e=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;ql.Buffer=s,ql.SlowBuffer=w,ql.INSPECT_MAX_BYTES=50;let r=2147483647;ql.kMaxLength=r,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let A=new Uint8Array(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(A,p),A.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(A){if(A>r)throw new RangeError('The value "'+A+'" is invalid for option "size"');let p=new Uint8Array(A);return Object.setPrototypeOf(p,s.prototype),p}function s(A,p,d){if(typeof A=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(A)}return a(A,p,d)}s.poolSize=8192;function a(A,p,d){if(typeof A=="string")return f(A,p);if(ArrayBuffer.isView(A))return m(A);if(A==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A);if(Ft(A,ArrayBuffer)||A&&Ft(A.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ft(A,SharedArrayBuffer)||A&&Ft(A.buffer,SharedArrayBuffer)))return y(A,p,d);if(typeof A=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let S=A.valueOf&&A.valueOf();if(S!=null&&S!==A)return s.from(S,p,d);let M=b(A);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof A[Symbol.toPrimitive]=="function")return s.from(A[Symbol.toPrimitive]("string"),p,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A)}s.from=function(A,p,d){return a(A,p,d)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function c(A){if(typeof A!="number")throw new TypeError('"size" argument must be of type number');if(A<0)throw new RangeError('The value "'+A+'" is invalid for option "size"')}function u(A,p,d){return c(A),A<=0?o(A):p!==void 0?typeof d=="string"?o(A).fill(p,d):o(A).fill(p):o(A)}s.alloc=function(A,p,d){return u(A,p,d)};function h(A){return c(A),o(A<0?0:v(A)|0)}s.allocUnsafe=function(A){return h(A)},s.allocUnsafeSlow=function(A){return h(A)};function f(A,p){if((typeof p!="string"||p==="")&&(p="utf8"),!s.isEncoding(p))throw new TypeError("Unknown encoding: "+p);let d=x(A,p)|0,S=o(d),M=S.write(A,p);return M!==d&&(S=S.slice(0,M)),S}function g(A){let p=A.length<0?0:v(A.length)|0,d=o(p);for(let S=0;S<p;S+=1)d[S]=A[S]&255;return d}function m(A){if(Ft(A,Uint8Array)){let p=new Uint8Array(A);return y(p.buffer,p.byteOffset,p.byteLength)}return g(A)}function y(A,p,d){if(p<0||A.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(A.byteLength<p+(d||0))throw new RangeError('"length" is outside of buffer bounds');let S;return p===void 0&&d===void 0?S=new Uint8Array(A):d===void 0?S=new Uint8Array(A,p):S=new Uint8Array(A,p,d),Object.setPrototypeOf(S,s.prototype),S}function b(A){if(s.isBuffer(A)){let p=v(A.length)|0,d=o(p);return d.length===0||A.copy(d,0,0,p),d}if(A.length!==void 0)return typeof A.length!="number"||Xt(A.length)?o(0):g(A);if(A.type==="Buffer"&&Array.isArray(A.data))return g(A.data)}function v(A){if(A>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return A|0}function w(A){return+A!=A&&(A=0),s.alloc(+A)}s.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==s.prototype},s.compare=function(p,d){if(Ft(p,Uint8Array)&&(p=s.from(p,p.offset,p.byteLength)),Ft(d,Uint8Array)&&(d=s.from(d,d.offset,d.byteLength)),!s.isBuffer(p)||!s.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===d)return 0;let S=p.length,M=d.length;for(let G=0,Q=Math.min(S,M);G<Q;++G)if(p[G]!==d[G]){S=p[G],M=d[G];break}return S<M?-1:M<S?1:0},s.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(p,d){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return s.alloc(0);let S;if(d===void 0)for(d=0,S=0;S<p.length;++S)d+=p[S].length;let M=s.allocUnsafe(d),G=0;for(S=0;S<p.length;++S){let Q=p[S];if(Ft(Q,Uint8Array))G+Q.length>M.length?(s.isBuffer(Q)||(Q=s.from(Q)),Q.copy(M,G)):Uint8Array.prototype.set.call(M,Q,G);else if(s.isBuffer(Q))Q.copy(M,G);else throw new TypeError('"list" argument must be an Array of Buffers');G+=Q.length}return M};function x(A,p){if(s.isBuffer(A))return A.length;if(ArrayBuffer.isView(A)||Ft(A,ArrayBuffer))return A.byteLength;if(typeof A!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof A);let d=A.length,S=arguments.length>2&&arguments[2]===!0;if(!S&&d===0)return 0;let M=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return _t(A).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return Rt(A).length;default:if(M)return S?-1:_t(A).length;p=(""+p).toLowerCase(),M=!0}}s.byteLength=x;function E(A,p,d){let S=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,p>>>=0,d<=p))return"";for(A||(A="utf8");;)switch(A){case"hex":return T(this,p,d);case"utf8":case"utf-8":return at(this,p,d);case"ascii":return J(this,p,d);case"latin1":case"binary":return R(this,p,d);case"base64":return lt(this,p,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,p,d);default:if(S)throw new TypeError("Unknown encoding: "+A);A=(A+"").toLowerCase(),S=!0}}s.prototype._isBuffer=!0;function D(A,p,d){let S=A[p];A[p]=A[d],A[d]=S}s.prototype.swap16=function(){let p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<p;d+=2)D(this,d,d+1);return this},s.prototype.swap32=function(){let p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<p;d+=4)D(this,d,d+3),D(this,d+1,d+2);return this},s.prototype.swap64=function(){let p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<p;d+=8)D(this,d,d+7),D(this,d+1,d+6),D(this,d+2,d+5),D(this,d+3,d+4);return this},s.prototype.toString=function(){let p=this.length;return p===0?"":arguments.length===0?at(this,0,p):E.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(p){if(!s.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:s.compare(this,p)===0},s.prototype.inspect=function(){let p="",d=ql.INSPECT_MAX_BYTES;return p=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(p+=" ... "),"<Buffer "+p+">"},e&&(s.prototype[e]=s.prototype.inspect),s.prototype.compare=function(p,d,S,M,G){if(Ft(p,Uint8Array)&&(p=s.from(p,p.offset,p.byteLength)),!s.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(d===void 0&&(d=0),S===void 0&&(S=p?p.length:0),M===void 0&&(M=0),G===void 0&&(G=this.length),d<0||S>p.length||M<0||G>this.length)throw new RangeError("out of range index");if(M>=G&&d>=S)return 0;if(M>=G)return-1;if(d>=S)return 1;if(d>>>=0,S>>>=0,M>>>=0,G>>>=0,this===p)return 0;let Q=G-M,nt=S-d,ht=Math.min(Q,nt),It=this.slice(M,G),Nt=p.slice(d,S);for(let Ot=0;Ot<ht;++Ot)if(It[Ot]!==Nt[Ot]){Q=It[Ot],nt=Nt[Ot];break}return Q<nt?-1:nt<Q?1:0};function _(A,p,d,S,M){if(A.length===0)return-1;if(typeof d=="string"?(S=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,Xt(d)&&(d=M?0:A.length-1),d<0&&(d=A.length+d),d>=A.length){if(M)return-1;d=A.length-1}else if(d<0)if(M)d=0;else return-1;if(typeof p=="string"&&(p=s.from(p,S)),s.isBuffer(p))return p.length===0?-1:q(A,p,d,S,M);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?M?Uint8Array.prototype.indexOf.call(A,p,d):Uint8Array.prototype.lastIndexOf.call(A,p,d):q(A,[p],d,S,M);throw new TypeError("val must be string, number or Buffer")}function q(A,p,d,S,M){let G=1,Q=A.length,nt=p.length;if(S!==void 0&&(S=String(S).toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(A.length<2||p.length<2)return-1;G=2,Q/=2,nt/=2,d/=2}function ht(Nt,Ot){return G===1?Nt[Ot]:Nt.readUInt16BE(Ot*G)}let It;if(M){let Nt=-1;for(It=d;It<Q;It++)if(ht(A,It)===ht(p,Nt===-1?0:It-Nt)){if(Nt===-1&&(Nt=It),It-Nt+1===nt)return Nt*G}else Nt!==-1&&(It-=It-Nt),Nt=-1}else for(d+nt>Q&&(d=Q-nt),It=d;It>=0;It--){let Nt=!0;for(let Ot=0;Ot<nt;Ot++)if(ht(A,It+Ot)!==ht(p,Ot)){Nt=!1;break}if(Nt)return It}return-1}s.prototype.includes=function(p,d,S){return this.indexOf(p,d,S)!==-1},s.prototype.indexOf=function(p,d,S){return _(this,p,d,S,!0)},s.prototype.lastIndexOf=function(p,d,S){return _(this,p,d,S,!1)};function N(A,p,d,S){d=Number(d)||0;let M=A.length-d;S?(S=Number(S),S>M&&(S=M)):S=M;let G=p.length;S>G/2&&(S=G/2);let Q;for(Q=0;Q<S;++Q){let nt=parseInt(p.substr(Q*2,2),16);if(Xt(nt))return Q;A[d+Q]=nt}return Q}function rt(A,p,d,S){return Ht(_t(p,A.length-d),A,d,S)}function Y(A,p,d,S){return Ht(gt(p),A,d,S)}function et(A,p,d,S){return Ht(Rt(p),A,d,S)}function st(A,p,d,S){return Ht(Et(p,A.length-d),A,d,S)}s.prototype.write=function(p,d,S,M){if(d===void 0)M="utf8",S=this.length,d=0;else if(S===void 0&&typeof d=="string")M=d,S=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(S)?(S=S>>>0,M===void 0&&(M="utf8")):(M=S,S=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let G=this.length-d;if((S===void 0||S>G)&&(S=G),p.length>0&&(S<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");M||(M="utf8");let Q=!1;for(;;)switch(M){case"hex":return N(this,p,d,S);case"utf8":case"utf-8":return rt(this,p,d,S);case"ascii":case"latin1":case"binary":return Y(this,p,d,S);case"base64":return et(this,p,d,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return st(this,p,d,S);default:if(Q)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),Q=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function lt(A,p,d){return p===0&&d===A.length?n.fromByteArray(A):n.fromByteArray(A.slice(p,d))}function at(A,p,d){d=Math.min(A.length,d);let S=[],M=p;for(;M<d;){let G=A[M],Q=null,nt=G>239?4:G>223?3:G>191?2:1;if(M+nt<=d){let ht,It,Nt,Ot;switch(nt){case 1:G<128&&(Q=G);break;case 2:ht=A[M+1],(ht&192)===128&&(Ot=(G&31)<<6|ht&63,Ot>127&&(Q=Ot));break;case 3:ht=A[M+1],It=A[M+2],(ht&192)===128&&(It&192)===128&&(Ot=(G&15)<<12|(ht&63)<<6|It&63,Ot>2047&&(Ot<55296||Ot>57343)&&(Q=Ot));break;case 4:ht=A[M+1],It=A[M+2],Nt=A[M+3],(ht&192)===128&&(It&192)===128&&(Nt&192)===128&&(Ot=(G&15)<<18|(ht&63)<<12|(It&63)<<6|Nt&63,Ot>65535&&Ot<1114112&&(Q=Ot))}}Q===null?(Q=65533,nt=1):Q>65535&&(Q-=65536,S.push(Q>>>10&1023|55296),Q=56320|Q&1023),S.push(Q),M+=nt}return ct(S)}let X=4096;function ct(A){let p=A.length;if(p<=X)return String.fromCharCode.apply(String,A);let d="",S=0;for(;S<p;)d+=String.fromCharCode.apply(String,A.slice(S,S+=X));return d}function J(A,p,d){let S="";d=Math.min(A.length,d);for(let M=p;M<d;++M)S+=String.fromCharCode(A[M]&127);return S}function R(A,p,d){let S="";d=Math.min(A.length,d);for(let M=p;M<d;++M)S+=String.fromCharCode(A[M]);return S}function T(A,p,d){let S=A.length;(!p||p<0)&&(p=0),(!d||d<0||d>S)&&(d=S);let M="";for(let G=p;G<d;++G)M+=Bt[A[G]];return M}function L(A,p,d){let S=A.slice(p,d),M="";for(let G=0;G<S.length-1;G+=2)M+=String.fromCharCode(S[G]+S[G+1]*256);return M}s.prototype.slice=function(p,d){let S=this.length;p=~~p,d=d===void 0?S:~~d,p<0?(p+=S,p<0&&(p=0)):p>S&&(p=S),d<0?(d+=S,d<0&&(d=0)):d>S&&(d=S),d<p&&(d=p);let M=this.subarray(p,d);return Object.setPrototypeOf(M,s.prototype),M};function k(A,p,d){if(A%1!==0||A<0)throw new RangeError("offset is not uint");if(A+p>d)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(p,d,S){p=p>>>0,d=d>>>0,S||k(p,d,this.length);let M=this[p],G=1,Q=0;for(;++Q<d&&(G*=256);)M+=this[p+Q]*G;return M},s.prototype.readUintBE=s.prototype.readUIntBE=function(p,d,S){p=p>>>0,d=d>>>0,S||k(p,d,this.length);let M=this[p+--d],G=1;for(;d>0&&(G*=256);)M+=this[p+--d]*G;return M},s.prototype.readUint8=s.prototype.readUInt8=function(p,d){return p=p>>>0,d||k(p,1,this.length),this[p]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(p,d){return p=p>>>0,d||k(p,2,this.length),this[p]|this[p+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(p,d){return p=p>>>0,d||k(p,2,this.length),this[p]<<8|this[p+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(p,d){return p=p>>>0,d||k(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(p,d){return p=p>>>0,d||k(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},s.prototype.readBigUInt64LE=Mt(function(p){p=p>>>0,j(p,"offset");let d=this[p],S=this[p+7];(d===void 0||S===void 0)&&z(p,this.length-8);let M=d+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,G=this[++p]+this[++p]*2**8+this[++p]*2**16+S*2**24;return BigInt(M)+(BigInt(G)<<BigInt(32))}),s.prototype.readBigUInt64BE=Mt(function(p){p=p>>>0,j(p,"offset");let d=this[p],S=this[p+7];(d===void 0||S===void 0)&&z(p,this.length-8);let M=d*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],G=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+S;return(BigInt(M)<<BigInt(32))+BigInt(G)}),s.prototype.readIntLE=function(p,d,S){p=p>>>0,d=d>>>0,S||k(p,d,this.length);let M=this[p],G=1,Q=0;for(;++Q<d&&(G*=256);)M+=this[p+Q]*G;return G*=128,M>=G&&(M-=Math.pow(2,8*d)),M},s.prototype.readIntBE=function(p,d,S){p=p>>>0,d=d>>>0,S||k(p,d,this.length);let M=d,G=1,Q=this[p+--M];for(;M>0&&(G*=256);)Q+=this[p+--M]*G;return G*=128,Q>=G&&(Q-=Math.pow(2,8*d)),Q},s.prototype.readInt8=function(p,d){return p=p>>>0,d||k(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},s.prototype.readInt16LE=function(p,d){p=p>>>0,d||k(p,2,this.length);let S=this[p]|this[p+1]<<8;return S&32768?S|4294901760:S},s.prototype.readInt16BE=function(p,d){p=p>>>0,d||k(p,2,this.length);let S=this[p+1]|this[p]<<8;return S&32768?S|4294901760:S},s.prototype.readInt32LE=function(p,d){return p=p>>>0,d||k(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},s.prototype.readInt32BE=function(p,d){return p=p>>>0,d||k(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},s.prototype.readBigInt64LE=Mt(function(p){p=p>>>0,j(p,"offset");let d=this[p],S=this[p+7];(d===void 0||S===void 0)&&z(p,this.length-8);let M=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(S<<24);return(BigInt(M)<<BigInt(32))+BigInt(d+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),s.prototype.readBigInt64BE=Mt(function(p){p=p>>>0,j(p,"offset");let d=this[p],S=this[p+7];(d===void 0||S===void 0)&&z(p,this.length-8);let M=(d<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(M)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+S)}),s.prototype.readFloatLE=function(p,d){return p=p>>>0,d||k(p,4,this.length),t.read(this,p,!0,23,4)},s.prototype.readFloatBE=function(p,d){return p=p>>>0,d||k(p,4,this.length),t.read(this,p,!1,23,4)},s.prototype.readDoubleLE=function(p,d){return p=p>>>0,d||k(p,8,this.length),t.read(this,p,!0,52,8)},s.prototype.readDoubleBE=function(p,d){return p=p>>>0,d||k(p,8,this.length),t.read(this,p,!1,52,8)};function B(A,p,d,S,M,G){if(!s.isBuffer(A))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>M||p<G)throw new RangeError('"value" argument is out of bounds');if(d+S>A.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(p,d,S,M){if(p=+p,d=d>>>0,S=S>>>0,!M){let nt=Math.pow(2,8*S)-1;B(this,p,d,S,nt,0)}let G=1,Q=0;for(this[d]=p&255;++Q<S&&(G*=256);)this[d+Q]=p/G&255;return d+S},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(p,d,S,M){if(p=+p,d=d>>>0,S=S>>>0,!M){let nt=Math.pow(2,8*S)-1;B(this,p,d,S,nt,0)}let G=S-1,Q=1;for(this[d+G]=p&255;--G>=0&&(Q*=256);)this[d+G]=p/Q&255;return d+S},s.prototype.writeUint8=s.prototype.writeUInt8=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,1,255,0),this[d]=p&255,d+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,2,65535,0),this[d]=p&255,this[d+1]=p>>>8,d+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,2,65535,0),this[d]=p>>>8,this[d+1]=p&255,d+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,4,4294967295,0),this[d+3]=p>>>24,this[d+2]=p>>>16,this[d+1]=p>>>8,this[d]=p&255,d+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,4,4294967295,0),this[d]=p>>>24,this[d+1]=p>>>16,this[d+2]=p>>>8,this[d+3]=p&255,d+4};function $(A,p,d,S,M){mt(p,S,M,A,d,7);let G=Number(p&BigInt(4294967295));A[d++]=G,G=G>>8,A[d++]=G,G=G>>8,A[d++]=G,G=G>>8,A[d++]=G;let Q=Number(p>>BigInt(32)&BigInt(4294967295));return A[d++]=Q,Q=Q>>8,A[d++]=Q,Q=Q>>8,A[d++]=Q,Q=Q>>8,A[d++]=Q,d}function H(A,p,d,S,M){mt(p,S,M,A,d,7);let G=Number(p&BigInt(4294967295));A[d+7]=G,G=G>>8,A[d+6]=G,G=G>>8,A[d+5]=G,G=G>>8,A[d+4]=G;let Q=Number(p>>BigInt(32)&BigInt(4294967295));return A[d+3]=Q,Q=Q>>8,A[d+2]=Q,Q=Q>>8,A[d+1]=Q,Q=Q>>8,A[d]=Q,d+8}s.prototype.writeBigUInt64LE=Mt(function(p,d=0){return $(this,p,d,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Mt(function(p,d=0){return H(this,p,d,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(p,d,S,M){if(p=+p,d=d>>>0,!M){let ht=Math.pow(2,8*S-1);B(this,p,d,S,ht-1,-ht)}let G=0,Q=1,nt=0;for(this[d]=p&255;++G<S&&(Q*=256);)p<0&&nt===0&&this[d+G-1]!==0&&(nt=1),this[d+G]=(p/Q>>0)-nt&255;return d+S},s.prototype.writeIntBE=function(p,d,S,M){if(p=+p,d=d>>>0,!M){let ht=Math.pow(2,8*S-1);B(this,p,d,S,ht-1,-ht)}let G=S-1,Q=1,nt=0;for(this[d+G]=p&255;--G>=0&&(Q*=256);)p<0&&nt===0&&this[d+G+1]!==0&&(nt=1),this[d+G]=(p/Q>>0)-nt&255;return d+S},s.prototype.writeInt8=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,1,127,-128),p<0&&(p=255+p+1),this[d]=p&255,d+1},s.prototype.writeInt16LE=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,2,32767,-32768),this[d]=p&255,this[d+1]=p>>>8,d+2},s.prototype.writeInt16BE=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,2,32767,-32768),this[d]=p>>>8,this[d+1]=p&255,d+2},s.prototype.writeInt32LE=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,4,2147483647,-2147483648),this[d]=p&255,this[d+1]=p>>>8,this[d+2]=p>>>16,this[d+3]=p>>>24,d+4},s.prototype.writeInt32BE=function(p,d,S){return p=+p,d=d>>>0,S||B(this,p,d,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[d]=p>>>24,this[d+1]=p>>>16,this[d+2]=p>>>8,this[d+3]=p&255,d+4},s.prototype.writeBigInt64LE=Mt(function(p,d=0){return $(this,p,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Mt(function(p,d=0){return H(this,p,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function tt(A,p,d,S,M,G){if(d+S>A.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function it(A,p,d,S,M){return p=+p,d=d>>>0,M||tt(A,p,d,4),t.write(A,p,d,S,23,4),d+4}s.prototype.writeFloatLE=function(p,d,S){return it(this,p,d,!0,S)},s.prototype.writeFloatBE=function(p,d,S){return it(this,p,d,!1,S)};function ut(A,p,d,S,M){return p=+p,d=d>>>0,M||tt(A,p,d,8),t.write(A,p,d,S,52,8),d+8}s.prototype.writeDoubleLE=function(p,d,S){return ut(this,p,d,!0,S)},s.prototype.writeDoubleBE=function(p,d,S){return ut(this,p,d,!1,S)},s.prototype.copy=function(p,d,S,M){if(!s.isBuffer(p))throw new TypeError("argument should be a Buffer");if(S||(S=0),!M&&M!==0&&(M=this.length),d>=p.length&&(d=p.length),d||(d=0),M>0&&M<S&&(M=S),M===S||p.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("sourceEnd out of bounds");M>this.length&&(M=this.length),p.length-d<M-S&&(M=p.length-d+S);let G=M-S;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(d,S,M):Uint8Array.prototype.set.call(p,this.subarray(S,M),d),G},s.prototype.fill=function(p,d,S,M){if(typeof p=="string"){if(typeof d=="string"?(M=d,d=0,S=this.length):typeof S=="string"&&(M=S,S=this.length),M!==void 0&&typeof M!="string")throw new TypeError("encoding must be a string");if(typeof M=="string"&&!s.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(p.length===1){let Q=p.charCodeAt(0);(M==="utf8"&&Q<128||M==="latin1")&&(p=Q)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(d<0||this.length<d||this.length<S)throw new RangeError("Out of range index");if(S<=d)return this;d=d>>>0,S=S===void 0?this.length:S>>>0,p||(p=0);let G;if(typeof p=="number")for(G=d;G<S;++G)this[G]=p;else{let Q=s.isBuffer(p)?p:s.from(p,M),nt=Q.length;if(nt===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(G=0;G<S-d;++G)this[G+d]=Q[G%nt]}return this};let V={};function K(A,p,d){V[A]=class extends d{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${A}]`,this.stack,delete this.name}get code(){return A}set code(M){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:M,writable:!0})}toString(){return`${this.name} [${A}]: ${this.message}`}}}K("ERR_BUFFER_OUT_OF_BOUNDS",function(A){return A?`${A} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),K("ERR_INVALID_ARG_TYPE",function(A,p){return`The "${A}" argument must be of type number. Received type ${typeof p}`},TypeError),K("ERR_OUT_OF_RANGE",function(A,p,d){let S=`The value of "${A}" is out of range.`,M=d;return Number.isInteger(d)&&Math.abs(d)>2**32?M=ot(String(d)):typeof d=="bigint"&&(M=String(d),(d>BigInt(2)**BigInt(32)||d<-(BigInt(2)**BigInt(32)))&&(M=ot(M)),M+="n"),S+=` It must be ${p}. Received ${M}`,S},RangeError);function ot(A){let p="",d=A.length,S=A[0]==="-"?1:0;for(;d>=S+4;d-=3)p=`_${A.slice(d-3,d)}${p}`;return`${A.slice(0,d)}${p}`}function yt(A,p,d){j(p,"offset"),(A[p]===void 0||A[p+d]===void 0)&&z(p,A.length-(d+1))}function mt(A,p,d,S,M,G){if(A>d||A<p){let Q=typeof p=="bigint"?"n":"",nt;throw p===0||p===BigInt(0)?nt=`>= 0${Q} and < 2${Q} ** ${(G+1)*8}${Q}`:nt=`>= -(2${Q} ** ${(G+1)*8-1}${Q}) and < 2 ** ${(G+1)*8-1}${Q}`,new V.ERR_OUT_OF_RANGE("value",nt,A)}yt(S,M,G)}function j(A,p){if(typeof A!="number")throw new V.ERR_INVALID_ARG_TYPE(p,"number",A)}function z(A,p,d){throw Math.floor(A)!==A?(j(A,d),new V.ERR_OUT_OF_RANGE("offset","an integer",A)):p<0?new V.ERR_BUFFER_OUT_OF_BOUNDS:new V.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${p}`,A)}let ft=/[^+/0-9A-Za-z-_]/g;function vt(A){if(A=A.split("=")[0],A=A.trim().replace(ft,""),A.length<2)return"";for(;A.length%4!==0;)A=A+"=";return A}function _t(A,p){p=p||1/0;let d,S=A.length,M=null,G=[];for(let Q=0;Q<S;++Q){if(d=A.charCodeAt(Q),d>55295&&d<57344){if(!M){if(d>56319){(p-=3)>-1&&G.push(239,191,189);continue}else if(Q+1===S){(p-=3)>-1&&G.push(239,191,189);continue}M=d;continue}if(d<56320){(p-=3)>-1&&G.push(239,191,189),M=d;continue}d=(M-55296<<10|d-56320)+65536}else M&&(p-=3)>-1&&G.push(239,191,189);if(M=null,d<128){if((p-=1)<0)break;G.push(d)}else if(d<2048){if((p-=2)<0)break;G.push(d>>6|192,d&63|128)}else if(d<65536){if((p-=3)<0)break;G.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((p-=4)<0)break;G.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return G}function gt(A){let p=[];for(let d=0;d<A.length;++d)p.push(A.charCodeAt(d)&255);return p}function Et(A,p){let d,S,M,G=[];for(let Q=0;Q<A.length&&!((p-=2)<0);++Q)d=A.charCodeAt(Q),S=d>>8,M=d%256,G.push(M),G.push(S);return G}function Rt(A){return n.toByteArray(vt(A))}function Ht(A,p,d,S){let M;for(M=0;M<S&&!(M+d>=p.length||M>=A.length);++M)p[M+d]=A[M];return M}function Ft(A,p){return A instanceof p||A!=null&&A.constructor!=null&&A.constructor.name!=null&&A.constructor.name===p.name}function Xt(A){return A!==A}let Bt=(function(){let A="0123456789abcdef",p=new Array(256);for(let d=0;d<16;++d){let S=d*16;for(let M=0;M<16;++M)p[S+M]=A[d]+A[M]}return p})();function Mt(A){return typeof BigInt>"u"?Vt:A}function Vt(){throw new Error("BigInt not supported")}return ql}function Hl(){return zC||(zC=!0,typeof Object.create=="function"?b0=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:b0=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}),b0}function dT(){return HC||(HC=!0,Qb=wr.EventEmitter),Qb}function zF(){if(WC)return tw;WC=!0;function n(g,m){var y=Object.keys(g);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(g);m&&(b=b.filter(function(v){return Object.getOwnPropertyDescriptor(g,v).enumerable})),y.push.apply(y,b)}return y}function t(g){for(var m=1;m<arguments.length;m++){var y=arguments[m]!=null?arguments[m]:{};m%2?n(Object(y),!0).forEach(function(b){e(g,b,y[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(y)):n(Object(y)).forEach(function(b){Object.defineProperty(g,b,Object.getOwnPropertyDescriptor(y,b))})}return g}function e(g,m,y){return m in g?Object.defineProperty(g,m,{value:y,enumerable:!0,configurable:!0,writable:!0}):g[m]=y,g}function r(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function i(g,m){for(var y=0;y<m.length;y++){var b=m[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}function o(g,m,y){return m&&i(g.prototype,m),g}var s=zu,a=s.Buffer,c=St,u=c.inspect,h=u&&u.custom||"inspect";function f(g,m,y){a.prototype.copy.call(g,m,y)}return tw=(function(){function g(){r(this,g),this.head=null,this.tail=null,this.length=0}return o(g,[{key:"push",value:function(y){var b={data:y,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(y){var b={data:y,next:this.head};this.length===0&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(this.length!==0){var y=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,y}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(y){if(this.length===0)return"";for(var b=this.head,v=""+b.data;b=b.next;)v+=y+b.data;return v}},{key:"concat",value:function(y){if(this.length===0)return a.alloc(0);for(var b=a.allocUnsafe(y>>>0),v=this.head,w=0;v;)f(v.data,b,w),w+=v.data.length,v=v.next;return b}},{key:"consume",value:function(y,b){var v;return y<this.head.data.length?(v=this.head.data.slice(0,y),this.head.data=this.head.data.slice(y)):y===this.head.data.length?v=this.shift():v=b?this._getString(y):this._getBuffer(y),v}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(y){var b=this.head,v=1,w=b.data;for(y-=w.length;b=b.next;){var x=b.data,E=y>x.length?x.length:y;if(E===x.length?w+=x:w+=x.slice(0,y),y-=E,y===0){E===x.length?(++v,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=x.slice(E));break}++v}return this.length-=v,w}},{key:"_getBuffer",value:function(y){var b=a.allocUnsafe(y),v=this.head,w=1;for(v.data.copy(b),y-=v.data.length;v=v.next;){var x=v.data,E=y>x.length?x.length:y;if(x.copy(b,b.length-y,0,E),y-=E,y===0){E===x.length?(++w,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=x.slice(E));break}++w}return this.length-=w,b}},{key:h,value:function(y,b){return u(this,t({},b,{depth:0,customInspect:!1}))}}]),g})(),tw}function pT(){if(GC)return ew;GC=!0;var n=be;function t(a,c){var u=this,h=this._readableState&&this._readableState.destroyed,f=this._writableState&&this._writableState.destroyed;return h||f?(c?c(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(o,this,a)):n.nextTick(o,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(g){!c&&g?u._writableState?u._writableState.errorEmitted?n.nextTick(r,u):(u._writableState.errorEmitted=!0,n.nextTick(e,u,g)):n.nextTick(e,u,g):c?(n.nextTick(r,u),c(g)):n.nextTick(r,u)}),this)}function e(a,c){o(a,c),r(a)}function r(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||a.emit("close")}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(a,c){a.emit("error",c)}function s(a,c){var u=a._readableState,h=a._writableState;u&&u.autoDestroy||h&&h.autoDestroy?a.destroy(c):a.emit("error",c)}return ew={destroy:t,undestroy:i,errorOrDestroy:s},ew}function Hu(){if(VC)return rw;VC=!0;let n={};function t(s,a,c){c||(c=Error);function u(f,g,m){return typeof a=="string"?a:a(f,g,m)}class h extends c{constructor(g,m,y){super(u(g,m,y))}}h.prototype.name=c.name,h.prototype.code=s,n[s]=h}function e(s,a){if(Array.isArray(s)){let c=s.length;return s=s.map(u=>String(u)),c>2?`one of ${a} ${s.slice(0,c-1).join(", ")}, or `+s[c-1]:c===2?`one of ${a} ${s[0]} or ${s[1]}`:`of ${a} ${s[0]}`}else return`of ${a} ${String(s)}`}function r(s,a,c){return s.substr(0,a.length)===a}function i(s,a,c){return(c===void 0||c>s.length)&&(c=s.length),s.substring(c-a.length,c)===a}function o(s,a,c){return typeof c!="number"&&(c=0),c+a.length>s.length?!1:s.indexOf(a,c)!==-1}return t("ERR_INVALID_OPT_VALUE",function(s,a){return'The value "'+a+'" is invalid for option "'+s+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(s,a,c){let u;typeof a=="string"&&r(a,"not ")?(u="must not be",a=a.replace(/^not /,"")):u="must be";let h;if(i(s," argument"))h=`The ${s} ${u} ${e(a,"type")}`;else{let f=o(s,".")?"property":"argument";h=`The "${s}" ${f} ${u} ${e(a,"type")}`}return h+=`. Received type ${typeof c}`,h},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(s){return"The "+s+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(s){return"Cannot call "+s+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(s){return"Unknown encoding: "+s},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),rw.codes=n,rw}function gT(){if(XC)return nw;XC=!0;var n=Hu().codes.ERR_INVALID_OPT_VALUE;function t(r,i,o){return r.highWaterMark!=null?r.highWaterMark:i?r[o]:null}function e(r,i,o,s){var a=t(i,s,o);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var c=s?o:"highWaterMark";throw new n(c,a)}return Math.floor(a)}return r.objectMode?16:16*1024}return nw={getHighWaterMark:e},nw}function HF(){if(YC)return iw;YC=!0,iw=n;function n(e,r){if(t("noDeprecation"))return e;var i=!1;function o(){if(!i){if(t("throwDeprecation"))throw new Error(r);t("traceDeprecation")?console.trace(r):console.warn(r),i=!0}return e.apply(this||sw,arguments)}return o}function t(e){try{if(!sw.localStorage)return!1}catch{return!1}var r=sw.localStorage[e];return r==null?!1:String(r).toLowerCase()==="true"}return iw}function xw(){if(KC)return ow;KC=!0;var n=be;ow=Y;function t(V){var K=this;this.next=null,this.entry=null,this.finish=function(){ut(K,V)}}var e;Y.WritableState=N;var r={deprecate:HF()},i=dT(),o=zu.Buffer,s=WF.Uint8Array||function(){};function a(V){return o.from(V)}function c(V){return o.isBuffer(V)||V instanceof s}var u=pT(),h=gT(),f=h.getHighWaterMark,g=Hu().codes,m=g.ERR_INVALID_ARG_TYPE,y=g.ERR_METHOD_NOT_IMPLEMENTED,b=g.ERR_MULTIPLE_CALLBACK,v=g.ERR_STREAM_CANNOT_PIPE,w=g.ERR_STREAM_DESTROYED,x=g.ERR_STREAM_NULL_VALUES,E=g.ERR_STREAM_WRITE_AFTER_END,D=g.ERR_UNKNOWN_ENCODING,_=u.errorOrDestroy;Hl()(Y,i);function q(){}function N(V,K,ot){e=e||zl(),V=V||{},typeof ot!="boolean"&&(ot=K instanceof e),this.objectMode=!!V.objectMode,ot&&(this.objectMode=this.objectMode||!!V.writableObjectMode),this.highWaterMark=f(this,V,"writableHighWaterMark",ot),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var yt=V.decodeStrings===!1;this.decodeStrings=!yt,this.defaultEncoding=V.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(mt){R(K,mt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=V.emitClose!==!1,this.autoDestroy=!!V.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}N.prototype.getBuffer=function(){for(var K=this.bufferedRequest,ot=[];K;)ot.push(K),K=K.next;return ot},(function(){try{Object.defineProperty(N.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var rt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(rt=Function.prototype[Symbol.hasInstance],Object.defineProperty(Y,Symbol.hasInstance,{value:function(K){return rt.call(this,K)?!0:this!==Y?!1:K&&K._writableState instanceof N}})):rt=function(K){return K instanceof this};function Y(V){e=e||zl();var K=this instanceof e;if(!K&&!rt.call(Y,this))return new Y(V);this._writableState=new N(V,this,K),this.writable=!0,V&&(typeof V.write=="function"&&(this._write=V.write),typeof V.writev=="function"&&(this._writev=V.writev),typeof V.destroy=="function"&&(this._destroy=V.destroy),typeof V.final=="function"&&(this._final=V.final)),i.call(this)}Y.prototype.pipe=function(){_(this,new v)};function et(V,K){var ot=new E;_(V,ot),n.nextTick(K,ot)}function st(V,K,ot,yt){var mt;return ot===null?mt=new x:typeof ot!="string"&&!K.objectMode&&(mt=new m("chunk",["string","Buffer"],ot)),mt?(_(V,mt),n.nextTick(yt,mt),!1):!0}Y.prototype.write=function(V,K,ot){var yt=this._writableState,mt=!1,j=!yt.objectMode&&c(V);return j&&!o.isBuffer(V)&&(V=a(V)),typeof K=="function"&&(ot=K,K=null),j?K="buffer":K||(K=yt.defaultEncoding),typeof ot!="function"&&(ot=q),yt.ending?et(this,ot):(j||st(this,yt,V,ot))&&(yt.pendingcb++,mt=at(this,yt,j,V,K,ot)),mt},Y.prototype.cork=function(){this._writableState.corked++},Y.prototype.uncork=function(){var V=this._writableState;V.corked&&(V.corked--,!V.writing&&!V.corked&&!V.bufferProcessing&&V.bufferedRequest&&k(this,V))},Y.prototype.setDefaultEncoding=function(K){if(typeof K=="string"&&(K=K.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((K+"").toLowerCase())>-1))throw new D(K);return this._writableState.defaultEncoding=K,this},Object.defineProperty(Y.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function lt(V,K,ot){return!V.objectMode&&V.decodeStrings!==!1&&typeof K=="string"&&(K=o.from(K,ot)),K}Object.defineProperty(Y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function at(V,K,ot,yt,mt,j){if(!ot){var z=lt(K,yt,mt);yt!==z&&(ot=!0,mt="buffer",yt=z)}var ft=K.objectMode?1:yt.length;K.length+=ft;var vt=K.length<K.highWaterMark;if(vt||(K.needDrain=!0),K.writing||K.corked){var _t=K.lastBufferedRequest;K.lastBufferedRequest={chunk:yt,encoding:mt,isBuf:ot,callback:j,next:null},_t?_t.next=K.lastBufferedRequest:K.bufferedRequest=K.lastBufferedRequest,K.bufferedRequestCount+=1}else X(V,K,!1,ft,yt,mt,j);return vt}function X(V,K,ot,yt,mt,j,z){K.writelen=yt,K.writecb=z,K.writing=!0,K.sync=!0,K.destroyed?K.onwrite(new w("write")):ot?V._writev(mt,K.onwrite):V._write(mt,j,K.onwrite),K.sync=!1}function ct(V,K,ot,yt,mt){--K.pendingcb,ot?(n.nextTick(mt,yt),n.nextTick(tt,V,K),V._writableState.errorEmitted=!0,_(V,yt)):(mt(yt),V._writableState.errorEmitted=!0,_(V,yt),tt(V,K))}function J(V){V.writing=!1,V.writecb=null,V.length-=V.writelen,V.writelen=0}function R(V,K){var ot=V._writableState,yt=ot.sync,mt=ot.writecb;if(typeof mt!="function")throw new b;if(J(ot),K)ct(V,ot,yt,K,mt);else{var j=B(ot)||V.destroyed;!j&&!ot.corked&&!ot.bufferProcessing&&ot.bufferedRequest&&k(V,ot),yt?n.nextTick(T,V,ot,j,mt):T(V,ot,j,mt)}}function T(V,K,ot,yt){ot||L(V,K),K.pendingcb--,yt(),tt(V,K)}function L(V,K){K.length===0&&K.needDrain&&(K.needDrain=!1,V.emit("drain"))}function k(V,K){K.bufferProcessing=!0;var ot=K.bufferedRequest;if(V._writev&&ot&&ot.next){var yt=K.bufferedRequestCount,mt=new Array(yt),j=K.corkedRequestsFree;j.entry=ot;for(var z=0,ft=!0;ot;)mt[z]=ot,ot.isBuf||(ft=!1),ot=ot.next,z+=1;mt.allBuffers=ft,X(V,K,!0,K.length,mt,"",j.finish),K.pendingcb++,K.lastBufferedRequest=null,j.next?(K.corkedRequestsFree=j.next,j.next=null):K.corkedRequestsFree=new t(K),K.bufferedRequestCount=0}else{for(;ot;){var vt=ot.chunk,_t=ot.encoding,gt=ot.callback,Et=K.objectMode?1:vt.length;if(X(V,K,!1,Et,vt,_t,gt),ot=ot.next,K.bufferedRequestCount--,K.writing)break}ot===null&&(K.lastBufferedRequest=null)}K.bufferedRequest=ot,K.bufferProcessing=!1}Y.prototype._write=function(V,K,ot){ot(new y("_write()"))},Y.prototype._writev=null,Y.prototype.end=function(V,K,ot){var yt=this._writableState;return typeof V=="function"?(ot=V,V=null,K=null):typeof K=="function"&&(ot=K,K=null),V!=null&&this.write(V,K),yt.corked&&(yt.corked=1,this.uncork()),yt.ending||it(this,yt,ot),this},Object.defineProperty(Y.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function B(V){return V.ending&&V.length===0&&V.bufferedRequest===null&&!V.finished&&!V.writing}function $(V,K){V._final(function(ot){K.pendingcb--,ot&&_(V,ot),K.prefinished=!0,V.emit("prefinish"),tt(V,K)})}function H(V,K){!K.prefinished&&!K.finalCalled&&(typeof V._final=="function"&&!K.destroyed?(K.pendingcb++,K.finalCalled=!0,n.nextTick($,V,K)):(K.prefinished=!0,V.emit("prefinish")))}function tt(V,K){var ot=B(K);if(ot&&(H(V,K),K.pendingcb===0&&(K.finished=!0,V.emit("finish"),K.autoDestroy))){var yt=V._readableState;(!yt||yt.autoDestroy&&yt.endEmitted)&&V.destroy()}return ot}function it(V,K,ot){K.ending=!0,tt(V,K),ot&&(K.finished?n.nextTick(ot):V.once("finish",ot)),K.ended=!0,V.writable=!1}function ut(V,K,ot){var yt=V.entry;for(V.entry=null;yt;){var mt=yt.callback;K.pendingcb--,mt(ot),yt=yt.next}K.corkedRequestsFree.next=V}return Object.defineProperty(Y.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(K){this._writableState&&(this._writableState.destroyed=K)}}),Y.prototype.destroy=u.destroy,Y.prototype._undestroy=u.undestroy,Y.prototype._destroy=function(V,K){K(V)},ow}function zl(){if(JC)return aw;JC=!0;var n=be,t=Object.keys||function(h){var f=[];for(var g in h)f.push(g);return f};aw=a;var e=Ew(),r=xw();Hl()(a,e);for(var i=t(r.prototype),o=0;o<i.length;o++){var s=i[o];a.prototype[s]||(a.prototype[s]=r.prototype[s])}function a(h){if(!(this instanceof a))return new a(h);e.call(this,h),r.call(this,h),this.allowHalfOpen=!0,h&&(h.readable===!1&&(this.readable=!1),h.writable===!1&&(this.writable=!1),h.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",c)))}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function c(){this._writableState.ended||n.nextTick(u,this)}function u(h){h.end()}return Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(f){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=f,this._writableState.destroyed=f)}}),aw}function E0(){if(ZC)return lw;ZC=!0;var n=Hu().codes.ERR_STREAM_PREMATURE_CLOSE;function t(o){var s=!1;return function(){if(!s){s=!0;for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];o.apply(this,c)}}}function e(){}function r(o){return o.setHeader&&typeof o.abort=="function"}function i(o,s,a){if(typeof s=="function")return i(o,null,s);s||(s={}),a=t(a||e);var c=s.readable||s.readable!==!1&&o.readable,u=s.writable||s.writable!==!1&&o.writable,h=function(){o.writable||g()},f=o._writableState&&o._writableState.finished,g=function(){u=!1,f=!0,c||a.call(o)},m=o._readableState&&o._readableState.endEmitted,y=function(){c=!1,m=!0,u||a.call(o)},b=function(E){a.call(o,E)},v=function(){var E;if(c&&!m)return(!o._readableState||!o._readableState.ended)&&(E=new n),a.call(o,E);if(u&&!f)return(!o._writableState||!o._writableState.ended)&&(E=new n),a.call(o,E)},w=function(){o.req.on("finish",g)};return r(o)?(o.on("complete",g),o.on("abort",v),o.req?w():o.on("request",w)):u&&!o._writableState&&(o.on("end",h),o.on("close",h)),o.on("end",y),o.on("finish",g),s.error!==!1&&o.on("error",b),o.on("close",v),function(){o.removeListener("complete",g),o.removeListener("abort",v),o.removeListener("request",w),o.req&&o.req.removeListener("finish",g),o.removeListener("end",h),o.removeListener("close",h),o.removeListener("finish",g),o.removeListener("end",y),o.removeListener("error",b),o.removeListener("close",v)}}return lw=i,lw}function GF(){if(QC)return cw;QC=!0;var n=be,t;function e(x,E,D){return E in x?Object.defineProperty(x,E,{value:D,enumerable:!0,configurable:!0,writable:!0}):x[E]=D,x}var r=E0(),i=Symbol("lastResolve"),o=Symbol("lastReject"),s=Symbol("error"),a=Symbol("ended"),c=Symbol("lastPromise"),u=Symbol("handlePromise"),h=Symbol("stream");function f(x,E){return{value:x,done:E}}function g(x){var E=x[i];if(E!==null){var D=x[h].read();D!==null&&(x[c]=null,x[i]=null,x[o]=null,E(f(D,!1)))}}function m(x){n.nextTick(g,x)}function y(x,E){return function(D,_){x.then(function(){if(E[a]){D(f(void 0,!0));return}E[u](D,_)},_)}}var b=Object.getPrototypeOf(function(){}),v=Object.setPrototypeOf((t={get stream(){return this[h]},next:function(){var E=this,D=this[s];if(D!==null)return Promise.reject(D);if(this[a])return Promise.resolve(f(void 0,!0));if(this[h].destroyed)return new Promise(function(rt,Y){n.nextTick(function(){E[s]?Y(E[s]):rt(f(void 0,!0))})});var _=this[c],q;if(_)q=new Promise(y(_,this));else{var N=this[h].read();if(N!==null)return Promise.resolve(f(N,!1));q=new Promise(this[u])}return this[c]=q,q}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var E=this;return new Promise(function(D,_){E[h].destroy(null,function(q){if(q){_(q);return}D(f(void 0,!0))})})}),t),b),w=function(E){var D,_=Object.create(v,(D={},e(D,h,{value:E,writable:!0}),e(D,i,{value:null,writable:!0}),e(D,o,{value:null,writable:!0}),e(D,s,{value:null,writable:!0}),e(D,a,{value:E._readableState.endEmitted,writable:!0}),e(D,u,{value:function(N,rt){var Y=_[h].read();Y?(_[c]=null,_[i]=null,_[o]=null,N(f(Y,!1))):(_[i]=N,_[o]=rt)},writable:!0}),D));return _[c]=null,r(E,function(q){if(q&&q.code!=="ERR_STREAM_PREMATURE_CLOSE"){var N=_[o];N!==null&&(_[c]=null,_[i]=null,_[o]=null,N(q)),_[s]=q;return}var rt=_[i];rt!==null&&(_[c]=null,_[i]=null,_[o]=null,rt(f(void 0,!0))),_[a]=!0}),E.on("readable",m.bind(null,_)),_};return cw=w,cw}function VF(){return tT||(tT=!0,uw=function(){throw new Error("Readable.from is not available in the browser")}),uw}function Ew(){if(eT)return hw;eT=!0;var n=be;hw=et;var t;et.ReadableState=Y,wr.EventEmitter;var e=function(z,ft){return z.listeners(ft).length},r=dT(),i=zu.Buffer,o=XF.Uint8Array||function(){};function s(j){return i.from(j)}function a(j){return i.isBuffer(j)||j instanceof o}var c=St,u;c&&c.debuglog?u=c.debuglog("stream"):u=function(){};var h=zF(),f=pT(),g=gT(),m=g.getHighWaterMark,y=Hu().codes,b=y.ERR_INVALID_ARG_TYPE,v=y.ERR_STREAM_PUSH_AFTER_EOF,w=y.ERR_METHOD_NOT_IMPLEMENTED,x=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,E,D,_;Hl()(et,r);var q=f.errorOrDestroy,N=["error","close","destroy","pause","resume"];function rt(j,z,ft){if(typeof j.prependListener=="function")return j.prependListener(z,ft);!j._events||!j._events[z]?j.on(z,ft):Array.isArray(j._events[z])?j._events[z].unshift(ft):j._events[z]=[ft,j._events[z]]}function Y(j,z,ft){t=t||zl(),j=j||{},typeof ft!="boolean"&&(ft=z instanceof t),this.objectMode=!!j.objectMode,ft&&(this.objectMode=this.objectMode||!!j.readableObjectMode),this.highWaterMark=m(this,j,"readableHighWaterMark",ft),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=j.emitClose!==!1,this.autoDestroy=!!j.autoDestroy,this.destroyed=!1,this.defaultEncoding=j.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,j.encoding&&(E||(E=vw.StringDecoder),this.decoder=new E(j.encoding),this.encoding=j.encoding)}function et(j){if(t=t||zl(),!(this instanceof et))return new et(j);var z=this instanceof t;this._readableState=new Y(j,this,z),this.readable=!0,j&&(typeof j.read=="function"&&(this._read=j.read),typeof j.destroy=="function"&&(this._destroy=j.destroy)),r.call(this)}Object.defineProperty(et.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(z){this._readableState&&(this._readableState.destroyed=z)}}),et.prototype.destroy=f.destroy,et.prototype._undestroy=f.undestroy,et.prototype._destroy=function(j,z){z(j)},et.prototype.push=function(j,z){var ft=this._readableState,vt;return ft.objectMode?vt=!0:typeof j=="string"&&(z=z||ft.defaultEncoding,z!==ft.encoding&&(j=i.from(j,z),z=""),vt=!0),st(this,j,z,!1,vt)},et.prototype.unshift=function(j){return st(this,j,null,!0,!1)};function st(j,z,ft,vt,_t){u("readableAddChunk",z);var gt=j._readableState;if(z===null)gt.reading=!1,R(j,gt);else{var Et;if(_t||(Et=at(gt,z)),Et)q(j,Et);else if(gt.objectMode||z&&z.length>0)if(typeof z!="string"&&!gt.objectMode&&Object.getPrototypeOf(z)!==i.prototype&&(z=s(z)),vt)gt.endEmitted?q(j,new x):lt(j,gt,z,!0);else if(gt.ended)q(j,new v);else{if(gt.destroyed)return!1;gt.reading=!1,gt.decoder&&!ft?(z=gt.decoder.write(z),gt.objectMode||z.length!==0?lt(j,gt,z,!1):k(j,gt)):lt(j,gt,z,!1)}else vt||(gt.reading=!1,k(j,gt))}return!gt.ended&&(gt.length<gt.highWaterMark||gt.length===0)}function lt(j,z,ft,vt){z.flowing&&z.length===0&&!z.sync?(z.awaitDrain=0,j.emit("data",ft)):(z.length+=z.objectMode?1:ft.length,vt?z.buffer.unshift(ft):z.buffer.push(ft),z.needReadable&&T(j)),k(j,z)}function at(j,z){var ft;return!a(z)&&typeof z!="string"&&z!==void 0&&!j.objectMode&&(ft=new b("chunk",["string","Buffer","Uint8Array"],z)),ft}et.prototype.isPaused=function(){return this._readableState.flowing===!1},et.prototype.setEncoding=function(j){E||(E=vw.StringDecoder);var z=new E(j);this._readableState.decoder=z,this._readableState.encoding=this._readableState.decoder.encoding;for(var ft=this._readableState.buffer.head,vt="";ft!==null;)vt+=z.write(ft.data),ft=ft.next;return this._readableState.buffer.clear(),vt!==""&&this._readableState.buffer.push(vt),this._readableState.length=vt.length,this};var X=1073741824;function ct(j){return j>=X?j=X:(j--,j|=j>>>1,j|=j>>>2,j|=j>>>4,j|=j>>>8,j|=j>>>16,j++),j}function J(j,z){return j<=0||z.length===0&&z.ended?0:z.objectMode?1:j!==j?z.flowing&&z.length?z.buffer.head.data.length:z.length:(j>z.highWaterMark&&(z.highWaterMark=ct(j)),j<=z.length?j:z.ended?z.length:(z.needReadable=!0,0))}et.prototype.read=function(j){u("read",j),j=parseInt(j,10);var z=this._readableState,ft=j;if(j!==0&&(z.emittedReadable=!1),j===0&&z.needReadable&&((z.highWaterMark!==0?z.length>=z.highWaterMark:z.length>0)||z.ended))return u("read: emitReadable",z.length,z.ended),z.length===0&&z.ended?ot(this):T(this),null;if(j=J(j,z),j===0&&z.ended)return z.length===0&&ot(this),null;var vt=z.needReadable;u("need readable",vt),(z.length===0||z.length-j<z.highWaterMark)&&(vt=!0,u("length less than watermark",vt)),z.ended||z.reading?(vt=!1,u("reading or ended",vt)):vt&&(u("do read"),z.reading=!0,z.sync=!0,z.length===0&&(z.needReadable=!0),this._read(z.highWaterMark),z.sync=!1,z.reading||(j=J(ft,z)));var _t;return j>0?_t=K(j,z):_t=null,_t===null?(z.needReadable=z.length<=z.highWaterMark,j=0):(z.length-=j,z.awaitDrain=0),z.length===0&&(z.ended||(z.needReadable=!0),ft!==j&&z.ended&&ot(this)),_t!==null&&this.emit("data",_t),_t};function R(j,z){if(u("onEofChunk"),!z.ended){if(z.decoder){var ft=z.decoder.end();ft&&ft.length&&(z.buffer.push(ft),z.length+=z.objectMode?1:ft.length)}z.ended=!0,z.sync?T(j):(z.needReadable=!1,z.emittedReadable||(z.emittedReadable=!0,L(j)))}}function T(j){var z=j._readableState;u("emitReadable",z.needReadable,z.emittedReadable),z.needReadable=!1,z.emittedReadable||(u("emitReadable",z.flowing),z.emittedReadable=!0,n.nextTick(L,j))}function L(j){var z=j._readableState;u("emitReadable_",z.destroyed,z.length,z.ended),!z.destroyed&&(z.length||z.ended)&&(j.emit("readable"),z.emittedReadable=!1),z.needReadable=!z.flowing&&!z.ended&&z.length<=z.highWaterMark,V(j)}function k(j,z){z.readingMore||(z.readingMore=!0,n.nextTick(B,j,z))}function B(j,z){for(;!z.reading&&!z.ended&&(z.length<z.highWaterMark||z.flowing&&z.length===0);){var ft=z.length;if(u("maybeReadMore read 0"),j.read(0),ft===z.length)break}z.readingMore=!1}et.prototype._read=function(j){q(this,new w("_read()"))},et.prototype.pipe=function(j,z){var ft=this,vt=this._readableState;switch(vt.pipesCount){case 0:vt.pipes=j;break;case 1:vt.pipes=[vt.pipes,j];break;default:vt.pipes.push(j);break}vt.pipesCount+=1,u("pipe count=%d opts=%j",vt.pipesCount,z);var _t=(!z||z.end!==!1)&&j!==n.stdout&&j!==n.stderr,gt=_t?Rt:p;vt.endEmitted?n.nextTick(gt):ft.once("end",gt),j.on("unpipe",Et);function Et(d,S){u("onunpipe"),d===ft&&S&&S.hasUnpiped===!1&&(S.hasUnpiped=!0,Xt())}function Rt(){u("onend"),j.end()}var Ht=$(ft);j.on("drain",Ht);var Ft=!1;function Xt(){u("cleanup"),j.removeListener("close",Vt),j.removeListener("finish",A),j.removeListener("drain",Ht),j.removeListener("error",Mt),j.removeListener("unpipe",Et),ft.removeListener("end",Rt),ft.removeListener("end",p),ft.removeListener("data",Bt),Ft=!0,vt.awaitDrain&&(!j._writableState||j._writableState.needDrain)&&Ht()}ft.on("data",Bt);function Bt(d){u("ondata");var S=j.write(d);u("dest.write",S),S===!1&&((vt.pipesCount===1&&vt.pipes===j||vt.pipesCount>1&&mt(vt.pipes,j)!==-1)&&!Ft&&(u("false write response, pause",vt.awaitDrain),vt.awaitDrain++),ft.pause())}function Mt(d){u("onerror",d),p(),j.removeListener("error",Mt),e(j,"error")===0&&q(j,d)}rt(j,"error",Mt);function Vt(){j.removeListener("finish",A),p()}j.once("close",Vt);function A(){u("onfinish"),j.removeListener("close",Vt),p()}j.once("finish",A);function p(){u("unpipe"),ft.unpipe(j)}return j.emit("pipe",ft),vt.flowing||(u("pipe resume"),ft.resume()),j};function $(j){return function(){var ft=j._readableState;u("pipeOnDrain",ft.awaitDrain),ft.awaitDrain&&ft.awaitDrain--,ft.awaitDrain===0&&e(j,"data")&&(ft.flowing=!0,V(j))}}et.prototype.unpipe=function(j){var z=this._readableState,ft={hasUnpiped:!1};if(z.pipesCount===0)return this;if(z.pipesCount===1)return j&&j!==z.pipes?this:(j||(j=z.pipes),z.pipes=null,z.pipesCount=0,z.flowing=!1,j&&j.emit("unpipe",this,ft),this);if(!j){var vt=z.pipes,_t=z.pipesCount;z.pipes=null,z.pipesCount=0,z.flowing=!1;for(var gt=0;gt<_t;gt++)vt[gt].emit("unpipe",this,{hasUnpiped:!1});return this}var Et=mt(z.pipes,j);return Et===-1?this:(z.pipes.splice(Et,1),z.pipesCount-=1,z.pipesCount===1&&(z.pipes=z.pipes[0]),j.emit("unpipe",this,ft),this)},et.prototype.on=function(j,z){var ft=r.prototype.on.call(this,j,z),vt=this._readableState;return j==="data"?(vt.readableListening=this.listenerCount("readable")>0,vt.flowing!==!1&&this.resume()):j==="readable"&&!vt.endEmitted&&!vt.readableListening&&(vt.readableListening=vt.needReadable=!0,vt.flowing=!1,vt.emittedReadable=!1,u("on readable",vt.length,vt.reading),vt.length?T(this):vt.reading||n.nextTick(tt,this)),ft},et.prototype.addListener=et.prototype.on,et.prototype.removeListener=function(j,z){var ft=r.prototype.removeListener.call(this,j,z);return j==="readable"&&n.nextTick(H,this),ft},et.prototype.removeAllListeners=function(j){var z=r.prototype.removeAllListeners.apply(this,arguments);return(j==="readable"||j===void 0)&&n.nextTick(H,this),z};function H(j){var z=j._readableState;z.readableListening=j.listenerCount("readable")>0,z.resumeScheduled&&!z.paused?z.flowing=!0:j.listenerCount("data")>0&&j.resume()}function tt(j){u("readable nexttick read 0"),j.read(0)}et.prototype.resume=function(){var j=this._readableState;return j.flowing||(u("resume"),j.flowing=!j.readableListening,it(this,j)),j.paused=!1,this};function it(j,z){z.resumeScheduled||(z.resumeScheduled=!0,n.nextTick(ut,j,z))}function ut(j,z){u("resume",z.reading),z.reading||j.read(0),z.resumeScheduled=!1,j.emit("resume"),V(j),z.flowing&&!z.reading&&j.read(0)}et.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function V(j){var z=j._readableState;for(u("flow",z.flowing);z.flowing&&j.read()!==null;);}et.prototype.wrap=function(j){var z=this,ft=this._readableState,vt=!1;j.on("end",function(){if(u("wrapped end"),ft.decoder&&!ft.ended){var Et=ft.decoder.end();Et&&Et.length&&z.push(Et)}z.push(null)}),j.on("data",function(Et){if(u("wrapped data"),ft.decoder&&(Et=ft.decoder.write(Et)),!(ft.objectMode&&Et==null)&&!(!ft.objectMode&&(!Et||!Et.length))){var Rt=z.push(Et);Rt||(vt=!0,j.pause())}});for(var _t in j)this[_t]===void 0&&typeof j[_t]=="function"&&(this[_t]=(function(Rt){return function(){return j[Rt].apply(j,arguments)}})(_t));for(var gt=0;gt<N.length;gt++)j.on(N[gt],this.emit.bind(this,N[gt]));return this._read=function(Et){u("wrapped _read",Et),vt&&(vt=!1,j.resume())},this},typeof Symbol=="function"&&(et.prototype[Symbol.asyncIterator]=function(){return D===void 0&&(D=GF()),D(this)}),Object.defineProperty(et.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(et.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(et.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(z){this._readableState&&(this._readableState.flowing=z)}}),et._fromList=K,Object.defineProperty(et.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function K(j,z){if(z.length===0)return null;var ft;return z.objectMode?ft=z.buffer.shift():!j||j>=z.length?(z.decoder?ft=z.buffer.join(""):z.buffer.length===1?ft=z.buffer.first():ft=z.buffer.concat(z.length),z.buffer.clear()):ft=z.buffer.consume(j,z.decoder),ft}function ot(j){var z=j._readableState;u("endReadable",z.endEmitted),z.endEmitted||(z.ended=!0,n.nextTick(yt,z,j))}function yt(j,z){if(u("endReadableNT",j.endEmitted,j.length),!j.endEmitted&&j.length===0&&(j.endEmitted=!0,z.readable=!1,z.emit("end"),j.autoDestroy)){var ft=z._writableState;(!ft||ft.autoDestroy&&ft.finished)&&z.destroy()}}typeof Symbol=="function"&&(et.from=function(j,z){return _===void 0&&(_=VF()),_(et,j,z)});function mt(j,z){for(var ft=0,vt=j.length;ft<vt;ft++)if(j[ft]===z)return ft;return-1}return hw}function Sw(){if(rT)return fw;rT=!0,fw=a;var n=Hu().codes,t=n.ERR_METHOD_NOT_IMPLEMENTED,e=n.ERR_MULTIPLE_CALLBACK,r=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=n.ERR_TRANSFORM_WITH_LENGTH_0,o=zl();Hl()(a,o);function s(h,f){var g=this._transformState;g.transforming=!1;var m=g.writecb;if(m===null)return this.emit("error",new e);g.writechunk=null,g.writecb=null,f!=null&&this.push(f),m(h);var y=this._readableState;y.reading=!1,(y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}function a(h){if(!(this instanceof a))return new a(h);o.call(this,h),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,h&&(typeof h.transform=="function"&&(this._transform=h.transform),typeof h.flush=="function"&&(this._flush=h.flush)),this.on("prefinish",c)}function c(){var h=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(f,g){u(h,f,g)}):u(this,null,null)}a.prototype.push=function(h,f){return this._transformState.needTransform=!1,o.prototype.push.call(this,h,f)},a.prototype._transform=function(h,f,g){g(new t("_transform()"))},a.prototype._write=function(h,f,g){var m=this._transformState;if(m.writecb=g,m.writechunk=h,m.writeencoding=f,!m.transforming){var y=this._readableState;(m.needTransform||y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}},a.prototype._read=function(h){var f=this._transformState;f.writechunk!==null&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},a.prototype._destroy=function(h,f){o.prototype._destroy.call(this,h,function(g){f(g)})};function u(h,f,g){if(f)return h.emit("error",f);if(g!=null&&h.push(g),h._writableState.length)throw new i;if(h._transformState.transforming)throw new r;return h.push(null)}return fw}function mT(){if(nT)return dw;nT=!0,dw=t;var n=Sw();Hl()(t,n);function t(e){if(!(this instanceof t))return new t(e);n.call(this,e)}return t.prototype._transform=function(e,r,i){i(null,e)},dw}function yT(){if(iT)return pw;iT=!0;var n;function t(g){var m=!1;return function(){m||(m=!0,g.apply(void 0,arguments))}}var e=Hu().codes,r=e.ERR_MISSING_ARGS,i=e.ERR_STREAM_DESTROYED;function o(g){if(g)throw g}function s(g){return g.setHeader&&typeof g.abort=="function"}function a(g,m,y,b){b=t(b);var v=!1;g.on("close",function(){v=!0}),n===void 0&&(n=E0()),n(g,{readable:m,writable:y},function(x){if(x)return b(x);v=!0,b()});var w=!1;return function(x){if(!v&&!w){if(w=!0,s(g))return g.abort();if(typeof g.destroy=="function")return g.destroy();b(x||new i("pipe"))}}}function c(g){g()}function u(g,m){return g.pipe(m)}function h(g){return!g.length||typeof g[g.length-1]!="function"?o:g.pop()}function f(){for(var g=arguments.length,m=new Array(g),y=0;y<g;y++)m[y]=arguments[y];var b=h(m);if(Array.isArray(m[0])&&(m=m[0]),m.length<2)throw new r("streams");var v,w=m.map(function(x,E){var D=E<m.length-1,_=E>0;return a(x,D,_,function(q){v||(v=q),q&&w.forEach(c),!D&&(w.forEach(c),b(v))})});return m.reduce(u)}return pw=f,pw}var sT,qi,Un,RC,y0,Ul,IC,vF,co,gw,qu,NC,IF,OF,w0,A0,ys,NF,vw,bw,UC,Rd,jC,v0,$C,ql,qC,zu,b0,zC,Qb,HC,tw,WC,ew,GC,rw,VC,nw,XC,iw,YC,sw,ow,KC,WF,aw,JC,lw,ZC,cw,QC,uw,tT,hw,eT,XF,fw,rT,dw,nT,pw,iT,_w=Qe(()=>{wt();xt();At();Td();Pl();Sd();for(sT={byteLength:function(n){var t=OC(n),e=t[0],r=t[1];return 3*(e+r)/4-r},toByteArray:function(n){var t,e,r=OC(n),i=r[0],o=r[1],s=new RC((function(u,h,f){return 3*(h+f)/4-f})(0,i,o)),a=0,c=o>0?i-4:i;for(e=0;e<c;e+=4)t=Un[n.charCodeAt(e)]<<18|Un[n.charCodeAt(e+1)]<<12|Un[n.charCodeAt(e+2)]<<6|Un[n.charCodeAt(e+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;return o===2&&(t=Un[n.charCodeAt(e)]<<2|Un[n.charCodeAt(e+1)]>>4,s[a++]=255&t),o===1&&(t=Un[n.charCodeAt(e)]<<10|Un[n.charCodeAt(e+1)]<<4|Un[n.charCodeAt(e+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t),s},fromByteArray:function(n){for(var t,e=n.length,r=e%3,i=[],o=0,s=e-r;o<s;o+=16383)i.push(yF(n,o,o+16383>s?s:o+16383));return r===1?(t=n[e-1],i.push(qi[t>>2]+qi[t<<4&63]+"==")):r===2&&(t=(n[e-2]<<8)+n[e-1],i.push(qi[t>>10]+qi[t>>4&63]+qi[t<<2&63]+"=")),i.join("")}},qi=[],Un=[],RC=typeof Uint8Array<"u"?Uint8Array:Array,y0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ul=0,IC=y0.length;Ul<IC;++Ul)qi[Ul]=y0[Ul],Un[y0.charCodeAt(Ul)]=Ul;Un[45]=62,Un[95]=63;vF={read:function(n,t,e,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,h=-7,f=e?i-1:0,g=e?-1:1,m=n[t+f];for(f+=g,o=m&(1<<-h)-1,m>>=-h,h+=a;h>0;o=256*o+n[t+f],f+=g,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;h>0;s=256*s+n[t+f],f+=g,h-=8);if(o===0)o=1-u;else{if(o===c)return s?NaN:1/0*(m?-1:1);s+=Math.pow(2,r),o-=u}return(m?-1:1)*s*Math.pow(2,o-r)},write:function(n,t,e,r,i,o){var s,a,c,u=8*o-i-1,h=(1<<u)-1,f=h>>1,g=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=r?0:o-1,y=r?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+f>=1?g/c:g*Math.pow(2,1-f))*c>=2&&(s++,c/=2),s+f>=h?(a=0,s=h):s+f>=1?(a=(t*c-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;n[e+m]=255&a,m+=y,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;n[e+m]=255&s,m+=y,s/=256,u-=8);n[e+m-y]|=128*b}},co={},gw=sT,qu=vF,NC=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;co.Buffer=Tt,co.SlowBuffer=function(n){return+n!=n&&(n=0),Tt.alloc(+n)},co.INSPECT_MAX_BYTES=50;co.kMaxLength=2147483647,Tt.TYPED_ARRAY_SUPPORT=(function(){try{var n=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(n,t),n.foo()===42}catch{return!1}})(),Tt.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Tt.prototype,"parent",{enumerable:!0,get:function(){if(Tt.isBuffer(this))return this.buffer}}),Object.defineProperty(Tt.prototype,"offset",{enumerable:!0,get:function(){if(Tt.isBuffer(this))return this.byteOffset}}),Tt.poolSize=8192,Tt.from=function(n,t,e){return oT(n,t,e)},Object.setPrototypeOf(Tt.prototype,Uint8Array.prototype),Object.setPrototypeOf(Tt,Uint8Array),Tt.alloc=function(n,t,e){return(function(r,i,o){return aT(r),r<=0?ao(r):i!==void 0?typeof o=="string"?ao(r).fill(i,o):ao(r).fill(i):ao(r)})(n,t,e)},Tt.allocUnsafe=function(n){return mw(n)},Tt.allocUnsafeSlow=function(n){return mw(n)},Tt.isBuffer=function(n){return n!=null&&n._isBuffer===!0&&n!==Tt.prototype},Tt.compare=function(n,t){if(lo(n,Uint8Array)&&(n=Tt.from(n,n.offset,n.byteLength)),lo(t,Uint8Array)&&(t=Tt.from(t,t.offset,t.byteLength)),!Tt.isBuffer(n)||!Tt.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(n===t)return 0;for(var e=n.length,r=t.length,i=0,o=Math.min(e,r);i<o;++i)if(n[i]!==t[i]){e=n[i],r=t[i];break}return e<r?-1:r<e?1:0},Tt.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Tt.concat=function(n,t){if(!Array.isArray(n))throw new TypeError('"list" argument must be an Array of Buffers');if(n.length===0)return Tt.alloc(0);var e;if(t===void 0)for(t=0,e=0;e<n.length;++e)t+=n[e].length;var r=Tt.allocUnsafe(t),i=0;for(e=0;e<n.length;++e){var o=n[e];if(lo(o,Uint8Array)&&(o=Tt.from(o)),!Tt.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},Tt.byteLength=lT,Tt.prototype._isBuffer=!0,Tt.prototype.swap16=function(){var n=this.length;if(n%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<n;t+=2)jl(this,t,t+1);return this},Tt.prototype.swap32=function(){var n=this.length;if(n%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<n;t+=4)jl(this,t,t+3),jl(this,t+1,t+2);return this},Tt.prototype.swap64=function(){var n=this.length;if(n%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<n;t+=8)jl(this,t,t+7),jl(this,t+1,t+6),jl(this,t+2,t+5),jl(this,t+3,t+4);return this},Tt.prototype.toString=function(){var n=this.length;return n===0?"":arguments.length===0?uT(this,0,n):bF.apply(this,arguments)},Tt.prototype.toLocaleString=Tt.prototype.toString,Tt.prototype.equals=function(n){if(!Tt.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n||Tt.compare(this,n)===0},Tt.prototype.inspect=function(){var n="",t=co.INSPECT_MAX_BYTES;return n=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(n+=" ... "),"<Buffer "+n+">"},NC&&(Tt.prototype[NC]=Tt.prototype.inspect),Tt.prototype.compare=function(n,t,e,r,i){if(lo(n,Uint8Array)&&(n=Tt.from(n,n.offset,n.byteLength)),!Tt.isBuffer(n))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof n);if(t===void 0&&(t=0),e===void 0&&(e=n?n.length:0),r===void 0&&(r=0),i===void 0&&(i=this.length),t<0||e>n.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=e)return 0;if(r>=i)return-1;if(t>=e)return 1;if(this===n)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(e>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(r,i),u=n.slice(t,e),h=0;h<a;++h)if(c[h]!==u[h]){o=c[h],s=u[h];break}return o<s?-1:s<o?1:0},Tt.prototype.includes=function(n,t,e){return this.indexOf(n,t,e)!==-1},Tt.prototype.indexOf=function(n,t,e){return kC(this,n,t,e,!0)},Tt.prototype.lastIndexOf=function(n,t,e){return kC(this,n,t,e,!1)},Tt.prototype.write=function(n,t,e,r){if(t===void 0)r="utf8",e=this.length,t=0;else if(e===void 0&&typeof t=="string")r=t,e=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(e)?(e>>>=0,r===void 0&&(r="utf8")):(r=e,e=void 0)}var i=this.length-t;if((e===void 0||e>i)&&(e=i),n.length>0&&(e<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return wF(this,n,t,e);case"utf8":case"utf-8":return AF(this,n,t,e);case"ascii":return cT(this,n,t,e);case"latin1":case"binary":return xF(this,n,t,e);case"base64":return EF(this,n,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return SF(this,n,t,e);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},Tt.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};Tt.prototype.slice=function(n,t){var e=this.length;(n=~~n)<0?(n+=e)<0&&(n=0):n>e&&(n=e),(t=t===void 0?e:~~t)<0?(t+=e)<0&&(t=0):t>e&&(t=e),t<n&&(t=n);var r=this.subarray(n,t);return Object.setPrototypeOf(r,Tt.prototype),r},Tt.prototype.readUIntLE=function(n,t,e){n>>>=0,t>>>=0,e||Tr(n,t,this.length);for(var r=this[n],i=1,o=0;++o<t&&(i*=256);)r+=this[n+o]*i;return r},Tt.prototype.readUIntBE=function(n,t,e){n>>>=0,t>>>=0,e||Tr(n,t,this.length);for(var r=this[n+--t],i=1;t>0&&(i*=256);)r+=this[n+--t]*i;return r},Tt.prototype.readUInt8=function(n,t){return n>>>=0,t||Tr(n,1,this.length),this[n]},Tt.prototype.readUInt16LE=function(n,t){return n>>>=0,t||Tr(n,2,this.length),this[n]|this[n+1]<<8},Tt.prototype.readUInt16BE=function(n,t){return n>>>=0,t||Tr(n,2,this.length),this[n]<<8|this[n+1]},Tt.prototype.readUInt32LE=function(n,t){return n>>>=0,t||Tr(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+16777216*this[n+3]},Tt.prototype.readUInt32BE=function(n,t){return n>>>=0,t||Tr(n,4,this.length),16777216*this[n]+(this[n+1]<<16|this[n+2]<<8|this[n+3])},Tt.prototype.readIntLE=function(n,t,e){n>>>=0,t>>>=0,e||Tr(n,t,this.length);for(var r=this[n],i=1,o=0;++o<t&&(i*=256);)r+=this[n+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},Tt.prototype.readIntBE=function(n,t,e){n>>>=0,t>>>=0,e||Tr(n,t,this.length);for(var r=t,i=1,o=this[n+--r];r>0&&(i*=256);)o+=this[n+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},Tt.prototype.readInt8=function(n,t){return n>>>=0,t||Tr(n,1,this.length),128&this[n]?-1*(255-this[n]+1):this[n]},Tt.prototype.readInt16LE=function(n,t){n>>>=0,t||Tr(n,2,this.length);var e=this[n]|this[n+1]<<8;return 32768&e?4294901760|e:e},Tt.prototype.readInt16BE=function(n,t){n>>>=0,t||Tr(n,2,this.length);var e=this[n+1]|this[n]<<8;return 32768&e?4294901760|e:e},Tt.prototype.readInt32LE=function(n,t){return n>>>=0,t||Tr(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24},Tt.prototype.readInt32BE=function(n,t){return n>>>=0,t||Tr(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]},Tt.prototype.readFloatLE=function(n,t){return n>>>=0,t||Tr(n,4,this.length),qu.read(this,n,!0,23,4)},Tt.prototype.readFloatBE=function(n,t){return n>>>=0,t||Tr(n,4,this.length),qu.read(this,n,!1,23,4)},Tt.prototype.readDoubleLE=function(n,t){return n>>>=0,t||Tr(n,8,this.length),qu.read(this,n,!0,52,8)},Tt.prototype.readDoubleBE=function(n,t){return n>>>=0,t||Tr(n,8,this.length),qu.read(this,n,!1,52,8)},Tt.prototype.writeUIntLE=function(n,t,e,r){n=+n,t>>>=0,e>>>=0,r||An(this,n,t,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[t]=255&n;++o<e&&(i*=256);)this[t+o]=n/i&255;return t+e},Tt.prototype.writeUIntBE=function(n,t,e,r){n=+n,t>>>=0,e>>>=0,r||An(this,n,t,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[t+i]=255&n;--i>=0&&(o*=256);)this[t+i]=n/o&255;return t+e},Tt.prototype.writeUInt8=function(n,t,e){return n=+n,t>>>=0,e||An(this,n,t,1,255,0),this[t]=255&n,t+1},Tt.prototype.writeUInt16LE=function(n,t,e){return n=+n,t>>>=0,e||An(this,n,t,2,65535,0),this[t]=255&n,this[t+1]=n>>>8,t+2},Tt.prototype.writeUInt16BE=function(n,t,e){return n=+n,t>>>=0,e||An(this,n,t,2,65535,0),this[t]=n>>>8,this[t+1]=255&n,t+2},Tt.prototype.writeUInt32LE=function(n,t,e){return n=+n,t>>>=0,e||An(this,n,t,4,4294967295,0),this[t+3]=n>>>24,this[t+2]=n>>>16,this[t+1]=n>>>8,this[t]=255&n,t+4},Tt.prototype.writeUInt32BE=function(n,t,e){return n=+n,t>>>=0,e||An(this,n,t,4,4294967295,0),this[t]=n>>>24,this[t+1]=n>>>16,this[t+2]=n>>>8,this[t+3]=255&n,t+4},Tt.prototype.writeIntLE=function(n,t,e,r){if(n=+n,t>>>=0,!r){var i=Math.pow(2,8*e-1);An(this,n,t,e,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&n;++o<e&&(s*=256);)n<0&&a===0&&this[t+o-1]!==0&&(a=1),this[t+o]=(n/s>>0)-a&255;return t+e},Tt.prototype.writeIntBE=function(n,t,e,r){if(n=+n,t>>>=0,!r){var i=Math.pow(2,8*e-1);An(this,n,t,e,i-1,-i)}var o=e-1,s=1,a=0;for(this[t+o]=255&n;--o>=0&&(s*=256);)n<0&&a===0&&this[t+o+1]!==0&&(a=1),this[t+o]=(n/s>>0)-a&255;return t+e},Tt.prototype.writeInt8=function(n,t,e){return n=+n,t>>>=0,e||An(this,n,t,1,127,-128),n<0&&(n=255+n+1),this[t]=255&n,t+1},Tt.prototype.writeInt16LE=function(n,t,e){return n=+n,t>>>=0,e||An(this,n,t,2,32767,-32768),this[t]=255&n,this[t+1]=n>>>8,t+2},Tt.prototype.writeInt16BE=function(n,t,e){return n=+n,t>>>=0,e||An(this,n,t,2,32767,-32768),this[t]=n>>>8,this[t+1]=255&n,t+2},Tt.prototype.writeInt32LE=function(n,t,e){return n=+n,t>>>=0,e||An(this,n,t,4,2147483647,-2147483648),this[t]=255&n,this[t+1]=n>>>8,this[t+2]=n>>>16,this[t+3]=n>>>24,t+4},Tt.prototype.writeInt32BE=function(n,t,e){return n=+n,t>>>=0,e||An(this,n,t,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),this[t]=n>>>24,this[t+1]=n>>>16,this[t+2]=n>>>8,this[t+3]=255&n,t+4},Tt.prototype.writeFloatLE=function(n,t,e){return LC(this,n,t,!0,e)},Tt.prototype.writeFloatBE=function(n,t,e){return LC(this,n,t,!1,e)},Tt.prototype.writeDoubleLE=function(n,t,e){return FC(this,n,t,!0,e)},Tt.prototype.writeDoubleBE=function(n,t,e){return FC(this,n,t,!1,e)},Tt.prototype.copy=function(n,t,e,r){if(!Tt.isBuffer(n))throw new TypeError("argument should be a Buffer");if(e||(e=0),r||r===0||(r=this.length),t>=n.length&&(t=n.length),t||(t=0),r>0&&r<e&&(r=e),r===e||n.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),n.length-t<r-e&&(r=n.length-t+e);var i=r-e;if(this===n&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(t,e,r);else if(this===n&&e<t&&t<r)for(var o=i-1;o>=0;--o)n[o+t]=this[o+e];else Uint8Array.prototype.set.call(n,this.subarray(e,r),t);return i},Tt.prototype.fill=function(n,t,e,r){if(typeof n=="string"){if(typeof t=="string"?(r=t,t=0,e=this.length):typeof e=="string"&&(r=e,e=this.length),r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!Tt.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(n.length===1){var i=n.charCodeAt(0);(r==="utf8"&&i<128||r==="latin1")&&(n=i)}}else typeof n=="number"?n&=255:typeof n=="boolean"&&(n=Number(n));if(t<0||this.length<t||this.length<e)throw new RangeError("Out of range index");if(e<=t)return this;var o;if(t>>>=0,e=e===void 0?this.length:e>>>0,n||(n=0),typeof n=="number")for(o=t;o<e;++o)this[o]=n;else{var s=Tt.isBuffer(n)?n:Tt.from(n,r),a=s.length;if(a===0)throw new TypeError('The value "'+n+'" is invalid for argument "value"');for(o=0;o<e-t;++o)this[o+t]=s[o%a]}return this};IF=/[^+/0-9A-Za-z-_]/g;OF=(function(){for(var n=new Array(256),t=0;t<16;++t)for(var e=16*t,r=0;r<16;++r)n[e+r]="0123456789abcdef"[t]+"0123456789abcdef"[r];return n})();co.Buffer;co.INSPECT_MAX_BYTES;co.kMaxLength;w0={},A0=co,ys=A0.Buffer;ys.from&&ys.alloc&&ys.allocUnsafe&&ys.allocUnsafeSlow?w0=A0:(MC(A0,w0),w0.Buffer=$l),$l.prototype=Object.create(ys.prototype),MC(ys,$l),$l.from=function(n,t,e){if(typeof n=="number")throw new TypeError("Argument must not be a number");return ys(n,t,e)},$l.alloc=function(n,t,e){if(typeof n!="number")throw new TypeError("Argument must be a number");var r=ys(n);return t!==void 0?typeof e=="string"?r.fill(t,e):r.fill(t):r.fill(0),r},$l.allocUnsafe=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return ys(n)},$l.allocUnsafeSlow=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return A0.SlowBuffer(n)};NF=w0,vw={},bw=NF.Buffer,UC=bw.isEncoding||function(n){switch((n=""+n)&&n.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};vw.StringDecoder=Dd,Dd.prototype.write=function(n){if(n.length===0)return"";var t,e;if(this.lastNeed){if((t=this.fillLast(n))===void 0)return"";e=this.lastNeed,this.lastNeed=0}else e=0;return e<n.length?t?t+this.text(n,e):this.text(n,e):t||""},Dd.prototype.end=function(n){var t=n&&n.length?this.write(n):"";return this.lastNeed?t+"\uFFFD":t},Dd.prototype.text=function(n,t){var e=(function(i,o,s){var a=o.length-1;if(a<s)return 0;var c=Zb(o[a]);return c>=0?(c>0&&(i.lastNeed=c-1),c):--a<s||c===-2?0:(c=Zb(o[a]))>=0?(c>0&&(i.lastNeed=c-2),c):--a<s||c===-2?0:(c=Zb(o[a]))>=0?(c>0&&(c===2?c=0:i.lastNeed=c-3),c):0})(this,n,t);if(!this.lastNeed)return n.toString("utf8",t);this.lastTotal=e;var r=n.length-(e-this.lastNeed);return n.copy(this.lastChar,0,r),n.toString("utf8",t,r)},Dd.prototype.fillLast=function(n){if(this.lastNeed<=n.length)return n.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);n.copy(this.lastChar,this.lastTotal-this.lastNeed,0,n.length),this.lastNeed-=n.length};Rd={},jC=!1;v0={},$C=!1;ql={},qC=!1;zu=qF();zu.Buffer;zu.INSPECT_MAX_BYTES;zu.kMaxLength;b0={},zC=!1;Qb={},HC=!1;tw={},WC=!1;ew={},GC=!1;rw={},VC=!1;nw={},XC=!1;iw={},YC=!1,sw=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;ow={},KC=!1,WF=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;aw={},JC=!1;lw={},ZC=!1;cw={},QC=!1;uw={},tT=!1;hw={},eT=!1,XF=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;fw={},rT=!1;dw={},nT=!1;pw={},iT=!1});function YF(){if(vT)return Cw;vT=!0,Cw=e;var n=wr.EventEmitter,t=Hl();t(e,n),e.Readable=Ew(),e.Writable=xw(),e.Duplex=zl(),e.Transform=Sw(),e.PassThrough=mT(),e.finished=E0(),e.pipeline=yT(),e.Stream=e;function e(){n.call(this||Tw)}return e.prototype.pipe=function(r,i){var o=this||Tw;function s(m){r.writable&&r.write(m)===!1&&o.pause&&o.pause()}o.on("data",s);function a(){o.readable&&o.resume&&o.resume()}r.on("drain",a),!r._isStdio&&(!i||i.end!==!1)&&(o.on("end",u),o.on("close",h));var c=!1;function u(){c||(c=!0,r.end())}function h(){c||(c=!0,typeof r.destroy=="function"&&r.destroy())}function f(m){if(g(),n.listenerCount(this||Tw,"error")===0)throw m}o.on("error",f),r.on("error",f);function g(){o.removeListener("data",s),r.removeListener("drain",a),o.removeListener("end",u),o.removeListener("close",h),o.removeListener("error",f),r.removeListener("error",f),o.removeListener("end",g),o.removeListener("close",g),r.removeListener("close",g)}return o.on("end",g),o.on("close",g),r.on("close",g),r.emit("pipe",o),r},Cw}var Cw,vT,Tw,vi,bT,wT=Qe(()=>{wt();xt();At();Kb();_w();Td();Bb();Pl();Sd();Cw={},vT=!1,Tw=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;vi=YF(),bT=vi.Readable;bT.wrap=function(n,t){return t=Object.assign({objectMode:n.readableObjectMode!=null||n.objectMode!=null||!0},t),t.destroy=function(e,r){n.destroy(e),r(e)},new bT(t).wrap(n)};vi.Writable;vi.Duplex;vi.Transform;vi.PassThrough;vi.finished;vi.pipeline;vi.Stream;kb(vi.finished),kb(vi.pipeline)});function KF(){if(AT)return Dw;AT=!0;let n=2147483647,t=36,e=1,r=26,i=38,o=700,s=72,a=128,c="-",u=/^xn--/,h=/[^\0-\x7F]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,g={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=t-e,y=Math.floor,b=String.fromCharCode;function v(at){throw new RangeError(g[at])}function w(at,X){let ct=[],J=at.length;for(;J--;)ct[J]=X(at[J]);return ct}function x(at,X){let ct=at.split("@"),J="";ct.length>1&&(J=ct[0]+"@",at=ct[1]),at=at.replace(f,".");let R=at.split("."),T=w(R,X).join(".");return J+T}function E(at){let X=[],ct=0,J=at.length;for(;ct<J;){let R=at.charCodeAt(ct++);if(R>=55296&&R<=56319&&ct<J){let T=at.charCodeAt(ct++);(T&64512)==56320?X.push(((R&1023)<<10)+(T&1023)+65536):(X.push(R),ct--)}else X.push(R)}return X}let D=at=>String.fromCodePoint(...at),_=function(at){return at>=48&&at<58?26+(at-48):at>=65&&at<91?at-65:at>=97&&at<123?at-97:t},q=function(at,X){return at+22+75*(at<26)-((X!=0)<<5)},N=function(at,X,ct){let J=0;for(at=ct?y(at/o):at>>1,at+=y(at/X);at>m*r>>1;J+=t)at=y(at/m);return y(J+(m+1)*at/(at+i))},rt=function(at){let X=[],ct=at.length,J=0,R=a,T=s,L=at.lastIndexOf(c);L<0&&(L=0);for(let k=0;k<L;++k)at.charCodeAt(k)>=128&&v("not-basic"),X.push(at.charCodeAt(k));for(let k=L>0?L+1:0;k<ct;){let B=J;for(let H=1,tt=t;;tt+=t){k>=ct&&v("invalid-input");let it=_(at.charCodeAt(k++));it>=t&&v("invalid-input"),it>y((n-J)/H)&&v("overflow"),J+=it*H;let ut=tt<=T?e:tt>=T+r?r:tt-T;if(it<ut)break;let V=t-ut;H>y(n/V)&&v("overflow"),H*=V}let $=X.length+1;T=N(J-B,$,B==0),y(J/$)>n-R&&v("overflow"),R+=y(J/$),J%=$,X.splice(J++,0,R)}return String.fromCodePoint(...X)},Y=function(at){let X=[];at=E(at);let ct=at.length,J=a,R=0,T=s;for(let B of at)B<128&&X.push(b(B));let L=X.length,k=L;for(L&&X.push(c);k<ct;){let B=n;for(let H of at)H>=J&&H<B&&(B=H);let $=k+1;B-J>y((n-R)/$)&&v("overflow"),R+=(B-J)*$,J=B;for(let H of at)if(H<J&&++R>n&&v("overflow"),H===J){let tt=R;for(let it=t;;it+=t){let ut=it<=T?e:it>=T+r?r:it-T;if(tt<ut)break;let V=tt-ut,K=t-ut;X.push(b(q(ut+V%K,0))),tt=y(V/K)}X.push(b(q(tt,0))),T=N(R,$,k===L),R=0,++k}++R,++J}return X.join("")};return Dw={version:"2.3.1",ucs2:{decode:E,encode:D},decode:rt,encode:Y,toASCII:function(at){return x(at,function(X){return h.test(X)?"xn--"+Y(X):X})},toUnicode:function(at){return x(at,function(X){return u.test(X)?rt(X.slice(4).toLowerCase()):X})}},Dw}var Dw,AT,wa,GU,VU,XU,YU,KU,JU,Rw=Qe(()=>{wt();xt();At();Dw={},AT=!1;wa=KF(),GU=wa.decode,VU=wa.encode,XU=wa.toASCII,YU=wa.toUnicode,KU=wa.ucs2,JU=wa.version});function JF(){return xT||(xT=!0,Iw=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),r=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;t[e]=i;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,e);if(s.value!==i||s.enumerable!==!0)return!1}return!0}),Iw}function ZF(){return ET||(ET=!0,Ow=Error),Ow}function QF(){return ST||(ST=!0,Nw=EvalError),Nw}function tM(){return _T||(_T=!0,Pw=RangeError),Pw}function eM(){return CT||(CT=!0,kw=ReferenceError),kw}function zT(){return TT||(TT=!0,Bw=SyntaxError),Bw}function Wu(){return DT||(DT=!0,Lw=TypeError),Lw}function rM(){return RT||(RT=!0,Fw=URIError),Fw}function nM(){if(IT)return Mw;IT=!0;var n=typeof Symbol<"u"&&Symbol,t=JF();return Mw=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},Mw}function iM(){if(OT)return Uw;OT=!0;var n={__proto__:null,foo:{}},t=Object;return Uw=function(){return{__proto__:n}.foo===n.foo&&!(n instanceof t)},Uw}function sM(){if(NT)return jw;NT=!0;var n="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,e=Math.max,r="[object Function]",i=function(c,u){for(var h=[],f=0;f<c.length;f+=1)h[f]=c[f];for(var g=0;g<u.length;g+=1)h[g+c.length]=u[g];return h},o=function(c,u){for(var h=[],f=u,g=0;f<c.length;f+=1,g+=1)h[g]=c[f];return h},s=function(a,c){for(var u="",h=0;h<a.length;h+=1)u+=a[h],h+1<a.length&&(u+=c);return u};return jw=function(c){var u=this;if(typeof u!="function"||t.apply(u)!==r)throw new TypeError(n+u);for(var h=o(arguments,1),f,g=function(){if(this instanceof f){var w=u.apply(this,i(h,arguments));return Object(w)===w?w:this}return u.apply(c,i(h,arguments))},m=e(0,u.length-h.length),y=[],b=0;b<m;b++)y[b]="$"+b;if(f=Function("binder","return function ("+s(y,",")+"){ return binder.apply(this,arguments); }")(g),u.prototype){var v=function(){};v.prototype=u.prototype,f.prototype=new v,v.prototype=null}return f},jw}function Kw(){if(PT)return $w;PT=!0;var n=sM();return $w=Function.prototype.bind||n,$w}function oM(){if(kT)return qw;kT=!0;var n=Function.prototype.call,t=Object.prototype.hasOwnProperty,e=Kw();return qw=e.call(n,t),qw}function Wl(){if(BT)return zw;BT=!0;var n,t=ZF(),e=QF(),r=tM(),i=eM(),o=zT(),s=Wu(),a=rM(),c=Function,u=function(R){try{return c('"use strict"; return ('+R+").constructor;")()}catch{}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch{h=null}var f=function(){throw new s},g=h?(function(){try{return arguments.callee,f}catch{try{return h(arguments,"callee").get}catch{return f}}})():f,m=nM()(),y=iM()(),b=Object.getPrototypeOf||(y?function(R){return R.__proto__}:null),v={},w=typeof Uint8Array>"u"||!b?n:b(Uint8Array),x={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":m&&b?b([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":e,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":c,"%GeneratorFunction%":v,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":m&&b?b(b([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!m||!b?n:b(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":r,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!m||!b?n:b(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":m&&b?b(""[Symbol.iterator]()):n,"%Symbol%":m?Symbol:n,"%SyntaxError%":o,"%ThrowTypeError%":g,"%TypedArray%":w,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":a,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet};if(b)try{null.error}catch(R){var E=b(b(R));x["%Error.prototype%"]=E}var D=function R(T){var L;if(T==="%AsyncFunction%")L=u("async function () {}");else if(T==="%GeneratorFunction%")L=u("function* () {}");else if(T==="%AsyncGeneratorFunction%")L=u("async function* () {}");else if(T==="%AsyncGenerator%"){var k=R("%AsyncGeneratorFunction%");k&&(L=k.prototype)}else if(T==="%AsyncIteratorPrototype%"){var B=R("%AsyncGenerator%");B&&b&&(L=b(B.prototype))}return x[T]=L,L},_={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},q=Kw(),N=oM(),rt=q.call(Function.call,Array.prototype.concat),Y=q.call(Function.apply,Array.prototype.splice),et=q.call(Function.call,String.prototype.replace),st=q.call(Function.call,String.prototype.slice),lt=q.call(Function.call,RegExp.prototype.exec),at=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,X=/\\(\\)?/g,ct=function(T){var L=st(T,0,1),k=st(T,-1);if(L==="%"&&k!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(k==="%"&&L!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var B=[];return et(T,at,function($,H,tt,it){B[B.length]=tt?et(it,X,"$1"):H||$}),B},J=function(T,L){var k=T,B;if(N(_,k)&&(B=_[k],k="%"+B[0]+"%"),N(x,k)){var $=x[k];if($===v&&($=D(k)),typeof $>"u"&&!L)throw new s("intrinsic "+T+" exists, but is not available. Please file an issue!");return{alias:B,name:k,value:$}}throw new o("intrinsic "+T+" does not exist!")};return zw=function(T,L){if(typeof T!="string"||T.length===0)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof L!="boolean")throw new s('"allowMissing" argument must be a boolean');if(lt(/^%?[^%]*%?$/,T)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var k=ct(T),B=k.length>0?k[0]:"",$=J("%"+B+"%",L),H=$.name,tt=$.value,it=!1,ut=$.alias;ut&&(B=ut[0],Y(k,rt([0,1],ut)));for(var V=1,K=!0;V<k.length;V+=1){var ot=k[V],yt=st(ot,0,1),mt=st(ot,-1);if((yt==='"'||yt==="'"||yt==="`"||mt==='"'||mt==="'"||mt==="`")&&yt!==mt)throw new o("property names with quotes must have matching quotes");if((ot==="constructor"||!K)&&(it=!0),B+="."+ot,H="%"+B+"%",N(x,H))tt=x[H];else if(tt!=null){if(!(ot in tt)){if(!L)throw new s("base intrinsic for "+T+" exists, but the property is not available.");return}if(h&&V+1>=k.length){var j=h(tt,ot);K=!!j,K&&"get"in j&&!("originalValue"in j.get)?tt=j.get:tt=tt[ot]}else K=N(tt,ot),tt=tt[ot];K&&!it&&(x[H]=tt)}}return tt},zw}function Jw(){if(LT)return Hw;LT=!0;var n=Wl(),t=n("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return Hw=t,Hw}function HT(){if(FT)return Ww;FT=!0;var n=Wl(),t=n("%Object.getOwnPropertyDescriptor%",!0);if(t)try{t([],"length")}catch{t=null}return Ww=t,Ww}function aM(){if(MT)return Gw;MT=!0;var n=Jw(),t=zT(),e=Wu(),r=HT();return Gw=function(o,s,a){if(!o||typeof o!="object"&&typeof o!="function")throw new e("`obj` must be an object or a function`");if(typeof s!="string"&&typeof s!="symbol")throw new e("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new e("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new e("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new e("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new e("`loose`, if provided, must be a boolean");var c=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,h=arguments.length>5?arguments[5]:null,f=arguments.length>6?arguments[6]:!1,g=!!r&&r(o,s);if(n)n(o,s,{configurable:h===null&&g?g.configurable:!h,enumerable:c===null&&g?g.enumerable:!c,value:a,writable:u===null&&g?g.writable:!u});else if(f||!c&&!u&&!h)o[s]=a;else throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Gw}function lM(){if(UT)return Vw;UT=!0;var n=Jw(),t=function(){return!!n};return t.hasArrayLengthDefineBug=function(){if(!n)return null;try{return n([],"length",{value:1}).length!==1}catch{return!0}},Vw=t,Vw}function cM(){if(jT)return Xw;jT=!0;var n=Wl(),t=aM(),e=lM()(),r=HT(),i=Wu(),o=n("%Math.floor%");return Xw=function(a,c){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof c!="number"||c<0||c>4294967295||o(c)!==c)throw new i("`length` must be a positive 32-bit integer");var u=arguments.length>2&&!!arguments[2],h=!0,f=!0;if("length"in a&&r){var g=r(a,"length");g&&!g.configurable&&(h=!1),g&&!g.writable&&(f=!1)}return(h||f||!u)&&(e?t(a,"length",c,!0,!0):t(a,"length",c)),a},Xw}function uM(){if($T)return Id;$T=!0;var n=Kw(),t=Wl(),e=cM(),r=Wu(),i=t("%Function.prototype.apply%"),o=t("%Function.prototype.call%"),s=t("%Reflect.apply%",!0)||n.call(o,i),a=Jw(),c=t("%Math.max%");Id=function(f){if(typeof f!="function")throw new r("a function is required");var g=s(n,o,arguments);return e(g,1+c(0,f.length-(arguments.length-1)),!0)};var u=function(){return s(n,i,arguments)};return a?a(Id,"apply",{value:u}):Id.apply=u,Id}function WT(){if(qT)return Yw;qT=!0;var n=Wl(),t=uM(),e=t(n("String.prototype.indexOf"));return Yw=function(i,o){var s=n(i,!!o);return typeof s=="function"&&e(i,".prototype.")>-1?t(s):s},Yw}var Iw,xT,Ow,ET,Nw,ST,Pw,_T,kw,CT,Bw,TT,Lw,DT,Fw,RT,Mw,IT,Uw,OT,jw,NT,$w,PT,qw,kT,zw,BT,Hw,LT,Ww,FT,Gw,MT,Vw,UT,Xw,jT,Id,$T,Yw,qT,Zw=Qe(()=>{wt();xt();At();Iw={},xT=!1;Ow={},ET=!1;Nw={},ST=!1;Pw={},_T=!1;kw={},CT=!1;Bw={},TT=!1;Lw={},DT=!1;Fw={},RT=!1;Mw={},IT=!1;Uw={},OT=!1;jw={},NT=!1;$w={},PT=!1;qw={},kT=!1;zw={},BT=!1;Hw={},LT=!1;Ww={},FT=!1;Gw={},MT=!1;Vw={},UT=!1;Xw={},jT=!1;Id={},$T=!1;Yw={},qT=!1});function hM(){if(GT)return Qw;GT=!0;var n=ba;function t(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function e(o,s){for(var a="",c=0,u=-1,h=0,f,g=0;g<=o.length;++g){if(g<o.length)f=o.charCodeAt(g);else{if(f===47)break;f=47}if(f===47){if(!(u===g-1||h===1))if(u!==g-1&&h===2){if(a.length<2||c!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var m=a.lastIndexOf("/");if(m!==a.length-1){m===-1?(a="",c=0):(a=a.slice(0,m),c=a.length-1-a.lastIndexOf("/")),u=g,h=0;continue}}else if(a.length===2||a.length===1){a="",c=0,u=g,h=0;continue}}s&&(a.length>0?a+="/..":a="..",c=2)}else a.length>0?a+="/"+o.slice(u+1,g):a=o.slice(u+1,g),c=g-u-1;u=g,h=0}else f===46&&h!==-1?++h:h=-1}return a}function r(o,s){var a=s.dir||s.root,c=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+c:a+o+c:c}var i={resolve:function(){for(var s="",a=!1,c,u=arguments.length-1;u>=-1&&!a;u--){var h;u>=0?h=arguments[u]:(c===void 0&&(c=n.cwd()),h=c),t(h),h.length!==0&&(s=h+"/"+s,a=h.charCodeAt(0)===47)}return s=e(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(t(s),s.length===0)return".";var a=s.charCodeAt(0)===47,c=s.charCodeAt(s.length-1)===47;return s=e(s,!a),s.length===0&&!a&&(s="."),s.length>0&&c&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return t(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var c=arguments[a];t(c),c.length>0&&(s===void 0?s=c:s+="/"+c)}return s===void 0?".":i.normalize(s)},relative:function(s,a){if(t(s),t(a),s===a||(s=i.resolve(s),a=i.resolve(a),s===a))return"";for(var c=1;c<s.length&&s.charCodeAt(c)===47;++c);for(var u=s.length,h=u-c,f=1;f<a.length&&a.charCodeAt(f)===47;++f);for(var g=a.length,m=g-f,y=h<m?h:m,b=-1,v=0;v<=y;++v){if(v===y){if(m>y){if(a.charCodeAt(f+v)===47)return a.slice(f+v+1);if(v===0)return a.slice(f+v)}else h>y&&(s.charCodeAt(c+v)===47?b=v:v===0&&(b=0));break}var w=s.charCodeAt(c+v),x=a.charCodeAt(f+v);if(w!==x)break;w===47&&(b=v)}var E="";for(v=c+b+1;v<=u;++v)(v===u||s.charCodeAt(v)===47)&&(E.length===0?E+="..":E+="/..");return E.length>0?E+a.slice(f+b):(f+=b,a.charCodeAt(f)===47&&++f,a.slice(f))},_makeLong:function(s){return s},dirname:function(s){if(t(s),s.length===0)return".";for(var a=s.charCodeAt(0),c=a===47,u=-1,h=!0,f=s.length-1;f>=1;--f)if(a=s.charCodeAt(f),a===47){if(!h){u=f;break}}else h=!1;return u===-1?c?"/":".":c&&u===1?"//":s.slice(0,u)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');t(s);var c=0,u=-1,h=!0,f;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var g=a.length-1,m=-1;for(f=s.length-1;f>=0;--f){var y=s.charCodeAt(f);if(y===47){if(!h){c=f+1;break}}else m===-1&&(h=!1,m=f+1),g>=0&&(y===a.charCodeAt(g)?--g===-1&&(u=f):(g=-1,u=m))}return c===u?u=m:u===-1&&(u=s.length),s.slice(c,u)}else{for(f=s.length-1;f>=0;--f)if(s.charCodeAt(f)===47){if(!h){c=f+1;break}}else u===-1&&(h=!1,u=f+1);return u===-1?"":s.slice(c,u)}},extname:function(s){t(s);for(var a=-1,c=0,u=-1,h=!0,f=0,g=s.length-1;g>=0;--g){var m=s.charCodeAt(g);if(m===47){if(!h){c=g+1;break}continue}u===-1&&(h=!1,u=g+1),m===46?a===-1?a=g:f!==1&&(f=1):a!==-1&&(f=-1)}return a===-1||u===-1||f===0||f===1&&a===u-1&&a===c+1?"":s.slice(a,u)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return r("/",s)},parse:function(s){t(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var c=s.charCodeAt(0),u=c===47,h;u?(a.root="/",h=1):h=0;for(var f=-1,g=0,m=-1,y=!0,b=s.length-1,v=0;b>=h;--b){if(c=s.charCodeAt(b),c===47){if(!y){g=b+1;break}continue}m===-1&&(y=!1,m=b+1),c===46?f===-1?f=b:v!==1&&(v=1):f!==-1&&(v=-1)}return f===-1||m===-1||v===0||v===1&&f===m-1&&f===g+1?m!==-1&&(g===0&&u?a.base=a.name=s.slice(1,m):a.base=a.name=s.slice(g,m)):(g===0&&u?(a.name=s.slice(1,f),a.base=s.slice(1,m)):(a.name=s.slice(g,f),a.base=s.slice(g,m)),a.ext=s.slice(f,m)),g>0?a.dir=s.slice(0,g-1):u&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,Qw=i,Qw}var Qw,GT,t2,e2=Qe(()=>{wt();xt();At();g0();Qw={},GT=!1;t2=hM()});function dM(){if(VT)return r2;VT=!0;var n=typeof Map=="function"&&Map.prototype,t=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,e=n&&t&&typeof t.get=="function"?t.get:null,r=n&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,o=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=i&&o&&typeof o.get=="function"?o.get:null,a=i&&Set.prototype.forEach,c=typeof WeakMap=="function"&&WeakMap.prototype,u=c?WeakMap.prototype.has:null,h=typeof WeakSet=="function"&&WeakSet.prototype,f=h?WeakSet.prototype.has:null,g=typeof WeakRef=="function"&&WeakRef.prototype,m=g?WeakRef.prototype.deref:null,y=Boolean.prototype.valueOf,b=Object.prototype.toString,v=Function.prototype.toString,w=String.prototype.match,x=String.prototype.slice,E=String.prototype.replace,D=String.prototype.toUpperCase,_=String.prototype.toLowerCase,q=RegExp.prototype.test,N=Array.prototype.concat,rt=Array.prototype.join,Y=Array.prototype.slice,et=Math.floor,st=typeof BigInt=="function"?BigInt.prototype.valueOf:null,lt=Object.getOwnPropertySymbols,at=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,X=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ct=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===X||!0)?Symbol.toStringTag:null,J=Object.prototype.propertyIsEnumerable,R=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(nt){return nt.__proto__}:null);function T(nt,ht){if(nt===1/0||nt===-1/0||nt!==nt||nt&&nt>-1e3&&nt<1e3||q.call(/e/,ht))return ht;var It=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof nt=="number"){var Nt=nt<0?-et(-nt):et(nt);if(Nt!==nt){var Ot=String(Nt),Wt=x.call(ht,Ot.length+1);return E.call(Ot,It,"$&_")+"."+E.call(E.call(Wt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return E.call(ht,It,"$&_")}var L=fM,k=L.custom,B=mt(k)?k:null;r2=function nt(ht,It,Nt,Ot){var Wt=It||{};if(ft(Wt,"quoteStyle")&&Wt.quoteStyle!=="single"&&Wt.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ft(Wt,"maxStringLength")&&(typeof Wt.maxStringLength=="number"?Wt.maxStringLength<0&&Wt.maxStringLength!==1/0:Wt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Se=ft(Wt,"customInspect")?Wt.customInspect:!0;if(typeof Se!="boolean"&&Se!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ft(Wt,"indent")&&Wt.indent!==null&&Wt.indent!=="	"&&!(parseInt(Wt.indent,10)===Wt.indent&&Wt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ft(Wt,"numericSeparator")&&typeof Wt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Fr=Wt.numericSeparator;if(typeof ht>"u")return"undefined";if(ht===null)return"null";if(typeof ht=="boolean")return ht?"true":"false";if(typeof ht=="string")return Mt(ht,Wt);if(typeof ht=="number"){if(ht===0)return 1/0/ht>0?"0":"-0";var _e=String(ht);return Fr?T(ht,_e):_e}if(typeof ht=="bigint"){var mr=String(ht)+"n";return Fr?T(ht,mr):mr}var ld=typeof Wt.depth>"u"?5:Wt.depth;if(typeof Nt>"u"&&(Nt=0),Nt>=ld&&ld>0&&typeof ht=="object")return tt(ht)?"[Array]":"[Object]";var Js=M(Wt,Nt);if(typeof Ot>"u")Ot=[];else if(gt(Ot,ht)>=0)return"[Circular]";function Fn(bn,hs,Ui){if(hs&&(Ot=Y.call(Ot),Ot.push(hs)),Ui){var Zs={depth:Wt.depth};return ft(Wt,"quoteStyle")&&(Zs.quoteStyle=Wt.quoteStyle),nt(bn,Zs,Nt+1,Ot)}return nt(bn,Wt,Nt+1,Ot)}if(typeof ht=="function"&&!ut(ht)){var km=_t(ht),fa=Q(ht,Fn);return"[Function"+(km?": "+km:" (anonymous)")+"]"+(fa.length>0?" { "+rt.call(fa,", ")+" }":"")}if(mt(ht)){var Ru=X?E.call(String(ht),/^(Symbol\(.*\))_[^)]*$/,"$1"):at.call(ht);return typeof ht=="object"&&!X?A(Ru):Ru}if(Bt(ht)){for(var xl="<"+_.call(String(ht.nodeName)),qt=ht.attributes||[],us=0;us<qt.length;us++)xl+=" "+qt[us].name+"="+$(H(qt[us].value),"double",Wt);return xl+=">",ht.childNodes&&ht.childNodes.length&&(xl+="..."),xl+="</"+_.call(String(ht.nodeName))+">",xl}if(tt(ht)){if(ht.length===0)return"[]";var cd=Q(ht,Fn);return Js&&!S(cd)?"["+G(cd,Js)+"]":"[ "+rt.call(cd,", ")+" ]"}if(V(ht)){var ud=Q(ht,Fn);return!("cause"in Error.prototype)&&"cause"in ht&&!J.call(ht,"cause")?"{ ["+String(ht)+"] "+rt.call(N.call("[cause]: "+Fn(ht.cause),ud),", ")+" }":ud.length===0?"["+String(ht)+"]":"{ ["+String(ht)+"] "+rt.call(ud,", ")+" }"}if(typeof ht=="object"&&Se){if(B&&typeof ht[B]=="function"&&L)return L(ht,{depth:ld-Nt});if(Se!=="symbol"&&typeof ht.inspect=="function")return ht.inspect()}if(Et(ht)){var Ve=[];return r&&r.call(ht,function(bn,hs){Ve.push(Fn(hs,ht,!0)+" => "+Fn(bn,ht))}),d("Map",e.call(ht),Ve,Js)}if(Ft(ht)){var Bm=[];return a&&a.call(ht,function(bn){Bm.push(Fn(bn,ht))}),d("Set",s.call(ht),Bm,Js)}if(Rt(ht))return p("WeakMap");if(Xt(ht))return p("WeakSet");if(Ht(ht))return p("WeakRef");if(ot(ht))return A(Fn(Number(ht)));if(j(ht))return A(Fn(st.call(ht)));if(yt(ht))return A(y.call(ht));if(K(ht))return A(Fn(String(ht)));if(typeof window<"u"&&ht===window)return"{ [object Window] }";if(typeof globalThis<"u"&&ht===globalThis||typeof n2<"u"&&ht===n2)return"{ [object globalThis] }";if(!it(ht)&&!ut(ht)){var hd=Q(ht,Fn),da=R?R(ht)===Object.prototype:ht instanceof Object||ht.constructor===Object,Iu=ht instanceof Object?"":"null prototype",Ou=!da&&ct&&Object(ht)===ht&&ct in ht?x.call(vt(ht),8,-1):Iu?"Object":"",eb=da||typeof ht.constructor!="function"?"":ht.constructor.name?ht.constructor.name+" ":"",Mr=eb+(Ou||Iu?"["+rt.call(N.call([],Ou||[],Iu||[]),": ")+"] ":"");return hd.length===0?Mr+"{}":Js?Mr+"{"+G(hd,Js)+"}":Mr+"{ "+rt.call(hd,", ")+" }"}return String(ht)};function $(nt,ht,It){var Nt=(It.quoteStyle||ht)==="double"?'"':"'";return Nt+nt+Nt}function H(nt){return E.call(String(nt),/"/g,"&quot;")}function tt(nt){return vt(nt)==="[object Array]"&&(!ct||!(typeof nt=="object"&&ct in nt))}function it(nt){return vt(nt)==="[object Date]"&&(!ct||!(typeof nt=="object"&&ct in nt))}function ut(nt){return vt(nt)==="[object RegExp]"&&(!ct||!(typeof nt=="object"&&ct in nt))}function V(nt){return vt(nt)==="[object Error]"&&(!ct||!(typeof nt=="object"&&ct in nt))}function K(nt){return vt(nt)==="[object String]"&&(!ct||!(typeof nt=="object"&&ct in nt))}function ot(nt){return vt(nt)==="[object Number]"&&(!ct||!(typeof nt=="object"&&ct in nt))}function yt(nt){return vt(nt)==="[object Boolean]"&&(!ct||!(typeof nt=="object"&&ct in nt))}function mt(nt){if(X)return nt&&typeof nt=="object"&&nt instanceof Symbol;if(typeof nt=="symbol")return!0;if(!nt||typeof nt!="object"||!at)return!1;try{return at.call(nt),!0}catch{}return!1}function j(nt){if(!nt||typeof nt!="object"||!st)return!1;try{return st.call(nt),!0}catch{}return!1}var z=Object.prototype.hasOwnProperty||function(nt){return nt in(this||n2)};function ft(nt,ht){return z.call(nt,ht)}function vt(nt){return b.call(nt)}function _t(nt){if(nt.name)return nt.name;var ht=w.call(v.call(nt),/^function\s*([\w$]+)/);return ht?ht[1]:null}function gt(nt,ht){if(nt.indexOf)return nt.indexOf(ht);for(var It=0,Nt=nt.length;It<Nt;It++)if(nt[It]===ht)return It;return-1}function Et(nt){if(!e||!nt||typeof nt!="object")return!1;try{e.call(nt);try{s.call(nt)}catch{return!0}return nt instanceof Map}catch{}return!1}function Rt(nt){if(!u||!nt||typeof nt!="object")return!1;try{u.call(nt,u);try{f.call(nt,f)}catch{return!0}return nt instanceof WeakMap}catch{}return!1}function Ht(nt){if(!m||!nt||typeof nt!="object")return!1;try{return m.call(nt),!0}catch{}return!1}function Ft(nt){if(!s||!nt||typeof nt!="object")return!1;try{s.call(nt);try{e.call(nt)}catch{return!0}return nt instanceof Set}catch{}return!1}function Xt(nt){if(!f||!nt||typeof nt!="object")return!1;try{f.call(nt,f);try{u.call(nt,u)}catch{return!0}return nt instanceof WeakSet}catch{}return!1}function Bt(nt){return!nt||typeof nt!="object"?!1:typeof HTMLElement<"u"&&nt instanceof HTMLElement?!0:typeof nt.nodeName=="string"&&typeof nt.getAttribute=="function"}function Mt(nt,ht){if(nt.length>ht.maxStringLength){var It=nt.length-ht.maxStringLength,Nt="... "+It+" more character"+(It>1?"s":"");return Mt(x.call(nt,0,ht.maxStringLength),ht)+Nt}var Ot=E.call(E.call(nt,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Vt);return $(Ot,"single",ht)}function Vt(nt){var ht=nt.charCodeAt(0),It={8:"b",9:"t",10:"n",12:"f",13:"r"}[ht];return It?"\\"+It:"\\x"+(ht<16?"0":"")+D.call(ht.toString(16))}function A(nt){return"Object("+nt+")"}function p(nt){return nt+" { ? }"}function d(nt,ht,It,Nt){var Ot=Nt?G(It,Nt):rt.call(It,", ");return nt+" ("+ht+") {"+Ot+"}"}function S(nt){for(var ht=0;ht<nt.length;ht++)if(gt(nt[ht],`
`)>=0)return!1;return!0}function M(nt,ht){var It;if(nt.indent==="	")It="	";else if(typeof nt.indent=="number"&&nt.indent>0)It=rt.call(Array(nt.indent+1)," ");else return null;return{base:It,prev:rt.call(Array(ht+1),It)}}function G(nt,ht){if(nt.length===0)return"";var It=`
`+ht.prev+ht.base;return It+rt.call(nt,","+It)+`
`+ht.prev}function Q(nt,ht){var It=tt(nt),Nt=[];if(It){Nt.length=nt.length;for(var Ot=0;Ot<nt.length;Ot++)Nt[Ot]=ft(nt,Ot)?ht(nt[Ot],nt):""}var Wt=typeof lt=="function"?lt(nt):[],Se;if(X){Se={};for(var Fr=0;Fr<Wt.length;Fr++)Se["$"+Wt[Fr]]=Wt[Fr]}for(var _e in nt)ft(nt,_e)&&(It&&String(Number(_e))===_e&&_e<nt.length||X&&Se["$"+_e]instanceof Symbol||(q.call(/[^\w$]/,_e)?Nt.push(ht(_e,nt)+": "+ht(nt[_e],nt)):Nt.push(_e+": "+ht(nt[_e],nt))));if(typeof lt=="function")for(var mr=0;mr<Wt.length;mr++)J.call(nt,Wt[mr])&&Nt.push("["+ht(Wt[mr])+"]: "+ht(nt[Wt[mr]],nt));return Nt}return r2}function pM(){if(XT)return i2;XT=!0;var n=Wl(),t=WT(),e=dM(),r=Wu(),i=n("%WeakMap%",!0),o=n("%Map%",!0),s=t("WeakMap.prototype.get",!0),a=t("WeakMap.prototype.set",!0),c=t("WeakMap.prototype.has",!0),u=t("Map.prototype.get",!0),h=t("Map.prototype.set",!0),f=t("Map.prototype.has",!0),g=function(v,w){for(var x=v,E;(E=x.next)!==null;x=E)if(E.key===w)return x.next=E.next,E.next=v.next,v.next=E,E},m=function(v,w){var x=g(v,w);return x&&x.value},y=function(v,w,x){var E=g(v,w);E?E.value=x:v.next={key:w,next:v.next,value:x}},b=function(v,w){return!!g(v,w)};return i2=function(){var w,x,E,D={assert:function(_){if(!D.has(_))throw new r("Side channel does not contain "+e(_))},get:function(_){if(i&&_&&(typeof _=="object"||typeof _=="function")){if(w)return s(w,_)}else if(o){if(x)return u(x,_)}else if(E)return m(E,_)},has:function(_){if(i&&_&&(typeof _=="object"||typeof _=="function")){if(w)return c(w,_)}else if(o){if(x)return f(x,_)}else if(E)return b(E,_);return!1},set:function(_,q){i&&_&&(typeof _=="object"||typeof _=="function")?(w||(w=new i),a(w,_,q)):o?(x||(x=new o),h(x,_,q)):(E||(E={key:{},next:null}),y(E,_,q))}};return D},i2}function h2(){if(YT)return s2;YT=!0;var n=String.prototype.replace,t=/%20/g,e={RFC1738:"RFC1738",RFC3986:"RFC3986"};return s2={default:e.RFC3986,formatters:{RFC1738:function(r){return n.call(r,t,"+")},RFC3986:function(r){return String(r)}},RFC1738:e.RFC1738,RFC3986:e.RFC3986},s2}function eD(){if(KT)return o2;KT=!0;var n=h2(),t=Object.prototype.hasOwnProperty,e=Array.isArray,r=(function(){for(var v=[],w=0;w<256;++w)v.push("%"+((w<16?"0":"")+w.toString(16)).toUpperCase());return v})(),i=function(w){for(;w.length>1;){var x=w.pop(),E=x.obj[x.prop];if(e(E)){for(var D=[],_=0;_<E.length;++_)typeof E[_]<"u"&&D.push(E[_]);x.obj[x.prop]=D}}},o=function(w,x){for(var E=x&&x.plainObjects?Object.create(null):{},D=0;D<w.length;++D)typeof w[D]<"u"&&(E[D]=w[D]);return E},s=function v(w,x,E){if(!x)return w;if(typeof x!="object"){if(e(w))w.push(x);else if(w&&typeof w=="object")(E&&(E.plainObjects||E.allowPrototypes)||!t.call(Object.prototype,x))&&(w[x]=!0);else return[w,x];return w}if(!w||typeof w!="object")return[w].concat(x);var D=w;return e(w)&&!e(x)&&(D=o(w,E)),e(w)&&e(x)?(x.forEach(function(_,q){if(t.call(w,q)){var N=w[q];N&&typeof N=="object"&&_&&typeof _=="object"?w[q]=v(N,_,E):w.push(_)}else w[q]=_}),w):Object.keys(x).reduce(function(_,q){var N=x[q];return t.call(_,q)?_[q]=v(_[q],N,E):_[q]=N,_},D)},a=function(w,x){return Object.keys(x).reduce(function(E,D){return E[D]=x[D],E},w)},c=function(v,w,x){var E=v.replace(/\+/g," ");if(x==="iso-8859-1")return E.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(E)}catch{return E}},u=1024,h=function(w,x,E,D,_){if(w.length===0)return w;var q=w;if(typeof w=="symbol"?q=Symbol.prototype.toString.call(w):typeof w!="string"&&(q=String(w)),E==="iso-8859-1")return escape(q).replace(/%u[0-9a-f]{4}/gi,function(at){return"%26%23"+parseInt(at.slice(2),16)+"%3B"});for(var N="",rt=0;rt<q.length;rt+=u){for(var Y=q.length>=u?q.slice(rt,rt+u):q,et=[],st=0;st<Y.length;++st){var lt=Y.charCodeAt(st);if(lt===45||lt===46||lt===95||lt===126||lt>=48&&lt<=57||lt>=65&&lt<=90||lt>=97&&lt<=122||_===n.RFC1738&&(lt===40||lt===41)){et[et.length]=Y.charAt(st);continue}if(lt<128){et[et.length]=r[lt];continue}if(lt<2048){et[et.length]=r[192|lt>>6]+r[128|lt&63];continue}if(lt<55296||lt>=57344){et[et.length]=r[224|lt>>12]+r[128|lt>>6&63]+r[128|lt&63];continue}st+=1,lt=65536+((lt&1023)<<10|Y.charCodeAt(st)&1023),et[et.length]=r[240|lt>>18]+r[128|lt>>12&63]+r[128|lt>>6&63]+r[128|lt&63]}N+=et.join("")}return N},f=function(w){for(var x=[{obj:{o:w},prop:"o"}],E=[],D=0;D<x.length;++D)for(var _=x[D],q=_.obj[_.prop],N=Object.keys(q),rt=0;rt<N.length;++rt){var Y=N[rt],et=q[Y];typeof et=="object"&&et!==null&&E.indexOf(et)===-1&&(x.push({obj:q,prop:Y}),E.push(et))}return i(x),w},g=function(w){return Object.prototype.toString.call(w)==="[object RegExp]"},m=function(w){return!w||typeof w!="object"?!1:!!(w.constructor&&w.constructor.isBuffer&&w.constructor.isBuffer(w))},y=function(w,x){return[].concat(w,x)},b=function(w,x){if(e(w)){for(var E=[],D=0;D<w.length;D+=1)E.push(x(w[D]));return E}return x(w)};return o2={arrayToObject:o,assign:a,combine:y,compact:f,decode:c,encode:h,isBuffer:m,isRegExp:g,maybeMap:b,merge:s},o2}function gM(){if(JT)return a2;JT=!0;var n=pM(),t=eD(),e=h2(),r=Object.prototype.hasOwnProperty,i={brackets:function(v){return v+"[]"},comma:"comma",indices:function(v,w){return v+"["+w+"]"},repeat:function(v){return v}},o=Array.isArray,s=Array.prototype.push,a=function(b,v){s.apply(b,o(v)?v:[v])},c=Date.prototype.toISOString,u=e.default,h={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:t.encode,encodeValuesOnly:!1,format:u,formatter:e.formatters[u],indices:!1,serializeDate:function(v){return c.call(v)},skipNulls:!1,strictNullHandling:!1},f=function(v){return typeof v=="string"||typeof v=="number"||typeof v=="boolean"||typeof v=="symbol"||typeof v=="bigint"},g={},m=function b(v,w,x,E,D,_,q,N,rt,Y,et,st,lt,at,X,ct,J,R){for(var T=v,L=R,k=0,B=!1;(L=L.get(g))!==void 0&&!B;){var $=L.get(v);if(k+=1,typeof $<"u"){if($===k)throw new RangeError("Cyclic object value");B=!0}typeof L.get(g)>"u"&&(k=0)}if(typeof Y=="function"?T=Y(w,T):T instanceof Date?T=lt(T):x==="comma"&&o(T)&&(T=t.maybeMap(T,function(vt){return vt instanceof Date?lt(vt):vt})),T===null){if(_)return rt&&!ct?rt(w,h.encoder,J,"key",at):w;T=""}if(f(T)||t.isBuffer(T)){if(rt){var H=ct?w:rt(w,h.encoder,J,"key",at);return[X(H)+"="+X(rt(T,h.encoder,J,"value",at))]}return[X(w)+"="+X(String(T))]}var tt=[];if(typeof T>"u")return tt;var it;if(x==="comma"&&o(T))ct&&rt&&(T=t.maybeMap(T,rt)),it=[{value:T.length>0?T.join(",")||null:void 0}];else if(o(Y))it=Y;else{var ut=Object.keys(T);it=et?ut.sort(et):ut}var V=N?w.replace(/\./g,"%2E"):w,K=E&&o(T)&&T.length===1?V+"[]":V;if(D&&o(T)&&T.length===0)return K+"[]";for(var ot=0;ot<it.length;++ot){var yt=it[ot],mt=typeof yt=="object"&&typeof yt.value<"u"?yt.value:T[yt];if(!(q&&mt===null)){var j=st&&N?yt.replace(/\./g,"%2E"):yt,z=o(T)?typeof x=="function"?x(K,j):K:K+(st?"."+j:"["+j+"]");R.set(v,k);var ft=n();ft.set(g,R),a(tt,b(mt,z,x,E,D,_,q,N,x==="comma"&&ct&&o(T)?null:rt,Y,et,st,lt,at,X,ct,J,ft))}}return tt},y=function(v){if(!v)return h;if(typeof v.allowEmptyArrays<"u"&&typeof v.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof v.encodeDotInKeys<"u"&&typeof v.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(v.encoder!==null&&typeof v.encoder<"u"&&typeof v.encoder!="function")throw new TypeError("Encoder has to be a function.");var w=v.charset||h.charset;if(typeof v.charset<"u"&&v.charset!=="utf-8"&&v.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var x=e.default;if(typeof v.format<"u"){if(!r.call(e.formatters,v.format))throw new TypeError("Unknown format option provided.");x=v.format}var E=e.formatters[x],D=h.filter;(typeof v.filter=="function"||o(v.filter))&&(D=v.filter);var _;if(v.arrayFormat in i?_=v.arrayFormat:"indices"in v?_=v.indices?"indices":"repeat":_=h.arrayFormat,"commaRoundTrip"in v&&typeof v.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var q=typeof v.allowDots>"u"?v.encodeDotInKeys===!0?!0:h.allowDots:!!v.allowDots;return{addQueryPrefix:typeof v.addQueryPrefix=="boolean"?v.addQueryPrefix:h.addQueryPrefix,allowDots:q,allowEmptyArrays:typeof v.allowEmptyArrays=="boolean"?!!v.allowEmptyArrays:h.allowEmptyArrays,arrayFormat:_,charset:w,charsetSentinel:typeof v.charsetSentinel=="boolean"?v.charsetSentinel:h.charsetSentinel,commaRoundTrip:v.commaRoundTrip,delimiter:typeof v.delimiter>"u"?h.delimiter:v.delimiter,encode:typeof v.encode=="boolean"?v.encode:h.encode,encodeDotInKeys:typeof v.encodeDotInKeys=="boolean"?v.encodeDotInKeys:h.encodeDotInKeys,encoder:typeof v.encoder=="function"?v.encoder:h.encoder,encodeValuesOnly:typeof v.encodeValuesOnly=="boolean"?v.encodeValuesOnly:h.encodeValuesOnly,filter:D,format:x,formatter:E,serializeDate:typeof v.serializeDate=="function"?v.serializeDate:h.serializeDate,skipNulls:typeof v.skipNulls=="boolean"?v.skipNulls:h.skipNulls,sort:typeof v.sort=="function"?v.sort:null,strictNullHandling:typeof v.strictNullHandling=="boolean"?v.strictNullHandling:h.strictNullHandling}};return a2=function(b,v){var w=b,x=y(v),E,D;typeof x.filter=="function"?(D=x.filter,w=D("",w)):o(x.filter)&&(D=x.filter,E=D);var _=[];if(typeof w!="object"||w===null)return"";var q=i[x.arrayFormat],N=q==="comma"&&x.commaRoundTrip;E||(E=Object.keys(w)),x.sort&&E.sort(x.sort);for(var rt=n(),Y=0;Y<E.length;++Y){var et=E[Y];x.skipNulls&&w[et]===null||a(_,m(w[et],et,q,N,x.allowEmptyArrays,x.strictNullHandling,x.skipNulls,x.encodeDotInKeys,x.encode?x.encoder:null,x.filter,x.sort,x.allowDots,x.serializeDate,x.format,x.formatter,x.encodeValuesOnly,x.charset,rt))}var st=_.join(x.delimiter),lt=x.addQueryPrefix===!0?"?":"";return x.charsetSentinel&&(x.charset==="iso-8859-1"?lt+="utf8=%26%2310003%3B&":lt+="utf8=%E2%9C%93&"),st.length>0?lt+st:""},a2}function mM(){if(ZT)return l2;ZT=!0;var n=eD(),t=Object.prototype.hasOwnProperty,e=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},i=function(g){return g.replace(/&#(\d+);/g,function(m,y){return String.fromCharCode(parseInt(y,10))})},o=function(g,m){return g&&typeof g=="string"&&m.comma&&g.indexOf(",")>-1?g.split(","):g},s="utf8=%26%2310003%3B",a="utf8=%E2%9C%93",c=function(m,y){var b={__proto__:null},v=y.ignoreQueryPrefix?m.replace(/^\?/,""):m;v=v.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var w=y.parameterLimit===1/0?void 0:y.parameterLimit,x=v.split(y.delimiter,w),E=-1,D,_=y.charset;if(y.charsetSentinel)for(D=0;D<x.length;++D)x[D].indexOf("utf8=")===0&&(x[D]===a?_="utf-8":x[D]===s&&(_="iso-8859-1"),E=D,D=x.length);for(D=0;D<x.length;++D)if(D!==E){var q=x[D],N=q.indexOf("]="),rt=N===-1?q.indexOf("="):N+1,Y,et;rt===-1?(Y=y.decoder(q,r.decoder,_,"key"),et=y.strictNullHandling?null:""):(Y=y.decoder(q.slice(0,rt),r.decoder,_,"key"),et=n.maybeMap(o(q.slice(rt+1),y),function(lt){return y.decoder(lt,r.decoder,_,"value")})),et&&y.interpretNumericEntities&&_==="iso-8859-1"&&(et=i(et)),q.indexOf("[]=")>-1&&(et=e(et)?[et]:et);var st=t.call(b,Y);st&&y.duplicates==="combine"?b[Y]=n.combine(b[Y],et):(!st||y.duplicates==="last")&&(b[Y]=et)}return b},u=function(g,m,y,b){for(var v=b?m:o(m,y),w=g.length-1;w>=0;--w){var x,E=g[w];if(E==="[]"&&y.parseArrays)x=y.allowEmptyArrays&&(v===""||y.strictNullHandling&&v===null)?[]:[].concat(v);else{x=y.plainObjects?Object.create(null):{};var D=E.charAt(0)==="["&&E.charAt(E.length-1)==="]"?E.slice(1,-1):E,_=y.decodeDotInKeys?D.replace(/%2E/g,"."):D,q=parseInt(_,10);!y.parseArrays&&_===""?x={0:v}:!isNaN(q)&&E!==_&&String(q)===_&&q>=0&&y.parseArrays&&q<=y.arrayLimit?(x=[],x[q]=v):_!=="__proto__"&&(x[_]=v)}v=x}return v},h=function(m,y,b,v){if(m){var w=b.allowDots?m.replace(/\.([^.[]+)/g,"[$1]"):m,x=/(\[[^[\]]*])/,E=/(\[[^[\]]*])/g,D=b.depth>0&&x.exec(w),_=D?w.slice(0,D.index):w,q=[];if(_){if(!b.plainObjects&&t.call(Object.prototype,_)&&!b.allowPrototypes)return;q.push(_)}for(var N=0;b.depth>0&&(D=E.exec(w))!==null&&N<b.depth;){if(N+=1,!b.plainObjects&&t.call(Object.prototype,D[1].slice(1,-1))&&!b.allowPrototypes)return;q.push(D[1])}if(D){if(b.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+b.depth+" and strictDepth is true");q.push("["+w.slice(D.index)+"]")}return u(q,y,b,v)}},f=function(m){if(!m)return r;if(typeof m.allowEmptyArrays<"u"&&typeof m.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof m.decodeDotInKeys<"u"&&typeof m.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(m.decoder!==null&&typeof m.decoder<"u"&&typeof m.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof m.charset<"u"&&m.charset!=="utf-8"&&m.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var y=typeof m.charset>"u"?r.charset:m.charset,b=typeof m.duplicates>"u"?r.duplicates:m.duplicates;if(b!=="combine"&&b!=="first"&&b!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var v=typeof m.allowDots>"u"?m.decodeDotInKeys===!0?!0:r.allowDots:!!m.allowDots;return{allowDots:v,allowEmptyArrays:typeof m.allowEmptyArrays=="boolean"?!!m.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof m.allowPrototypes=="boolean"?m.allowPrototypes:r.allowPrototypes,allowSparse:typeof m.allowSparse=="boolean"?m.allowSparse:r.allowSparse,arrayLimit:typeof m.arrayLimit=="number"?m.arrayLimit:r.arrayLimit,charset:y,charsetSentinel:typeof m.charsetSentinel=="boolean"?m.charsetSentinel:r.charsetSentinel,comma:typeof m.comma=="boolean"?m.comma:r.comma,decodeDotInKeys:typeof m.decodeDotInKeys=="boolean"?m.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof m.decoder=="function"?m.decoder:r.decoder,delimiter:typeof m.delimiter=="string"||n.isRegExp(m.delimiter)?m.delimiter:r.delimiter,depth:typeof m.depth=="number"||m.depth===!1?+m.depth:r.depth,duplicates:b,ignoreQueryPrefix:m.ignoreQueryPrefix===!0,interpretNumericEntities:typeof m.interpretNumericEntities=="boolean"?m.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof m.parameterLimit=="number"?m.parameterLimit:r.parameterLimit,parseArrays:m.parseArrays!==!1,plainObjects:typeof m.plainObjects=="boolean"?m.plainObjects:r.plainObjects,strictDepth:typeof m.strictDepth=="boolean"?!!m.strictDepth:r.strictDepth,strictNullHandling:typeof m.strictNullHandling=="boolean"?m.strictNullHandling:r.strictNullHandling}};return l2=function(g,m){var y=f(m);if(g===""||g===null||typeof g>"u")return y.plainObjects?Object.create(null):{};for(var b=typeof g=="string"?c(g,y):g,v=y.plainObjects?Object.create(null):{},w=Object.keys(b),x=0;x<w.length;++x){var E=w[x],D=h(E,b[E],y,typeof g=="string");v=n.merge(v,D,y)}return y.allowSparse===!0?v:n.compact(v)},l2}function yM(){if(QT)return c2;QT=!0;var n=gM(),t=mM(),e=h2();return c2={formats:e,parse:t,stringify:n},c2}function vM(){if(tD)return Gl;tD=!0;var n=wa;function t(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var e=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,o=["<",">",'"',"`"," ","\r",`
`,"	"],s=["{","}","|","\\","^","`"].concat(o),a=["'"].concat(s),c=["%","/","?",";","#"].concat(a),u=["/","?","#"],h=255,f=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=yM();function w(_,q,N){if(_&&typeof _=="object"&&_ instanceof t)return _;var rt=new t;return rt.parse(_,q,N),rt}t.prototype.parse=function(_,q,N){if(typeof _!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof _);var rt=_.indexOf("?"),Y=rt!==-1&&rt<_.indexOf("#")?"?":"#",et=_.split(Y),st=/\\/g;et[0]=et[0].replace(st,"/"),_=et.join(Y);var lt=_;if(lt=lt.trim(),!N&&_.split("#").length===1){var at=i.exec(lt);if(at)return this.path=lt,this.href=lt,this.pathname=at[1],at[2]?(this.search=at[2],q?this.query=v.parse(this.search.substr(1)):this.query=this.search.substr(1)):q&&(this.search="",this.query={}),this}var X=e.exec(lt);if(X){X=X[0];var ct=X.toLowerCase();this.protocol=ct,lt=lt.substr(X.length)}if(N||X||lt.match(/^\/\/[^@/]+@[^@/]+/)){var J=lt.substr(0,2)==="//";J&&!(X&&y[X])&&(lt=lt.substr(2),this.slashes=!0)}if(!y[X]&&(J||X&&!b[X])){for(var R=-1,T=0;T<u.length;T++){var L=lt.indexOf(u[T]);L!==-1&&(R===-1||L<R)&&(R=L)}var k,B;R===-1?B=lt.lastIndexOf("@"):B=lt.lastIndexOf("@",R),B!==-1&&(k=lt.slice(0,B),lt=lt.slice(B+1),this.auth=decodeURIComponent(k)),R=-1;for(var T=0;T<c.length;T++){var L=lt.indexOf(c[T]);L!==-1&&(R===-1||L<R)&&(R=L)}R===-1&&(R=lt.length),this.host=lt.slice(0,R),lt=lt.slice(R),this.parseHost(),this.hostname=this.hostname||"";var $=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!$)for(var H=this.hostname.split(/\./),T=0,tt=H.length;T<tt;T++){var it=H[T];if(it&&!it.match(f)){for(var ut="",V=0,K=it.length;V<K;V++)it.charCodeAt(V)>127?ut+="x":ut+=it[V];if(!ut.match(f)){var ot=H.slice(0,T),yt=H.slice(T+1),mt=it.match(g);mt&&(ot.push(mt[1]),yt.unshift(mt[2])),yt.length&&(lt="/"+yt.join(".")+lt),this.hostname=ot.join(".");break}}}this.hostname.length>h?this.hostname="":this.hostname=this.hostname.toLowerCase(),$||(this.hostname=n.toASCII(this.hostname));var j=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+j,this.href+=this.host,$&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),lt[0]!=="/"&&(lt="/"+lt))}if(!m[ct])for(var T=0,tt=a.length;T<tt;T++){var ft=a[T];if(lt.indexOf(ft)!==-1){var vt=encodeURIComponent(ft);vt===ft&&(vt=escape(ft)),lt=lt.split(ft).join(vt)}}var _t=lt.indexOf("#");_t!==-1&&(this.hash=lt.substr(_t),lt=lt.slice(0,_t));var gt=lt.indexOf("?");if(gt!==-1?(this.search=lt.substr(gt),this.query=lt.substr(gt+1),q&&(this.query=v.parse(this.query)),lt=lt.slice(0,gt)):q&&(this.search="",this.query={}),lt&&(this.pathname=lt),b[ct]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var j=this.pathname||"",Et=this.search||"";this.path=j+Et}return this.href=this.format(),this};function x(_){return typeof _=="string"&&(_=w(_)),_ instanceof t?_.format():t.prototype.format.call(_)}t.prototype.format=function(){var _=this.auth||"";_&&(_=encodeURIComponent(_),_=_.replace(/%3A/i,":"),_+="@");var q=this.protocol||"",N=this.pathname||"",rt=this.hash||"",Y=!1,et="";this.host?Y=_+this.host:this.hostname&&(Y=_+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(Y+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(et=v.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var st=this.search||et&&"?"+et||"";return q&&q.substr(-1)!==":"&&(q+=":"),this.slashes||(!q||b[q])&&Y!==!1?(Y="//"+(Y||""),N&&N.charAt(0)!=="/"&&(N="/"+N)):Y||(Y=""),rt&&rt.charAt(0)!=="#"&&(rt="#"+rt),st&&st.charAt(0)!=="?"&&(st="?"+st),N=N.replace(/[?#]/g,function(lt){return encodeURIComponent(lt)}),st=st.replace("#","%23"),q+Y+N+st+rt};function E(_,q){return w(_,!1,!0).resolve(q)}t.prototype.resolve=function(_){return this.resolveObject(w(_,!1,!0)).format()};function D(_,q){return _?w(_,!1,!0).resolveObject(q):q}return t.prototype.resolveObject=function(_){if(typeof _=="string"){var q=new t;q.parse(_,!1,!0),_=q}for(var N=new t,rt=Object.keys(this),Y=0;Y<rt.length;Y++){var et=rt[Y];N[et]=this[et]}if(N.hash=_.hash,_.href==="")return N.href=N.format(),N;if(_.slashes&&!_.protocol){for(var st=Object.keys(_),lt=0;lt<st.length;lt++){var at=st[lt];at!=="protocol"&&(N[at]=_[at])}return b[N.protocol]&&N.hostname&&!N.pathname&&(N.pathname="/",N.path=N.pathname),N.href=N.format(),N}if(_.protocol&&_.protocol!==N.protocol){if(!b[_.protocol]){for(var X=Object.keys(_),ct=0;ct<X.length;ct++){var J=X[ct];N[J]=_[J]}return N.href=N.format(),N}if(N.protocol=_.protocol,!_.host&&!y[_.protocol]){for(var tt=(_.pathname||"").split("/");tt.length&&!(_.host=tt.shift()););_.host||(_.host=""),_.hostname||(_.hostname=""),tt[0]!==""&&tt.unshift(""),tt.length<2&&tt.unshift(""),N.pathname=tt.join("/")}else N.pathname=_.pathname;if(N.search=_.search,N.query=_.query,N.host=_.host||"",N.auth=_.auth,N.hostname=_.hostname||_.host,N.port=_.port,N.pathname||N.search){var R=N.pathname||"",T=N.search||"";N.path=R+T}return N.slashes=N.slashes||_.slashes,N.href=N.format(),N}var L=N.pathname&&N.pathname.charAt(0)==="/",k=_.host||_.pathname&&_.pathname.charAt(0)==="/",B=k||L||N.host&&_.pathname,$=B,H=N.pathname&&N.pathname.split("/")||[],tt=_.pathname&&_.pathname.split("/")||[],it=N.protocol&&!b[N.protocol];if(it&&(N.hostname="",N.port=null,N.host&&(H[0]===""?H[0]=N.host:H.unshift(N.host)),N.host="",_.protocol&&(_.hostname=null,_.port=null,_.host&&(tt[0]===""?tt[0]=_.host:tt.unshift(_.host)),_.host=null),B=B&&(tt[0]===""||H[0]==="")),k)N.host=_.host||_.host===""?_.host:N.host,N.hostname=_.hostname||_.hostname===""?_.hostname:N.hostname,N.search=_.search,N.query=_.query,H=tt;else if(tt.length)H||(H=[]),H.pop(),H=H.concat(tt),N.search=_.search,N.query=_.query;else if(_.search!=null){if(it){N.host=H.shift(),N.hostname=N.host;var ut=N.host&&N.host.indexOf("@")>0?N.host.split("@"):!1;ut&&(N.auth=ut.shift(),N.hostname=ut.shift(),N.host=N.hostname)}return N.search=_.search,N.query=_.query,(N.pathname!==null||N.search!==null)&&(N.path=(N.pathname?N.pathname:"")+(N.search?N.search:"")),N.href=N.format(),N}if(!H.length)return N.pathname=null,N.search?N.path="/"+N.search:N.path=null,N.href=N.format(),N;for(var V=H.slice(-1)[0],K=(N.host||_.host||H.length>1)&&(V==="."||V==="..")||V==="",ot=0,yt=H.length;yt>=0;yt--)V=H[yt],V==="."?H.splice(yt,1):V===".."?(H.splice(yt,1),ot++):ot&&(H.splice(yt,1),ot--);if(!B&&!$)for(;ot--;ot)H.unshift("..");B&&H[0]!==""&&(!H[0]||H[0].charAt(0)!=="/")&&H.unshift(""),K&&H.join("/").substr(-1)!=="/"&&H.push("");var mt=H[0]===""||H[0]&&H[0].charAt(0)==="/";if(it){N.hostname=mt?"":H.length?H.shift():"",N.host=N.hostname;var ut=N.host&&N.host.indexOf("@")>0?N.host.split("@"):!1;ut&&(N.auth=ut.shift(),N.hostname=ut.shift(),N.host=N.hostname)}return B=B||N.host&&H.length,B&&!mt&&H.unshift(""),H.length>0?N.pathname=H.join("/"):(N.pathname=null,N.path=null),(N.pathname!==null||N.search!==null)&&(N.path=(N.pathname?N.pathname:"")+(N.search?N.search:"")),N.auth=_.auth||N.auth,N.slashes=N.slashes||_.slashes,N.href=N.format(),N},t.prototype.parseHost=function(){var _=this.host,q=r.exec(_);q&&(q=q[0],q!==":"&&(this.port=q.substr(1)),_=_.substr(0,_.length-q.length)),_&&(this.hostname=_)},Gl.parse=w,Gl.resolve=E,Gl.resolveObject=D,Gl.format=x,Gl.Url=t,Gl}function f2(n){if(typeof n=="string")n=new URL(n);else if(!(n instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(n.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return u2?IM(n):OM(n)}function IM(n){let t=n.hostname,e=n.pathname;for(let r=0;r<e.length;r++)if(e[r]==="%"){let i=e.codePointAt(r+2)||32;if(e[r+1]==="2"&&i===102||e[r+1]==="5"&&i===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(e=e.replace(SM,"\\"),e=decodeURIComponent(e),t!=="")return`\\\\${t}${e}`;{let r=e.codePointAt(1)|32,i=e[2];if(r<xM||r>EM||i!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return e.slice(1)}}function OM(n){if(n.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let t=n.pathname;for(let e=0;e<t.length;e++)if(t[e]==="%"){let r=t.codePointAt(e+2)||32;if(t[e+1]==="2"&&r===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(t)}function NM(n){let t=t2.resolve(n),e=n.charCodeAt(n.length-1);(e===AM||u2&&e===wM)&&t[t.length-1]!==t2.sep&&(t+="/");let r=new URL("file://");return t.includes("%")&&(t=t.replace(_M,"%25")),!u2&&t.includes("\\")&&(t=t.replace(CM,"%5C")),t.includes(`
`)&&(t=t.replace(TM,"%0A")),t.includes("\r")&&(t=t.replace(DM,"%0D")),t.includes("	")&&(t=t.replace(RM,"%09")),r.pathname=t,r}var fM,r2,VT,n2,i2,XT,s2,YT,o2,KT,a2,JT,l2,ZT,c2,QT,Gl,tD,xn,bM,gj,mj,yj,vj,bj,wj,wM,AM,xM,EM,u2,SM,_M,CM,TM,DM,RM,rD=Qe(()=>{wt();xt();At();Rw();Zw();e2();g0();fM=Object.freeze(Object.create(null)),r2={},VT=!1,n2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;i2={},XT=!1;s2={},YT=!1;o2={},KT=!1;a2={},JT=!1;l2={},ZT=!1;c2={},QT=!1;Gl={},tD=!1;xn=vM();xn.parse;xn.resolve;xn.resolveObject;xn.format;xn.Url;bM=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0;xn.URL=typeof URL<"u"?URL:null;xn.pathToFileURL=NM;xn.fileURLToPath=f2;gj=xn.Url,mj=xn.format,yj=xn.resolve,vj=xn.resolveObject,bj=xn.parse,wj=xn.URL,wM=92,AM=47,xM=97,EM=122,u2=bM==="win32",SM=/\//g,_M=/%/g,CM=/\\/g,TM=/\n/g,DM=/\r/g,RM=/\t/g});var v2={};Mm(v2,{Dir:()=>w4,Dirent:()=>A4,F_OK:()=>D4,FileReadStream:()=>_4,FileWriteStream:()=>C4,R_OK:()=>R4,ReadStream:()=>E4,Stats:()=>x4,W_OK:()=>I4,WriteStream:()=>S4,X_OK:()=>O4,_toUnixTimestamp:()=>T4,access:()=>YM,accessSync:()=>KM,appendFile:()=>VM,appendFileSync:()=>XM,chmod:()=>QM,chmodSync:()=>t3,chown:()=>JM,chownSync:()=>ZM,close:()=>e3,closeSync:()=>r3,constants:()=>N4,copyFile:()=>n3,copyFileSync:()=>i3,cp:()=>s3,cpSync:()=>o3,createReadStream:()=>a3,createWriteStream:()=>l3,default:()=>qe,exists:()=>c3,existsSync:()=>T0,fchmod:()=>f3,fchmodSync:()=>d3,fchown:()=>u3,fchownSync:()=>h3,fdatasync:()=>p3,fdatasyncSync:()=>g3,fstat:()=>m3,fstatSync:()=>y3,fsync:()=>v3,fsyncSync:()=>b3,ftruncate:()=>w3,ftruncateSync:()=>A3,futimes:()=>x3,futimesSync:()=>E3,lchmod:()=>C3,lchmodSync:()=>T3,lchown:()=>S3,lchownSync:()=>_3,link:()=>D3,linkSync:()=>R3,lstat:()=>I3,lstatSync:()=>m2,mkdir:()=>O3,mkdirSync:()=>N3,mkdtemp:()=>P3,mkdtempSync:()=>k3,open:()=>B3,openSync:()=>L3,opendir:()=>F3,opendirSync:()=>M3,promises:()=>P4,read:()=>$3,readFile:()=>W3,readFileSync:()=>y2,readSync:()=>q3,readdir:()=>U3,readdirSync:()=>j3,readlink:()=>G3,readlinkSync:()=>V3,readv:()=>z3,readvSync:()=>H3,realpath:()=>X3,realpathSync:()=>Y3,rename:()=>K3,renameSync:()=>J3,rm:()=>Z3,rmSync:()=>Q3,rmdir:()=>t4,rmdirSync:()=>e4,stat:()=>r4,statSync:()=>n4,symlink:()=>i4,symlinkSync:()=>s4,truncate:()=>o4,truncateSync:()=>a4,unlink:()=>c4,unlinkSync:()=>u4,unwatchFile:()=>l4,utimes:()=>h4,utimesSync:()=>f4,watch:()=>d4,watchFile:()=>p4,write:()=>m4,writeFile:()=>g4,writeFileSync:()=>TD,writeSync:()=>y4,writev:()=>v4,writevSync:()=>b4});function Pd(){return nD||(nD=!0,Object.defineProperty(Od,"__esModule",{value:!0}),Od.constants=void 0,Od.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4}),Od}function PM(){return iD||(iD=!0,typeof BigInt=="function"?S0.default=BigInt:S0.default=function(){throw new Error("BigInt is not supported in this environment.")}),S0}function d2(){if(sD)return Gu;sD=!0,Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.Stats=void 0;var n=Pd(),t=PM(),e=n.constants.S_IFMT,r=n.constants.S_IFDIR,i=n.constants.S_IFREG,o=n.constants.S_IFBLK,s=n.constants.S_IFCHR,a=n.constants.S_IFLNK,c=n.constants.S_IFIFO,u=n.constants.S_IFSOCK,h=(function(){function f(){}return f.build=function(g,m){m===void 0&&(m=!1);var y=new f,b=g.uid,v=g.gid,w=g.atime,x=g.mtime,E=g.ctime,D=m?t.default:function(q){return q};y.uid=D(b),y.gid=D(v),y.rdev=D(0),y.blksize=D(4096),y.ino=D(g.ino),y.size=D(g.getSize()),y.blocks=D(1),y.atime=w,y.mtime=x,y.ctime=E,y.birthtime=E,y.atimeMs=D(w.getTime()),y.mtimeMs=D(x.getTime());var _=D(E.getTime());return y.ctimeMs=_,y.birthtimeMs=_,y.dev=D(0),y.mode=D(g.mode),y.nlink=D(g.nlink),y},f.prototype._checkModeProperty=function(g){return(Number(this.mode)&e)===g},f.prototype.isDirectory=function(){return this._checkModeProperty(r)},f.prototype.isFile=function(){return this._checkModeProperty(i)},f.prototype.isBlockDevice=function(){return this._checkModeProperty(o)},f.prototype.isCharacterDevice=function(){return this._checkModeProperty(s)},f.prototype.isSymbolicLink=function(){return this._checkModeProperty(a)},f.prototype.isFIFO=function(){return this._checkModeProperty(c)},f.prototype.isSocket=function(){return this._checkModeProperty(u)},f})();return Gu.Stats=h,Gu.default=h,Gu}function p2(){if(oD)return zi;oD=!0;var n=zi&&zi.__spreadArray||function(o,s,a){if(a||arguments.length===2)for(var c=0,u=s.length,h;c<u;c++)(h||!(c in s))&&(h||(h=Array.prototype.slice.call(s,0,c)),h[c]=s[c]);return o.concat(h||Array.prototype.slice.call(s))};Object.defineProperty(zi,"__esModule",{value:!0}),zi.bufferFrom=zi.bufferAllocUnsafe=zi.Buffer=void 0;var t=zm();Object.defineProperty(zi,"Buffer",{enumerable:!0,get:function(){return t.Buffer}});function e(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];return new(t.Buffer.bind.apply(t.Buffer,n([void 0,o],s,!1)))}var r=t.Buffer.allocUnsafe||e;zi.bufferAllocUnsafe=r;var i=t.Buffer.from||e;return zi.bufferFrom=i,zi}function wD(){if(aD)return Ar;aD=!0;var n=Ar&&Ar.__extends||(function(){var y=function(b,v){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,x){w.__proto__=x}||function(w,x){for(var E in x)Object.prototype.hasOwnProperty.call(x,E)&&(w[E]=x[E])},y(b,v)};return function(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");y(b,v);function w(){this.constructor=b}b.prototype=v===null?Object.create(v):(w.prototype=v.prototype,new w)}})();Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.E=Ar.AssertionError=Ar.message=Ar.RangeError=Ar.TypeError=Ar.Error=void 0;var t=Yt,e=St,r=typeof Symbol>"u"?"_kCode":Symbol("code"),i={};function o(y){return(function(b){n(v,b);function v(w){for(var x=[],E=1;E<arguments.length;E++)x[E-1]=arguments[E];var D=b.call(this,c(w,x))||this;return D.code=w,D[r]=w,D.name="".concat(b.prototype.name," [").concat(D[r],"]"),D}return v})(y)}var s=typeof globalThis<"u"?globalThis:kM,a=(function(y){n(b,y);function b(v){var w=this;if(typeof v!="object"||v===null)throw new Ar.TypeError("ERR_INVALID_ARG_TYPE","options","object");return v.message?w=y.call(this,v.message)||this:w=y.call(this,"".concat(e.inspect(v.actual).slice(0,128)," ")+"".concat(v.operator," ").concat(e.inspect(v.expected).slice(0,128)))||this,w.generatedMessage=!v.message,w.name="AssertionError [ERR_ASSERTION]",w.code="ERR_ASSERTION",w.actual=v.actual,w.expected=v.expected,w.operator=v.operator,Ar.Error.captureStackTrace(w,v.stackStartFunction),w}return b})(s.Error);Ar.AssertionError=a;function c(y,b){t.strictEqual(typeof y,"string");var v=i[y];t(v,"An invalid error message key was used: ".concat(y,"."));var w;if(typeof v=="function")w=v;else{if(w=e.format,b===void 0||b.length===0)return v;b.unshift(v)}return String(w.apply(null,b))}Ar.message=c;function u(y,b){i[y]=typeof b=="function"?b:String(b)}Ar.E=u,Ar.Error=o(s.Error),Ar.TypeError=o(s.TypeError),Ar.RangeError=o(s.RangeError),u("ERR_ARG_NOT_ITERABLE","%s must be iterable"),u("ERR_ASSERTION","%s"),u("ERR_BUFFER_OUT_OF_BOUNDS",m),u("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received"),u("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s"),u("ERR_CPU_USAGE","Unable to obtain cpu usage %s"),u("ERR_DNS_SET_SERVERS_FAILED",function(y,b){return'c-ares failed to set servers: "'.concat(y,'" [').concat(b,"]")}),u("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value"),u("ERR_ENCODING_NOT_SUPPORTED",function(y){return'The "'.concat(y,'" encoding is not supported')}),u("ERR_ENCODING_INVALID_ENCODED_DATA",function(y){return"The encoded data was not valid for encoding ".concat(y)}),u("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client"),u("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s"),u("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding"),u("ERR_INDEX_OUT_OF_RANGE","Index out of range"),u("ERR_INVALID_ARG_TYPE",h),u("ERR_INVALID_ARRAY_LENGTH",function(y,b,v){return t.strictEqual(typeof v,"number"),'The array "'.concat(y,'" (length ').concat(v,") must be of length ").concat(b,".")}),u("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s"),u("ERR_INVALID_CALLBACK","Callback must be a function"),u("ERR_INVALID_CHAR","Invalid character in %s"),u("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column"),u("ERR_INVALID_FD",'"fd" must be a positive integer: %s'),u("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s'),u("ERR_INVALID_FILE_URL_PATH","File URL path %s"),u("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent"),u("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s"),u("ERR_INVALID_OPT_VALUE",function(y,b){return'The value "'.concat(String(b),'" is invalid for option "').concat(y,'"')}),u("ERR_INVALID_OPT_VALUE_ENCODING",function(y){return'The value "'.concat(String(y),'" is invalid for option "encoding"')}),u("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL'),u("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s"),u("ERR_INVALID_THIS",'Value of "this" must be of type %s'),u("ERR_INVALID_TUPLE","%s must be an iterable %s tuple"),u("ERR_INVALID_URL","Invalid URL: %s"),u("ERR_INVALID_URL_SCHEME",function(y){return"The URL must be ".concat(g(y,"scheme"))}),u("ERR_IPC_CHANNEL_CLOSED","Channel closed"),u("ERR_IPC_DISCONNECTED","IPC channel is already disconnected"),u("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe"),u("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks"),u("ERR_MISSING_ARGS",f),u("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),u("ERR_NAPI_CONS_FUNCTION","Constructor must be a function"),u("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object"),u("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support"),u("ERR_NO_LONGER_SUPPORTED","%s is no longer supported"),u("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s"),u("ERR_SOCKET_ALREADY_BOUND","Socket is already bound"),u("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536"),u("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6"),u("ERR_SOCKET_CANNOT_SEND","Unable to send data"),u("ERR_SOCKET_CLOSED","Socket is closed"),u("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running"),u("ERR_STDERR_CLOSE","process.stderr cannot be closed"),u("ERR_STDOUT_CLOSE","process.stdout cannot be closed"),u("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode"),u("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s"),u("ERR_TLS_DH_PARAM_SIZE",function(y){return"DH parameter size ".concat(y," is less than 2048")}),u("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout"),u("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate"),u("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext'),u("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected"),u("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming"),u("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0"),u("ERR_UNKNOWN_ENCODING","Unknown encoding: %s"),u("ERR_UNKNOWN_SIGNAL","Unknown signal: %s"),u("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type"),u("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type"),u("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl");function h(y,b,v){t(y,"name is required");var w;b.includes("not ")?(w="must not be",b=b.split("not ")[1]):w="must be";var x;if(Array.isArray(y)){var E=y.map(function(_){return'"'.concat(_,'"')}).join(", ");x="The ".concat(E," arguments ").concat(w," ").concat(g(b,"type"))}else if(y.includes(" argument"))x="The ".concat(y," ").concat(w," ").concat(g(b,"type"));else{var D=y.includes(".")?"property":"argument";x='The "'.concat(y,'" ').concat(D," ").concat(w," ").concat(g(b,"type"))}return arguments.length>=3&&(x+=". Received type ".concat(v!==null?typeof v:"null")),x}function f(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];t(y.length>0,"At least one arg needs to be specified");var v="The ",w=y.length;switch(y=y.map(function(x){return'"'.concat(x,'"')}),w){case 1:v+="".concat(y[0]," argument");break;case 2:v+="".concat(y[0]," and ").concat(y[1]," arguments");break;default:v+=y.slice(0,w-1).join(", "),v+=", and ".concat(y[w-1]," arguments");break}return"".concat(v," must be specified")}function g(y,b){if(t(y,"expected is required"),t(typeof b=="string","thing is required"),Array.isArray(y)){var v=y.length;return t(v>0,"At least one expected value needs to be specified"),y=y.map(function(w){return String(w)}),v>2?"one of ".concat(b," ").concat(y.slice(0,v-1).join(", "),", or ")+y[v-1]:v===2?"one of ".concat(b," ").concat(y[0]," or ").concat(y[1]):"of ".concat(b," ").concat(y[0])}else return"of ".concat(b," ").concat(String(y))}function m(y,b){return b?"Attempt to write outside buffer bounds":'"'.concat(y,'" is outside of buffer bounds')}return Ar}function AD(){if(lD)return vs;lD=!0,Object.defineProperty(vs,"__esModule",{value:!0}),vs.strToEncoding=vs.assertEncoding=vs.ENCODING_UTF8=void 0;var n=p2(),t=wD();vs.ENCODING_UTF8="utf8";function e(i){if(i&&!n.Buffer.isEncoding(i))throw new t.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",i)}vs.assertEncoding=e;function r(i,o){return!o||o===vs.ENCODING_UTF8?i:o==="buffer"?new n.Buffer(i):new n.Buffer(i).toString(o)}return vs.strToEncoding=r,vs}function xD(){if(cD)return Vu;cD=!0,Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.Dirent=void 0;var n=Pd(),t=AD(),e=n.constants.S_IFMT,r=n.constants.S_IFDIR,i=n.constants.S_IFREG,o=n.constants.S_IFBLK,s=n.constants.S_IFCHR,a=n.constants.S_IFLNK,c=n.constants.S_IFIFO,u=n.constants.S_IFSOCK,h=(function(){function f(){this.name="",this.mode=0}return f.build=function(g,m){var y=new f,b=g.getNode().mode;return y.name=(0,t.strToEncoding)(g.getName(),m),y.mode=b,y},f.prototype._checkModeProperty=function(g){return(this.mode&e)===g},f.prototype.isDirectory=function(){return this._checkModeProperty(r)},f.prototype.isFile=function(){return this._checkModeProperty(i)},f.prototype.isBlockDevice=function(){return this._checkModeProperty(o)},f.prototype.isCharacterDevice=function(){return this._checkModeProperty(s)},f.prototype.isSymbolicLink=function(){return this._checkModeProperty(a)},f.prototype.isFIFO=function(){return this._checkModeProperty(c)},f.prototype.isSocket=function(){return this._checkModeProperty(u)},f})();return Vu.Dirent=h,Vu.default=h,Vu}function ED(){if(uD)return _0;uD=!0;var n=ba;Object.defineProperty(_0,"__esModule",{value:!0});var t;return typeof n.nextTick=="function"?t=n.nextTick.bind(typeof globalThis<"u"?globalThis:hD):t=setTimeout.bind(typeof globalThis<"u"?globalThis:hD),_0.default=t,_0}function SD(){if(fD)return Xu;fD=!0;var n=ba;Object.defineProperty(Xu,"__esModule",{value:!0}),Xu.createProcess=void 0;var t=function(){if(typeof n<"u")return n;try{return ba}catch{return}};function e(){var r=t()||{};return r.cwd||(r.cwd=function(){return"/"}),r.nextTick||(r.nextTick=ED().default),r.emitWarning||(r.emitWarning=function(i,o){console.warn("".concat(o).concat(o?": ":"").concat(i))}),r.env||(r.env={}),r}return Xu.createProcess=e,Xu.default=e(),Xu}function BM(){if(dD)return En;dD=!0;var n=En&&En.__extends||(function(){var v=function(w,x){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,D){E.__proto__=D}||function(E,D){for(var _ in D)Object.prototype.hasOwnProperty.call(D,_)&&(E[_]=D[_])},v(w,x)};return function(w,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");v(w,x);function E(){this.constructor=w}w.prototype=x===null?Object.create(x):(E.prototype=x.prototype,new E)}})();Object.defineProperty(En,"__esModule",{value:!0}),En.File=En.Link=En.Node=En.SEP=void 0;var t=SD(),e=p2(),r=Pd(),i=wr,o=d2(),s=r.constants.S_IFMT,a=r.constants.S_IFDIR,c=r.constants.S_IFREG,u=r.constants.S_IFLNK,h=r.constants.O_APPEND,f=function(){var v,w;return(w=(v=t.default.getuid)===null||v===void 0?void 0:v.call(t.default))!==null&&w!==void 0?w:0},g=function(){var v,w;return(w=(v=t.default.getgid)===null||v===void 0?void 0:v.call(t.default))!==null&&w!==void 0?w:0};En.SEP="/";var m=(function(v){n(w,v);function w(x,E){E===void 0&&(E=438);var D=v.call(this)||this;return D._uid=f(),D._gid=g(),D._atime=new Date,D._mtime=new Date,D._ctime=new Date,D._perm=438,D.mode=c,D._nlink=1,D._perm=E,D.mode|=E,D.ino=x,D}return Object.defineProperty(w.prototype,"ctime",{get:function(){return this._ctime},set:function(x){this._ctime=x},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"uid",{get:function(){return this._uid},set:function(x){this._uid=x,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"gid",{get:function(){return this._gid},set:function(x){this._gid=x,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"atime",{get:function(){return this._atime},set:function(x){this._atime=x,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"mtime",{get:function(){return this._mtime},set:function(x){this._mtime=x,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"perm",{get:function(){return this._perm},set:function(x){this._perm=x,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"nlink",{get:function(){return this._nlink},set:function(x){this._nlink=x,this.ctime=new Date},enumerable:!1,configurable:!0}),w.prototype.getString=function(x){return x===void 0&&(x="utf8"),this.atime=new Date,this.getBuffer().toString(x)},w.prototype.setString=function(x){this.buf=(0,e.bufferFrom)(x,"utf8"),this.touch()},w.prototype.getBuffer=function(){return this.atime=new Date,this.buf||this.setBuffer((0,e.bufferAllocUnsafe)(0)),(0,e.bufferFrom)(this.buf)},w.prototype.setBuffer=function(x){this.buf=(0,e.bufferFrom)(x),this.touch()},w.prototype.getSize=function(){return this.buf?this.buf.length:0},w.prototype.setModeProperty=function(x){this.mode=this.mode&~s|x},w.prototype.setIsFile=function(){this.setModeProperty(c)},w.prototype.setIsDirectory=function(){this.setModeProperty(a)},w.prototype.setIsSymlink=function(){this.setModeProperty(u)},w.prototype.isFile=function(){return(this.mode&s)===c},w.prototype.isDirectory=function(){return(this.mode&s)===a},w.prototype.isSymlink=function(){return(this.mode&s)===u},w.prototype.makeSymlink=function(x){this.symlink=x,this.setIsSymlink()},w.prototype.write=function(x,E,D,_){if(E===void 0&&(E=0),D===void 0&&(D=x.length),_===void 0&&(_=0),this.buf||(this.buf=(0,e.bufferAllocUnsafe)(0)),_+D>this.buf.length){var q=(0,e.bufferAllocUnsafe)(_+D);this.buf.copy(q,0,0,this.buf.length),this.buf=q}return x.copy(this.buf,_,E,E+D),this.touch(),D},w.prototype.read=function(x,E,D,_){E===void 0&&(E=0),D===void 0&&(D=x.byteLength),_===void 0&&(_=0),this.atime=new Date,this.buf||(this.buf=(0,e.bufferAllocUnsafe)(0));var q=D;return q>x.byteLength&&(q=x.byteLength),q+_>this.buf.length&&(q=this.buf.length-_),this.buf.copy(x,E,_,_+q),q},w.prototype.truncate=function(x){if(x===void 0&&(x=0),!x)this.buf=(0,e.bufferAllocUnsafe)(0);else if(this.buf||(this.buf=(0,e.bufferAllocUnsafe)(0)),x<=this.buf.length)this.buf=this.buf.slice(0,x);else{var E=(0,e.bufferAllocUnsafe)(x);this.buf.copy(E),E.fill(0,this.buf.length),this.buf=E}this.touch()},w.prototype.chmod=function(x){this.perm=x,this.mode=this.mode&-512|x,this.touch()},w.prototype.chown=function(x,E){this.uid=x,this.gid=E,this.touch()},w.prototype.touch=function(){this.mtime=new Date,this.emit("change",this)},w.prototype.canRead=function(x,E){return x===void 0&&(x=f()),E===void 0&&(E=g()),!!(this.perm&4||E===this.gid&&this.perm&32||x===this.uid&&this.perm&256)},w.prototype.canWrite=function(x,E){return x===void 0&&(x=f()),E===void 0&&(E=g()),!!(this.perm&2||E===this.gid&&this.perm&16||x===this.uid&&this.perm&128)},w.prototype.del=function(){this.emit("delete",this)},w.prototype.toJSON=function(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}},w})(i.EventEmitter);En.Node=m;var y=(function(v){n(w,v);function w(x,E,D){var _=v.call(this)||this;return _.children={},_._steps=[],_.ino=0,_.length=0,_.vol=x,_.parent=E,_.name=D,_.syncSteps(),_}return Object.defineProperty(w.prototype,"steps",{get:function(){return this._steps},set:function(x){this._steps=x;for(var E=0,D=Object.entries(this.children);E<D.length;E++){var _=D[E],q=_[0],N=_[1];q==="."||q===".."||N?.syncSteps()}},enumerable:!1,configurable:!0}),w.prototype.setNode=function(x){this.node=x,this.ino=x.ino},w.prototype.getNode=function(){return this.node},w.prototype.createChild=function(x,E){E===void 0&&(E=this.vol.createNode());var D=new w(this.vol,this,x);return D.setNode(E),E.isDirectory()&&(D.children["."]=D,D.getNode().nlink++),this.setChild(x,D),D},w.prototype.setChild=function(x,E){E===void 0&&(E=new w(this.vol,this,x)),this.children[x]=E,E.parent=this,this.length++;var D=E.getNode();return D.isDirectory()&&(E.children[".."]=this,this.getNode().nlink++),this.getNode().mtime=new Date,this.emit("child:add",E,this),E},w.prototype.deleteChild=function(x){var E=x.getNode();E.isDirectory()&&(delete x.children[".."],this.getNode().nlink--),delete this.children[x.getName()],this.length--,this.getNode().mtime=new Date,this.emit("child:delete",x,this)},w.prototype.getChild=function(x){if(this.getNode().mtime=new Date,Object.hasOwnProperty.call(this.children,x))return this.children[x]},w.prototype.getPath=function(){return this.steps.join(En.SEP)},w.prototype.getName=function(){return this.steps[this.steps.length-1]},w.prototype.walk=function(x,E,D){if(E===void 0&&(E=x.length),D===void 0&&(D=0),D>=x.length)return this;if(D>=E)return this;var _=x[D],q=this.getChild(_);return q?q.walk(x,E,D+1):null},w.prototype.toJSON=function(){return{steps:this.steps,ino:this.ino,children:Object.keys(this.children)}},w.prototype.syncSteps=function(){this.steps=this.parent?this.parent.steps.concat([this.name]):[this.name]},w})(i.EventEmitter);En.Link=y;var b=(function(){function v(w,x,E,D){this.position=0,this.link=w,this.node=x,this.flags=E,this.fd=D}return v.prototype.getString=function(w){return this.node.getString()},v.prototype.setString=function(w){this.node.setString(w)},v.prototype.getBuffer=function(){return this.node.getBuffer()},v.prototype.setBuffer=function(w){this.node.setBuffer(w)},v.prototype.getSize=function(){return this.node.getSize()},v.prototype.truncate=function(w){this.node.truncate(w)},v.prototype.seekTo=function(w){this.position=w},v.prototype.stats=function(){return o.default.build(this.node)},v.prototype.write=function(w,x,E,D){x===void 0&&(x=0),E===void 0&&(E=w.length),typeof D!="number"&&(D=this.position),this.flags&h&&(D=this.getSize());var _=this.node.write(w,x,E,D);return this.position=D+_,_},v.prototype.read=function(w,x,E,D){x===void 0&&(x=0),E===void 0&&(E=w.byteLength),typeof D!="number"&&(D=this.position);var _=this.node.read(w,x,E,D);return this.position=D+_,_},v.prototype.chmod=function(w){this.node.chmod(w)},v.prototype.chown=function(w,x){this.node.chown(w,x)},v})();return En.File=b,En}function FM(){if(pD)return C0;pD=!0,Object.defineProperty(C0,"__esModule",{value:!0});function n(t,e,r){var i=setTimeout.apply(typeof globalThis<"u"?globalThis:LM,arguments);return i&&typeof i=="object"&&typeof i.unref=="function"&&i.unref(),i}return C0.default=n,C0}function MM(){if(gD)return Aa;gD=!0;var n=Aa&&Aa.__spreadArray||function(i,o,s){if(s||arguments.length===2)for(var a=0,c=o.length,u;a<c;a++)(u||!(a in o))&&(u||(u=Array.prototype.slice.call(o,0,a)),u[a]=o[a]);return i.concat(u||Array.prototype.slice.call(o))};Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.FileHandle=void 0;function t(i,o,s){return s===void 0&&(s=function(a){return a}),function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return new Promise(function(u,h){i[o].bind(i).apply(void 0,n(n([],a,!1),[function(f,g){return f?h(f):u(s(g))}],!1))})}}var e=(function(){function i(o,s){this.vol=o,this.fd=s}return i.prototype.appendFile=function(o,s){return t(this.vol,"appendFile")(this.fd,o,s)},i.prototype.chmod=function(o){return t(this.vol,"fchmod")(this.fd,o)},i.prototype.chown=function(o,s){return t(this.vol,"fchown")(this.fd,o,s)},i.prototype.close=function(){return t(this.vol,"close")(this.fd)},i.prototype.datasync=function(){return t(this.vol,"fdatasync")(this.fd)},i.prototype.read=function(o,s,a,c){return t(this.vol,"read",function(u){return{bytesRead:u,buffer:o}})(this.fd,o,s,a,c)},i.prototype.readFile=function(o){return t(this.vol,"readFile")(this.fd,o)},i.prototype.stat=function(o){return t(this.vol,"fstat")(this.fd,o)},i.prototype.sync=function(){return t(this.vol,"fsync")(this.fd)},i.prototype.truncate=function(o){return t(this.vol,"ftruncate")(this.fd,o)},i.prototype.utimes=function(o,s){return t(this.vol,"futimes")(this.fd,o,s)},i.prototype.write=function(o,s,a,c){return t(this.vol,"write",function(u){return{bytesWritten:u,buffer:o}})(this.fd,o,s,a,c)},i.prototype.writeFile=function(o,s){return t(this.vol,"writeFile")(this.fd,o,s)},i})();Aa.FileHandle=e;function r(i){return typeof Promise>"u"?null:{FileHandle:e,access:function(o,s){return t(i,"access")(o,s)},appendFile:function(o,s,a){return t(i,"appendFile")(o instanceof e?o.fd:o,s,a)},chmod:function(o,s){return t(i,"chmod")(o,s)},chown:function(o,s,a){return t(i,"chown")(o,s,a)},copyFile:function(o,s,a){return t(i,"copyFile")(o,s,a)},lchmod:function(o,s){return t(i,"lchmod")(o,s)},lchown:function(o,s,a){return t(i,"lchown")(o,s,a)},link:function(o,s){return t(i,"link")(o,s)},lstat:function(o,s){return t(i,"lstat")(o,s)},mkdir:function(o,s){return t(i,"mkdir")(o,s)},mkdtemp:function(o,s){return t(i,"mkdtemp")(o,s)},open:function(o,s,a){return t(i,"open",function(c){return new e(i,c)})(o,s,a)},readdir:function(o,s){return t(i,"readdir")(o,s)},readFile:function(o,s){return t(i,"readFile")(o instanceof e?o.fd:o,s)},readlink:function(o,s){return t(i,"readlink")(o,s)},realpath:function(o,s){return t(i,"realpath")(o,s)},rename:function(o,s){return t(i,"rename")(o,s)},rmdir:function(o){return t(i,"rmdir")(o)},rm:function(o,s){return t(i,"rm")(o,s)},stat:function(o,s){return t(i,"stat")(o,s)},symlink:function(o,s,a){return t(i,"symlink")(o,s,a)},truncate:function(o,s){return t(i,"truncate")(o,s)},unlink:function(o){return t(i,"unlink")(o)},utimes:function(o,s,a){return t(i,"utimes")(o,s,a)},writeFile:function(o,s,a){return t(i,"writeFile")(o instanceof e?o.fd:o,s,a)}}}return Aa.default=r,Aa}function UM(){if(mD)return Nd;mD=!0;var n=ba;Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.correctPath=s,Nd.unixify=o;var t=n.platform==="win32";function e(a){var c=a.length-1;if(c<2)return a;for(;r(a,c);)c--;return a.substr(0,c+1)}function r(a,c){var u=a[c];return c>0&&(u==="/"||t&&u==="\\")}function i(a,c){if(typeof a!="string")throw new TypeError("expected a string");return a=a.replace(/[\\\/]+/g,"/"),c!==!1&&(a=e(a)),a}function o(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t?(a=i(a,c),a.replace(/^([a-zA-Z]+:|\.\/)/,"")):a}function s(a){return o(a.replace(/^\\\\\?\\.:\\/,"\\"))}return Nd}function _D(){if(yD)return de;yD=!0;var n=de&&de.__extends||(function(){var W=function(I,P){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,Z){U.__proto__=Z}||function(U,Z){for(var dt in Z)Object.prototype.hasOwnProperty.call(Z,dt)&&(U[dt]=Z[dt])},W(I,P)};return function(I,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");W(I,P);function U(){this.constructor=I}I.prototype=P===null?Object.create(P):(U.prototype=P.prototype,new U)}})(),t=de&&de.__spreadArray||function(W,I,P){if(P||arguments.length===2)for(var U=0,Z=I.length,dt;U<Z;U++)(dt||!(U in I))&&(dt||(dt=Array.prototype.slice.call(I,0,U)),dt[U]=I[U]);return W.concat(dt||Array.prototype.slice.call(I))};Object.defineProperty(de,"__esModule",{value:!0}),de.FSWatcher=de.StatWatcher=de.Volume=de.toUnixTimestamp=de.bufferToEncoding=de.dataToBuffer=de.dataToStr=de.pathToSteps=de.filenameToSteps=de.pathToFilename=de.flagsToNumber=de.FLAGS=void 0;var e=br,r=BM(),i=d2(),o=xD(),s=p2(),a=ED(),c=SD(),u=FM(),h=vi,f=Pd(),g=wr,m=AD(),y=wD(),b=St,v=MM(),w=e.resolve,x=f.constants.O_RDONLY,E=f.constants.O_WRONLY,D=f.constants.O_RDWR,_=f.constants.O_CREAT,q=f.constants.O_EXCL,N=f.constants.O_TRUNC,rt=f.constants.O_APPEND,Y=f.constants.O_SYNC,et=f.constants.O_DIRECTORY,st=f.constants.F_OK,lt=f.constants.COPYFILE_EXCL,at=f.constants.COPYFILE_FICLONE_FORCE,X=e.posix?e.posix:e,ct=X.sep,J=X.relative,R=X.join,T=X.dirname,L=c.default.platform==="win32",k=128,B={PATH_STR:"path must be a string or Buffer",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"},$=function(W){return"Expected options to be either an object or a string, but got ".concat(W," instead")},H="ENOENT",tt="EBADF",it="EINVAL",ut="EPERM",V="EPROTO",K="EEXIST",ot="ENOTDIR",yt="EMFILE",mt="EACCES",j="EISDIR",z="ENOTEMPTY",ft="ENOSYS",vt="ERR_FS_EISDIR";function _t(W,I,P,U){I===void 0&&(I=""),P===void 0&&(P=""),U===void 0&&(U="");var Z="";switch(P&&(Z=" '".concat(P,"'")),U&&(Z+=" -> '".concat(U,"'")),W){case H:return"ENOENT: no such file or directory, ".concat(I).concat(Z);case tt:return"EBADF: bad file descriptor, ".concat(I).concat(Z);case it:return"EINVAL: invalid argument, ".concat(I).concat(Z);case ut:return"EPERM: operation not permitted, ".concat(I).concat(Z);case V:return"EPROTO: protocol error, ".concat(I).concat(Z);case K:return"EEXIST: file already exists, ".concat(I).concat(Z);case ot:return"ENOTDIR: not a directory, ".concat(I).concat(Z);case j:return"EISDIR: illegal operation on a directory, ".concat(I).concat(Z);case mt:return"EACCES: permission denied, ".concat(I).concat(Z);case z:return"ENOTEMPTY: directory not empty, ".concat(I).concat(Z);case yt:return"EMFILE: too many open files, ".concat(I).concat(Z);case ft:return"ENOSYS: function not implemented, ".concat(I).concat(Z);case vt:return"[ERR_FS_EISDIR]: Path is a directory: ".concat(I," returned EISDIR (is a directory) ").concat(P);default:return"".concat(W,": error occurred, ").concat(I).concat(Z)}}function gt(W,I,P,U,Z){I===void 0&&(I=""),P===void 0&&(P=""),U===void 0&&(U=""),Z===void 0&&(Z=Error);var dt=new Z(_t(W,I,P,U));return dt.code=W,P&&(dt.path=P),dt}var Et;(function(W){W[W.r=x]="r",W[W["r+"]=D]="r+",W[W.rs=x|Y]="rs",W[W.sr=W.rs]="sr",W[W["rs+"]=D|Y]="rs+",W[W["sr+"]=W["rs+"]]="sr+",W[W.w=E|_|N]="w",W[W.wx=E|_|N|q]="wx",W[W.xw=W.wx]="xw",W[W["w+"]=D|_|N]="w+",W[W["wx+"]=D|_|N|q]="wx+",W[W["xw+"]=W["wx+"]]="xw+",W[W.a=E|rt|_]="a",W[W.ax=E|rt|_|q]="ax",W[W.xa=W.ax]="xa",W[W["a+"]=D|rt|_]="a+",W[W["ax+"]=D|rt|_|q]="ax+",W[W["xa+"]=W["ax+"]]="xa+"})(Et=de.FLAGS||(de.FLAGS={}));function Rt(W){if(typeof W=="number")return W;if(typeof W=="string"){var I=Et[W];if(typeof I<"u")return I}throw new y.TypeError("ERR_INVALID_OPT_VALUE","flags",W)}de.flagsToNumber=Rt;function Ht(W,I){var P;if(I){var U=typeof I;switch(U){case"string":P=Object.assign({},W,{encoding:I});break;case"object":P=Object.assign({},W,I);break;default:throw TypeError($(U))}}else return W;return P.encoding!=="buffer"&&(0,m.assertEncoding)(P.encoding),P}function Ft(W){return function(I){return Ht(W,I)}}function Xt(W){if(typeof W!="function")throw TypeError(B.CB);return W}function Bt(W){return function(I,P){return typeof I=="function"?[W(),I]:[W(I),Xt(P)]}}var Mt={encoding:"utf8"},Vt=Ft(Mt),A=Bt(Vt),p={flag:"r"},d=Ft(p),S={encoding:"utf8",mode:438,flag:Et[Et.w]},M=Ft(S),G={encoding:"utf8",mode:438,flag:Et[Et.a]},Q=Ft(G),nt=Bt(Q),ht=Mt,It=Ft(ht),Nt=Bt(It),Ot={mode:511,recursive:!1},Wt=function(W){return typeof W=="number"?Object.assign({},Ot,{mode:W}):Object.assign({},Ot,W)},Se={recursive:!1},Fr=function(W){return Object.assign({},Se,W)},_e=Ft(Mt),mr=Bt(_e),ld={encoding:"utf8",withFileTypes:!1},Js=Ft(ld),Fn=Bt(Js),km={bigint:!1},fa=function(W){return W===void 0&&(W={}),Object.assign({},km,W)},Ru=function(W,I){return typeof W=="function"?[fa(),W]:[fa(W),Xt(I)]};function xl(W){if(W.hostname!=="")throw new y.TypeError("ERR_INVALID_FILE_URL_HOST",c.default.platform);for(var I=W.pathname,P=0;P<I.length;P++)if(I[P]==="%"){var U=I.codePointAt(P+2)|32;if(I[P+1]==="2"&&U===102)throw new y.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}return decodeURIComponent(I)}function qt(W){if(typeof W!="string"&&!s.Buffer.isBuffer(W)){try{if(!(W instanceof Ce.URL))throw new TypeError(B.PATH_STR)}catch{throw new TypeError(B.PATH_STR)}W=xl(W)}var I=String(W);return Ou(I),I}de.pathToFilename=qt;var us=function(W,I){return I===void 0&&(I=c.default.cwd()),w(I,W)};if(L){var cd=us,ud=UM().unixify;us=function(W,I){return ud(cd(W,I))}}function Ve(W,I){var P=us(W,I),U=P.substring(1);return U?U.split(ct):[]}de.filenameToSteps=Ve;function Bm(W){return Ve(qt(W))}de.pathToSteps=Bm;function hd(W,I){return I===void 0&&(I=m.ENCODING_UTF8),s.Buffer.isBuffer(W)?W.toString(I):W instanceof Uint8Array?(0,s.bufferFrom)(W).toString(I):String(W)}de.dataToStr=hd;function da(W,I){return I===void 0&&(I=m.ENCODING_UTF8),s.Buffer.isBuffer(W)?W:W instanceof Uint8Array?(0,s.bufferFrom)(W):(0,s.bufferFrom)(String(W),I)}de.dataToBuffer=da;function Iu(W,I){return!I||I==="buffer"?W:W.toString(I)}de.bufferToEncoding=Iu;function Ou(W,I){if((""+W).indexOf("\0")!==-1){var P=new Error("Path must be a string without null bytes");throw P.code=H,P}return!0}function eb(W,I){if(typeof W=="number")return W;if(typeof W=="string")return parseInt(W,8);if(I)return Mr(I)}function Mr(W,I){var P=eb(W,I);if(typeof P!="number"||isNaN(P))throw new TypeError(B.MODE_INT);return P}function bn(W){return W>>>0===W}function hs(W){if(!bn(W))throw TypeError(B.FD)}function Ui(W){if(typeof W=="string"&&+W==W)return+W;if(W instanceof Date)return W.getTime()/1e3;if(isFinite(W))return W<0?Date.now()/1e3:W;throw new Error("Cannot parse time: "+W)}de.toUnixTimestamp=Ui;function Zs(W){if(typeof W!="number")throw TypeError(B.UID)}function Nu(W){if(typeof W!="number")throw TypeError(B.GID)}function TP(W){var I={};function P(U,Z){for(var dt in Z){var bt=Z[dt],Ct=R(U,dt);typeof bt=="string"?I[Ct]=bt:typeof bt=="object"&&bt!==null&&Object.keys(bt).length>0?P(Ct,bt):I[Ct]=null}}return P("",W),I}var DP=(function(){function W(I){I===void 0&&(I={}),this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=(0,v.default)(this),this.statWatchers={},this.props=Object.assign({Node:r.Node,Link:r.Link,File:r.File},I);var P=this.createLink();P.setNode(this.createNode(!0));var U=this;this.StatWatcher=(function(bt){n(Ct,bt);function Ct(){return bt.call(this,U)||this}return Ct})(eE);var Z=fs;this.ReadStream=(function(bt){n(Ct,bt);function Ct(){for(var Pt=[],Ut=0;Ut<arguments.length;Ut++)Pt[Ut]=arguments[Ut];return bt.apply(this,t([U],Pt,!1))||this}return Ct})(Z);var dt=di;this.WriteStream=(function(bt){n(Ct,bt);function Ct(){for(var Pt=[],Ut=0;Ut<arguments.length;Ut++)Pt[Ut]=arguments[Ut];return bt.apply(this,t([U],Pt,!1))||this}return Ct})(dt),this.FSWatcher=(function(bt){n(Ct,bt);function Ct(){return bt.call(this,U)||this}return Ct})(nE),P.setChild(".",P),P.getNode().nlink++,P.setChild("..",P),P.getNode().nlink++,this.root=P}return W.fromJSON=function(I,P){var U=new W;return U.fromJSON(I,P),U},W.fromNestedJSON=function(I,P){var U=new W;return U.fromNestedJSON(I,P),U},Object.defineProperty(W.prototype,"promises",{get:function(){if(this.promisesApi===null)throw new Error("Promise is not supported in this environment.");return this.promisesApi},enumerable:!1,configurable:!0}),W.prototype.createLink=function(I,P,U,Z){if(U===void 0&&(U=!1),!I)return new this.props.Link(this,null,"");if(!P)throw new Error("createLink: name cannot be empty");return I.createChild(P,this.createNode(U,Z))},W.prototype.deleteLink=function(I){var P=I.parent;return P?(P.deleteChild(I),!0):!1},W.prototype.newInoNumber=function(){var I=this.releasedInos.pop();return I||(this.ino=(this.ino+1)%4294967295,this.ino)},W.prototype.newFdNumber=function(){var I=this.releasedFds.pop();return typeof I=="number"?I:W.fd--},W.prototype.createNode=function(I,P){I===void 0&&(I=!1);var U=new this.props.Node(this.newInoNumber(),P);return I&&U.setIsDirectory(),this.inodes[U.ino]=U,U},W.prototype.getNode=function(I){return this.inodes[I]},W.prototype.deleteNode=function(I){I.del(),delete this.inodes[I.ino],this.releasedInos.push(I.ino)},W.prototype.genRndStr=function(){var I=(Math.random()+1).toString(36).substring(2,8);return I.length===6?I:this.genRndStr()},W.prototype.getLink=function(I){return this.root.walk(I)},W.prototype.getLinkOrThrow=function(I,P){var U=Ve(I),Z=this.getLink(U);if(!Z)throw gt(H,P,I);return Z},W.prototype.getResolvedLink=function(I){for(var P=typeof I=="string"?Ve(I):I,U=this.root,Z=0;Z<P.length;){var dt=P[Z];if(U=U.getChild(dt),!U)return null;var bt=U.getNode();if(bt.isSymlink()){P=bt.symlink.concat(P.slice(Z+1)),U=this.root,Z=0;continue}Z++}return U},W.prototype.getResolvedLinkOrThrow=function(I,P){var U=this.getResolvedLink(I);if(!U)throw gt(H,P,I);return U},W.prototype.resolveSymlinks=function(I){return this.getResolvedLink(I.steps.slice(1))},W.prototype.getLinkAsDirOrThrow=function(I,P){var U=this.getLinkOrThrow(I,P);if(!U.getNode().isDirectory())throw gt(ot,P,I);return U},W.prototype.getLinkParent=function(I){return this.root.walk(I,I.length-1)},W.prototype.getLinkParentAsDirOrThrow=function(I,P){var U=I instanceof Array?I:Ve(I),Z=this.getLinkParent(U);if(!Z)throw gt(H,P,ct+U.join(ct));if(!Z.getNode().isDirectory())throw gt(ot,P,ct+U.join(ct));return Z},W.prototype.getFileByFd=function(I){return this.fds[String(I)]},W.prototype.getFileByFdOrThrow=function(I,P){if(!bn(I))throw TypeError(B.FD);var U=this.getFileByFd(I);if(!U)throw gt(tt,P);return U},W.prototype.wrapAsync=function(I,P,U){var Z=this;Xt(U),(0,a.default)(function(){var dt;try{dt=I.apply(Z,P)}catch(bt){U(bt);return}U(null,dt)})},W.prototype._toJSON=function(I,P,U){var Z;I===void 0&&(I=this.root),P===void 0&&(P={});var dt=!0,bt=I.children;I.getNode().isFile()&&(bt=(Z={},Z[I.getName()]=I.parent.getChild(I.getName()),Z),I=I.parent);for(var Ct in bt)if(!(Ct==="."||Ct==="..")){dt=!1;var Pt=I.getChild(Ct);if(!Pt)throw new Error("_toJSON: unexpected undefined");var Ut=Pt.getNode();if(Ut.isFile()){var Jt=Pt.getPath();U&&(Jt=J(U,Jt)),P[Jt]=Ut.getString()}else Ut.isDirectory()&&this._toJSON(Pt,P,U)}var ce=I.getPath();return U&&(ce=J(U,ce)),ce&&dt&&(P[ce]=null),P},W.prototype.toJSON=function(I,P,U){P===void 0&&(P={}),U===void 0&&(U=!1);var Z=[];if(I){I instanceof Array||(I=[I]);for(var dt=0,bt=I;dt<bt.length;dt++){var Ct=bt[dt],Pt=qt(Ct),Ut=this.getResolvedLink(Pt);Ut&&Z.push(Ut)}}else Z.push(this.root);if(!Z.length)return P;for(var Jt=0,ce=Z;Jt<ce.length;Jt++){var Ut=ce[Jt];this._toJSON(Ut,P,U?Ut.getPath():"")}return P},W.prototype.fromJSON=function(I,P){P===void 0&&(P=c.default.cwd());for(var U in I){var Z=I[U];if(U=us(U,P),typeof Z=="string"){var dt=T(U);this.mkdirpBase(dt,511),this.writeFileSync(U,Z)}else this.mkdirpBase(U,511)}},W.prototype.fromNestedJSON=function(I,P){this.fromJSON(TP(I),P)},W.prototype.reset=function(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(!0))},W.prototype.mountSync=function(I,P){this.fromJSON(P,I)},W.prototype.openLink=function(I,P,U){if(U===void 0&&(U=!0),this.openFiles>=this.maxFiles)throw gt(yt,"open",I.getPath());var Z=I;if(U&&(Z=this.resolveSymlinks(I)),!Z)throw gt(H,"open",I.getPath());var dt=Z.getNode();if(dt.isDirectory()){if((P&(x|D|E))!==x)throw gt(j,"open",I.getPath())}else if(P&et)throw gt(ot,"open",I.getPath());if(!(P&E)&&!dt.canRead())throw gt(mt,"open",I.getPath());var bt=new this.props.File(I,dt,P,this.newFdNumber());return this.fds[bt.fd]=bt,this.openFiles++,P&N&&bt.truncate(),bt},W.prototype.openFile=function(I,P,U,Z){Z===void 0&&(Z=!0);var dt=Ve(I),bt=Z?this.getResolvedLink(dt):this.getLink(dt);if(bt&&P&q)throw gt(K,"open",I);if(!bt&&P&_){var Ct=this.getResolvedLink(dt.slice(0,dt.length-1));if(!Ct)throw gt(H,"open",ct+dt.join(ct));P&_&&typeof U=="number"&&(bt=this.createLink(Ct,dt[dt.length-1],!1,U))}if(bt)return this.openLink(bt,P,Z);throw gt(H,"open",I)},W.prototype.openBase=function(I,P,U,Z){Z===void 0&&(Z=!0);var dt=this.openFile(I,P,U,Z);if(!dt)throw gt(H,"open",I);return dt.fd},W.prototype.openSync=function(I,P,U){U===void 0&&(U=438);var Z=Mr(U),dt=qt(I),bt=Rt(P);return this.openBase(dt,bt,Z)},W.prototype.open=function(I,P,U,Z){var dt=U,bt=Z;typeof U=="function"&&(dt=438,bt=U),dt=dt||438;var Ct=Mr(dt),Pt=qt(I),Ut=Rt(P);this.wrapAsync(this.openBase,[Pt,Ut,Ct],bt)},W.prototype.closeFile=function(I){this.fds[I.fd]&&(this.openFiles--,delete this.fds[I.fd],this.releasedFds.push(I.fd))},W.prototype.closeSync=function(I){hs(I);var P=this.getFileByFdOrThrow(I,"close");this.closeFile(P)},W.prototype.close=function(I,P){hs(I),this.wrapAsync(this.closeSync,[I],P)},W.prototype.openFileOrGetById=function(I,P,U){if(typeof I=="number"){var Z=this.fds[I];if(!Z)throw gt(H);return Z}else return this.openFile(qt(I),P,U)},W.prototype.readBase=function(I,P,U,Z,dt){var bt=this.getFileByFdOrThrow(I);return bt.read(P,Number(U),Number(Z),dt)},W.prototype.readSync=function(I,P,U,Z,dt){return hs(I),this.readBase(I,P,U,Z,dt)},W.prototype.read=function(I,P,U,Z,dt,bt){var Ct=this;if(Xt(bt),Z===0)return c.default.nextTick(function(){bt&&bt(null,0,P)});(0,a.default)(function(){try{var Pt=Ct.readBase(I,P,U,Z,dt);bt(null,Pt,P)}catch(Ut){bt(Ut)}})},W.prototype.readFileBase=function(I,P,U){var Z,dt=typeof I=="number",bt=dt&&bn(I),Ct;if(bt)Ct=I;else{var Pt=qt(I),Ut=Ve(Pt),Jt=this.getResolvedLink(Ut);if(Jt){var ce=Jt.getNode();if(ce.isDirectory())throw gt(j,"open",Jt.getPath())}Ct=this.openSync(I,P)}try{Z=Iu(this.getFileByFdOrThrow(Ct).getBuffer(),U)}finally{bt||this.closeSync(Ct)}return Z},W.prototype.readFileSync=function(I,P){var U=d(P),Z=Rt(U.flag);return this.readFileBase(I,Z,U.encoding)},W.prototype.readFile=function(I,P,U){var Z=Bt(d)(P,U),dt=Z[0],bt=Z[1],Ct=Rt(dt.flag);this.wrapAsync(this.readFileBase,[I,Ct,dt.encoding],bt)},W.prototype.writeBase=function(I,P,U,Z,dt){var bt=this.getFileByFdOrThrow(I,"write");return bt.write(P,U,Z,dt)},W.prototype.writeSync=function(I,P,U,Z,dt){hs(I);var bt,Ct,Pt,Ut,Jt=typeof P!="string";Jt?(Ct=(U||0)|0,Pt=Z,Ut=dt):(Ut=U,bt=Z);var ce=da(P,bt);return Jt?typeof Pt>"u"&&(Pt=ce.length):(Ct=0,Pt=ce.length),this.writeBase(I,ce,Ct,Pt,Ut)},W.prototype.write=function(I,P,U,Z,dt,bt){var Ct=this;hs(I);var Pt,Ut,Jt,ce,yr,El=typeof P,ds=typeof U,pa=typeof Z,Sl=typeof dt;El!=="string"?ds==="function"?yr=U:pa==="function"?(Pt=U|0,yr=Z):Sl==="function"?(Pt=U|0,Ut=Z,yr=dt):(Pt=U|0,Ut=Z,Jt=dt,yr=bt):ds==="function"?yr=U:pa==="function"?(Jt=U,yr=Z):Sl==="function"&&(Jt=U,ce=Z,yr=dt);var or=da(P,ce);El!=="string"?typeof Ut>"u"&&(Ut=or.length):(Pt=0,Ut=or.length);var pi=Xt(yr);(0,a.default)(function(){try{var ji=Ct.writeBase(I,or,Pt,Ut,Jt);El!=="string"?pi(null,ji,or):pi(null,ji,P)}catch(Lm){pi(Lm)}})},W.prototype.writeFileBase=function(I,P,U,Z){var dt=typeof I=="number",bt;dt?bt=I:bt=this.openBase(qt(I),U,Z);var Ct=0,Pt=P.length,Ut=U&rt?void 0:0;try{for(;Pt>0;){var Jt=this.writeSync(bt,P,Ct,Pt,Ut);Ct+=Jt,Pt-=Jt,Ut!==void 0&&(Ut+=Jt)}}finally{dt||this.closeSync(bt)}},W.prototype.writeFileSync=function(I,P,U){var Z=M(U),dt=Rt(Z.flag),bt=Mr(Z.mode),Ct=da(P,Z.encoding);this.writeFileBase(I,Ct,dt,bt)},W.prototype.writeFile=function(I,P,U,Z){var dt=U,bt=Z;typeof U=="function"&&(dt=S,bt=U);var Ct=Xt(bt),Pt=M(dt),Ut=Rt(Pt.flag),Jt=Mr(Pt.mode),ce=da(P,Pt.encoding);this.wrapAsync(this.writeFileBase,[I,ce,Ut,Jt],Ct)},W.prototype.linkBase=function(I,P){var U=Ve(I),Z=this.getLink(U);if(!Z)throw gt(H,"link",I,P);var dt=Ve(P),bt=this.getLinkParent(dt);if(!bt)throw gt(H,"link",I,P);var Ct=dt[dt.length-1];if(bt.getChild(Ct))throw gt(K,"link",I,P);var Pt=Z.getNode();Pt.nlink++,bt.createChild(Ct,Pt)},W.prototype.copyFileBase=function(I,P,U){var Z=this.readFileSync(I);if(U&lt&&this.existsSync(P))throw gt(K,"copyFile",I,P);if(U&at)throw gt(ft,"copyFile",I,P);this.writeFileBase(P,Z,Et.w,438)},W.prototype.copyFileSync=function(I,P,U){var Z=qt(I),dt=qt(P);return this.copyFileBase(Z,dt,(U||0)|0)},W.prototype.copyFile=function(I,P,U,Z){var dt=qt(I),bt=qt(P),Ct,Pt;typeof U=="function"?(Ct=0,Pt=U):(Ct=U,Pt=Z),Xt(Pt),this.wrapAsync(this.copyFileBase,[dt,bt,Ct],Pt)},W.prototype.linkSync=function(I,P){var U=qt(I),Z=qt(P);this.linkBase(U,Z)},W.prototype.link=function(I,P,U){var Z=qt(I),dt=qt(P);this.wrapAsync(this.linkBase,[Z,dt],U)},W.prototype.unlinkBase=function(I){var P=Ve(I),U=this.getLink(P);if(!U)throw gt(H,"unlink",I);if(U.length)throw Error("Dir not empty...");this.deleteLink(U);var Z=U.getNode();Z.nlink--,Z.nlink<=0&&this.deleteNode(Z)},W.prototype.unlinkSync=function(I){var P=qt(I);this.unlinkBase(P)},W.prototype.unlink=function(I,P){var U=qt(I);this.wrapAsync(this.unlinkBase,[U],P)},W.prototype.symlinkBase=function(I,P){var U=Ve(P),Z=this.getLinkParent(U);if(!Z)throw gt(H,"symlink",I,P);var dt=U[U.length-1];if(Z.getChild(dt))throw gt(K,"symlink",I,P);var bt=Z.createChild(dt);return bt.getNode().makeSymlink(Ve(I)),bt},W.prototype.symlinkSync=function(I,P,U){var Z=qt(I),dt=qt(P);this.symlinkBase(Z,dt)},W.prototype.symlink=function(I,P,U,Z){var dt=Xt(typeof U=="function"?U:Z),bt=qt(I),Ct=qt(P);this.wrapAsync(this.symlinkBase,[bt,Ct],dt)},W.prototype.realpathBase=function(I,P){var U=Ve(I),Z=this.getResolvedLink(U);if(!Z)throw gt(H,"realpath",I);return(0,m.strToEncoding)(Z.getPath()||"/",P)},W.prototype.realpathSync=function(I,P){return this.realpathBase(qt(I),It(P).encoding)},W.prototype.realpath=function(I,P,U){var Z=Nt(P,U),dt=Z[0],bt=Z[1],Ct=qt(I);this.wrapAsync(this.realpathBase,[Ct,dt.encoding],bt)},W.prototype.lstatBase=function(I,P,U){P===void 0&&(P=!1),U===void 0&&(U=!1);var Z=this.getLink(Ve(I));if(Z)return i.default.build(Z.getNode(),P);if(U)throw gt(H,"lstat",I)},W.prototype.lstatSync=function(I,P){var U=fa(P),Z=U.throwIfNoEntry,dt=Z===void 0?!0:Z,bt=U.bigint,Ct=bt===void 0?!1:bt;return this.lstatBase(qt(I),Ct,dt)},W.prototype.lstat=function(I,P,U){var Z=Ru(P,U),dt=Z[0],bt=dt.throwIfNoEntry,Ct=bt===void 0?!0:bt,Pt=dt.bigint,Ut=Pt===void 0?!1:Pt,Jt=Z[1];this.wrapAsync(this.lstatBase,[qt(I),Ut,Ct],Jt)},W.prototype.statBase=function(I,P,U){P===void 0&&(P=!1),U===void 0&&(U=!0);var Z=this.getResolvedLink(Ve(I));if(Z)return i.default.build(Z.getNode(),P);if(U)throw gt(H,"stat",I)},W.prototype.statSync=function(I,P){var U=fa(P),Z=U.bigint,dt=Z===void 0?!0:Z,bt=U.throwIfNoEntry,Ct=bt===void 0?!0:bt;return this.statBase(qt(I),dt,Ct)},W.prototype.stat=function(I,P,U){var Z=Ru(P,U),dt=Z[0],bt=dt.bigint,Ct=bt===void 0?!1:bt,Pt=dt.throwIfNoEntry,Ut=Pt===void 0?!0:Pt,Jt=Z[1];this.wrapAsync(this.statBase,[qt(I),Ct,Ut],Jt)},W.prototype.fstatBase=function(I,P){P===void 0&&(P=!1);var U=this.getFileByFd(I);if(!U)throw gt(tt,"fstat");return i.default.build(U.node,P)},W.prototype.fstatSync=function(I,P){return this.fstatBase(I,fa(P).bigint)},W.prototype.fstat=function(I,P,U){var Z=Ru(P,U),dt=Z[0],bt=Z[1];this.wrapAsync(this.fstatBase,[I,dt.bigint],bt)},W.prototype.renameBase=function(I,P){var U=this.getLink(Ve(I));if(!U)throw gt(H,"rename",I,P);var Z=Ve(P),dt=this.getLinkParent(Z);if(!dt)throw gt(H,"rename",I,P);var bt=U.parent;bt&&bt.deleteChild(U);var Ct=Z[Z.length-1];U.name=Ct,U.steps=t(t([],dt.steps,!0),[Ct],!1),dt.setChild(U.getName(),U)},W.prototype.renameSync=function(I,P){var U=qt(I),Z=qt(P);this.renameBase(U,Z)},W.prototype.rename=function(I,P,U){var Z=qt(I),dt=qt(P);this.wrapAsync(this.renameBase,[Z,dt],U)},W.prototype.existsBase=function(I){return!!this.statBase(I)},W.prototype.existsSync=function(I){try{return this.existsBase(qt(I))}catch{return!1}},W.prototype.exists=function(I,P){var U=this,Z=qt(I);if(typeof P!="function")throw Error(B.CB);(0,a.default)(function(){try{P(U.existsBase(Z))}catch{P(!1)}})},W.prototype.accessBase=function(I,P){this.getLinkOrThrow(I,"access")},W.prototype.accessSync=function(I,P){P===void 0&&(P=st);var U=qt(I);P=P|0,this.accessBase(U,P)},W.prototype.access=function(I,P,U){var Z=st,dt;typeof P!="function"?(Z=P|0,dt=Xt(U)):dt=P;var bt=qt(I);this.wrapAsync(this.accessBase,[bt,Z],dt)},W.prototype.appendFileSync=function(I,P,U){U===void 0&&(U=G);var Z=Q(U);(!Z.flag||bn(I))&&(Z.flag="a"),this.writeFileSync(I,P,Z)},W.prototype.appendFile=function(I,P,U,Z){var dt=nt(U,Z),bt=dt[0],Ct=dt[1];(!bt.flag||bn(I))&&(bt.flag="a"),this.writeFile(I,P,bt,Ct)},W.prototype.readdirBase=function(I,P){var U=Ve(I),Z=this.getResolvedLink(U);if(!Z)throw gt(H,"readdir",I);var dt=Z.getNode();if(!dt.isDirectory())throw gt(ot,"scandir",I);if(P.withFileTypes){var bt=[];for(var Ct in Z.children){var Pt=Z.getChild(Ct);!Pt||Ct==="."||Ct===".."||bt.push(o.default.build(Pt,P.encoding))}return!L&&P.encoding!=="buffer"&&bt.sort(function(ce,yr){return ce.name<yr.name?-1:ce.name>yr.name?1:0}),bt}var Ut=[];for(var Jt in Z.children)Jt==="."||Jt===".."||Ut.push((0,m.strToEncoding)(Jt,P.encoding));return!L&&P.encoding!=="buffer"&&Ut.sort(),Ut},W.prototype.readdirSync=function(I,P){var U=Js(P),Z=qt(I);return this.readdirBase(Z,U)},W.prototype.readdir=function(I,P,U){var Z=Fn(P,U),dt=Z[0],bt=Z[1],Ct=qt(I);this.wrapAsync(this.readdirBase,[Ct,dt],bt)},W.prototype.readlinkBase=function(I,P){var U=this.getLinkOrThrow(I,"readlink"),Z=U.getNode();if(!Z.isSymlink())throw gt(it,"readlink",I);var dt=ct+Z.symlink.join(ct);return(0,m.strToEncoding)(dt,P)},W.prototype.readlinkSync=function(I,P){var U=Vt(P),Z=qt(I);return this.readlinkBase(Z,U.encoding)},W.prototype.readlink=function(I,P,U){var Z=A(P,U),dt=Z[0],bt=Z[1],Ct=qt(I);this.wrapAsync(this.readlinkBase,[Ct,dt.encoding],bt)},W.prototype.fsyncBase=function(I){this.getFileByFdOrThrow(I,"fsync")},W.prototype.fsyncSync=function(I){this.fsyncBase(I)},W.prototype.fsync=function(I,P){this.wrapAsync(this.fsyncBase,[I],P)},W.prototype.fdatasyncBase=function(I){this.getFileByFdOrThrow(I,"fdatasync")},W.prototype.fdatasyncSync=function(I){this.fdatasyncBase(I)},W.prototype.fdatasync=function(I,P){this.wrapAsync(this.fdatasyncBase,[I],P)},W.prototype.ftruncateBase=function(I,P){var U=this.getFileByFdOrThrow(I,"ftruncate");U.truncate(P)},W.prototype.ftruncateSync=function(I,P){this.ftruncateBase(I,P)},W.prototype.ftruncate=function(I,P,U){var Z=typeof P=="number"?P:0,dt=Xt(typeof P=="number"?U:P);this.wrapAsync(this.ftruncateBase,[I,Z],dt)},W.prototype.truncateBase=function(I,P){var U=this.openSync(I,"r+");try{this.ftruncateSync(U,P)}finally{this.closeSync(U)}},W.prototype.truncateSync=function(I,P){if(bn(I))return this.ftruncateSync(I,P);this.truncateBase(I,P)},W.prototype.truncate=function(I,P,U){var Z=typeof P=="number"?P:0,dt=Xt(typeof P=="number"?U:P);if(bn(I))return this.ftruncate(I,Z,dt);this.wrapAsync(this.truncateBase,[I,Z],dt)},W.prototype.futimesBase=function(I,P,U){var Z=this.getFileByFdOrThrow(I,"futimes"),dt=Z.node;dt.atime=new Date(P*1e3),dt.mtime=new Date(U*1e3)},W.prototype.futimesSync=function(I,P,U){this.futimesBase(I,Ui(P),Ui(U))},W.prototype.futimes=function(I,P,U,Z){this.wrapAsync(this.futimesBase,[I,Ui(P),Ui(U)],Z)},W.prototype.utimesBase=function(I,P,U){var Z=this.openSync(I,"r");try{this.futimesBase(Z,P,U)}finally{this.closeSync(Z)}},W.prototype.utimesSync=function(I,P,U){this.utimesBase(qt(I),Ui(P),Ui(U))},W.prototype.utimes=function(I,P,U,Z){this.wrapAsync(this.utimesBase,[qt(I),Ui(P),Ui(U)],Z)},W.prototype.mkdirBase=function(I,P){var U=Ve(I);if(!U.length)throw gt(K,"mkdir",I);var Z=this.getLinkParentAsDirOrThrow(I,"mkdir"),dt=U[U.length-1];if(Z.getChild(dt))throw gt(K,"mkdir",I);Z.createChild(dt,this.createNode(!0,P))},W.prototype.mkdirpBase=function(I,P){for(var U=us(I),Z=U.substring(1),dt=Z?Z.split(ct):[],bt=this.root,Ct=!1,Pt=0;Pt<dt.length;Pt++){var Ut=dt[Pt];if(!bt.getNode().isDirectory())throw gt(ot,"mkdir",bt.getPath());var Jt=bt.getChild(Ut);if(Jt)if(Jt.getNode().isDirectory())bt=Jt;else throw gt(ot,"mkdir",Jt.getPath());else bt=bt.createChild(Ut,this.createNode(!0,P)),Ct=!0}return Ct?U:void 0},W.prototype.mkdirSync=function(I,P){var U=Wt(P),Z=Mr(U.mode,511),dt=qt(I);if(U.recursive)return this.mkdirpBase(dt,Z);this.mkdirBase(dt,Z)},W.prototype.mkdir=function(I,P,U){var Z=Wt(P),dt=Xt(typeof P=="function"?P:U),bt=Mr(Z.mode,511),Ct=qt(I);Z.recursive?this.wrapAsync(this.mkdirpBase,[Ct,bt],dt):this.wrapAsync(this.mkdirBase,[Ct,bt],dt)},W.prototype.mkdirpSync=function(I,P){return this.mkdirSync(I,{mode:P,recursive:!0})},W.prototype.mkdirp=function(I,P,U){var Z=typeof P=="function"?void 0:P,dt=Xt(typeof P=="function"?P:U);this.mkdir(I,{mode:Z,recursive:!0},dt)},W.prototype.mkdtempBase=function(I,P,U){U===void 0&&(U=5);var Z=I+this.genRndStr();try{return this.mkdirBase(Z,511),(0,m.strToEncoding)(Z,P)}catch(dt){if(dt.code===K){if(U>1)return this.mkdtempBase(I,P,U-1);throw Error("Could not create temp dir.")}else throw dt}},W.prototype.mkdtempSync=function(I,P){var U=Vt(P).encoding;if(!I||typeof I!="string")throw new TypeError("filename prefix is required");return Ou(I),this.mkdtempBase(I,U)},W.prototype.mkdtemp=function(I,P,U){var Z=A(P,U),dt=Z[0].encoding,bt=Z[1];if(!I||typeof I!="string")throw new TypeError("filename prefix is required");Ou(I)&&this.wrapAsync(this.mkdtempBase,[I,dt],bt)},W.prototype.rmdirBase=function(I,P){var U=Fr(P),Z=this.getLinkAsDirOrThrow(I,"rmdir");if(Z.length&&!U.recursive)throw gt(z,"rmdir",I);this.deleteLink(Z)},W.prototype.rmdirSync=function(I,P){this.rmdirBase(qt(I),P)},W.prototype.rmdir=function(I,P,U){var Z=Fr(P),dt=Xt(typeof P=="function"?P:U);this.wrapAsync(this.rmdirBase,[qt(I),Z],dt)},W.prototype.rmBase=function(I,P){P===void 0&&(P={});var U=this.getResolvedLink(I);if(!U){if(!P.force)throw gt(H,"stat",I);return}if(U.getNode().isDirectory()&&!P.recursive)throw gt(vt,"rm",I);this.deleteLink(U)},W.prototype.rmSync=function(I,P){this.rmBase(qt(I),P)},W.prototype.rm=function(I,P,U){var Z=mr(P,U),dt=Z[0],bt=Z[1];this.wrapAsync(this.rmBase,[qt(I),dt],bt)},W.prototype.fchmodBase=function(I,P){var U=this.getFileByFdOrThrow(I,"fchmod");U.chmod(P)},W.prototype.fchmodSync=function(I,P){this.fchmodBase(I,Mr(P))},W.prototype.fchmod=function(I,P,U){this.wrapAsync(this.fchmodBase,[I,Mr(P)],U)},W.prototype.chmodBase=function(I,P){var U=this.openSync(I,"r");try{this.fchmodBase(U,P)}finally{this.closeSync(U)}},W.prototype.chmodSync=function(I,P){var U=Mr(P),Z=qt(I);this.chmodBase(Z,U)},W.prototype.chmod=function(I,P,U){var Z=Mr(P),dt=qt(I);this.wrapAsync(this.chmodBase,[dt,Z],U)},W.prototype.lchmodBase=function(I,P){var U=this.openBase(I,D,0,!1);try{this.fchmodBase(U,P)}finally{this.closeSync(U)}},W.prototype.lchmodSync=function(I,P){var U=Mr(P),Z=qt(I);this.lchmodBase(Z,U)},W.prototype.lchmod=function(I,P,U){var Z=Mr(P),dt=qt(I);this.wrapAsync(this.lchmodBase,[dt,Z],U)},W.prototype.fchownBase=function(I,P,U){this.getFileByFdOrThrow(I,"fchown").chown(P,U)},W.prototype.fchownSync=function(I,P,U){Zs(P),Nu(U),this.fchownBase(I,P,U)},W.prototype.fchown=function(I,P,U,Z){Zs(P),Nu(U),this.wrapAsync(this.fchownBase,[I,P,U],Z)},W.prototype.chownBase=function(I,P,U){var Z=this.getResolvedLinkOrThrow(I,"chown"),dt=Z.getNode();dt.chown(P,U)},W.prototype.chownSync=function(I,P,U){Zs(P),Nu(U),this.chownBase(qt(I),P,U)},W.prototype.chown=function(I,P,U,Z){Zs(P),Nu(U),this.wrapAsync(this.chownBase,[qt(I),P,U],Z)},W.prototype.lchownBase=function(I,P,U){this.getLinkOrThrow(I,"lchown").getNode().chown(P,U)},W.prototype.lchownSync=function(I,P,U){Zs(P),Nu(U),this.lchownBase(qt(I),P,U)},W.prototype.lchown=function(I,P,U,Z){Zs(P),Nu(U),this.wrapAsync(this.lchownBase,[qt(I),P,U],Z)},W.prototype.watchFile=function(I,P,U){var Z=qt(I),dt=P,bt=U;if(typeof dt=="function"&&(bt=P,dt=null),typeof bt!="function")throw Error('"watchFile()" requires a listener function');var Ct=5007,Pt=!0;dt&&typeof dt=="object"&&(typeof dt.interval=="number"&&(Ct=dt.interval),typeof dt.persistent=="boolean"&&(Pt=dt.persistent));var Ut=this.statWatchers[Z];return Ut||(Ut=new this.StatWatcher,Ut.start(Z,Pt,Ct),this.statWatchers[Z]=Ut),Ut.addListener("change",bt),Ut},W.prototype.unwatchFile=function(I,P){var U=qt(I),Z=this.statWatchers[U];Z&&(typeof P=="function"?Z.removeListener("change",P):Z.removeAllListeners("change"),Z.listenerCount("change")===0&&(Z.stop(),delete this.statWatchers[U]))},W.prototype.createReadStream=function(I,P){return new this.ReadStream(I,P)},W.prototype.createWriteStream=function(I,P){return new this.WriteStream(I,P)},W.prototype.watch=function(I,P,U){var Z=qt(I),dt=P;typeof P=="function"&&(U=P,dt=null);var bt=Vt(dt),Ct=bt.persistent,Pt=bt.recursive,Ut=bt.encoding;Ct===void 0&&(Ct=!0),Pt===void 0&&(Pt=!1);var Jt=new this.FSWatcher;return Jt.start(Z,Ct,Pt,Ut),U&&Jt.addListener("change",U),Jt},W.fd=2147483647,W})();de.Volume=DP;function RP(W){W.emit("stop")}var eE=(function(W){n(I,W);function I(P){var U=W.call(this)||this;return U.onInterval=function(){try{var Z=U.vol.statSync(U.filename);U.hasChanged(Z)&&(U.emit("change",Z,U.prev),U.prev=Z)}finally{U.loop()}},U.vol=P,U}return I.prototype.loop=function(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)},I.prototype.hasChanged=function(P){return P.mtimeMs>this.prev.mtimeMs||P.nlink!==this.prev.nlink},I.prototype.start=function(P,U,Z){U===void 0&&(U=!0),Z===void 0&&(Z=5007),this.filename=qt(P),this.setTimeout=U?setTimeout.bind(typeof globalThis<"u"?globalThis:jM):u.default,this.interval=Z,this.prev=this.vol.statSync(this.filename),this.loop()},I.prototype.stop=function(){clearTimeout(this.timeoutRef),c.default.nextTick(RP,this)},I})(g.EventEmitter);de.StatWatcher=eE;var fi;function IP(W){fi=(0,s.bufferAllocUnsafe)(W),fi.used=0}b.inherits(fs,h.Readable),de.ReadStream=fs;function fs(W,I,P){if(!(this instanceof fs))return new fs(W,I,P);if(this._vol=W,P=Object.assign({},Ht(P,{})),P.highWaterMark===void 0&&(P.highWaterMark=64*1024),h.Readable.call(this,P),this.path=qt(I),this.fd=P.fd===void 0?null:P.fd,this.flags=P.flags===void 0?"r":P.flags,this.mode=P.mode===void 0?438:P.mode,this.start=P.start,this.end=P.end,this.autoClose=P.autoClose===void 0?!0:P.autoClose,this.pos=void 0,this.bytesRead=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw new Error('"start" option must be <= "end" option');this.pos=this.start}typeof this.fd!="number"&&this.open(),this.on("end",function(){this.autoClose&&this.destroy&&this.destroy()})}fs.prototype.open=function(){var W=this;this._vol.open(this.path,this.flags,this.mode,function(I,P){if(I){W.autoClose&&W.destroy&&W.destroy(),W.emit("error",I);return}W.fd=P,W.emit("open",P),W.read()})},fs.prototype._read=function(W){if(typeof this.fd!="number")return this.once("open",function(){this._read(W)});if(this.destroyed)return;(!fi||fi.length-fi.used<k)&&IP(this._readableState.highWaterMark);var I=fi,P=Math.min(fi.length-fi.used,W),U=fi.used;if(this.pos!==void 0&&(P=Math.min(this.end-this.pos+1,P)),P<=0)return this.push(null);var Z=this;this._vol.read(this.fd,fi,fi.used,P,this.pos,dt),this.pos!==void 0&&(this.pos+=P),fi.used+=P;function dt(bt,Ct){if(bt)Z.autoClose&&Z.destroy&&Z.destroy(),Z.emit("error",bt);else{var Pt=null;Ct>0&&(Z.bytesRead+=Ct,Pt=I.slice(U,U+Ct)),Z.push(Pt)}}},fs.prototype._destroy=function(W,I){this.close(function(P){I(W||P)})},fs.prototype.close=function(W){var I=this,P;if(W&&this.once("close",W),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",rE);return}return c.default.nextTick(function(){return I.emit("close")})}typeof((P=this._readableState)===null||P===void 0?void 0:P.closed)=="boolean"?this._readableState.closed=!0:this.closed=!0,this._vol.close(this.fd,function(U){U?I.emit("error",U):I.emit("close")}),this.fd=null};function rE(W){this.close()}b.inherits(di,h.Writable),de.WriteStream=di;function di(W,I,P){if(!(this instanceof di))return new di(W,I,P);if(this._vol=W,P=Object.assign({},Ht(P,{})),h.Writable.call(this,P),this.path=qt(I),this.fd=P.fd===void 0?null:P.fd,this.flags=P.flags===void 0?"w":P.flags,this.mode=P.mode===void 0?438:P.mode,this.start=P.start,this.autoClose=P.autoClose===void 0?!0:!!P.autoClose,this.pos=void 0,this.bytesWritten=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.start<0)throw new Error('"start" must be >= zero');this.pos=this.start}P.encoding&&this.setDefaultEncoding(P.encoding),typeof this.fd!="number"&&this.open(),this.once("finish",function(){this.autoClose&&this.close()})}di.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(W,I){if(W){this.autoClose&&this.destroy&&this.destroy(),this.emit("error",W);return}this.fd=I,this.emit("open",I)}.bind(this))},di.prototype._write=function(W,I,P){if(!(W instanceof s.Buffer||W instanceof Uint8Array))return this.emit("error",new Error("Invalid data"));if(typeof this.fd!="number")return this.once("open",function(){this._write(W,I,P)});var U=this;this._vol.write(this.fd,W,0,W.length,this.pos,function(Z,dt){if(Z)return U.autoClose&&U.destroy&&U.destroy(),P(Z);U.bytesWritten+=dt,P()}),this.pos!==void 0&&(this.pos+=W.length)},di.prototype._writev=function(W,I){if(typeof this.fd!="number")return this.once("open",function(){this._writev(W,I)});for(var P=this,U=W.length,Z=new Array(U),dt=0,bt=0;bt<U;bt++){var Ct=W[bt].chunk;Z[bt]=Ct,dt+=Ct.length}var Pt=s.Buffer.concat(Z);this._vol.write(this.fd,Pt,0,Pt.length,this.pos,function(Ut,Jt){if(Ut)return P.destroy&&P.destroy(),I(Ut);P.bytesWritten+=Jt,I()}),this.pos!==void 0&&(this.pos+=dt)},di.prototype.close=function(W){var I=this,P;if(W&&this.once("close",W),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",rE);return}return c.default.nextTick(function(){return I.emit("close")})}typeof((P=this._writableState)===null||P===void 0?void 0:P.closed)=="boolean"?this._writableState.closed=!0:this.closed=!0,this._vol.close(this.fd,function(U){U?I.emit("error",U):I.emit("close")}),this.fd=null},di.prototype._destroy=fs.prototype._destroy,di.prototype.destroySoon=di.prototype.end;var nE=(function(W){n(I,W);function I(P){var U=W.call(this)||this;return U._filename="",U._filenameEncoded="",U._recursive=!1,U._encoding=m.ENCODING_UTF8,U._listenerRemovers=new Map,U._onParentChild=function(Z){Z.getName()===U._getName()&&U._emit("rename")},U._emit=function(Z){U.emit("change",Z,U._filenameEncoded)},U._persist=function(){U._timer=setTimeout(U._persist,1e6)},U._vol=P,U}return I.prototype._getName=function(){return this._steps[this._steps.length-1]},I.prototype.start=function(P,U,Z,dt){var bt=this;U===void 0&&(U=!0),Z===void 0&&(Z=!1),dt===void 0&&(dt=m.ENCODING_UTF8),this._filename=qt(P),this._steps=Ve(this._filename),this._filenameEncoded=(0,m.strToEncoding)(this._filename),this._recursive=Z,this._encoding=dt;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(ce){var Ct=new Error("watch ".concat(this._filename," ").concat(ce.code));throw Ct.code=ce.code,Ct.errno=ce.code,Ct}var Pt=function(ce){var yr,El=ce.getPath(),ds=ce.getNode(),pa=function(){var or=J(bt._filename,El);return or||(or=bt._getName()),bt.emit("change","change",or)};ds.on("change",pa);var Sl=(yr=bt._listenerRemovers.get(ds.ino))!==null&&yr!==void 0?yr:[];Sl.push(function(){return ds.removeListener("change",pa)}),bt._listenerRemovers.set(ds.ino,Sl)},Ut=function(ce){var yr,El=ce.getNode(),ds=function(or){bt.emit("change","rename",J(bt._filename,or.getPath())),setTimeout(function(){Pt(or),Ut(or)})},pa=function(or){var pi=function(ji){var Lm=ji.getNode().ino,iE=bt._listenerRemovers.get(Lm);iE&&(iE.forEach(function(Fm){return Fm()}),bt._listenerRemovers.delete(Lm)),Object.values(ji.children).forEach(function(Fm){Fm&&pi(Fm)})};pi(or),bt.emit("change","rename",J(bt._filename,or.getPath()))};Object.entries(ce.children).forEach(function(or){var pi=or[0],ji=or[1];ji&&pi!=="."&&pi!==".."&&Pt(ji)}),ce.on("child:add",ds),ce.on("child:delete",pa);var Sl=(yr=bt._listenerRemovers.get(El.ino))!==null&&yr!==void 0?yr:[];Sl.push(function(){ce.removeListener("child:add",ds),ce.removeListener("child:delete",pa)}),Z&&Object.entries(ce.children).forEach(function(or){var pi=or[0],ji=or[1];ji&&pi!=="."&&pi!==".."&&Ut(ji)})};Pt(this._link),Ut(this._link);var Jt=this._link.parent;Jt&&(Jt.setMaxListeners(Jt.getMaxListeners()+1),Jt.on("child:delete",this._onParentChild)),U&&this._persist()},I.prototype.close=function(){clearTimeout(this._timer),this._listenerRemovers.forEach(function(U){U.forEach(function(Z){return Z()})}),this._listenerRemovers.clear();var P=this._link.parent;P&&P.removeListener("child:delete",this._onParentChild)},I})(g.EventEmitter);return de.FSWatcher=nE,de}function $M(){return vD||(vD=!0,Object.defineProperty(uo,"__esModule",{value:!0}),uo.fsSyncMethods=uo.fsProps=uo.fsAsyncMethods=void 0,uo.fsProps=["constants","F_OK","R_OK","W_OK","X_OK","Stats"],uo.fsSyncMethods=["renameSync","ftruncateSync","truncateSync","chownSync","fchownSync","lchownSync","chmodSync","fchmodSync","lchmodSync","statSync","lstatSync","fstatSync","linkSync","symlinkSync","readlinkSync","realpathSync","unlinkSync","rmdirSync","mkdirSync","mkdirpSync","readdirSync","closeSync","openSync","utimesSync","futimesSync","fsyncSync","writeSync","readSync","readFileSync","writeFileSync","appendFileSync","existsSync","accessSync","fdatasyncSync","mkdtempSync","copyFileSync","rmSync","createReadStream","createWriteStream"],uo.fsAsyncMethods=["rename","ftruncate","truncate","chown","fchown","lchown","chmod","fchmod","lchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","mkdirp","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","exists","access","fdatasync","mkdtemp","copyFile","rm","watchFile","unwatchFile","watch"]),uo}function qM(){if(bD)return Dr;bD=!0;var n=Dr&&Dr.__assign||function(){return n=Object.assign||function(m){for(var y,b=1,v=arguments.length;b<v;b++){y=arguments[b];for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&(m[w]=y[w])}return m},n.apply(this,arguments)};Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.fs=Dr.createFsFromVolume=Dr.vol=Dr.Volume=void 0;var t=d2(),e=xD(),r=_D(),i=$M(),o=i.fsSyncMethods,s=i.fsAsyncMethods,a=Pd(),c=a.constants.F_OK,u=a.constants.R_OK,h=a.constants.W_OK,f=a.constants.X_OK;Dr.Volume=r.Volume,Dr.vol=new r.Volume;function g(m){for(var y={F_OK:c,R_OK:u,W_OK:h,X_OK:f,constants:a.constants,Stats:t.default,Dirent:e.default},b=0,v=o;b<v.length;b++){var w=v[b];typeof m[w]=="function"&&(y[w]=m[w].bind(m))}for(var x=0,E=s;x<E.length;x++){var w=E[x];typeof m[w]=="function"&&(y[w]=m[w].bind(m))}return y.StatWatcher=m.StatWatcher,y.FSWatcher=m.FSWatcher,y.WriteStream=m.WriteStream,y.ReadStream=m.ReadStream,y.promises=m.promises,y._toUnixTimestamp=r.toUnixTimestamp,y}return Dr.createFsFromVolume=g,Dr.fs=g(Dr.vol),Dr=n(n({},Dr),Dr.fs),Dr.semantic=!0,Dr}function jn(n){throw new Error(`Node.js fs ${n} is not supported by JSPM core in the browser`)}function CD(n,t,e){let r=0,i=new TextDecoder;ho.watch(n,"utf8",()=>{let{size:o}=ho.fstatSync(t),s=Buffer.alloc(o-r);ho.readSync(t,s,0,s.length,r),r=o,e(i.decode(s,{stream:!0}))})}function g2(n,t){if(n.protocol==="file:")return f2(n);if(n.protocol==="https:"||n.protocol==="http:"){let e="\\\\url\\"+n.href.replaceAll(/\//g,"\\\\");if(T0(e))return e;if(t)throw new Error(`Cannot sync request URL ${n} via FS. JSPM FS support for network URLs requires using async FS methods or priming the MemFS cache first with an async request before a sync request.`);return(async()=>{let r=await fetch(n);if(!r.ok)throw new Error(`Unable to fetch ${n.href}, ${r.status}`);let i=await r.arrayBuffer();return TD(e,Buffer.from(i)),e})()}throw new Error("URL "+n+" not supported in JSPM FS implementation.")}function HM(n){return function(t,...e){return t instanceof URL?n(g2(t,!0),...e):n(t,...e)}}function WM(n){return async function(t,...e){return t instanceof URL?n(await g2(t),...e):n(t,...e)}}function GM(n){return function(t,...e){let r=e[e.length-1];t instanceof URL&&typeof r=="function"?g2(t).then(i=>{n(i,...e)},r):n(t,...e)}}var Od,nD,S0,iD,Gu,sD,zi,oD,Ar,aD,kM,vs,lD,Vu,cD,_0,uD,hD,Xu,fD,En,dD,C0,pD,LM,Aa,gD,Nd,mD,de,yD,jM,uo,vD,Dr,bD,Vl,ln,ho,zM,qe,VM,XM,YM,KM,JM,ZM,QM,t3,e3,r3,n3,i3,s3,o3,a3,l3,c3,T0,u3,h3,f3,d3,p3,g3,m3,y3,v3,b3,w3,A3,x3,E3,S3,_3,C3,T3,D3,R3,I3,m2,O3,N3,P3,k3,B3,L3,F3,M3,U3,j3,$3,q3,z3,H3,W3,y2,G3,V3,X3,Y3,K3,J3,Z3,Q3,t4,e4,r4,n4,i4,s4,o4,a4,l4,c4,u4,h4,f4,d4,p4,g4,TD,m4,y4,v4,b4,w4,A4,x4,E4,S4,_4,C4,T4,D4,R4,I4,O4,N4,P4,b2=Qe(()=>{wt();xt();At();ob();eC();Bb();Pl();gC();Sd();g0();Kb();Td();wT();ab();rD();_w();Rw();Zw();e2();Od={},nD=!1;S0={},iD=!1;Gu={},sD=!1;zi={},oD=!1;Ar={},aD=!1,kM=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;vs={},lD=!1;Vu={},cD=!1;br._makeLong;br.basename;br.delimiter;br.dirname;br.extname;br.format;br.isAbsolute;br.join;br.normalize;br.parse;br.posix;br.relative;br.resolve;br.sep;br.win32;_0={},uD=!1,hD=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;Xu={},fD=!1;En={},dD=!1;C0={},pD=!1,LM=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;Aa={},gD=!1;Nd={},mD=!1;de={},yD=!1,jM=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;uo={},vD=!1;Dr={},bD=!1;Vl=qM();Vl.__esModule;Vl.fs;Vl.createFsFromVolume;Vl.vol;Vl.Volume;Vl.semantic;ln=_D();ln.__esModule;ln.FSWatcher;ln.StatWatcher;ln.Volume;ln.toUnixTimestamp;ln.bufferToEncoding;ln.dataToBuffer;ln.dataToStr;ln.pathToSteps;ln.filenameToSteps;ln.pathToFilename;ln.flagsToNumber;ln.FLAGS;ln.ReadStream;ln.WriteStream;({vol:ho,createFsFromVolume:zM}=Vl);ho.fromNestedJSON({"/dev":{stdin:"",stdout:"",stderr:""},"/usr/bin":{},"/home":{},"/tmp":{}});ho.releasedFds=[2,1,0];ho.openSync("/dev/stdin","w");ho.openSync("/dev/stdout","r");ho.openSync("/dev/stderr","r");CD("/dev/stdout",1,console.log);CD("/dev/stderr",2,console.error);qe=zM(ho);qe.opendir=()=>jn("opendir");qe.opendirSync=()=>jn("opendirSync");qe.promises.opendir=()=>jn("promises.opendir");qe.cp=()=>jn("cp");qe.cpSync=()=>jn("cpSync");qe.promises.cp=()=>jn("promises.cp");qe.readv=()=>jn("readv");qe.readvSync=()=>jn("readvSync");qe.rm=()=>jn("rm");qe.rmSync=()=>jn("rmSync");qe.promises.rm=()=>jn("promises.rm");qe.Dir=()=>jn("Dir");qe.promises.watch=()=>jn("promises.watch");qe.FileReadStream=qe.ReadStream;qe.FileWriteStream=qe.WriteStream;qe.promises.readFile=WM(qe.promises.readFile);qe.readFile=GM(qe.readFile);qe.readFileSync=HM(qe.readFileSync);({appendFile:VM,appendFileSync:XM,access:YM,accessSync:KM,chown:JM,chownSync:ZM,chmod:QM,chmodSync:t3,close:e3,closeSync:r3,copyFile:n3,copyFileSync:i3,cp:s3,cpSync:o3,createReadStream:a3,createWriteStream:l3,exists:c3,existsSync:T0,fchown:u3,fchownSync:h3,fchmod:f3,fchmodSync:d3,fdatasync:p3,fdatasyncSync:g3,fstat:m3,fstatSync:y3,fsync:v3,fsyncSync:b3,ftruncate:w3,ftruncateSync:A3,futimes:x3,futimesSync:E3,lchown:S3,lchownSync:_3,lchmod:C3,lchmodSync:T3,link:D3,linkSync:R3,lstat:I3,lstatSync:m2,mkdir:O3,mkdirSync:N3,mkdtemp:P3,mkdtempSync:k3,open:B3,openSync:L3,opendir:F3,opendirSync:M3,readdir:U3,readdirSync:j3,read:$3,readSync:q3,readv:z3,readvSync:H3,readFile:W3,readFileSync:y2,readlink:G3,readlinkSync:V3,realpath:X3,realpathSync:Y3,rename:K3,renameSync:J3,rm:Z3,rmSync:Q3,rmdir:t4,rmdirSync:e4,stat:r4,statSync:n4,symlink:i4,symlinkSync:s4,truncate:o4,truncateSync:a4,unwatchFile:l4,unlink:c4,unlinkSync:u4,utimes:h4,utimesSync:f4,watch:d4,watchFile:p4,writeFile:g4,writeFileSync:TD,write:m4,writeSync:y4,writev:v4,writevSync:b4,Dir:w4,Dirent:A4,Stats:x4,ReadStream:E4,WriteStream:S4,FileReadStream:_4,FileWriteStream:C4,_toUnixTimestamp:T4,constants:{F_OK:D4,R_OK:R4,W_OK:I4,X_OK:O4},constants:N4,promises:P4}=qe)});var w2=Zt(fr=>{"use strict";wt();xt();At();Object.defineProperty(fr,"__esModule",{value:!0});fr.readFile=fr.writeFileSync=fr.writeFile=fr.read=fr.open=fr.close=fr.stat=fr.createReadStream=fr.pathExists=void 0;var fo=(b2(),aE(v2));fr.pathExists=fo.existsSync;fr.createReadStream=fo.createReadStream;async function k4(n){return new Promise((t,e)=>{fo.stat(n,(r,i)=>{r?e(r):t(i)})})}fr.stat=k4;async function B4(n){return new Promise((t,e)=>{fo.close(n,r=>{r?e(r):t()})})}fr.close=B4;async function L4(n,t){return new Promise((e,r)=>{fo.open(n,t,(i,o)=>{i?r(i):e(o)})})}fr.open=L4;async function F4(n,t,e,r,i){return new Promise((o,s)=>{fo.read(n,t,e,r,i,(a,c,u)=>{a?s(a):o({bytesRead:c,buffer:u})})})}fr.read=F4;async function M4(n,t){return new Promise((e,r)=>{fo.writeFile(n,t,i=>{i?r(i):e()})})}fr.writeFile=M4;function U4(n,t){fo.writeFileSync(n,t)}fr.writeFileSync=U4;async function j4(n){return new Promise((t,e)=>{fo.readFile(n,(r,i)=>{r?e(r):t(i)})})}fr.readFile=j4});var D0=Zt(Xl=>{"use strict";wt();xt();At();Object.defineProperty(Xl,"__esModule",{value:!0});Xl.EndOfStreamError=Xl.defaultMessages=void 0;Xl.defaultMessages="End-Of-Stream";var A2=class extends Error{constructor(){super(Xl.defaultMessages)}};Xl.EndOfStreamError=A2});var DD=Zt(R0=>{"use strict";wt();xt();At();Object.defineProperty(R0,"__esModule",{value:!0});R0.Deferred=void 0;var x2=class{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((t,e)=>{this.reject=e,this.resolve=t})}};R0.Deferred=x2});var ID=Zt(Yu=>{"use strict";wt();xt();At();Object.defineProperty(Yu,"__esModule",{value:!0});Yu.StreamReader=Yu.EndOfStreamError=void 0;var RD=D0(),$4=DD(),q4=D0();Object.defineProperty(Yu,"EndOfStreamError",{enumerable:!0,get:function(){return q4.EndOfStreamError}});var z4=1*1024*1024,E2=class{constructor(t){if(this.s=t,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!t.read||!t.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new RD.EndOfStreamError)),this.s.once("error",e=>this.reject(e)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(t,e,r){let i=await this.read(t,e,r);return this.peekQueue.push(t.subarray(e,e+i)),i}async read(t,e,r){if(r===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new RD.EndOfStreamError;let i=r,o=0;for(;this.peekQueue.length>0&&i>0;){let s=this.peekQueue.pop();if(!s)throw new Error("peekData should be defined");let a=Math.min(s.length,i);t.set(s.subarray(0,a),e+o),o+=a,i-=a,a<s.length&&this.peekQueue.push(s.subarray(a))}for(;i>0&&!this.endOfStream;){let s=Math.min(i,z4),a=await this.readFromStream(t,e+o,s);if(o+=a,a<s)break;i-=a}return o}async readFromStream(t,e,r){let i=this.s.read(r);if(i)return t.set(i,e),i.length;{let o={buffer:t,offset:e,length:r,deferred:new $4.Deferred};return this.deferred=o.deferred,this.s.once("readable",()=>{this.readDeferred(o)}),o.deferred.promise}}readDeferred(t){let e=this.s.read(t.length);e?(t.buffer.set(e,t.offset),t.deferred.resolve(e.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(t)})}reject(t){this.endOfStream=!0,this.deferred&&(this.deferred.reject(t),this.deferred=null)}};Yu.StreamReader=E2});var Ju=Zt(Ku=>{"use strict";wt();xt();At();Object.defineProperty(Ku,"__esModule",{value:!0});Ku.StreamReader=Ku.EndOfStreamError=void 0;var H4=D0();Object.defineProperty(Ku,"EndOfStreamError",{enumerable:!0,get:function(){return H4.EndOfStreamError}});var W4=ID();Object.defineProperty(Ku,"StreamReader",{enumerable:!0,get:function(){return W4.StreamReader}})});var N0=Zt(O0=>{"use strict";wt();xt();At();Object.defineProperty(O0,"__esModule",{value:!0});O0.AbstractTokenizer=void 0;var I0=Ju(),S2=class{constructor(t){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=t||{}}async readToken(t,e=this.position){let r=Buffer.alloc(t.len);if(await this.readBuffer(r,{position:e})<t.len)throw new I0.EndOfStreamError;return t.get(r,0)}async peekToken(t,e=this.position){let r=Buffer.alloc(t.len);if(await this.peekBuffer(r,{position:e})<t.len)throw new I0.EndOfStreamError;return t.get(r,0)}async readNumber(t){if(await this.readBuffer(this.numBuffer,{length:t.len})<t.len)throw new I0.EndOfStreamError;return t.get(this.numBuffer,0)}async peekNumber(t){if(await this.peekBuffer(this.numBuffer,{length:t.len})<t.len)throw new I0.EndOfStreamError;return t.get(this.numBuffer,0)}async ignore(t){if(this.fileInfo.size!==void 0){let e=this.fileInfo.size-this.position;if(t>e)return this.position+=e,e}return this.position+=t,t}async close(){}normalizeOptions(t,e){if(e&&e.position!==void 0&&e.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return e?{mayBeLess:e.mayBeLess===!0,offset:e.offset?e.offset:0,length:e.length?e.length:t.length-(e.offset?e.offset:0),position:e.position?e.position:this.position}:{mayBeLess:!1,offset:0,length:t.length,position:this.position}}};O0.AbstractTokenizer=S2});var OD=Zt(k0=>{"use strict";wt();xt();At();Object.defineProperty(k0,"__esModule",{value:!0});k0.ReadStreamTokenizer=void 0;var G4=N0(),P0=Ju(),V4=256e3,_2=class extends G4.AbstractTokenizer{constructor(t,e){super(e),this.streamReader=new P0.StreamReader(t)}async getFileInfo(){return this.fileInfo}async readBuffer(t,e){let r=this.normalizeOptions(t,e),i=r.position-this.position;if(i>0)return await this.ignore(i),this.readBuffer(t,e);if(i<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(r.length===0)return 0;let o=await this.streamReader.read(t,r.offset,r.length);if(this.position+=o,(!e||!e.mayBeLess)&&o<r.length)throw new P0.EndOfStreamError;return o}async peekBuffer(t,e){let r=this.normalizeOptions(t,e),i=0;if(r.position){let o=r.position-this.position;if(o>0){let s=new Uint8Array(r.length+o);return i=await this.peekBuffer(s,{mayBeLess:r.mayBeLess}),t.set(s.subarray(o),r.offset),i-o}else if(o<0)throw new Error("Cannot peek from a negative offset in a stream")}if(r.length>0){try{i=await this.streamReader.peek(t,r.offset,r.length)}catch(o){if(e&&e.mayBeLess&&o instanceof P0.EndOfStreamError)return 0;throw o}if(!r.mayBeLess&&i<r.length)throw new P0.EndOfStreamError}return i}async ignore(t){let e=Math.min(V4,t),r=new Uint8Array(e),i=0;for(;i<t;){let o=t-i,s=await this.readBuffer(r,{length:Math.min(e,o)});if(s<0)return s;i+=s}return i}};k0.ReadStreamTokenizer=_2});var ND=Zt(B0=>{"use strict";wt();xt();At();Object.defineProperty(B0,"__esModule",{value:!0});B0.BufferTokenizer=void 0;var X4=Ju(),Y4=N0(),C2=class extends Y4.AbstractTokenizer{constructor(t,e){super(e),this.uint8Array=t,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:t.length}async readBuffer(t,e){if(e&&e.position){if(e.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=e.position}let r=await this.peekBuffer(t,e);return this.position+=r,r}async peekBuffer(t,e){let r=this.normalizeOptions(t,e),i=Math.min(this.uint8Array.length-r.position,r.length);if(!r.mayBeLess&&i<r.length)throw new X4.EndOfStreamError;return t.set(this.uint8Array.subarray(r.position,r.position+i),r.offset),i}async close(){}};B0.BufferTokenizer=C2});var L0=Zt(xa=>{"use strict";wt();xt();At();Object.defineProperty(xa,"__esModule",{value:!0});xa.fromBuffer=xa.fromStream=xa.EndOfStreamError=void 0;var K4=OD(),J4=ND(),Z4=Ju();Object.defineProperty(xa,"EndOfStreamError",{enumerable:!0,get:function(){return Z4.EndOfStreamError}});function Q4(n,t){return t=t||{},new K4.ReadStreamTokenizer(n,t)}xa.fromStream=Q4;function t8(n,t){return new J4.BufferTokenizer(n,t)}xa.fromBuffer=t8});var kD=Zt(Zu=>{"use strict";wt();xt();At();Object.defineProperty(Zu,"__esModule",{value:!0});Zu.fromFile=Zu.FileTokenizer=void 0;var e8=N0(),PD=Ju(),kd=w2(),F0=class extends e8.AbstractTokenizer{constructor(t,e){super(e),this.fd=t}async readBuffer(t,e){let r=this.normalizeOptions(t,e);this.position=r.position;let i=await kd.read(this.fd,t,r.offset,r.length,r.position);if(this.position+=i.bytesRead,i.bytesRead<r.length&&(!e||!e.mayBeLess))throw new PD.EndOfStreamError;return i.bytesRead}async peekBuffer(t,e){let r=this.normalizeOptions(t,e),i=await kd.read(this.fd,t,r.offset,r.length,r.position);if(!r.mayBeLess&&i.bytesRead<r.length)throw new PD.EndOfStreamError;return i.bytesRead}async close(){return kd.close(this.fd)}};Zu.FileTokenizer=F0;async function r8(n){let t=await kd.stat(n);if(!t.isFile)throw new Error(`File not a file: ${n}`);let e=await kd.open(n,"r");return new F0(e,{path:n,size:t.size})}Zu.fromFile=r8});var LD=Zt(bs=>{"use strict";wt();xt();At();Object.defineProperty(bs,"__esModule",{value:!0});bs.fromStream=bs.fromBuffer=bs.EndOfStreamError=bs.fromFile=void 0;var n8=w2(),i8=L0(),s8=kD();Object.defineProperty(bs,"fromFile",{enumerable:!0,get:function(){return s8.fromFile}});var BD=L0();Object.defineProperty(bs,"EndOfStreamError",{enumerable:!0,get:function(){return BD.EndOfStreamError}});Object.defineProperty(bs,"fromBuffer",{enumerable:!0,get:function(){return BD.fromBuffer}});async function o8(n,t){if(t=t||{},n.path){let e=await n8.stat(n.path);t.path=n.path,t.size=e.size}return i8.fromStream(n,t)}bs.fromStream=o8});var FD=Zt(T2=>{wt();xt();At();T2.read=function(n,t,e,r,i){var o,s,a=i*8-r-1,c=(1<<a)-1,u=c>>1,h=-7,f=e?i-1:0,g=e?-1:1,m=n[t+f];for(f+=g,o=m&(1<<-h)-1,m>>=-h,h+=a;h>0;o=o*256+n[t+f],f+=g,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;h>0;s=s*256+n[t+f],f+=g,h-=8);if(o===0)o=1-u;else{if(o===c)return s?NaN:(m?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-u}return(m?-1:1)*s*Math.pow(2,o-r)};T2.write=function(n,t,e,r,i,o){var s,a,c,u=o*8-i-1,h=(1<<u)-1,f=h>>1,g=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=r?0:o-1,y=r?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+f>=1?t+=g/c:t+=g*Math.pow(2,1-f),t*c>=2&&(s++,c/=2),s+f>=h?(a=0,s=h):s+f>=1?(a=(t*c-1)*Math.pow(2,i),s=s+f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;n[e+m]=a&255,m+=y,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;n[e+m]=s&255,m+=y,s/=256,u-=8);n[e+m-y]|=b*128}});var MD=Zt(zt=>{"use strict";wt();xt();At();Object.defineProperty(zt,"__esModule",{value:!0});zt.AnsiStringType=zt.StringType=zt.BufferType=zt.Uint8ArrayType=zt.IgnoreType=zt.Float80_LE=zt.Float80_BE=zt.Float64_LE=zt.Float64_BE=zt.Float32_LE=zt.Float32_BE=zt.Float16_LE=zt.Float16_BE=zt.INT64_BE=zt.UINT64_BE=zt.INT64_LE=zt.UINT64_LE=zt.INT32_LE=zt.INT32_BE=zt.INT24_BE=zt.INT24_LE=zt.INT16_LE=zt.INT16_BE=zt.INT8=zt.UINT32_BE=zt.UINT32_LE=zt.UINT24_BE=zt.UINT24_LE=zt.UINT16_BE=zt.UINT16_LE=zt.UINT8=void 0;var Ea=FD();function ne(n){return new DataView(n.buffer,n.byteOffset)}zt.UINT8={len:1,get(n,t){return ne(n).getUint8(t)},put(n,t,e){return ne(n).setUint8(t,e),t+1}};zt.UINT16_LE={len:2,get(n,t){return ne(n).getUint16(t,!0)},put(n,t,e){return ne(n).setUint16(t,e,!0),t+2}};zt.UINT16_BE={len:2,get(n,t){return ne(n).getUint16(t)},put(n,t,e){return ne(n).setUint16(t,e),t+2}};zt.UINT24_LE={len:3,get(n,t){let e=ne(n);return e.getUint8(t)+(e.getUint16(t+1,!0)<<8)},put(n,t,e){let r=ne(n);return r.setUint8(t,e&255),r.setUint16(t+1,e>>8,!0),t+3}};zt.UINT24_BE={len:3,get(n,t){let e=ne(n);return(e.getUint16(t)<<8)+e.getUint8(t+2)},put(n,t,e){let r=ne(n);return r.setUint16(t,e>>8),r.setUint8(t+2,e&255),t+3}};zt.UINT32_LE={len:4,get(n,t){return ne(n).getUint32(t,!0)},put(n,t,e){return ne(n).setUint32(t,e,!0),t+4}};zt.UINT32_BE={len:4,get(n,t){return ne(n).getUint32(t)},put(n,t,e){return ne(n).setUint32(t,e),t+4}};zt.INT8={len:1,get(n,t){return ne(n).getInt8(t)},put(n,t,e){return ne(n).setInt8(t,e),t+1}};zt.INT16_BE={len:2,get(n,t){return ne(n).getInt16(t)},put(n,t,e){return ne(n).setInt16(t,e),t+2}};zt.INT16_LE={len:2,get(n,t){return ne(n).getInt16(t,!0)},put(n,t,e){return ne(n).setInt16(t,e,!0),t+2}};zt.INT24_LE={len:3,get(n,t){let e=zt.UINT24_LE.get(n,t);return e>8388607?e-16777216:e},put(n,t,e){let r=ne(n);return r.setUint8(t,e&255),r.setUint16(t+1,e>>8,!0),t+3}};zt.INT24_BE={len:3,get(n,t){let e=zt.UINT24_BE.get(n,t);return e>8388607?e-16777216:e},put(n,t,e){let r=ne(n);return r.setUint16(t,e>>8),r.setUint8(t+2,e&255),t+3}};zt.INT32_BE={len:4,get(n,t){return ne(n).getInt32(t)},put(n,t,e){return ne(n).setInt32(t,e),t+4}};zt.INT32_LE={len:4,get(n,t){return ne(n).getInt32(t,!0)},put(n,t,e){return ne(n).setInt32(t,e,!0),t+4}};zt.UINT64_LE={len:8,get(n,t){return ne(n).getBigUint64(t,!0)},put(n,t,e){return ne(n).setBigUint64(t,e,!0),t+8}};zt.INT64_LE={len:8,get(n,t){return ne(n).getBigInt64(t,!0)},put(n,t,e){return ne(n).setBigInt64(t,e,!0),t+8}};zt.UINT64_BE={len:8,get(n,t){return ne(n).getBigUint64(t)},put(n,t,e){return ne(n).setBigUint64(t,e),t+8}};zt.INT64_BE={len:8,get(n,t){return ne(n).getBigInt64(t)},put(n,t,e){return ne(n).setBigInt64(t,e),t+8}};zt.Float16_BE={len:2,get(n,t){return Ea.read(n,t,!1,10,this.len)},put(n,t,e){return Ea.write(n,e,t,!1,10,this.len),t+this.len}};zt.Float16_LE={len:2,get(n,t){return Ea.read(n,t,!0,10,this.len)},put(n,t,e){return Ea.write(n,e,t,!0,10,this.len),t+this.len}};zt.Float32_BE={len:4,get(n,t){return ne(n).getFloat32(t)},put(n,t,e){return ne(n).setFloat32(t,e),t+4}};zt.Float32_LE={len:4,get(n,t){return ne(n).getFloat32(t,!0)},put(n,t,e){return ne(n).setFloat32(t,e,!0),t+4}};zt.Float64_BE={len:8,get(n,t){return ne(n).getFloat64(t)},put(n,t,e){return ne(n).setFloat64(t,e),t+8}};zt.Float64_LE={len:8,get(n,t){return ne(n).getFloat64(t,!0)},put(n,t,e){return ne(n).setFloat64(t,e,!0),t+8}};zt.Float80_BE={len:10,get(n,t){return Ea.read(n,t,!1,63,this.len)},put(n,t,e){return Ea.write(n,e,t,!1,63,this.len),t+this.len}};zt.Float80_LE={len:10,get(n,t){return Ea.read(n,t,!0,63,this.len)},put(n,t,e){return Ea.write(n,e,t,!0,63,this.len),t+this.len}};var D2=class{constructor(t){this.len=t}get(t,e){}};zt.IgnoreType=D2;var R2=class{constructor(t){this.len=t}get(t,e){return t.subarray(e,e+this.len)}};zt.Uint8ArrayType=R2;var I2=class{constructor(t){this.len=t}get(t,e){return Buffer.from(t.subarray(e,e+this.len))}};zt.BufferType=I2;var O2=class{constructor(t,e){this.len=t,this.encoding=e}get(t,e){return Buffer.from(t).toString(this.encoding,e,e+this.len)}};zt.StringType=O2;var M0=class n{constructor(t){this.len=t}static decode(t,e,r){let i="";for(let o=e;o<r;++o)i+=n.codePointToString(n.singleByteDecoder(t[o]));return i}static inRange(t,e,r){return e<=t&&t<=r}static codePointToString(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}static singleByteDecoder(t){if(n.inRange(t,0,127))return t;let e=n.windows1252[t-128];if(e===null)throw Error("invaliding encoding");return e}get(t,e=0){return n.decode(t,e,e+this.len)}};zt.AnsiStringType=M0;M0.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]});var UD=Zt(U0=>{"use strict";wt();xt();At();U0.stringToBytes=n=>[...n].map(t=>t.charCodeAt(0));U0.tarHeaderChecksumMatches=(n,t=0)=>{let e=parseInt(n.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(e))return!1;let r=256;for(let i=t;i<t+148;i++)r+=n[i];for(let i=t+156;i<t+512;i++)r+=n[i];return e===r};U0.uint32SyncSafeToken={get:(n,t)=>n[t+3]&127|n[t+2]<<7|n[t+1]<<14|n[t]<<21,len:4}});var $D=Zt((G$,jD)=>{"use strict";wt();xt();At();jD.exports={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]}});var qD=Zt((exports,module)=>{"use strict";wt();xt();At();var Token=MD(),strtok3=L0(),{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=UD(),supported=$D(),minimumBytes=4100;async function fromStream(n){let t=await strtok3.fromStream(n);try{return await fromTokenizer(t)}finally{await t.close()}}async function fromBuffer(n){if(!(n instanceof Uint8Array||n instanceof ArrayBuffer||Buffer.isBuffer(n)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof n}\``);let t=n instanceof Buffer?n:Buffer.from(n);if(!(t&&t.length>1))return;let e=strtok3.fromBuffer(t);return fromTokenizer(e)}function _check(n,t,e){e={offset:0,...e};for(let[r,i]of t.entries())if(e.mask){if(i!==(e.mask[r]&n[r+e.offset]))return!1}else if(i!==n[r+e.offset])return!1;return!0}async function fromTokenizer(n){try{return _fromTokenizer(n)}catch(t){if(!(t instanceof strtok3.EndOfStreamError))throw t}}async function _fromTokenizer(n){let t=Buffer.alloc(minimumBytes),e=12,r=(o,s)=>_check(t,o,s),i=(o,s)=>r(stringToBytes(o),s);if(n.fileInfo.size||(n.fileInfo.size=Number.MAX_SAFE_INTEGER),await n.peekBuffer(t,{length:e,mayBeLess:!0}),r([66,77]))return{ext:"bmp",mime:"image/bmp"};if(r([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(r([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(r([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(r([37,33]))return await n.peekBuffer(t,{length:24,mayBeLess:!0}),i("PS-Adobe-",{offset:2})&&i(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(r([31,160])||r([31,157]))return{ext:"Z",mime:"application/x-compress"};if(r([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(r([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(r([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(r([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(i("ID3")){await n.ignore(6);let o=await n.readToken(uint32SyncSafeToken);return n.position+o>n.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await n.ignore(o),fromTokenizer(n))}if(i("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((t[0]===67||t[0]===70)&&r([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(r([71,73,70]))return{ext:"gif",mime:"image/gif"};if(i("FLIF"))return{ext:"flif",mime:"image/flif"};if(i("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(i("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(i("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(i("FORM"))return{ext:"aif",mime:"audio/aiff"};if(i("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(r([80,75,3,4])){try{for(;n.position+30<n.fileInfo.size;){await n.readBuffer(t,{length:30});let o={compressedSize:t.readUInt32LE(18),uncompressedSize:t.readUInt32LE(22),filenameLength:t.readUInt16LE(26),extraFieldLength:t.readUInt16LE(28)};if(o.filename=await n.readToken(new Token.StringType(o.filenameLength,"utf-8")),await n.ignore(o.extraFieldLength),o.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(o.filename.endsWith(".rels")||o.filename.endsWith(".xml"))switch(o.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if(o.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(o.filename.startsWith("3D/")&&o.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(o.filename==="mimetype"&&o.compressedSize===o.uncompressedSize)switch(await n.readToken(new Token.StringType(o.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if(o.compressedSize===0){let s=-1;for(;s<0&&n.position<n.fileInfo.size;)await n.peekBuffer(t,{mayBeLess:!0}),s=t.indexOf("504B0304",0,"hex"),await n.ignore(s>=0?s:t.length)}else await n.ignore(o.compressedSize)}}catch(o){if(!(o instanceof strtok3.EndOfStreamError))throw o}return{ext:"zip",mime:"application/zip"}}if(i("OggS")){await n.ignore(28);let o=Buffer.alloc(8);return await n.readBuffer(o),_check(o,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(o,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(o,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(o,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(o,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(o,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(r([80,75])&&(t[2]===3||t[2]===5||t[2]===7)&&(t[3]===4||t[3]===6||t[3]===8))return{ext:"zip",mime:"application/zip"};if(i("ftyp",{offset:4})&&(t[8]&96)!==0){let o=t.toString("binary",8,12).replace("\0"," ").trim();switch(o){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return o.startsWith("3g")?o.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(i("MThd"))return{ext:"mid",mime:"audio/midi"};if(i("wOFF")&&(r([0,1,0,0],{offset:4})||i("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(i("wOF2")&&(r([0,1,0,0],{offset:4})||i("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(r([212,195,178,161])||r([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(i("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(i("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(i("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(r([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(i("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(i("%PDF")){await n.ignore(1350);let o=10*1024*1024,s=Buffer.alloc(Math.min(o,n.fileInfo.size));return await n.readBuffer(s,{mayBeLess:!0}),s.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(r([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(r([73,73,42,0]))return i("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:r([28,0,254,0],{offset:8})||r([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:r([8,0,0,0],{offset:4})&&(r([45,0,254,0],{offset:8})||r([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(t=Buffer.alloc(24),await n.peekBuffer(t),(r([16,251,134,1],{offset:4})||r([8,0,0,0],{offset:4}))&&r([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(r([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(i("MAC "))return{ext:"ape",mime:"audio/ape"};if(r([26,69,223,163])){async function o(){let h=await n.peekNumber(Token.UINT8),f=128,g=0;for(;(h&f)===0&&f!==0;)++g,f>>=1;let m=Buffer.alloc(g+1);return await n.readBuffer(m),m}async function s(){let h=await o(),f=await o();f[0]^=128>>f.length-1;let g=Math.min(6,f.length);return{id:h.readUIntBE(0,h.length),len:f.readUIntBE(f.length-g,g)}}async function a(h,f){for(;f>0;){let g=await s();if(g.id===17026)return n.readToken(new Token.StringType(g.len,"utf-8"));await n.ignore(g.len),--f}}let c=await s();switch(await a(1,c.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(r([82,73,70,70])){if(r([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(r([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(r([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(i("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(r([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(i("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(i("MSCF")||i("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(r([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(r([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(r([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(r([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(i("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(i("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(r([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(i("IMPM"))return{ext:"it",mime:"audio/x-it"};if(i("-lh0-",{offset:2})||i("-lh1-",{offset:2})||i("-lh2-",{offset:2})||i("-lh3-",{offset:2})||i("-lh4-",{offset:2})||i("-lh5-",{offset:2})||i("-lh6-",{offset:2})||i("-lh7-",{offset:2})||i("-lzs-",{offset:2})||i("-lz4-",{offset:2})||i("-lz5-",{offset:2})||i("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(r([0,0,1,186])){if(r([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(r([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(i("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(r([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(i("<?xml "))return{ext:"xml",mime:"application/xml"};if(r([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(r([82,97,114,33,26,7])&&(t[6]===0||t[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(i("solid "))return{ext:"stl",mime:"model/stl"};if(i("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(i("!<arch>"))return await n.ignore(8),await n.readToken(new Token.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(r([137,80,78,71,13,10,26,10])){await n.ignore(8);async function o(){return{length:await n.readToken(Token.INT32_BE),type:await n.readToken(new Token.StringType(4,"binary"))}}do{let s=await o();if(s.length<0)return;switch(s.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await n.ignore(s.length+4)}}while(n.position+8<n.fileInfo.size);return{ext:"png",mime:"image/png"}}if(r([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(r([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(r([102,114,101,101],{offset:4})||r([109,100,97,116],{offset:4})||r([109,111,111,118],{offset:4})||r([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(r([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(i("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(r([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(r([48,38,178,117,142,102,207,17,166,217])){async function o(){let s=Buffer.alloc(16);return await n.readBuffer(s),{id:s,size:Number(await n.readToken(Token.UINT64_LE))}}for(await n.ignore(30);n.position+24<n.fileInfo.size;){let s=await o(),a=s.size-24;if(_check(s.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){let c=Buffer.alloc(16);if(a-=await n.readBuffer(c),_check(c,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(c,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await n.ignore(a)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(r([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((r([126,16,4])||r([126,24,4]))&&r([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(r([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(r([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await n.ignore(20),await n.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(r([255,10])||r([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(r([0,0,1,186])||r([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(r([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(r([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(r([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(r([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await n.peekBuffer(t,{length:Math.min(256,n.fileInfo.size),mayBeLess:!0}),i("BEGIN:")){if(i("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(i("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(i("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(i("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(i("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(r([4,0,0,0])&&t.length>=16){let o=t.readUInt32LE(12);if(o>12&&t.length>=o+16)try{let s=t.slice(16,o+16).toString();if(JSON.parse(s).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(r([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(i("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(r([71],{offset:4})&&(r([71],{offset:192})||r([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(r([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(r([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(r([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(r([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(r([76,80],{offset:34})&&(r([0,0,1],{offset:8})||r([1,0,2],{offset:8})||r([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(r([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await n.peekBuffer(t,{length:Math.min(512,n.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(t))return{ext:"tar",mime:"application/x-tar"};if(r([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(i("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(t.length>=2&&r([255,224],{offset:0,mask:[255,224]})){if(r([16],{offset:1,mask:[22]}))return r([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(r([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(r([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(r([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}var stream=readableStream=>new Promise((resolve,reject)=>{let stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{let n=new stream.PassThrough,t;stream.pipeline?t=stream.pipeline(readableStream,n,()=>{}):t=readableStream.pipe(n);let e=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{let r=await fromBuffer(e);n.fileType=r}catch(r){reject(r)}resolve(t)})}),fileType={fromStream,fromTokenizer,fromBuffer,stream};Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}});Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}});module.exports=fileType});var HD=Zt((Q$,zD)=>{"use strict";wt();xt();At();var a8=LD(),j0=qD();async function l8(n){let t=await a8.fromFile(n);try{return await j0.fromTokenizer(t)}finally{await t.close()}}var $0={fromFile:l8};Object.assign($0,j0);Object.defineProperty($0,"extensions",{get(){return j0.extensions}});Object.defineProperty($0,"mimeTypes",{get(){return j0.mimeTypes}});zD.exports=$0});var Bd=Zt(Qu=>{"use strict";wt();xt();At();function c8(n,t,e){if(e===void 0&&(e=Array.prototype),n&&typeof e.find=="function")return e.find.call(n,t);for(var r=0;r<n.length;r++)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];if(t.call(void 0,i,r,n))return i}}function N2(n,t){return t===void 0&&(t=Object),t&&typeof t.freeze=="function"?t.freeze(n):n}function u8(n,t){if(n===null||typeof n!="object")throw new TypeError("target is not an object");for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n}var WD=N2({HTML:"text/html",isHTML:function(n){return n===WD.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),GD=N2({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(n){return n===GD.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Qu.assign=u8;Qu.find=c8;Qu.freeze=N2;Qu.MIME_TYPE=WD;Qu.NAMESPACE=GD});var z2=Zt(Sa=>{wt();xt();At();var tR=Bd(),ws=tR.find,Ld=tR.NAMESPACE;function h8(n){return n!==""}function f8(n){return n?n.split(/[\t\n\f\r ]+/).filter(h8):[]}function d8(n,t){return n.hasOwnProperty(t)||(n[t]=!0),n}function VD(n){if(!n)return[];var t=f8(n);return Object.keys(t.reduce(d8,{}))}function p8(n){return function(t){return n&&n.indexOf(t)!==-1}}function Md(n,t){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}function _n(n,t){var e=n.prototype;if(!(e instanceof t)){let i=function(){};var r=i;i.prototype=t.prototype,i=new i,Md(e,i),n.prototype=e=i}e.constructor!=n&&(typeof n!="function"&&console.error("unknown Class:"+n),e.constructor=n)}var Cn={},Hi=Cn.ELEMENT_NODE=1,eh=Cn.ATTRIBUTE_NODE=2,q0=Cn.TEXT_NODE=3,eR=Cn.CDATA_SECTION_NODE=4,rR=Cn.ENTITY_REFERENCE_NODE=5,g8=Cn.ENTITY_NODE=6,nR=Cn.PROCESSING_INSTRUCTION_NODE=7,iR=Cn.COMMENT_NODE=8,sR=Cn.DOCUMENT_NODE=9,oR=Cn.DOCUMENT_TYPE_NODE=10,go=Cn.DOCUMENT_FRAGMENT_NODE=11,m8=Cn.NOTATION_NODE=12,Jr={},Rr={},a9=Jr.INDEX_SIZE_ERR=(Rr[1]="Index size error",1),l9=Jr.DOMSTRING_SIZE_ERR=(Rr[2]="DOMString size error",2),Sn=Jr.HIERARCHY_REQUEST_ERR=(Rr[3]="Hierarchy request error",3),c9=Jr.WRONG_DOCUMENT_ERR=(Rr[4]="Wrong document",4),u9=Jr.INVALID_CHARACTER_ERR=(Rr[5]="Invalid character",5),h9=Jr.NO_DATA_ALLOWED_ERR=(Rr[6]="No data allowed",6),f9=Jr.NO_MODIFICATION_ALLOWED_ERR=(Rr[7]="No modification allowed",7),aR=Jr.NOT_FOUND_ERR=(Rr[8]="Not found",8),d9=Jr.NOT_SUPPORTED_ERR=(Rr[9]="Not supported",9),XD=Jr.INUSE_ATTRIBUTE_ERR=(Rr[10]="Attribute in use",10),p9=Jr.INVALID_STATE_ERR=(Rr[11]="Invalid state",11),g9=Jr.SYNTAX_ERR=(Rr[12]="Syntax error",12),m9=Jr.INVALID_MODIFICATION_ERR=(Rr[13]="Invalid modification",13),y9=Jr.NAMESPACE_ERR=(Rr[14]="Invalid namespace",14),v9=Jr.INVALID_ACCESS_ERR=(Rr[15]="Invalid access",15);function lr(n,t){if(t instanceof Error)var e=t;else e=this,Error.call(this,Rr[n]),this.message=Rr[n],Error.captureStackTrace&&Error.captureStackTrace(this,lr);return e.code=n,t&&(this.message=this.message+": "+t),e}lr.prototype=Error.prototype;Md(Jr,lr);function po(){}po.prototype={length:0,item:function(n){return n>=0&&n<this.length?this[n]:null},toString:function(n,t){for(var e=[],r=0;r<this.length;r++)th(this[r],e,n,t);return e.join("")},filter:function(n){return Array.prototype.filter.call(this,n)},indexOf:function(n){return Array.prototype.indexOf.call(this,n)}};function rh(n,t){this._node=n,this._refresh=t,B2(this)}function B2(n){var t=n._node._inc||n._node.ownerDocument._inc;if(n._inc!==t){var e=n._refresh(n._node);if(bR(n,"length",e.length),!n.$$length||e.length<n.$$length)for(var r=e.length;r in n;r++)Object.prototype.hasOwnProperty.call(n,r)&&delete n[r];Md(e,n),n._inc=t}}rh.prototype.item=function(n){return B2(this),this[n]||null};_n(rh,po);function z0(){}function lR(n,t){for(var e=n.length;e--;)if(n[e]===t)return e}function YD(n,t,e,r){if(r?t[lR(t,r)]=e:t[t.length++]=e,n){e.ownerElement=n;var i=n.ownerDocument;i&&(r&&hR(i,n,r),y8(i,n,e))}}function KD(n,t,e){var r=lR(t,e);if(r>=0){for(var i=t.length-1;r<i;)t[r]=t[++r];if(t.length=i,n){var o=n.ownerDocument;o&&(hR(o,n,e),e.ownerElement=null)}}else throw new lr(aR,new Error(n.tagName+"@"+e))}z0.prototype={length:0,item:po.prototype.item,getNamedItem:function(n){for(var t=this.length;t--;){var e=this[t];if(e.nodeName==n)return e}},setNamedItem:function(n){var t=n.ownerElement;if(t&&t!=this._ownerElement)throw new lr(XD);var e=this.getNamedItem(n.nodeName);return YD(this._ownerElement,this,n,e),e},setNamedItemNS:function(n){var t=n.ownerElement,e;if(t&&t!=this._ownerElement)throw new lr(XD);return e=this.getNamedItemNS(n.namespaceURI,n.localName),YD(this._ownerElement,this,n,e),e},removeNamedItem:function(n){var t=this.getNamedItem(n);return KD(this._ownerElement,this,t),t},removeNamedItemNS:function(n,t){var e=this.getNamedItemNS(n,t);return KD(this._ownerElement,this,e),e},getNamedItemNS:function(n,t){for(var e=this.length;e--;){var r=this[e];if(r.localName==t&&r.namespaceURI==n)return r}return null}};function cR(){}cR.prototype={hasFeature:function(n,t){return!0},createDocument:function(n,t,e){var r=new Ud;if(r.implementation=this,r.childNodes=new po,r.doctype=e||null,e&&r.appendChild(e),t){var i=r.createElementNS(n,t);r.appendChild(i)}return r},createDocumentType:function(n,t,e){var r=new G0;return r.name=n,r.nodeName=n,r.publicId=t||"",r.systemId=e||"",r}};function Ae(){}Ae.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(n,t){return H0(this,n,t)},replaceChild:function(n,t){H0(this,n,t,dR),t&&this.removeChild(t)},removeChild:function(n){return fR(this,n)},appendChild:function(n){return this.insertBefore(n,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(n){return k2(this.ownerDocument||this,this,n)},normalize:function(){for(var n=this.firstChild;n;){var t=n.nextSibling;t&&t.nodeType==q0&&n.nodeType==q0?(this.removeChild(t),n.appendData(t.data)):(n.normalize(),n=t)}},isSupported:function(n,t){return this.ownerDocument.implementation.hasFeature(n,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(n){for(var t=this;t;){var e=t._nsMap;if(e){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r]===n)return r}t=t.nodeType==eh?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(n){for(var t=this;t;){var e=t._nsMap;if(e&&Object.prototype.hasOwnProperty.call(e,n))return e[n];t=t.nodeType==eh?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(n){var t=this.lookupPrefix(n);return t==null}};function uR(n){return n=="<"&&"&lt;"||n==">"&&"&gt;"||n=="&"&&"&amp;"||n=='"'&&"&quot;"||"&#"+n.charCodeAt()+";"}Md(Cn,Ae);Md(Cn,Ae.prototype);function Fd(n,t){if(t(n))return!0;if(n=n.firstChild)do if(Fd(n,t))return!0;while(n=n.nextSibling)}function Ud(){this.ownerDocument=this}function y8(n,t,e){n&&n._inc++;var r=e.namespaceURI;r===Ld.XMLNS&&(t._nsMap[e.prefix?e.localName:""]=e.value)}function hR(n,t,e,r){n&&n._inc++;var i=e.namespaceURI;i===Ld.XMLNS&&delete t._nsMap[e.prefix?e.localName:""]}function L2(n,t,e){if(n&&n._inc){n._inc++;var r=t.childNodes;if(e)r[r.length++]=e;else{for(var i=t.firstChild,o=0;i;)r[o++]=i,i=i.nextSibling;r.length=o,delete r[r.length]}}}function fR(n,t){var e=t.previousSibling,r=t.nextSibling;return e?e.nextSibling=r:n.firstChild=r,r?r.previousSibling=e:n.lastChild=e,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,L2(n.ownerDocument,n),t}function v8(n){return n&&(n.nodeType===Ae.DOCUMENT_NODE||n.nodeType===Ae.DOCUMENT_FRAGMENT_NODE||n.nodeType===Ae.ELEMENT_NODE)}function b8(n){return n&&(As(n)||F2(n)||mo(n)||n.nodeType===Ae.DOCUMENT_FRAGMENT_NODE||n.nodeType===Ae.COMMENT_NODE||n.nodeType===Ae.PROCESSING_INSTRUCTION_NODE)}function mo(n){return n&&n.nodeType===Ae.DOCUMENT_TYPE_NODE}function As(n){return n&&n.nodeType===Ae.ELEMENT_NODE}function F2(n){return n&&n.nodeType===Ae.TEXT_NODE}function JD(n,t){var e=n.childNodes||[];if(ws(e,As)||mo(t))return!1;var r=ws(e,mo);return!(t&&r&&e.indexOf(r)>e.indexOf(t))}function ZD(n,t){var e=n.childNodes||[];function r(o){return As(o)&&o!==t}if(ws(e,r))return!1;var i=ws(e,mo);return!(t&&i&&e.indexOf(i)>e.indexOf(t))}function w8(n,t,e){if(!v8(n))throw new lr(Sn,"Unexpected parent node type "+n.nodeType);if(e&&e.parentNode!==n)throw new lr(aR,"child not in parent");if(!b8(t)||mo(t)&&n.nodeType!==Ae.DOCUMENT_NODE)throw new lr(Sn,"Unexpected node type "+t.nodeType+" for parent node type "+n.nodeType)}function A8(n,t,e){var r=n.childNodes||[],i=t.childNodes||[];if(t.nodeType===Ae.DOCUMENT_FRAGMENT_NODE){var o=i.filter(As);if(o.length>1||ws(i,F2))throw new lr(Sn,"More than one element or text in fragment");if(o.length===1&&!JD(n,e))throw new lr(Sn,"Element in fragment can not be inserted before doctype")}if(As(t)&&!JD(n,e))throw new lr(Sn,"Only one element can be added and only after doctype");if(mo(t)){if(ws(r,mo))throw new lr(Sn,"Only one doctype is allowed");var s=ws(r,As);if(e&&r.indexOf(s)<r.indexOf(e))throw new lr(Sn,"Doctype can only be inserted before an element");if(!e&&s)throw new lr(Sn,"Doctype can not be appended since element is present")}}function dR(n,t,e){var r=n.childNodes||[],i=t.childNodes||[];if(t.nodeType===Ae.DOCUMENT_FRAGMENT_NODE){var o=i.filter(As);if(o.length>1||ws(i,F2))throw new lr(Sn,"More than one element or text in fragment");if(o.length===1&&!ZD(n,e))throw new lr(Sn,"Element in fragment can not be inserted before doctype")}if(As(t)&&!ZD(n,e))throw new lr(Sn,"Only one element can be added and only after doctype");if(mo(t)){let c=function(u){return mo(u)&&u!==e};var a=c;if(ws(r,c))throw new lr(Sn,"Only one doctype is allowed");var s=ws(r,As);if(e&&r.indexOf(s)<r.indexOf(e))throw new lr(Sn,"Doctype can only be inserted before an element")}}function H0(n,t,e,r){w8(n,t,e),n.nodeType===Ae.DOCUMENT_NODE&&(r||A8)(n,t,e);var i=t.parentNode;if(i&&i.removeChild(t),t.nodeType===go){var o=t.firstChild;if(o==null)return t;var s=t.lastChild}else o=s=t;var a=e?e.previousSibling:n.lastChild;o.previousSibling=a,s.nextSibling=e,a?a.nextSibling=o:n.firstChild=o,e==null?n.lastChild=s:e.previousSibling=s;do o.parentNode=n;while(o!==s&&(o=o.nextSibling));return L2(n.ownerDocument||n,n),t.nodeType==go&&(t.firstChild=t.lastChild=null),t}function x8(n,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=n,t.previousSibling=n.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:n.firstChild=t,n.lastChild=t,L2(n.ownerDocument,n,t),t}Ud.prototype={nodeName:"#document",nodeType:sR,doctype:null,documentElement:null,_inc:1,insertBefore:function(n,t){if(n.nodeType==go){for(var e=n.firstChild;e;){var r=e.nextSibling;this.insertBefore(e,t),e=r}return n}return H0(this,n,t),n.ownerDocument=this,this.documentElement===null&&n.nodeType===Hi&&(this.documentElement=n),n},removeChild:function(n){return this.documentElement==n&&(this.documentElement=null),fR(this,n)},replaceChild:function(n,t){H0(this,n,t,dR),n.ownerDocument=this,t&&this.removeChild(t),As(n)&&(this.documentElement=n)},importNode:function(n,t){return vR(this,n,t)},getElementById:function(n){var t=null;return Fd(this.documentElement,function(e){if(e.nodeType==Hi&&e.getAttribute("id")==n)return t=e,!0}),t},getElementsByClassName:function(n){var t=VD(n);return new rh(this,function(e){var r=[];return t.length>0&&Fd(e.documentElement,function(i){if(i!==e&&i.nodeType===Hi){var o=i.getAttribute("class");if(o){var s=n===o;if(!s){var a=VD(o);s=t.every(p8(a))}s&&r.push(i)}}}),r})},createElement:function(n){var t=new Yl;t.ownerDocument=this,t.nodeName=n,t.tagName=n,t.localName=n,t.childNodes=new po;var e=t.attributes=new z0;return e._ownerElement=t,t},createDocumentFragment:function(){var n=new V0;return n.ownerDocument=this,n.childNodes=new po,n},createTextNode:function(n){var t=new M2;return t.ownerDocument=this,t.appendData(n),t},createComment:function(n){var t=new U2;return t.ownerDocument=this,t.appendData(n),t},createCDATASection:function(n){var t=new j2;return t.ownerDocument=this,t.appendData(n),t},createProcessingInstruction:function(n,t){var e=new q2;return e.ownerDocument=this,e.tagName=e.nodeName=e.target=n,e.nodeValue=e.data=t,e},createAttribute:function(n){var t=new W0;return t.ownerDocument=this,t.name=n,t.nodeName=n,t.localName=n,t.specified=!0,t},createEntityReference:function(n){var t=new $2;return t.ownerDocument=this,t.nodeName=n,t},createElementNS:function(n,t){var e=new Yl,r=t.split(":"),i=e.attributes=new z0;return e.childNodes=new po,e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.namespaceURI=n,r.length==2?(e.prefix=r[0],e.localName=r[1]):e.localName=t,i._ownerElement=e,e},createAttributeNS:function(n,t){var e=new W0,r=t.split(":");return e.ownerDocument=this,e.nodeName=t,e.name=t,e.namespaceURI=n,e.specified=!0,r.length==2?(e.prefix=r[0],e.localName=r[1]):e.localName=t,e}};_n(Ud,Ae);function Yl(){this._nsMap={}}Yl.prototype={nodeType:Hi,hasAttribute:function(n){return this.getAttributeNode(n)!=null},getAttribute:function(n){var t=this.getAttributeNode(n);return t&&t.value||""},getAttributeNode:function(n){return this.attributes.getNamedItem(n)},setAttribute:function(n,t){var e=this.ownerDocument.createAttribute(n);e.value=e.nodeValue=""+t,this.setAttributeNode(e)},removeAttribute:function(n){var t=this.getAttributeNode(n);t&&this.removeAttributeNode(t)},appendChild:function(n){return n.nodeType===go?this.insertBefore(n,null):x8(this,n)},setAttributeNode:function(n){return this.attributes.setNamedItem(n)},setAttributeNodeNS:function(n){return this.attributes.setNamedItemNS(n)},removeAttributeNode:function(n){return this.attributes.removeNamedItem(n.nodeName)},removeAttributeNS:function(n,t){var e=this.getAttributeNodeNS(n,t);e&&this.removeAttributeNode(e)},hasAttributeNS:function(n,t){return this.getAttributeNodeNS(n,t)!=null},getAttributeNS:function(n,t){var e=this.getAttributeNodeNS(n,t);return e&&e.value||""},setAttributeNS:function(n,t,e){var r=this.ownerDocument.createAttributeNS(n,t);r.value=r.nodeValue=""+e,this.setAttributeNode(r)},getAttributeNodeNS:function(n,t){return this.attributes.getNamedItemNS(n,t)},getElementsByTagName:function(n){return new rh(this,function(t){var e=[];return Fd(t,function(r){r!==t&&r.nodeType==Hi&&(n==="*"||r.tagName==n)&&e.push(r)}),e})},getElementsByTagNameNS:function(n,t){return new rh(this,function(e){var r=[];return Fd(e,function(i){i!==e&&i.nodeType===Hi&&(n==="*"||i.namespaceURI===n)&&(t==="*"||i.localName==t)&&r.push(i)}),r})}};Ud.prototype.getElementsByTagName=Yl.prototype.getElementsByTagName;Ud.prototype.getElementsByTagNameNS=Yl.prototype.getElementsByTagNameNS;_n(Yl,Ae);function W0(){}W0.prototype.nodeType=eh;_n(W0,Ae);function jd(){}jd.prototype={data:"",substringData:function(n,t){return this.data.substring(n,n+t)},appendData:function(n){n=this.data+n,this.nodeValue=this.data=n,this.length=n.length},insertData:function(n,t){this.replaceData(n,0,t)},appendChild:function(n){throw new Error(Rr[Sn])},deleteData:function(n,t){this.replaceData(n,t,"")},replaceData:function(n,t,e){var r=this.data.substring(0,n),i=this.data.substring(n+t);e=r+e+i,this.nodeValue=this.data=e,this.length=e.length}};_n(jd,Ae);function M2(){}M2.prototype={nodeName:"#text",nodeType:q0,splitText:function(n){var t=this.data,e=t.substring(n);t=t.substring(0,n),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(e);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}};_n(M2,jd);function U2(){}U2.prototype={nodeName:"#comment",nodeType:iR};_n(U2,jd);function j2(){}j2.prototype={nodeName:"#cdata-section",nodeType:eR};_n(j2,jd);function G0(){}G0.prototype.nodeType=oR;_n(G0,Ae);function pR(){}pR.prototype.nodeType=m8;_n(pR,Ae);function gR(){}gR.prototype.nodeType=g8;_n(gR,Ae);function $2(){}$2.prototype.nodeType=rR;_n($2,Ae);function V0(){}V0.prototype.nodeName="#document-fragment";V0.prototype.nodeType=go;_n(V0,Ae);function q2(){}q2.prototype.nodeType=nR;_n(q2,Ae);function mR(){}mR.prototype.serializeToString=function(n,t,e){return yR.call(n,t,e)};Ae.prototype.toString=yR;function yR(n,t){var e=[],r=this.nodeType==9&&this.documentElement||this,i=r.prefix,o=r.namespaceURI;if(o&&i==null){var i=r.lookupPrefix(o);if(i==null)var s=[{namespace:o,prefix:null}]}return th(this,e,n,t,s),e.join("")}function QD(n,t,e){var r=n.prefix||"",i=n.namespaceURI;if(!i||r==="xml"&&i===Ld.XML||i===Ld.XMLNS)return!1;for(var o=e.length;o--;){var s=e[o];if(s.prefix===r)return s.namespace!==i}return!0}function P2(n,t,e){n.push(" ",t,'="',e.replace(/[<>&"\t\n\r]/g,uR),'"')}function th(n,t,e,r,i){if(i||(i=[]),r)if(n=r(n),n){if(typeof n=="string"){t.push(n);return}}else return;switch(n.nodeType){case Hi:var o=n.attributes,s=o.length,w=n.firstChild,a=n.tagName;e=Ld.isHTML(n.namespaceURI)||e;var c=a;if(!e&&!n.prefix&&n.namespaceURI){for(var u,h=0;h<o.length;h++)if(o.item(h).name==="xmlns"){u=o.item(h).value;break}if(!u)for(var f=i.length-1;f>=0;f--){var g=i[f];if(g.prefix===""&&g.namespace===n.namespaceURI){u=g.namespace;break}}if(u!==n.namespaceURI)for(var f=i.length-1;f>=0;f--){var g=i[f];if(g.namespace===n.namespaceURI){g.prefix&&(c=g.prefix+":"+a);break}}}t.push("<",c);for(var m=0;m<s;m++){var y=o.item(m);y.prefix=="xmlns"?i.push({prefix:y.localName,namespace:y.value}):y.nodeName=="xmlns"&&i.push({prefix:"",namespace:y.value})}for(var m=0;m<s;m++){var y=o.item(m);if(QD(y,e,i)){var b=y.prefix||"",v=y.namespaceURI;P2(t,b?"xmlns:"+b:"xmlns",v),i.push({prefix:b,namespace:v})}th(y,t,e,r,i)}if(a===c&&QD(n,e,i)){var b=n.prefix||"",v=n.namespaceURI;P2(t,b?"xmlns:"+b:"xmlns",v),i.push({prefix:b,namespace:v})}if(w||e&&!/^(?:meta|link|img|br|hr|input)$/i.test(a)){if(t.push(">"),e&&/^script$/i.test(a))for(;w;)w.data?t.push(w.data):th(w,t,e,r,i.slice()),w=w.nextSibling;else for(;w;)th(w,t,e,r,i.slice()),w=w.nextSibling;t.push("</",c,">")}else t.push("/>");return;case sR:case go:for(var w=n.firstChild;w;)th(w,t,e,r,i.slice()),w=w.nextSibling;return;case eh:return P2(t,n.name,n.value);case q0:return t.push(n.data.replace(/[<&>]/g,uR));case eR:return t.push("<![CDATA[",n.data,"]]>");case iR:return t.push("<!--",n.data,"-->");case oR:var x=n.publicId,E=n.systemId;if(t.push("<!DOCTYPE ",n.name),x)t.push(" PUBLIC ",x),E&&E!="."&&t.push(" ",E),t.push(">");else if(E&&E!=".")t.push(" SYSTEM ",E,">");else{var D=n.internalSubset;D&&t.push(" [",D,"]"),t.push(">")}return;case nR:return t.push("<?",n.target," ",n.data,"?>");case rR:return t.push("&",n.nodeName,";");default:t.push("??",n.nodeName)}}function vR(n,t,e){var r;switch(t.nodeType){case Hi:r=t.cloneNode(!1),r.ownerDocument=n;case go:break;case eh:e=!0;break}if(r||(r=t.cloneNode(!1)),r.ownerDocument=n,r.parentNode=null,e)for(var i=t.firstChild;i;)r.appendChild(vR(n,i,e)),i=i.nextSibling;return r}function k2(n,t,e){var r=new t.constructor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=t[i];typeof o!="object"&&o!=r[i]&&(r[i]=o)}switch(t.childNodes&&(r.childNodes=new po),r.ownerDocument=n,r.nodeType){case Hi:var s=t.attributes,a=r.attributes=new z0,c=s.length;a._ownerElement=r;for(var u=0;u<c;u++)r.setAttributeNode(k2(n,s.item(u),!0));break;case eh:e=!0}if(e)for(var h=t.firstChild;h;)r.appendChild(k2(n,h,e)),h=h.nextSibling;return r}function bR(n,t,e){n[t]=e}try{if(Object.defineProperty){let n=function(t){switch(t.nodeType){case Hi:case go:var e=[];for(t=t.firstChild;t;)t.nodeType!==7&&t.nodeType!==8&&e.push(n(t)),t=t.nextSibling;return e.join("");default:return t.nodeValue}};E8=n,Object.defineProperty(rh.prototype,"length",{get:function(){return B2(this),this.$$length}}),Object.defineProperty(Ae.prototype,"textContent",{get:function(){return n(this)},set:function(t){switch(this.nodeType){case Hi:case go:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),bR=function(t,e,r){t["$$"+e]=r}}}catch{}var E8;Sa.DocumentType=G0;Sa.DOMException=lr;Sa.DOMImplementation=cR;Sa.Element=Yl;Sa.Node=Ae;Sa.NodeList=po;Sa.XMLSerializer=mR});var AR=Zt($d=>{"use strict";wt();xt();At();var wR=Bd().freeze;$d.XML_ENTITIES=wR({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'});$d.HTML_ENTITIES=wR({Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",AMP:"&",amp:"&",And:"\u2A53",and:"\u2227",andand:"\u2A55",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",ap:"\u2248",apacir:"\u2A6F",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250C",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252C",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxUL:"\u255D",boxUl:"\u255C",boxuL:"\u255B",boxul:"\u2518",boxUR:"\u255A",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256C",boxVh:"\u256B",boxvH:"\u256A",boxvh:"\u253C",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255F",boxvR:"\u255E",boxvr:"\u251C",bprime:"\u2035",Breve:"\u02D8",breve:"\u02D8",brvbar:"\xA6",Bscr:"\u212C",bscr:"\u{1D4B7}",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsol:"\\",bsolb:"\u29C5",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22D2",cap:"\u2229",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",CenterDot:"\xB7",centerdot:"\xB7",Cfr:"\u212D",cfr:"\u{1D520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",cir:"\u25CB",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",Conint:"\u222F",conint:"\u222E",ContourIntegral:"\u222E",Copf:"\u2102",copf:"\u{1D554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xA9",copy:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",Cross:"\u2A2F",cross:"\u2717",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",Cup:"\u22D3",cup:"\u222A",cupbrcap:"\u2A48",CupCap:"\u224D",cupcap:"\u2A46",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21A1",dArr:"\u21D3",darr:"\u2193",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21CA",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",Diamond:"\u22C4",diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21D3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVector:"\u21BD",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295F",DownRightVector:"\u21C1",DownRightVectorBar:"\u2957",DownTee:"\u22A4",DownTeeArrow:"\u21A7",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",ecir:"\u2256",Ecirc:"\xCA",ecirc:"\xEA",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212F",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1D4BB}",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",ges:"\u2A7E",gescc:"\u2AA9",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",Gg:"\u22D9",gg:"\u226B",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2AA5",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gnE:"\u2269",gne:"\u2A88",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",Gt:"\u226B",GT:">",gt:">",gtcc:"\u2AA7",gtcir:"\u2A7A",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",hArr:"\u21D4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",Hfr:"\u210C",hfr:"\u{1D525}",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",Hopf:"\u210D",hopf:"\u{1D559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210B",hscr:"\u{1D4BD}",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",Ifr:"\u2111",ifr:"\u{1D526}",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",in:"\u2208",incare:"\u2105",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",Int:"\u222C",int:"\u222B",intcal:"\u22BA",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",Iscr:"\u2110",iscr:"\u{1D4BE}",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",Lang:"\u27EA",lang:"\u27E8",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",Larr:"\u219E",lArr:"\u21D0",larr:"\u2190",larrb:"\u21E4",larrbfs:"\u291F",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",lat:"\u2AAB",lAtail:"\u291B",latail:"\u2919",late:"\u2AAD",lates:"\u2AAD\uFE00",lBarr:"\u290E",lbarr:"\u290C",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27E8",LeftArrow:"\u2190",Leftarrow:"\u21D0",leftarrow:"\u2190",LeftArrowBar:"\u21E4",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21C3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrow:"\u2194",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTee:"\u22A3",LeftTeeArrow:"\u21A4",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangle:"\u22B2",LeftTriangleBar:"\u29CF",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21BF",LeftUpVectorBar:"\u2958",LeftVector:"\u21BC",LeftVectorBar:"\u2952",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",les:"\u2A7D",lescc:"\u2AA8",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22D8",ll:"\u226A",llarr:"\u21C7",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoust:"\u23B0",lmoustache:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lnE:"\u2268",lne:"\u2A87",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftarrow:"\u27F5",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longleftrightarrow:"\u27F7",longmapsto:"\u27FC",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",longrightarrow:"\u27F6",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1D4C1}",Lsh:"\u21B0",lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226A",LT:"<",lt:"<",ltcc:"\u2AA6",ltcir:"\u2A79",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",mid:"\u2223",midast:"*",midcir:"\u2AF0",middot:"\xB7",minus:"\u2212",minusb:"\u229F",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1D4C2}",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266E",natural:"\u266E",naturals:"\u2115",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21D7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nhArr:"\u21CE",nharr:"\u21AE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlArr:"\u21CD",nlarr:"\u219A",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21CD",nleftarrow:"\u219A",nLeftrightarrow:"\u21CE",nleftrightarrow:"\u21AE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",Nopf:"\u2115",nopf:"\u{1D55F}",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangle:"\u22EA",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangle:"\u22EB",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",npre:"\u2AAF\u0338",nprec:"\u2280",npreceq:"\u2AAF\u0338",nrArr:"\u21CF",nrarr:"\u219B",nrarrc:"\u2933\u0338",nrarrw:"\u219D\u0338",nRightarrow:"\u21CF",nrightarrow:"\u219B",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nVDash:"\u22AF",nVdash:"\u22AE",nvDash:"\u22AD",nvdash:"\u22AC",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwArr:"\u21D6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",ocir:"\u229A",Ocirc:"\xD4",ocirc:"\xF4",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",Or:"\u2A54",or:"\u2228",orarr:"\u21BB",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",Otimes:"\u2A37",otimes:"\u2297",otimesas:"\u2A36",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",par:"\u2225",para:"\xB6",parallel:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plus:"+",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",Popf:"\u2119",popf:"\u{1D561}",pound:"\xA3",Pr:"\u2ABB",pr:"\u227A",prap:"\u2AB7",prcue:"\u227C",prE:"\u2AB3",pre:"\u2AAF",prec:"\u227A",precapprox:"\u2AB7",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",precsim:"\u227E",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportion:"\u2237",Proportional:"\u221D",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",Qopf:"\u211A",qopf:"\u{1D562}",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",QUOT:'"',quot:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",Rang:"\u27EB",rang:"\u27E9",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",Rarr:"\u21A0",rArr:"\u21D2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",rAtail:"\u291C",ratail:"\u291A",ratio:"\u2236",rationals:"\u211A",RBarr:"\u2910",rBarr:"\u290F",rbarr:"\u290D",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",Re:"\u211C",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",rect:"\u25AD",REG:"\xAE",reg:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",Rfr:"\u211C",rfr:"\u{1D52F}",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrow:"\u2192",Rightarrow:"\u21D2",rightarrow:"\u2192",RightArrowBar:"\u21E5",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVector:"\u21C2",RightDownVectorBar:"\u2955",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTee:"\u22A2",RightTeeArrow:"\u21A6",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangle:"\u22B3",RightTriangleBar:"\u29D0",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVector:"\u21BE",RightUpVectorBar:"\u2954",RightVector:"\u21C0",RightVectorBar:"\u2953",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoust:"\u23B1",rmoustache:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",Ropf:"\u211D",ropf:"\u{1D563}",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",Rscr:"\u211B",rscr:"\u{1D4C7}",Rsh:"\u21B1",rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",Sc:"\u2ABC",sc:"\u227B",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227D",scE:"\u2AB4",sce:"\u2AB0",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdot:"\u22C5",sdotb:"\u22A1",sdote:"\u2A66",searhk:"\u2925",seArr:"\u21D8",searr:"\u2198",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",sol:"/",solb:"\u29C4",solbar:"\u233F",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25A1",Square:"\u25A1",square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",Sub:"\u22D0",sub:"\u2282",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",Subset:"\u22D0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succ:"\u227B",succapprox:"\u2AB8",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",Sum:"\u2211",sum:"\u2211",sung:"\u266A",Sup:"\u22D1",sup:"\u2283",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",Supset:"\u22D1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swArr:"\u21D9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",Tilde:"\u223C",tilde:"\u02DC",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xD7",timesb:"\u22A0",timesbar:"\u2A31",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",top:"\u22A4",topbot:"\u2336",topcir:"\u2AF1",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",Uarr:"\u219F",uArr:"\u21D1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrow:"\u2191",Uparrow:"\u21D1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21C5",UpDownArrow:"\u2195",Updownarrow:"\u21D5",updownarrow:"\u2195",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03D2",upsi:"\u03C5",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTee:"\u22A5",UpTeeArrow:"\u21A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",vArr:"\u21D5",varr:"\u2195",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",Vbar:"\u2AEB",vBar:"\u2AE8",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22AB",Vdash:"\u22A9",vDash:"\u22A8",vdash:"\u22A2",Vdashl:"\u2AE6",Vee:"\u22C1",vee:"\u2228",veebar:"\u22BB",veeeq:"\u225A",vellip:"\u22EE",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",Wedge:"\u22C0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xhArr:"\u27FA",xharr:"\u27F7",Xi:"\u039E",xi:"\u03BE",xlArr:"\u27F8",xlarr:"\u27F5",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrArr:"\u27F9",xrarr:"\u27F6",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",Yuml:"\u0178",yuml:"\xFF",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",Zfr:"\u2128",zfr:"\u{1D537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",Zopf:"\u2124",zopf:"\u{1D56B}",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"});$d.entityMap=$d.HTML_ENTITIES});var RR=Zt(W2=>{wt();xt();At();var Wd=Bd().NAMESPACE,H2=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,xR=new RegExp("[\\-\\.0-9"+H2.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),ER=new RegExp("^"+H2.source+xR.source+"*(?::"+H2.source+xR.source+"*)?$"),qd=0,_a=1,nh=2,zd=3,ih=4,sh=5,Hd=6,X0=7;function oh(n,t){this.message=n,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,oh)}oh.prototype=new Error;oh.prototype.name=oh.name;function CR(){}CR.prototype={parse:function(n,t,e){var r=this.domBuilder;r.startDocument(),TR(t,t={}),S8(n,t,e,r,this.errorHandler),r.endDocument()}};function S8(n,t,e,r,i){function o(J){if(J>65535){J-=65536;var R=55296+(J>>10),T=56320+(J&1023);return String.fromCharCode(R,T)}else return String.fromCharCode(J)}function s(J){var R=J.slice(1,-1);return Object.hasOwnProperty.call(e,R)?e[R]:R.charAt(0)==="#"?o(parseInt(R.substr(1).replace("x","0x"))):(i.error("entity not found:"+J),J)}function a(J){if(J>b){var R=n.substring(b,J).replace(/&#?\w+;/g,s);g&&c(b),r.characters(R,0,J-b),b=J}}function c(J,R){for(;J>=h&&(R=f.exec(n));)u=R.index,h=u+R[0].length,g.lineNumber++;g.columnNumber=J-u+1}for(var u=0,h=0,f=/.*(?:\r\n?|\n)|.*$/g,g=r.locator,m=[{currentNSMap:t}],y={},b=0;;){try{var v=n.indexOf("<",b);if(v<0){if(!n.substr(b).match(/^\s*$/)){var w=r.doc,x=w.createTextNode(n.substr(b));w.appendChild(x),r.currentElement=x}return}switch(v>b&&a(v),n.charAt(v+1)){case"/":var st=n.indexOf(">",v+3),E=n.substring(v+2,st).replace(/[ \t\n\r]+$/g,""),D=m.pop();st<0?(E=n.substring(v+2).replace(/[\s<].*/,""),i.error("end tag name: "+E+" is not complete:"+D.tagName),st=v+1+E.length):E.match(/\s</)&&(E=E.replace(/[\s<].*/,""),i.error("end tag name: "+E+" maybe not complete"),st=v+1+E.length);var _=D.localNSMap,q=D.tagName==E,N=q||D.tagName&&D.tagName.toLowerCase()==E.toLowerCase();if(N){if(r.endElement(D.uri,D.localName,E),_)for(var rt in _)Object.prototype.hasOwnProperty.call(_,rt)&&r.endPrefixMapping(rt);q||i.fatalError("end tag name: "+E+" is not match the current start tagName:"+D.tagName)}else m.push(D);st++;break;case"?":g&&c(v),st=R8(n,v,r);break;case"!":g&&c(v),st=D8(n,v,r,i);break;default:g&&c(v);var Y=new DR,et=m[m.length-1].currentNSMap,st=_8(n,v,Y,et,s,i),lt=Y.length;if(!Y.closed&&T8(n,st,Y.tagName,y)&&(Y.closed=!0,e.nbsp||i.warning("unclosed xml attribute")),g&&lt){for(var at=SR(g,{}),X=0;X<lt;X++){var ct=Y[X];c(ct.offset),ct.locator=SR(g,{})}r.locator=at,_R(Y,r,et)&&m.push(Y),r.locator=g}else _R(Y,r,et)&&m.push(Y);Wd.isHTML(Y.uri)&&!Y.closed?st=C8(n,st,Y.tagName,s,r):st++}}catch(J){if(J instanceof oh)throw J;i.error("element parse error: "+J),st=-1}st>b?b=st:a(Math.max(v,b)+1)}}function SR(n,t){return t.lineNumber=n.lineNumber,t.columnNumber=n.columnNumber,t}function _8(n,t,e,r,i,o){function s(m,y,b){e.attributeNames.hasOwnProperty(m)&&o.fatalError("Attribute "+m+" redefined"),e.addValue(m,y.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,i),b)}for(var a,c,u=++t,h=qd;;){var f=n.charAt(u);switch(f){case"=":if(h===_a)a=n.slice(t,u),h=zd;else if(h===nh)h=zd;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(h===zd||h===_a)if(h===_a&&(o.warning('attribute value must after "="'),a=n.slice(t,u)),t=u+1,u=n.indexOf(f,t),u>0)c=n.slice(t,u),s(a,c,t-1),h=sh;else throw new Error("attribute value no end '"+f+"' match");else if(h==ih)c=n.slice(t,u),s(a,c,t),o.warning('attribute "'+a+'" missed start quot('+f+")!!"),t=u+1,h=sh;else throw new Error('attribute value must after "="');break;case"/":switch(h){case qd:e.setTagName(n.slice(t,u));case sh:case Hd:case X0:h=X0,e.closed=!0;case ih:case _a:break;case nh:e.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),h==qd&&e.setTagName(n.slice(t,u)),u;case">":switch(h){case qd:e.setTagName(n.slice(t,u));case sh:case Hd:case X0:break;case ih:case _a:c=n.slice(t,u),c.slice(-1)==="/"&&(e.closed=!0,c=c.slice(0,-1));case nh:h===nh&&(c=a),h==ih?(o.warning('attribute "'+c+'" missed quot(")!'),s(a,c,t)):((!Wd.isHTML(r[""])||!c.match(/^(?:disabled|checked|selected)$/i))&&o.warning('attribute "'+c+'" missed value!! "'+c+'" instead!!'),s(c,c,t));break;case zd:throw new Error("attribute value missed!!")}return u;case"\x80":f=" ";default:if(f<=" ")switch(h){case qd:e.setTagName(n.slice(t,u)),h=Hd;break;case _a:a=n.slice(t,u),h=nh;break;case ih:var c=n.slice(t,u);o.warning('attribute "'+c+'" missed quot(")!!'),s(a,c,t);case sh:h=Hd;break}else switch(h){case nh:var g=e.tagName;(!Wd.isHTML(r[""])||!a.match(/^(?:disabled|checked|selected)$/i))&&o.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),s(a,a,t),t=u,h=_a;break;case sh:o.warning('attribute space is required"'+a+'"!!');case Hd:h=_a,t=u;break;case zd:h=ih,t=u;break;case X0:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function _R(n,t,e){for(var r=n.tagName,i=null,f=n.length;f--;){var o=n[f],s=o.qName,a=o.value,g=s.indexOf(":");if(g>0)var c=o.prefix=s.slice(0,g),u=s.slice(g+1),h=c==="xmlns"&&u;else u=s,c=null,h=s==="xmlns"&&"";o.localName=u,h!==!1&&(i==null&&(i={},TR(e,e={})),e[h]=i[h]=a,o.uri=Wd.XMLNS,t.startPrefixMapping(h,a))}for(var f=n.length;f--;){o=n[f];var c=o.prefix;c&&(c==="xml"&&(o.uri=Wd.XML),c!=="xmlns"&&(o.uri=e[c||""]))}var g=r.indexOf(":");g>0?(c=n.prefix=r.slice(0,g),u=n.localName=r.slice(g+1)):(c=null,u=n.localName=r);var m=n.uri=e[c||""];if(t.startElement(m,u,r,n),n.closed){if(t.endElement(m,u,r),i)for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&t.endPrefixMapping(c)}else return n.currentNSMap=e,n.localNSMap=i,!0}function C8(n,t,e,r,i){if(/^(?:script|textarea)$/i.test(e)){var o=n.indexOf("</"+e+">",t),s=n.substring(t+1,o);if(/[&<]/.test(s))return/^script$/i.test(e)?(i.characters(s,0,s.length),o):(s=s.replace(/&#?\w+;/g,r),i.characters(s,0,s.length),o)}return t+1}function T8(n,t,e,r){var i=r[e];return i==null&&(i=n.lastIndexOf("</"+e+">"),i<t&&(i=n.lastIndexOf("</"+e)),r[e]=i),i<t}function TR(n,t){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}function D8(n,t,e,r){var i=n.charAt(t+2);switch(i){case"-":if(n.charAt(t+3)==="-"){var o=n.indexOf("-->",t+4);return o>t?(e.comment(n,t+4,o-t-4),o+3):(r.error("Unclosed comment"),-1)}else return-1;default:if(n.substr(t+3,6)=="CDATA["){var o=n.indexOf("]]>",t+9);return e.startCDATA(),e.characters(n,t+9,o-t-9),e.endCDATA(),o+3}var s=I8(n,t),a=s.length;if(a>1&&/!doctype/i.test(s[0][0])){var c=s[1][0],u=!1,h=!1;a>3&&(/^public$/i.test(s[2][0])?(u=s[3][0],h=a>4&&s[4][0]):/^system$/i.test(s[2][0])&&(h=s[3][0]));var f=s[a-1];return e.startDTD(c,u,h),e.endDTD(),f.index+f[0].length}}return-1}function R8(n,t,e){var r=n.indexOf("?>",t);if(r){var i=n.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){var o=i[0].length;return e.processingInstruction(i[1],i[2]),r+2}else return-1}return-1}function DR(){this.attributeNames={}}DR.prototype={setTagName:function(n){if(!ER.test(n))throw new Error("invalid tagName:"+n);this.tagName=n},addValue:function(n,t,e){if(!ER.test(n))throw new Error("invalid attribute:"+n);this.attributeNames[n]=this.length,this[this.length++]={qName:n,value:t,offset:e}},length:0,getLocalName:function(n){return this[n].localName},getLocator:function(n){return this[n].locator},getQName:function(n){return this[n].qName},getURI:function(n){return this[n].uri},getValue:function(n){return this[n].value}};function I8(n,t){var e,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=t,i.exec(n);e=i.exec(n);)if(r.push(e),e[1])return r}W2.XMLReader=CR;W2.ParseError=oh});var LR=Zt(K0=>{wt();xt();At();var O8=Bd(),N8=z2(),IR=AR(),PR=RR(),P8=N8.DOMImplementation,OR=O8.NAMESPACE,k8=PR.ParseError,B8=PR.XMLReader;function kR(n){return n.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function BR(n){this.options=n||{locator:{}}}BR.prototype.parseFromString=function(n,t){var e=this.options,r=new B8,i=e.domBuilder||new Gd,o=e.errorHandler,s=e.locator,a=e.xmlns||{},c=/\/x?html?$/.test(t),u=c?IR.HTML_ENTITIES:IR.XML_ENTITIES;s&&i.setDocumentLocator(s),r.errorHandler=L8(o,i,s),r.domBuilder=e.domBuilder||i,c&&(a[""]=OR.HTML),a.xml=a.xml||OR.XML;var h=e.normalizeLineEndings||kR;return n&&typeof n=="string"?r.parse(h(n),a,u):r.errorHandler.error("invalid doc source"),i.doc};function L8(n,t,e){if(!n){if(t instanceof Gd)return t;n=t}var r={},i=n instanceof Function;e=e||{};function o(s){var a=n[s];!a&&i&&(a=n.length==2?function(c){n(s,c)}:n),r[s]=a&&function(c){a("[xmldom "+s+"]	"+c+G2(e))}||function(){}}return o("warning"),o("error"),o("fatalError"),r}function Gd(){this.cdata=!1}function ah(n,t){t.lineNumber=n.lineNumber,t.columnNumber=n.columnNumber}Gd.prototype={startDocument:function(){this.doc=new P8().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(n,t,e,r){var i=this.doc,o=i.createElementNS(n,e||t),s=r.length;Y0(this,o),this.currentElement=o,this.locator&&ah(this.locator,o);for(var a=0;a<s;a++){var n=r.getURI(a),c=r.getValue(a),e=r.getQName(a),u=i.createAttributeNS(n,e);this.locator&&ah(r.getLocator(a),u),u.value=u.nodeValue=c,o.setAttributeNode(u)}},endElement:function(n,t,e){var r=this.currentElement,i=r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(n,t){},endPrefixMapping:function(n){},processingInstruction:function(n,t){var e=this.doc.createProcessingInstruction(n,t);this.locator&&ah(this.locator,e),Y0(this,e)},ignorableWhitespace:function(n,t,e){},characters:function(n,t,e){if(n=NR.apply(this,arguments),n){if(this.cdata)var r=this.doc.createCDATASection(n);else var r=this.doc.createTextNode(n);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(n)&&this.doc.appendChild(r),this.locator&&ah(this.locator,r)}},skippedEntity:function(n){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(n){(this.locator=n)&&(n.lineNumber=0)},comment:function(n,t,e){n=NR.apply(this,arguments);var r=this.doc.createComment(n);this.locator&&ah(this.locator,r),Y0(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(n,t,e){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(n,t,e);this.locator&&ah(this.locator,i),Y0(this,i),this.doc.doctype=i}},warning:function(n){console.warn("[xmldom warning]	"+n,G2(this.locator))},error:function(n){console.error("[xmldom error]	"+n,G2(this.locator))},fatalError:function(n){throw new k8(n,this.locator)}};function G2(n){if(n)return`
@`+(n.systemId||"")+"#[line:"+n.lineNumber+",col:"+n.columnNumber+"]"}function NR(n,t,e){return typeof n=="string"?n.substr(t,e):n.length>=t+e||t?new java.lang.String(n,t,e)+"":n}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(n){Gd.prototype[n]=function(){return null}});function Y0(n,t){n.currentElement?n.currentElement.appendChild(t):n.doc.appendChild(t)}K0.__DOMHandler=Gd;K0.normalizeLineEndings=kR;K0.DOMParser=BR});var Z0=Zt(J0=>{wt();xt();At();var FR=z2();J0.DOMImplementation=FR.DOMImplementation;J0.XMLSerializer=FR.XMLSerializer;J0.DOMParser=LR().DOMParser});var $R=Zt((r7,X2)=>{wt();xt();At();var V2=(function(n){"use strict";var t=Object.prototype,e=t.hasOwnProperty,r=Object.defineProperty||function(R,T,L){R[T]=L.value},i,o=typeof Symbol=="function"?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(R,T,L){return Object.defineProperty(R,T,{value:L,enumerable:!0,configurable:!0,writable:!0}),R[T]}try{u({},"")}catch{u=function(T,L,k){return T[L]=k}}function h(R,T,L,k){var B=T&&T.prototype instanceof w?T:w,$=Object.create(B.prototype),H=new X(k||[]);return r($,"_invoke",{value:et(R,L,H)}),$}n.wrap=h;function f(R,T,L){try{return{type:"normal",arg:R.call(T,L)}}catch(k){return{type:"throw",arg:k}}}var g="suspendedStart",m="suspendedYield",y="executing",b="completed",v={};function w(){}function x(){}function E(){}var D={};u(D,s,function(){return this});var _=Object.getPrototypeOf,q=_&&_(_(ct([])));q&&q!==t&&e.call(q,s)&&(D=q);var N=E.prototype=w.prototype=Object.create(D);x.prototype=E,r(N,"constructor",{value:E,configurable:!0}),r(E,"constructor",{value:x,configurable:!0}),x.displayName=u(E,c,"GeneratorFunction");function rt(R){["next","throw","return"].forEach(function(T){u(R,T,function(L){return this._invoke(T,L)})})}n.isGeneratorFunction=function(R){var T=typeof R=="function"&&R.constructor;return T?T===x||(T.displayName||T.name)==="GeneratorFunction":!1},n.mark=function(R){return Object.setPrototypeOf?Object.setPrototypeOf(R,E):(R.__proto__=E,u(R,c,"GeneratorFunction")),R.prototype=Object.create(N),R},n.awrap=function(R){return{__await:R}};function Y(R,T){function L($,H,tt,it){var ut=f(R[$],R,H);if(ut.type==="throw")it(ut.arg);else{var V=ut.arg,K=V.value;return K&&typeof K=="object"&&e.call(K,"__await")?T.resolve(K.__await).then(function(ot){L("next",ot,tt,it)},function(ot){L("throw",ot,tt,it)}):T.resolve(K).then(function(ot){V.value=ot,tt(V)},function(ot){return L("throw",ot,tt,it)})}}var k;function B($,H){function tt(){return new T(function(it,ut){L($,H,it,ut)})}return k=k?k.then(tt,tt):tt()}r(this,"_invoke",{value:B})}rt(Y.prototype),u(Y.prototype,a,function(){return this}),n.AsyncIterator=Y,n.async=function(R,T,L,k,B){B===void 0&&(B=Promise);var $=new Y(h(R,T,L,k),B);return n.isGeneratorFunction(T)?$:$.next().then(function(H){return H.done?H.value:$.next()})};function et(R,T,L){var k=g;return function($,H){if(k===y)throw new Error("Generator is already running");if(k===b){if($==="throw")throw H;return J()}for(L.method=$,L.arg=H;;){var tt=L.delegate;if(tt){var it=st(tt,L);if(it){if(it===v)continue;return it}}if(L.method==="next")L.sent=L._sent=L.arg;else if(L.method==="throw"){if(k===g)throw k=b,L.arg;L.dispatchException(L.arg)}else L.method==="return"&&L.abrupt("return",L.arg);k=y;var ut=f(R,T,L);if(ut.type==="normal"){if(k=L.done?b:m,ut.arg===v)continue;return{value:ut.arg,done:L.done}}else ut.type==="throw"&&(k=b,L.method="throw",L.arg=ut.arg)}}}function st(R,T){var L=T.method,k=R.iterator[L];if(k===i)return T.delegate=null,L==="throw"&&R.iterator.return&&(T.method="return",T.arg=i,st(R,T),T.method==="throw")||L!=="return"&&(T.method="throw",T.arg=new TypeError("The iterator does not provide a '"+L+"' method")),v;var B=f(k,R.iterator,T.arg);if(B.type==="throw")return T.method="throw",T.arg=B.arg,T.delegate=null,v;var $=B.arg;if(!$)return T.method="throw",T.arg=new TypeError("iterator result is not an object"),T.delegate=null,v;if($.done)T[R.resultName]=$.value,T.next=R.nextLoc,T.method!=="return"&&(T.method="next",T.arg=i);else return $;return T.delegate=null,v}rt(N),u(N,c,"Generator"),u(N,s,function(){return this}),u(N,"toString",function(){return"[object Generator]"});function lt(R){var T={tryLoc:R[0]};1 in R&&(T.catchLoc=R[1]),2 in R&&(T.finallyLoc=R[2],T.afterLoc=R[3]),this.tryEntries.push(T)}function at(R){var T=R.completion||{};T.type="normal",delete T.arg,R.completion=T}function X(R){this.tryEntries=[{tryLoc:"root"}],R.forEach(lt,this),this.reset(!0)}n.keys=function(R){var T=Object(R),L=[];for(var k in T)L.push(k);return L.reverse(),function B(){for(;L.length;){var $=L.pop();if($ in T)return B.value=$,B.done=!1,B}return B.done=!0,B}};function ct(R){if(R){var T=R[s];if(T)return T.call(R);if(typeof R.next=="function")return R;if(!isNaN(R.length)){var L=-1,k=function B(){for(;++L<R.length;)if(e.call(R,L))return B.value=R[L],B.done=!1,B;return B.value=i,B.done=!0,B};return k.next=k}}return{next:J}}n.values=ct;function J(){return{value:i,done:!0}}return X.prototype={constructor:X,reset:function(R){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(at),!R)for(var T in this)T.charAt(0)==="t"&&e.call(this,T)&&!isNaN(+T.slice(1))&&(this[T]=i)},stop:function(){this.done=!0;var R=this.tryEntries[0],T=R.completion;if(T.type==="throw")throw T.arg;return this.rval},dispatchException:function(R){if(this.done)throw R;var T=this;function L(it,ut){return $.type="throw",$.arg=R,T.next=it,ut&&(T.method="next",T.arg=i),!!ut}for(var k=this.tryEntries.length-1;k>=0;--k){var B=this.tryEntries[k],$=B.completion;if(B.tryLoc==="root")return L("end");if(B.tryLoc<=this.prev){var H=e.call(B,"catchLoc"),tt=e.call(B,"finallyLoc");if(H&&tt){if(this.prev<B.catchLoc)return L(B.catchLoc,!0);if(this.prev<B.finallyLoc)return L(B.finallyLoc)}else if(H){if(this.prev<B.catchLoc)return L(B.catchLoc,!0)}else if(tt){if(this.prev<B.finallyLoc)return L(B.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(R,T){for(var L=this.tryEntries.length-1;L>=0;--L){var k=this.tryEntries[L];if(k.tryLoc<=this.prev&&e.call(k,"finallyLoc")&&this.prev<k.finallyLoc){var B=k;break}}B&&(R==="break"||R==="continue")&&B.tryLoc<=T&&T<=B.finallyLoc&&(B=null);var $=B?B.completion:{};return $.type=R,$.arg=T,B?(this.method="next",this.next=B.finallyLoc,v):this.complete($)},complete:function(R,T){if(R.type==="throw")throw R.arg;return R.type==="break"||R.type==="continue"?this.next=R.arg:R.type==="return"?(this.rval=this.arg=R.arg,this.method="return",this.next="end"):R.type==="normal"&&T&&(this.next=T),v},finish:function(R){for(var T=this.tryEntries.length-1;T>=0;--T){var L=this.tryEntries[T];if(L.finallyLoc===R)return this.complete(L.completion,L.afterLoc),at(L),v}},catch:function(R){for(var T=this.tryEntries.length-1;T>=0;--T){var L=this.tryEntries[T];if(L.tryLoc===R){var k=L.completion;if(k.type==="throw"){var B=k.arg;at(L)}return B}}throw new Error("illegal catch attempt")},delegateYield:function(R,T,L){return this.delegate={iterator:ct(R),resultName:T,nextLoc:L},this.method==="next"&&(this.arg=i),v}},n})(typeof X2=="object"?X2.exports:{});try{regeneratorRuntime=V2}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=V2:Function("r","regeneratorRuntime = r")(V2)}});var Q0=Zt((o7,qR)=>{"use strict";wt();xt();At();qR.exports=(n,t)=>`${n}-${t}-${Math.random().toString(16).slice(3,8)}`});var Y2=Zt((u7,HR)=>{"use strict";wt();xt();At();var q8=Q0(),zR=0;HR.exports=({id:n,action:t,payload:e={}})=>{let r=n;return typeof r>"u"&&(r=q8("Job",zR),zR+=1),{id:r,action:t,payload:e}}});var ty=Zt(Xd=>{"use strict";wt();xt();At();var K2=!1;Xd.logging=K2;Xd.setLogging=n=>{K2=n};Xd.log=(...n)=>K2?console.log.apply(Xd,n):null});var XR=Zt((GR,VR)=>{"use strict";wt();xt();At();var z8=Y2(),{log:ey}=ty(),H8=Q0(),WR=0;VR.exports=()=>{let n=H8("Scheduler",WR),t={},e={},r=[];WR+=1;let i=()=>r.length,o=()=>Object.keys(t).length,s=()=>{if(r.length!==0){let f=Object.keys(t);for(let g=0;g<f.length;g+=1)if(typeof e[f[g]]>"u"){r[0](t[f[g]]);break}}},a=(f,g)=>new Promise((m,y)=>{let b=z8({action:f,payload:g});r.push(async v=>{r.shift(),e[v.id]=b;try{m(await v[f].apply(GR,[...g,b.id]))}catch(w){y(w)}finally{delete e[v.id],s()}}),ey(`[${n}]: Add ${b.id} to JobQueue`),ey(`[${n}]: JobQueue length=${r.length}`),s()});return{addWorker:f=>(t[f.id]=f,ey(`[${n}]: Add ${f.id}`),ey(`[${n}]: Number of workers=${o()}`),s(),f.id),addJob:async(f,...g)=>{if(o()===0)throw Error(`[${n}]: You need to have at least one worker before adding jobs`);return a(f,g)},terminate:async()=>{Object.keys(t).forEach(async f=>{await t[f].terminate()}),r=[]},getQueueLen:i,getNumWorkers:o}}});var KR=Zt((A7,YR)=>{"use strict";wt();xt();At();YR.exports=n=>{let t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof _l=="function"&&(t.type="node"),typeof n>"u"?t:t[n]}});var ZR=Zt((C7,JR)=>{"use strict";wt();xt();At();var W8=KR()("type")==="browser",G8=W8?n=>new URL(n,window.location.href).href:n=>n;JR.exports=n=>{let t={...n};return["corePath","workerPath","langPath"].forEach(e=>{n[e]&&(t[e]=G8(t[e]))}),t}});var J2=Zt((I7,QR)=>{"use strict";wt();xt();At();QR.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}});var tI=Zt((k7,V8)=>{V8.exports={name:"tesseract.js",version:"6.0.1",description:"Pure Javascript Multilingual OCR",main:"src/index.js",type:"commonjs",types:"src/index.d.ts",unpkg:"dist/tesseract.min.js",jsdelivr:"dist/tesseract.min.js",scripts:{start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser test:node:all","test:browser":"karma start karma.conf.js","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.mjs","test:node:all":"npm run test:node -- ./tests/*.test.mjs",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},browser:{"./src/worker/node/index.js":"./src/worker/browser/index.js"},author:"",contributors:["jeromewu"],license:"Apache-2.0",devDependencies:{"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","npm-run-all":"^4.1.5",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-webpack":"^5.0.0",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},dependencies:{"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^6.0.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},overrides:{"@rollup/pluginutils":"^5.0.2"},repository:{type:"git",url:"https://github.com/naptha/tesseract.js.git"},bugs:{url:"https://github.com/naptha/tesseract.js/issues"},homepage:"https://github.com/naptha/tesseract.js",collective:{type:"opencollective",url:"https://opencollective.com/tesseractjs"}}});var rI=Zt((B7,eI)=>{"use strict";wt();xt();At();eI.exports={workerBlobURL:!0,logger:()=>{}}});var iI=Zt((U7,nI)=>{"use strict";wt();xt();At();var X8=tI().version,Y8=rI();nI.exports={...Y8,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${X8}/dist/worker.min.js`}});var oI=Zt((z7,sI)=>{"use strict";wt();xt();At();sI.exports=({workerPath:n,workerBlobURL:t})=>{let e;if(Blob&&URL&&t){let r=new Blob([`importScripts("${n}");`],{type:"application/javascript"});e=new Worker(URL.createObjectURL(r))}else e=new Worker(n);return e}});var lI=Zt((V7,aI)=>{"use strict";wt();xt();At();aI.exports=n=>{n.terminate()}});var uI=Zt((J7,cI)=>{"use strict";wt();xt();At();cI.exports=(n,t)=>{n.onmessage=({data:e})=>{t(e)}}});var fI=Zt((eq,hI)=>{"use strict";wt();xt();At();hI.exports=async(n,t)=>{n.postMessage(t)}});var pI=Zt((sq,dI)=>{"use strict";wt();xt();At();var Z2=n=>new Promise((t,e)=>{let r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=({target:{error:{code:i}}})=>{e(Error(`File could not be read! Code=${i}`))},r.readAsArrayBuffer(n)}),Q2=async n=>{let t=n;if(typeof n>"u")return"undefined";if(typeof n=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(n)?t=atob(n.split(",")[1]).split("").map(e=>e.charCodeAt(0)):t=await(await fetch(n)).arrayBuffer();else if(typeof HTMLElement<"u"&&n instanceof HTMLElement)n.tagName==="IMG"&&(t=await Q2(n.src)),n.tagName==="VIDEO"&&(t=await Q2(n.poster)),n.tagName==="CANVAS"&&await new Promise(e=>{n.toBlob(async r=>{t=await Z2(r),e()})});else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas){let e=await n.convertToBlob();t=await Z2(e)}else(n instanceof File||n instanceof Blob)&&(t=await Z2(n));return new Uint8Array(t)};dI.exports=Q2});var mI=Zt((cq,gI)=>{"use strict";wt();xt();At();var K8=iI(),J8=oI(),Z8=lI(),Q8=uI(),t6=fI(),e6=pI();gI.exports={defaultOptions:K8,spawnWorker:J8,terminateWorker:Z8,onMessage:Q8,send:t6,loadImage:e6}});var t1=Zt((dq,wI)=>{"use strict";wt();xt();At();var r6=ZR(),xs=Y2(),{log:yI}=ty(),n6=Q0(),Jl=J2(),{defaultOptions:i6,spawnWorker:s6,terminateWorker:o6,onMessage:a6,loadImage:vI,send:l6}=mI(),bI=0;wI.exports=async(n="eng",t=Jl.LSTM_ONLY,e={},r={})=>{let i=n6("Worker",bI),{logger:o,errorHandler:s,...a}=r6({...i6,...e}),c={},u=typeof n=="string"?n.split("+"):n,h=t,f=r,g=[Jl.DEFAULT,Jl.LSTM_ONLY].includes(t)&&!a.legacyCore,m,y,b=new Promise((R,T)=>{y=R,m=T}),v=R=>{m(R.message)},w=s6(a);w.onerror=v,bI+=1;let x=({id:R,action:T,payload:L})=>new Promise((k,B)=>{yI(`[${i}]: Start ${R}, action=${T}`);let $=`${T}-${R}`;c[$]={resolve:k,reject:B},l6(w,{workerId:i,jobId:R,action:T,payload:L})}),E=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),D=R=>x(xs({id:R,action:"load",payload:{options:{lstmOnly:g,corePath:a.corePath,logging:a.logging}}})),_=(R,T,L)=>x(xs({id:L,action:"FS",payload:{method:"writeFile",args:[R,T]}})),q=(R,T)=>x(xs({id:T,action:"FS",payload:{method:"readFile",args:[R,{encoding:"utf8"}]}})),N=(R,T)=>x(xs({id:T,action:"FS",payload:{method:"unlink",args:[R]}})),rt=(R,T,L)=>x(xs({id:L,action:"FS",payload:{method:R,args:T}})),Y=(R,T)=>x(xs({id:T,action:"loadLanguage",payload:{langs:R,options:{langPath:a.langPath,dataPath:a.dataPath,cachePath:a.cachePath,cacheMethod:a.cacheMethod,gzip:a.gzip,lstmOnly:[Jl.DEFAULT,Jl.LSTM_ONLY].includes(h)&&!a.legacyLang}}})),et=(R,T,L,k)=>x(xs({id:k,action:"initialize",payload:{langs:R,oem:T,config:L}})),st=(R="eng",T,L,k)=>{if(g&&[Jl.TESSERACT_ONLY,Jl.TESSERACT_LSTM_COMBINED].includes(T))throw Error("Legacy model requested but code missing.");let B=T||h;h=B;let $=L||f;f=$;let tt=(typeof R=="string"?R.split("+"):R).filter(it=>!u.includes(it));return u.push(...tt),tt.length>0?Y(tt,k).then(()=>et(R,B,$,k)):et(R,B,$,k)},lt=(R={},T)=>x(xs({id:T,action:"setParameters",payload:{params:R}})),at=async(R,T={},L={text:!0},k)=>x(xs({id:k,action:"recognize",payload:{image:await vI(R),options:T,output:L}})),X=async(R,T)=>{if(g)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return x(xs({id:T,action:"detect",payload:{image:await vI(R)}}))},ct=async()=>(w!==null&&(o6(w),w=null),Promise.resolve());a6(w,({workerId:R,jobId:T,status:L,action:k,data:B})=>{let $=`${k}-${T}`;if(L==="resolve")yI(`[${R}]: Complete ${T}`),c[$].resolve({jobId:T,data:B}),delete c[$];else if(L==="reject")if(c[$].reject(B),delete c[$],k==="load"&&m(B),s)s(B);else throw Error(B);else L==="progress"&&o({...B,userJobId:T})});let J={id:i,worker:w,load:E,writeText:_,readText:q,removeFile:N,FS:rt,reinitialize:st,setParameters:lt,recognize:at,detect:X,terminate:ct};return D().then(()=>Y(n)).then(()=>et(n,t,r)).then(()=>y(J)).catch(()=>{}),b}});var EI=Zt((yq,xI)=>{"use strict";wt();xt();At();var AI=t1(),c6=async(n,t,e)=>{let r=await AI(t,1,e);return r.recognize(n).finally(async()=>{await r.terminate()})},u6=async(n,t)=>{let e=await AI("osd",0,t);return e.detect(n).finally(async()=>{await e.terminate()})};xI.exports={recognize:c6,detect:u6}});var _I=Zt((Aq,SI)=>{"use strict";wt();xt();At();SI.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}});var TI=Zt((_q,CI)=>{"use strict";wt();xt();At();CI.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}});var RI=Zt((Rq,DI)=>{"use strict";wt();xt();At();$R();var h6=XR(),f6=t1(),d6=EI(),p6=_I(),g6=J2(),m6=TI(),{setLogging:y6}=ty();DI.exports={languages:p6,OEM:g6,PSM:m6,createScheduler:h6,createWorker:f6,setLogging:y6,...d6}});var yP={};Mm(yP,{AbortException:()=>ls,AnnotationEditorLayer:()=>Iv,AnnotationEditorParamsType:()=>he,AnnotationEditorType:()=>te,AnnotationEditorUIManager:()=>wl,AnnotationLayer:()=>Ev,AnnotationMode:()=>ia,AnnotationType:()=>cr,CSSConstants:()=>Qy,ColorPicker:()=>Pp,DOMSVGFactory:()=>Su,DrawLayer:()=>Ov,FeatureTest:()=>sr,GlobalWorkerOptions:()=>Bi,ImageKind:()=>xp,InvalidPDFException:()=>rd,MathClamp:()=>on,OPS:()=>ed,OutputScale:()=>Ys,PDFDataRangeTransport:()=>Np,PDFDateString:()=>Au,PDFWorker:()=>sd,PasswordResponses:()=>yO,PermissionFlag:()=>mO,PixelsPerInch:()=>la,RenderingCancelledException:()=>nd,ResponseException:()=>xu,SignatureExtractor:()=>Li,SupportedImageMimeTypes:()=>Zy,TextLayer:()=>id,TouchManager:()=>Rp,Util:()=>Lt,VerbosityLevel:()=>Im,XfaLayer:()=>Tp,applyOpacity:()=>SO,build:()=>SN,createValidAbsoluteUrl:()=>zx,fetchData:()=>od,findContrastColor:()=>_O,getDocument:()=>wN,getFilenameFromUrl:()=>AO,getPdfFilenameFromUrl:()=>xO,getRGB:()=>ad,getUuid:()=>Wx,getXfaPageViewport:()=>EO,isDataScheme:()=>Nm,isPdfFile:()=>Qv,isValidExplicitDest:()=>sN,noContextMenu:()=>hi,normalizeUnicode:()=>bO,renderRichText:()=>Gx,setLayerDimensions:()=>bl,shadow:()=>Qt,stopEvent:()=>Je,updateUrlHash:()=>Hx,version:()=>EN});function k6(n){Number.isInteger(n)&&(Jv=n)}function B6(){return Jv}function Zv(n){Jv>=Im.INFOS&&console.info(`Info: ${n}`)}function ee(n){Jv>=Im.WARNINGS&&console.warn(`Warning: ${n}`)}function Me(n){throw new Error(n)}function fe(n,t){n||Me(t)}function L6(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function zx(n,t=null,e=null){if(!n)return null;if(e&&typeof n=="string"&&(e.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),e.tryConvertEncoding))try{n=j6(n)}catch{}let r=t?URL.parse(n,t):URL.parse(n);return L6(r)?r:null}function Hx(n,t,e=!1){let r=URL.parse(n);return r?(r.hash=t,r.href):e&&zx(n,"http://example.com")?n.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Qt(n,t,e,r=!1){return Object.defineProperty(n,t,{value:e,enumerable:!r,configurable:!0,writable:!1}),e}function vO(n){(typeof n!="object"||n?.length===void 0)&&Me("Invalid argument for bytesToString");let t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);let r=[];for(let i=0;i<t;i+=e){let o=Math.min(i+e,t),s=n.subarray(i,o);r.push(String.fromCharCode.apply(null,s))}return r.join("")}function Om(n){typeof n!="string"&&Me("Invalid argument for stringToBytes");let t=n.length,e=new Uint8Array(t);for(let r=0;r<t;++r)e[r]=n.charCodeAt(r)&255;return e}function F6(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function M6(){let n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function U6(){try{return new Function(""),!0}catch{return!1}}function j6(n){return decodeURIComponent(escape(n))}function bO(n){return l1||(l1=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,JI=new Map([["\uFB05","\u017Ft"]])),n.replaceAll(l1,(t,e,r)=>e?e.normalize("NFKC"):JI.get(r))}function Wx(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();let n=new Uint8Array(32);return crypto.getRandomValues(n),vO(n)}function $6(n,t,e){if(!Array.isArray(e)||e.length<2)return!1;let[r,i,...o]=e;if(!n(r)&&!Number.isInteger(r)||!t(i))return!1;let s=o.length,a=!0;switch(i.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;a=!1;break;default:return!1}for(let c of o)if(!(typeof c=="number"||a&&c===null))return!1;return!0}function on(n,t,e){return Math.min(Math.max(n,t),e)}function wO(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(vO(n))}function q6(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Om(atob(n))}async function od(n,t="text"){if(ep(n,document.baseURI)){let e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,r)=>{let i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}function Nm(n){let t=n.length,e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function Qv(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function AO(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function xO(n,t="document.pdf"){if(typeof n!="string")return t;if(Nm(n))return ee('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;let r=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return t;let i=a=>{try{let c=decodeURIComponent(a);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:a):c}catch{return a}},o=/\.pdf$/i,s=r.pathname.split("/").at(-1);if(o.test(s))return i(s);if(r.searchParams.size>0){let a=Array.from(r.searchParams.values()).reverse();for(let u of a)if(o.test(u))return i(u);let c=Array.from(r.searchParams.keys()).reverse();for(let u of c)if(o.test(u))return i(u)}if(r.hash){let c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(c)return i(c[0])}return t}function ep(n,t){let e=t?URL.parse(n,t):URL.parse(n);return e?.protocol==="http:"||e?.protocol==="https:"}function hi(n){n.preventDefault()}function Je(n){n.preventDefault(),n.stopPropagation()}function z6(n){console.log("Deprecated API usage: "+n)}function EO(n,{scale:t=1,rotation:e=0}){let{width:r,height:i}=n.attributes.style,o=[0,0,parseInt(r),parseInt(i)];return new Dp({viewBox:o,userUnit:1,scale:t,rotation:e})}function ad(n){if(n.startsWith("#")){let t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(ee(`Not a valid color format: "${n}"`),[0,0,0])}function H6(n){let t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(let e of n.keys()){t.style.color=e;let r=window.getComputedStyle(t).color;n.set(e,ad(r))}t.remove()}function Ke(n){let{a:t,b:e,c:r,d:i,e:o,f:s}=n.getTransform();return[t,e,r,i,o,s]}function Ss(n){let{a:t,b:e,c:r,d:i,e:o,f:s}=n.getTransform().invertSelf();return[t,e,r,i,o,s]}function bl(n,t,e=!1,r=!0){if(t instanceof Dp){let{pageWidth:i,pageHeight:o}=t.rawDims,{style:s}=n,a=sr.isCSSRoundSupported,c=`var(--total-scale-factor) * ${i}px`,u=`var(--total-scale-factor) * ${o}px`,h=a?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,f=a?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!e||t.rotation%180===0?(s.width=h,s.height=f):(s.width=f,s.height=h)}r&&n.setAttribute("data-main-rotation",t.rotation)}function SO(n,t,e,r){r=Math.min(Math.max(r??1,0),1);let i=255*(1-r);return n=Math.round(n*r+i),t=Math.round(t*r+i),e=Math.round(e*r+i),[n,t,e]}function ZI(n,t){let e=n[0]/255,r=n[1]/255,i=n[2]/255,o=Math.max(e,r,i),s=Math.min(e,r,i),a=(o+s)/2;if(o===s)t[0]=t[1]=0;else{let c=o-s;switch(t[1]=a<.5?c/(o+s):c/(2-o-s),o){case e:t[0]=((r-i)/c+(r<i?6:0))*60;break;case r:t[0]=((i-e)/c+2)*60;break;case i:t[0]=((e-r)/c+4)*60;break}}t[2]=a}function v1(n,t){let e=n[0],r=n[1],i=n[2],o=(1-Math.abs(2*i-1))*r,s=o*(1-Math.abs(e/60%2-1)),a=i-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+a,t[1]=s+a,t[2]=a;break;case 1:t[0]=s+a,t[1]=o+a,t[2]=a;break;case 2:t[0]=a,t[1]=o+a,t[2]=s+a;break;case 3:t[0]=a,t[1]=s+a,t[2]=o+a;break;case 4:t[0]=s+a,t[1]=a,t[2]=o+a;break;case 5:case 6:t[0]=o+a,t[1]=a,t[2]=s+a;break}}function QI(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function tO(n,t,e){v1(n,e),e.map(QI);let r=.2126*e[0]+.7152*e[1]+.0722*e[2];v1(t,e),e.map(QI);let i=.2126*e[0]+.7152*e[1]+.0722*e[2];return r>i?(r+.05)/(i+.05):(i+.05)/(r+.05)}function _O(n,t){let e=n[0]+n[1]*256+n[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776,r=eO.get(e);if(r)return r;let i=new Float32Array(9),o=i.subarray(0,3),s=i.subarray(3,6);ZI(n,s);let a=i.subarray(6,9);ZI(t,a);let c=a[2]<.5,u=c?12:4.5;if(s[2]=c?Math.sqrt(s[2]):1-Math.sqrt(1-s[2]),tO(s,a,o)<u){let h,f;c?(h=s[2],f=1):(h=0,f=s[2]);let g=.005;for(;f-h>g;){let m=s[2]=(h+f)/2;c===tO(s,a,o)<u?h=m:f=m}s[2]=c?f:h}return v1(s,o),r=Lt.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),eO.set(e,r),r}function Gx({html:n,dir:t,className:e},r){let i=document.createDocumentFragment();if(typeof n=="string"){let o=document.createElement("p");o.dir=t||"auto";let s=n.split(/(?:\r\n?|\n)/);for(let a=0,c=s.length;a<c;++a){let u=s[a];o.append(document.createTextNode(u)),a<c-1&&o.append(document.createElement("br"))}i.append(o)}else Tp.render({xfaHtml:n,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",e),r.append(i)}function CO(n){let t=new Path2D;if(!n)return t;for(let e=0,r=n.length;e<r;)switch(n[e++]){case Kd.moveTo:t.moveTo(n[e++],n[e++]);break;case Kd.lineTo:t.lineTo(n[e++],n[e++]);break;case Kd.curveTo:t.bezierCurveTo(n[e++],n[e++],n[e++],n[e++],n[e++],n[e++]);break;case Kd.quadraticCurveTo:t.quadraticCurveTo(n[e++],n[e++],n[e++],n[e++]);break;case Kd.closePath:t.closePath();break;default:ee(`Unrecognized drawing path operator: ${n[e-1]}`);break}return t}function NO(n,t,e){for(let r of e)t.addEventListener(r,n[r].bind(n))}function W6(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(mn)return n;let t=URL.parse(n,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function G6(n){if(mn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Om(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function ay(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}function nO(){}function Dn(n){if(n instanceof ls||n instanceof rd||n instanceof Ky||n instanceof xu||n instanceof Ep)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Me('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new ls(n.message);case"InvalidPDFException":return new rd(n.message);case"PasswordException":return new Ky(n.message,n.code);case"ResponseException":return new xu(n.message,n.status,n.missing);case"UnknownErrorException":return new Ep(n.message,n.details)}return new Ep(n.message,n.toString())}async function Vx(n){let e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}function cy(n,t,e,r,i,o){n[t*4+0]=Math.min(n[t*4+0],e),n[t*4+1]=Math.min(n[t*4+1],r),n[t*4+2]=Math.max(n[t*4+2],i),n[t*4+3]=Math.max(n[t*4+3],o)}function oA(n,t){if(!t)return;let e=t[2]-t[0],r=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,r),n.clip(i)}function c1(n,t,e,r,i,o,s,a){let c=t.coords,u=t.colors,h=n.data,f=n.width*4,g;c[e+1]>c[r+1]&&(g=e,e=r,r=g,g=o,o=s,s=g),c[r+1]>c[i+1]&&(g=r,r=i,i=g,g=s,s=a,a=g),c[e+1]>c[r+1]&&(g=e,e=r,r=g,g=o,o=s,s=g);let m=(c[e]+t.offsetX)*t.scaleX,y=(c[e+1]+t.offsetY)*t.scaleY,b=(c[r]+t.offsetX)*t.scaleX,v=(c[r+1]+t.offsetY)*t.scaleY,w=(c[i]+t.offsetX)*t.scaleX,x=(c[i+1]+t.offsetY)*t.scaleY;if(y>=x)return;let E=u[o],D=u[o+1],_=u[o+2],q=u[s],N=u[s+1],rt=u[s+2],Y=u[a],et=u[a+1],st=u[a+2],lt=Math.round(y),at=Math.round(x),X,ct,J,R,T,L,k,B;for(let $=lt;$<=at;$++){if($<v){let V=$<y?0:(y-$)/(y-v);X=m-(m-b)*V,ct=E-(E-q)*V,J=D-(D-N)*V,R=_-(_-rt)*V}else{let V;$>x?V=1:v===x?V=0:V=(v-$)/(v-x),X=b-(b-w)*V,ct=q-(q-Y)*V,J=N-(N-et)*V,R=rt-(rt-st)*V}let H;$<y?H=0:$>x?H=1:H=(y-$)/(y-x),T=m-(m-w)*H,L=E-(E-Y)*H,k=D-(D-et)*H,B=_-(_-st)*H;let tt=Math.round(Math.min(X,T)),it=Math.round(Math.max(X,T)),ut=f*$+tt*4;for(let V=tt;V<=it;V++)H=(X-V)/(X-T),H<0?H=0:H>1&&(H=1),h[ut++]=ct-(ct-L)*H|0,h[ut++]=J-(J-k)*H|0,h[ut++]=R-(R-B)*H|0,h[ut++]=255}}function X6(n,t,e){let r=t.coords,i=t.colors,o,s;switch(t.type){case p1.LATTICE:let a=t.verticesPerRow,c=Math.floor(r.length/a)-1,u=a-1;for(o=0;o<c;o++){let h=o*a;for(let f=0;f<u;f++,h++)c1(n,e,r[h],r[h+1],r[h+a],i[h],i[h+1],i[h+a]),c1(n,e,r[h+a+1],r[h+1],r[h+a],i[h+a+1],i[h+1],i[h+a])}break;case p1.TRIANGLES:for(o=0,s=r.length;o<s;o+=3)c1(n,e,r[o],r[o+1],r[o+2],i[o],i[o+1],i[o+2]);break;default:throw new Error("illegal figure")}}function Y6(n){switch(n[0]){case"RadialAxial":return new aA(n);case"Mesh":return new lA(n);case"Dummy":return new cA}throw new Error(`Unknown IR type: ${n[0]}`)}function K6({src:n,srcPos:t=0,dest:e,width:r,height:i,nonBlackColor:o=4294967295,inverseDecode:s=!1}){let a=sr.isLittleEndian?4278190080:255,[c,u]=s?[o,a]:[a,o],h=r>>3,f=r&7,g=n.length;e=new Uint32Array(e.buffer);let m=0;for(let y=0;y<i;y++){for(let v=t+h;t<v;t++){let w=t<g?n[t]:255;e[m++]=w&128?u:c,e[m++]=w&64?u:c,e[m++]=w&32?u:c,e[m++]=w&16?u:c,e[m++]=w&8?u:c,e[m++]=w&4?u:c,e[m++]=w&2?u:c,e[m++]=w&1?u:c}if(f===0)continue;let b=t<g?n[t++]:255;for(let v=0;v<f;v++)e[m++]=b&1<<7-v?u:c}return{srcPos:t,destPos:m}}function Z6(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(e,r){t.translate(e,r),this.__originalTranslate(e,r)},n.scale=function(e,r){t.scale(e,r),this.__originalScale(e,r)},n.transform=function(e,r,i,o,s,a){t.transform(e,r,i,o,s,a),this.__originalTransform(e,r,i,o,s,a)},n.setTransform=function(e,r,i,o,s,a){t.setTransform(e,r,i,o,s,a),this.__originalSetTransform(e,r,i,o,s,a)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(e){t.rotate(e),this.__originalRotate(e)},n.clip=function(e){t.clip(e),this.__originalClip(e)},n.moveTo=function(e,r){t.moveTo(e,r),this.__originalMoveTo(e,r)},n.lineTo=function(e,r){t.lineTo(e,r),this.__originalLineTo(e,r)},n.bezierCurveTo=function(e,r,i,o,s,a){t.bezierCurveTo(e,r,i,o,s,a),this.__originalBezierCurveTo(e,r,i,o,s,a)},n.rect=function(e,r,i,o){t.rect(e,r,i,o),this.__originalRect(e,r,i,o)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}function hy(n,t,e,r,i,o,s,a,c,u){let[h,f,g,m,y,b]=Ke(n);if(f===0&&g===0){let x=s*h+y,E=Math.round(x),D=a*m+b,_=Math.round(D),q=(s+c)*h+y,N=Math.abs(Math.round(q)-E)||1,rt=(a+u)*m+b,Y=Math.abs(Math.round(rt)-_)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(m),E,_),n.drawImage(t,e,r,i,o,0,0,N,Y),n.setTransform(h,f,g,m,y,b),[N,Y]}if(h===0&&m===0){let x=a*g+y,E=Math.round(x),D=s*f+b,_=Math.round(D),q=(a+u)*g+y,N=Math.abs(Math.round(q)-E)||1,rt=(s+c)*f+b,Y=Math.abs(Math.round(rt)-_)||1;return n.setTransform(0,Math.sign(f),Math.sign(g),0,E,_),n.drawImage(t,e,r,i,o,0,0,Y,N),n.setTransform(h,f,g,m,y,b),[Y,N]}n.drawImage(t,e,r,i,o,s,a,c,u);let v=Math.hypot(h,f),w=Math.hypot(g,m);return[v*c,w*u]}function uO(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}let e=t.height,r=t.width,i=e%Ln,o=(e-i)/Ln,s=i===0?o:o+1,a=n.createImageData(r,Ln),c=0,u,h=t.data,f=a.data,g,m,y,b;if(t.kind===xp.GRAYSCALE_1BPP){let v=h.byteLength,w=new Uint32Array(f.buffer,0,f.byteLength>>2),x=w.length,E=r+7>>3,D=4294967295,_=sr.isLittleEndian?4278190080:255;for(g=0;g<s;g++){for(y=g<o?Ln:i,u=0,m=0;m<y;m++){let q=v-c,N=0,rt=q>E?r:q*8-7,Y=rt&-8,et=0,st=0;for(;N<Y;N+=8)st=h[c++],w[u++]=st&128?D:_,w[u++]=st&64?D:_,w[u++]=st&32?D:_,w[u++]=st&16?D:_,w[u++]=st&8?D:_,w[u++]=st&4?D:_,w[u++]=st&2?D:_,w[u++]=st&1?D:_;for(;N<rt;N++)et===0&&(st=h[c++],et=128),w[u++]=st&et?D:_,et>>=1}for(;u<x;)w[u++]=0;n.putImageData(a,0,g*Ln)}}else if(t.kind===xp.RGBA_32BPP){for(m=0,b=r*Ln*4,g=0;g<o;g++)f.set(h.subarray(c,c+b)),c+=b,n.putImageData(a,0,m),m+=Ln;g<s&&(b=r*i*4,f.set(h.subarray(c,c+b)),n.putImageData(a,0,m))}else if(t.kind===xp.RGB_24BPP)for(y=Ln,b=r*y,g=0;g<s;g++){for(g>=o&&(y=i,b=r*y),u=0,m=b;m--;)f[u++]=h[c++],f[u++]=h[c++],f[u++]=h[c++],f[u++]=255;n.putImageData(a,0,g*Ln)}else throw new Error(`bad image kind: ${t.kind}`)}function hO(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}let e=t.height,r=t.width,i=e%Ln,o=(e-i)/Ln,s=i===0?o:o+1,a=n.createImageData(r,Ln),c=0,u=t.data,h=a.data;for(let f=0;f<s;f++){let g=f<o?Ln:i;({srcPos:c}=K6({src:u,srcPos:c,dest:h,width:r,height:g,nonBlackColor:0})),n.putImageData(a,0,f*Ln)}}function Jd(n,t){let e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let r of e)n[r]!==void 0&&(t[r]=n[r]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function fy(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);let{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}function fO(n,t){if(t)return!0;Lt.singularValueDecompose2dScale(n,li);let e=Math.fround(Ys.pixelRatio*la.PDF_TO_CSS_UNITS);return li[0]<=e&&li[1]<=e}function r5(n){let t=!0,e=r("filename\\*","i").exec(n);if(e){e=e[1];let h=a(e);return h=unescape(h),h=c(h),h=u(h),o(h)}if(e=s(n),e){let h=u(e);return o(h)}if(e=r("filename","i").exec(n),e){e=e[1];let h=a(e);return h=u(h),o(h)}function r(h,f){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function i(h,f){if(h){if(!/^[\x00-\xFF]+$/.test(f))return f;try{let g=new TextDecoder(h,{fatal:!0}),m=Om(f);f=g.decode(m),t=!1}catch{}}return f}function o(h){return t&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),t&&(h=i("iso-8859-1",h))),h}function s(h){let f=[],g,m=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=m.exec(h))!==null;){let[,b,v,w]=g;if(b=parseInt(b,10),b in f){if(b===0)break;continue}f[b]=[v,w]}let y=[];for(let b=0;b<f.length&&b in f;++b){let[v,w]=f[b];w=a(w),v&&(w=unescape(w),b===0&&(w=c(w))),y.push(w)}return y.join("")}function a(h){if(h.startsWith('"')){let f=h.slice(1).split('\\"');for(let g=0;g<f.length;++g){let m=f[g].indexOf('"');m!==-1&&(f[g]=f[g].slice(0,m),f.length=g+1),f[g]=f[g].replaceAll(/\\(.)/g,"$1")}h=f.join('"')}return h}function c(h){let f=h.indexOf("'");if(f===-1)return h;let g=h.slice(0,f),y=h.slice(f+1).replace(/^[^']*'/,"");return i(g,y)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,g,m,y){if(m==="q"||m==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,v){return String.fromCharCode(parseInt(v,16))}),i(g,y);try{y=atob(y)}catch{}return i(g,y)})}return""}function uN(n,t){let e=new Headers;if(!n||!t||typeof t!="object")return e;for(let r in t){let i=t[r];i!==void 0&&e.append(r,i)}return e}function tb(n){return URL.parse(n)?.origin??null}function hN({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:r}){let i={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(n.get("Content-Length"),10);return!Number.isInteger(o)||(i.suggestedLength=o,o<=2*e)||r||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function fN(n){let t=n.get("Content-Disposition");if(t){let e=r5(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Qv(e))return e}return null}function Pm(n,t){return new xu(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n,n===404||n===0&&t.startsWith("file:"))}function dN(n){return n===200||n===206}function pN(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function gN(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ee(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}function n5(n){let t=n.response;return typeof t!="string"?t:Om(t).buffer}function s5(n){if(i5.test(n))return new URL(n);let t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}function wN(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});let t=new BA,{docId:e}=t,r=n.url?W6(n.url):null,i=n.data?G6(n.data):null,o=n.httpHeaders||null,s=n.withCredentials===!0,a=n.password??null,c=n.range instanceof Np?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16,h=n.worker instanceof sd?n.worker:null,f=n.verbosity,g=typeof n.docBaseUrl=="string"&&!Nm(n.docBaseUrl)?n.docBaseUrl:null,m=ay(n.cMapUrl),y=n.cMapPacked!==!1,b=n.CMapReaderFactory||(mn?Q1:av),v=ay(n.iccUrl),w=ay(n.standardFontDataUrl),x=n.StandardFontDataFactory||(mn?tA:uv),E=ay(n.wasmUrl),D=n.WasmFactory||(mn?eA:fv),_=n.stopAtErrors!==!0,q=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,N=n.isEvalSupported!==!1,rt=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!mn,Y=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!mn&&(sr.platform.isFirefox||!globalThis.chrome),et=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,st=typeof n.disableFontFace=="boolean"?n.disableFontFace:mn,lt=n.fontExtraProperties===!0,at=n.enableXfa===!0,X=n.ownerDocument||globalThis.document,ct=n.disableRange===!0,J=n.disableStream===!0,R=n.disableAutoFetch===!0,T=n.pdfBug===!0,L=n.CanvasFactory||(mn?Z1:V1),k=n.FilterFactory||(mn?J1:X1),B=n.enableHWA===!0,$=n.useWasm!==!1,H=c?c.length:n.length??NaN,tt=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!mn&&!st,it=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(b===av&&x===uv&&D===fv&&m&&w&&E&&ep(m,document.baseURI)&&ep(w,document.baseURI)&&ep(E,document.baseURI)),ut=null;k6(f);let V={canvasFactory:new L({ownerDocument:X,enableHWA:B}),filterFactory:new k({docId:e,ownerDocument:X}),cMapReaderFactory:it?null:new b({baseUrl:m,isCompressed:y}),standardFontDataFactory:it?null:new x({baseUrl:w}),wasmFactory:it?null:new D({baseUrl:E})};h||(h=sd.create({verbosity:f,port:Bi.workerPort}),t._worker=h);let K={docId:e,apiVersion:"5.4.530",data:i,password:a,disableAutoFetch:R,rangeChunkSize:u,length:H,docBaseUrl:g,enableXfa:at,evaluatorOptions:{maxImageSize:q,disableFontFace:st,ignoreErrors:_,isEvalSupported:N,isOffscreenCanvasSupported:rt,isImageDecoderSupported:Y,canvasMaxAreaInBytes:et,fontExtraProperties:lt,useSystemFonts:tt,useWasm:$,useWorkerFetch:it,cMapUrl:m,iccUrl:v,standardFontDataUrl:w,wasmUrl:E}},ot={ownerDocument:X,pdfBug:T,styleElement:ut,loadingParams:{disableAutoFetch:R,enableXfa:at}};return h.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");let yt=h.messageHandler.sendWithPromise("GetDocRequest",K,i?[i.buffer]:null),mt;if(c)mt=new bA(c,{disableRange:ct,disableStream:J});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");let j=ep(r)?xA:mn?RA:CA;mt=new j({url:r,length:H,httpHeaders:o,withCredentials:s,rangeChunkSize:u,disableRange:ct,disableStream:J})}return yt.then(j=>{if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");let z=new sc(e,j,h.port),ft=new MA(z,t,mt,ot,V,B);t._transport=ft,z.send("Ready",null)})}).catch(t._capability.reject),t}function gO(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Qd(n){return Math.max(0,Math.min(255,255*n))}var gy,mn,d1,my,P6,dz,ai,ia,_p,te,he,mO,p1,xr,xp,cr,fh,Im,ed,Kd,yO,Jv,Tu,Ky,Ep,rd,xu,g1,ls,sr,a1,sa,yy,m1,Lt,l1,JI,wh,Cp,Tp,bo,rc,la,Dp,nd,Jy,jp,Au,Ys,Zy,y1,Qy,eO,Ra,Ia,Ei,Si,$p,Oa,Dh,Rh,qp,Nv,TO,Xr,DO,RO,dh,rp,xo,b1,zp,oc,So,ua,IO,OO,A1,w1,ac,lc,Ih,cc,De,Qr,Pv,x1,Oh,Hp,tn,Nh,vy,Xx,E1,ur,Na,Wp,Ye,S1,kv,PO,Eu,Bv,_1,Ph,qn,kh,tr,Sr,Bh,_i,Lh,Ci,en,Pa,ka,Fh,Ba,Ts,Ti,uc,Gp,Vp,Mh,Xp,Ds,La,Uh,Fa,Rs,Lv,Ma,jh,Yp,Ua,hc,$h,ja,Kp,pr,xe,_o,$a,qa,Jp,qh,Zp,za,Is,Co,Qp,tg,Di,kt,by,C1,kO,BO,np,LO,FO,MO,T1,UO,jO,$O,qO,hn,wo,zO,HO,D1,WO,ip,R1,Eh,wl,Ir,Os,Yi,zh,Ns,zn,Hh,Ps,In,To,fc,ks,Ha,as,sp,wy,fn,tv,$r,Ri,dc,je,eg,pc,Ki,gc,mc,yc,rg,I1,Ah,Wh,vc,ng,ig,sg,og,ag,Do,bc,Ro,wc,Io,Al,GO,VO,XO,Yx,Rp,Ac,Ji,We,Be,Oo,Gh,Wa,lg,qr,xc,No,Ii,Ga,cg,Ec,Hn,ug,Sc,Po,Bs,Vh,Xh,Oi,_c,hg,Fv,Kt,O1,fg,N1,Ay,YO,KO,P1,xy,k1,JO,ZO,QO,B1,tN,L1,eN,rN,nN,F1,op,re,$e,M1,rO,Ai,_s,ev,U1,Cc,Tc,ko,zr,Mv,iN,Ip,dg,rv,Yh,j1,Re,$1,Kh,Jh,pg,Zh,Ey,Sh,nv,Va,Ls,Dc,Rc,ap,_h,iv,Qh,tf,ef,rf,Wn,Fs,gg,Ie,ir,Vi,Sy,lp,ie,q1,mg,yg,vg,bg,wg,Ag,xg,Eg,Ue,z1,nf,H1,W1,V6,sN,Bo,Uv,G1,ly,dr,sf,Mi,oN,aN,lN,_y,sc,Sg,sv,V1,ov,av,lv,Ic,of,Lo,Fo,rn,Oc,Nc,$t,Zr,cp,ph,Cy,gh,cN,Y1,mh,up,hp,K1,fp,X1,cv,uv,hv,fv,J1,Z1,Q1,tA,eA,hh,iO,sO,rA,af,Xa,nA,uy,On,Nn,Pc,Zi,kc,Mo,Ee,Oe,Uo,Pn,_g,lf,Bc,Lc,jo,nn,Ms,Cg,sA,iA,Le,er,Qi,cf,uf,Kx,dv,xi,Gr,Op,aA,lA,cA,oO,jv,uA,aO,lO,J6,cO,Ln,u1,li,xh,hA,pv,Q6,t5,e5,dO,cs,fA,dA,pA,Jx,Th,Tg,Dg,Bi,hf,Rg,gA,yh,Ig,Og,Ng,ff,mA,Ya,Ne,df,pf,Pg,vA,yA,bA,wA,AA,xA,EA,SA,h1,f1,_A,CA,TA,DA,i5,RA,IA,OA,Zd,Gn,kg,NA,gv,o5,pO,Ka,Vn,Bg,Lg,Fc,$o,Fg,Mg,Mc,Ug,gf,Ja,mf,jg,yf,Uc,$g,qg,vf,jc,zg,bf,wf,ha,mN,yN,PA,ui,Ty,kA,vN,bN,jr,id,a5,$v,qv,BA,$c,Hg,Wg,Gg,Vg,Np,LA,qo,qc,dp,FA,Za,ts,zo,zc,zv,Hc,Wc,yn,Dy,AN,xN,pp,Af,Ry,He,sd,Ho,Us,xf,Ef,Wo,Gc,gp,MA,Qa,UA,tl,Vc,nc,jA,EN,SN,Xn,Xc,Sf,_r,Xg,_f,Go,Yg,el,es,Kg,Pe,$A,qA,zA,Ql,_N,Da,Rn,Pp,js,Jg,Cf,Zg,ic,mv,yv,HA,Su,l5,_u,c5,Sp,Yc,Tf,Ni,Qg,WA,Zx,Ze,GA,ci,tc,CN,TN,kp,VA,ca,XA,YA,KA,vv,JA,ZA,tm,QA,Bp,Yn,rl,Hv,Wv,Df,Rf,rr,$s,nl,Kc,If,Of,qs,Kn,Vo,Xo,nr,Yo,il,em,Ko,Nf,Jc,sl,Or,ol,oe,Iy,ex,rx,nx,Oy,ix,DN,RN,IN,ON,Ny,Py,sx,tx,bv,rm,ox,nm,ax,im,lx,sm,wv,cx,ux,om,Zc,am,hx,Lp,Av,fx,dx,px,xv,lm,cm,mx,gx,Qc,tu,Pf,al,um,eu,Jn,hm,oa,ky,yx,Qx,Ev,dy,Zn,fm,ru,Qn,gr,NN,PN,kN,By,aa,Ly,Fy,BN,bx,LN,ze,vx,jt,ti,rs,kf,Bf,zs,ae,nu,iu,dm,pm,Lf,Ff,ll,gm,Gv,Vv,Cr,mp,FN,MN,UN,jN,$N,qN,Eo,Sv,Mf,su,Jo,mm,ei,ym,hr,Xv,zN,_v,vm,bm,wm,cl,ns,vn,HN,My,WN,GN,wx,Fp,Am,Uf,Ax,Mp,xx,jf,xm,Zo,ou,Em,kn,Sm,_m,au,ri,ni,Hr,$f,qf,sn,zf,Pi,Cm,se,Ex,Uy,VN,XN,YN,Sx,ec,Fi,vh,KN,jy,$y,JN,ZN,QN,tP,eP,ve,Cv,lu,Tv,ii,Hf,Nr,cu,uu,pe,_x,Cx,Tx,yp,rP,qy,vp,bh,ue,Dv,Hs,Pr,kr,hu,Wf,dn,Wr,ki,fu,du,pu,Gf,zy,Dx,pn,Tm,Dm,si,Ws,Gs,Vf,Xf,gu,Vr,Ao,nP,iP,sP,Cu,Rv,Yv,oP,Ch,Rx,Up,py,tp,mu,we,Ix,is,aP,lP,Ox,Hy,cP,uP,hP,Nx,Px,fP,Li,kx,Bx,ul,Vs,hl,yu,$n,Lx,Ge,Br,fl,Qo,dl,Yf,ta,vu,Xs,oi,Kf,ge,wp,Ap,Wy,Gy,Vy,Fx,Xy,dP,bp,bu,Jf,pl,gl,ea,Bn,ml,Zf,Qf,ss,ra,Lr,na,yl,td,Gt,vl,Fe,Mx,pP,Cs,Ux,jx,Yy,Xi,Iv,os,gn,wu,Rm,Kv,gP,Ks,$x,mP,qx,Er,Ov,vP=Qe(()=>{wt();xt();At();gy={};gy.d=(n,t)=>{for(var e in t)gy.o(t,e)&&!gy.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})};gy.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);mn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),d1=[.001,0,0,.001,0,0],my=1.35,P6=.35,dz=P6/my,ai={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ia={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},_p="pdfjs_internal_editor_",te={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},he={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},mO={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},p1={TRIANGLES:1,LATTICE:2,PATCH:3},xr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},xp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},cr={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},fh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Im={ERRORS:0,WARNINGS:1,INFOS:5},ed={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Kd={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},yO={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},Jv=Im.WARNINGS;Tu=(function(){function t(e,r){this.message=e,this.name=r}return t.prototype=new Error,t.constructor=t,t})(),Ky=class extends Tu{constructor(t,e){super(t,"PasswordException"),this.code=e}},Ep=class extends Tu{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}},rd=class extends Tu{constructor(t){super(t,"InvalidPDFException")}},xu=class extends Tu{constructor(t,e,r){super(t,"ResponseException"),this.status=e,this.missing=r}},g1=class extends Tu{constructor(t){super(t,"FormatError")}},ls=class extends Tu{constructor(t){super(t,"AbortException")}};sr=class{static get isLittleEndian(){return Qt(this,"isLittleEndian",M6())}static get isEvalSupported(){return Qt(this,"isEvalSupported",U6())}static get isOffscreenCanvasSupported(){return Qt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Qt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Qt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Qt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){let{platform:t,userAgent:e}=navigator;return Qt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Qt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}},a1=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0")),Lt=class{static makeHexColor(t,e,r){return`#${a1[t]}${a1[e]}${a1[r]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let r;t[0]?(t[0]<0&&(r=e[0],e[0]=e[2],e[2]=r),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(r=e[1],e[1]=e[3],e[3]=r),e[1]*=t[3],e[3]*=t[3]):(r=e[0],e[0]=e[1],e[1]=r,r=e[2],e[2]=e[3],e[3]=r,t[1]<0&&(r=e[1],e[1]=e[3],e[3]=r),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(r=e[0],e[0]=e[2],e[2]=r),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,r=0){let i=t[r],o=t[r+1];t[r]=i*e[0]+o*e[2]+e[4],t[r+1]=i*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,r=0){let i=e[0],o=e[1],s=e[2],a=e[3],c=e[4],u=e[5];for(let h=0;h<6;h+=2){let f=t[r+h],g=t[r+h+1];t[r+h]=f*i+g*s+c,t[r+h+1]=f*o+g*a+u}}static applyInverseTransform(t,e){let r=t[0],i=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(r*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-r*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,r){let i=e[0],o=e[1],s=e[2],a=e[3],c=e[4],u=e[5],h=t[0],f=t[1],g=t[2],m=t[3],y=i*h+c,b=y,v=i*g+c,w=v,x=a*f+u,E=x,D=a*m+u,_=D;if(o!==0||s!==0){let q=o*h,N=o*g,rt=s*f,Y=s*m;y+=rt,w+=rt,v+=Y,b+=Y,x+=q,_+=q,D+=N,E+=N}r[0]=Math.min(r[0],y,v,b,w),r[1]=Math.min(r[1],x,D,E,_),r[2]=Math.max(r[2],y,v,b,w),r[3]=Math.max(r[3],x,D,E,_)}static inverseTransform(t){let e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){let r=t[0],i=t[1],o=t[2],s=t[3],a=r**2+i**2,c=r*o+i*s,u=o**2+s**2,h=(a+u)/2,f=Math.sqrt(h**2-(a*u-c**2));e[0]=Math.sqrt(h+f||1),e[1]=Math.sqrt(h-f||1)}static normalizeRect(t){let e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){let r=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(r>i)return null;let o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),s=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>s?null:[r,o,i,s]}static pointBoundingBox(t,e,r){r[0]=Math.min(r[0],t),r[1]=Math.min(r[1],e),r[2]=Math.max(r[2],t),r[3]=Math.max(r[3],e)}static rectBoundingBox(t,e,r,i,o){o[0]=Math.min(o[0],t,r),o[1]=Math.min(o[1],e,i),o[2]=Math.max(o[2],t,r),o[3]=Math.max(o[3],e,i)}static bezierBoundingBox(t,e,r,i,o,s,a,c,u){u[0]=Math.min(u[0],t,a),u[1]=Math.min(u[1],e,c),u[2]=Math.max(u[2],t,a),u[3]=Math.max(u[3],e,c),F(this,sa,m1).call(this,t,r,o,a,e,i,s,c,3*(-t+3*(r-o)+a),6*(t-2*r+o),3*(r-t),u),F(this,sa,m1).call(this,t,r,o,a,e,i,s,c,3*(-e+3*(i-s)+c),6*(e-2*i+s),3*(i-e),u)}};sa=new WeakSet,yy=function(t,e,r,i,o,s,a,c,u,h){if(u<=0||u>=1)return;let f=1-u,g=u*u,m=g*u,y=f*(f*(f*t+3*u*e)+3*g*r)+m*i,b=f*(f*(f*o+3*u*s)+3*g*a)+m*c;h[0]=Math.min(h[0],y),h[1]=Math.min(h[1],b),h[2]=Math.max(h[2],y),h[3]=Math.max(h[3],b)},m1=function(t,e,r,i,o,s,a,c,u,h,f,g){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&F(this,sa,yy).call(this,t,e,r,i,o,s,a,c,-f/h,g);return}let m=h**2-4*f*u;if(m<0)return;let y=Math.sqrt(m),b=2*u;F(this,sa,yy).call(this,t,e,r,i,o,s,a,c,(-h+y)/b,g),F(this,sa,yy).call(this,t,e,r,i,o,s,a,c,(-h-y)/b,g)},O(Lt,sa);l1=null,JI=null;wh="pdfjs_internal_id_";typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((t,e)=>t+e,0)});Cp=class n{static textContent(t){let e=[],r={items:e,styles:Object.create(null)};function i(o){if(!o)return;let s=null,a=o.name;if(a==="#text")s=o.value;else if(n.shouldBuildText(a))o?.attributes?.textContent?s=o.attributes.textContent:o.value&&(s=o.value);else return;if(s!==null&&e.push({str:s}),!!o.children)for(let c of o.children)i(c)}return i(t),r}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}},Tp=class{static setupStorage(t,e,r,i,o){let s=i.getValue(e,{value:null});switch(r.name){case"textarea":if(s.value!==null&&(t.textContent=s.value),o==="print")break;t.addEventListener("input",a=>{i.setValue(e,{value:a.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(s.value===r.attributes.xfaOn?t.setAttribute("checked",!0):s.value===r.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",a=>{i.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&t.setAttribute("value",s.value),o==="print")break;t.addEventListener("input",a=>{i.setValue(e,{value:a.target.value})})}break;case"select":if(s.value!==null){t.setAttribute("value",s.value);for(let a of r.children)a.attributes.value===s.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{let c=a.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:r=null,intent:i,linkService:o}){let{attributes:s}=e,a=t instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${i}`);for(let[c,u]of Object.entries(s))if(u!=null)switch(c){case"class":u.length&&t.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!a||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,u)}a&&o.addLinkAttributes(t,s.href,s.newWindow),r&&s.dataId&&this.setupStorage(t,s.dataId,e,r)}static render(t){let e=t.annotationStorage,r=t.linkService,i=t.xfaHtml,o=t.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:o,linkService:r});let a=o!=="richText",c=t.div;if(c.append(s),t.viewport){let f=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=f}a&&c.setAttribute("class","xfaLayer xfaFont");let u=[];if(i.children.length===0){if(i.value){let f=document.createTextNode(i.value);s.append(f),a&&Cp.shouldBuildText(i.name)&&u.push(f)}return{textDivs:u}}let h=[[i,-1,s]];for(;h.length>0;){let[f,g,m]=h.at(-1);if(g+1===f.children.length){h.pop();continue}let y=f.children[++h.at(-1)[1]];if(y===null)continue;let{name:b}=y;if(b==="#text"){let w=document.createTextNode(y.value);u.push(w),m.append(w);continue}let v=y?.attributes?.xmlns?document.createElementNS(y.attributes.xmlns,b):document.createElement(b);if(m.append(v),y.attributes&&this.setAttributes({html:v,element:y,storage:e,intent:o,linkService:r}),y.children?.length>0)h.push([y,-1,v]);else if(y.value){let w=document.createTextNode(y.value);a&&Cp.shouldBuildText(b)&&u.push(w),v.append(w)}}for(let f of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){let e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}},bo="http://www.w3.org/2000/svg",rc=class rc{};Dt(rc,"CSS",96),Dt(rc,"PDF",72),Dt(rc,"PDF_TO_CSS_UNITS",rc.CSS/rc.PDF);la=rc;Dp=class n{constructor({viewBox:t,userUnit:e,scale:r,rotation:i,offsetX:o=0,offsetY:s=0,dontFlip:a=!1}){this.viewBox=t,this.userUnit=e,this.scale=r,this.rotation=i,this.offsetX=o,this.offsetY=s,r*=e;let c=(t[2]+t[0])/2,u=(t[3]+t[1])/2,h,f,g,m;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,f=0,g=0,m=1;break;case 90:h=0,f=1,g=1,m=0;break;case 270:h=0,f=-1,g=-1,m=0;break;case 0:h=1,f=0,g=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(g=-g,m=-m);let y,b,v,w;h===0?(y=Math.abs(u-t[1])*r+o,b=Math.abs(c-t[0])*r+s,v=(t[3]-t[1])*r,w=(t[2]-t[0])*r):(y=Math.abs(c-t[0])*r+o,b=Math.abs(u-t[1])*r+s,v=(t[2]-t[0])*r,w=(t[3]-t[1])*r),this.transform=[h*r,f*r,g*r,m*r,y-h*r*c-g*r*u,b-f*r*c-m*r*u],this.width=v,this.height=w}get rawDims(){let t=this.viewBox;return Qt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:o=!1}={}){return new n({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:r,offsetY:i,dontFlip:o})}convertToViewportPoint(t,e){let r=[t,e];return Lt.applyTransform(r,this.transform),r}convertToViewportRectangle(t){let e=[t[0],t[1]];Lt.applyTransform(e,this.transform);let r=[t[2],t[3]];return Lt.applyTransform(r,this.transform),[e[0],e[1],r[0],r[1]]}convertToPdfPoint(t,e){let r=[t,e];return Lt.applyInverseTransform(r,this.transform),r}},nd=class extends Tu{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}};Jy=class{constructor(){Dt(this,"started",Object.create(null));Dt(this,"times",[])}time(t){t in this.started&&ee(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||ee(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){let t=[],e=0;for(let{name:r}of this.times)e=Math.max(r.length,e);for(let{name:r,start:i,end:o}of this.times)t.push(`${r.padEnd(e)} ${o-i}ms
`);return t.join("")}};Au=class{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;l(this,jp)||C(this,jp,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));let e=l(this,jp).exec(t);if(!e)return null;let r=parseInt(e[1],10),i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let s=parseInt(e[4],10);s=s>=0&&s<=23?s:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;let u=e[7]||"Z",h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let f=parseInt(e[9],10)||0;return f=f>=0&&f<=59?f:0,u==="-"?(s+=h,a+=f):u==="+"&&(s-=h,a-=f),new Date(Date.UTC(r,i,o,s,a,c))}};jp=new WeakMap,O(Au,jp);Ys=class n{constructor(){let{pixelRatio:t}=n;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,r,i,o=-1){let s=1/0,a=1/0,c=1/0;r=n.capPixels(r,o),r>0&&(s=Math.sqrt(r/(t*e))),i!==-1&&(a=i/t,c=i/e);let u=Math.min(s,a,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){let r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,r):r}return t}},Zy=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"],y1=class{static get isDarkMode(){return Qt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}},Qy=class{static get commentForegroundColor(){let t=document.createElement("span");t.classList.add("comment","sidebar");let{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);let{color:r}=window.getComputedStyle(t);return t.remove(),Qt(this,"commentForegroundColor",ad(r))}};eO=new Map;xo=class xo{constructor(t){O(this,Xr);O(this,Ra,null);O(this,Ia,null);O(this,Ei);O(this,Si,null);O(this,$p,null);O(this,Oa,null);O(this,Dh,null);O(this,Rh,null);C(this,Ei,t),l(xo,qp)||C(xo,qp,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){let t=C(this,Ra,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");let e=l(this,Ei)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",hi,{signal:e}),t.addEventListener("pointerdown",F(xo,Nv,TO),{signal:e}));let r=C(this,Si,document.createElement("div"));r.className="buttons",t.append(r);let i=l(this,Ei).toolbarPosition;if(i){let{style:o}=t,s=l(this,Ei)._uiManager.direction==="ltr"?1-i[0]:i[0];o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return l(this,Ra)}hide(){l(this,Ra).classList.add("hidden"),l(this,Ia)?.hideDropdown()}show(){l(this,Ra).classList.remove("hidden"),l(this,$p)?.shown(),l(this,Oa)?.shown()}addDeleteButton(){let{editorType:t,_uiManager:e}=l(this,Ei),r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",l(xo,qp)[t]),F(this,Xr,dh).call(this,r)&&r.addEventListener("click",i=>{e.delete()},{signal:e._signal}),l(this,Si).append(r)}async addAltText(t){let e=await t.render();F(this,Xr,dh).call(this,e),l(this,Si).append(e,l(this,Xr,rp)),C(this,$p,t)}addComment(t,e=null){if(l(this,Oa))return;let r=t.renderForToolbar();if(!r)return;F(this,Xr,dh).call(this,r);let i=C(this,Dh,l(this,Xr,rp));e?(l(this,Si).insertBefore(r,e),l(this,Si).insertBefore(i,e)):l(this,Si).append(r,i),C(this,Oa,t),t.toolbar=this}addColorPicker(t){if(l(this,Ia))return;C(this,Ia,t);let e=t.renderButton();F(this,Xr,dh).call(this,e),l(this,Si).append(e,l(this,Xr,rp))}async addEditSignatureButton(t){let e=C(this,Rh,await t.renderEditButton(l(this,Ei)));F(this,Xr,dh).call(this,e),l(this,Si).append(e,l(this,Xr,rp))}removeButton(t){switch(t){case"comment":l(this,Oa)?.removeToolbarCommentButton(),C(this,Oa,null),l(this,Dh)?.remove(),C(this,Dh,null);break}}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,r){if(!e&&t==="comment")return;let i=l(this,Si).querySelector(r);i&&t==="comment"&&this.addComment(e,i)}updateEditSignatureButton(t){l(this,Rh)&&(l(this,Rh).title=t)}remove(){l(this,Ra).remove(),l(this,Ia)?.destroy(),C(this,Ia,null)}};Ra=new WeakMap,Ia=new WeakMap,Ei=new WeakMap,Si=new WeakMap,$p=new WeakMap,Oa=new WeakMap,Dh=new WeakMap,Rh=new WeakMap,qp=new WeakMap,Nv=new WeakSet,TO=function(t){t.stopPropagation()},Xr=new WeakSet,DO=function(t){l(this,Ei)._focusEventsAllowed=!1,Je(t)},RO=function(t){l(this,Ei)._focusEventsAllowed=!0,Je(t)},dh=function(t){let e=l(this,Ei)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",F(this,Xr,DO).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",F(this,Xr,RO).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",hi,{signal:e}),!0)},rp=function(){let t=document.createElement("div");return t.className="divider",t},O(xo,Nv),O(xo,qp,null);b1=xo,w1=class{constructor(t){O(this,ua);O(this,zp,null);O(this,oc,null);O(this,So);C(this,So,t)}show(t,e,r){let[i,o]=F(this,ua,OO).call(this,e,r),{style:s}=l(this,oc)||C(this,oc,F(this,ua,IO).call(this));t.append(l(this,oc)),s.insetInlineEnd=`${100*i}%`,s.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,oc).remove()}};zp=new WeakMap,oc=new WeakMap,So=new WeakMap,ua=new WeakSet,IO=function(){let t=C(this,oc,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");let e=l(this,So)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",hi,{signal:e});let r=C(this,zp,document.createElement("div"));return r.className="buttons",t.append(r),l(this,So).hasCommentManager()&&F(this,ua,A1).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{l(this,So).commentSelection("floating_button")}),F(this,ua,A1).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{l(this,So).highlightSelection("floating_button")}),t},OO=function(t,e){let r=0,i=0;for(let o of t){let s=o.y+o.height;if(s<r)continue;let a=o.x+(e?o.width:0);if(s>r){i=a,r=s;continue}e?a>i&&(i=a):a<i&&(i=a)}return[e?1-i:i,r]},A1=function(t,e,r,i){let o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);let s=document.createElement("span");o.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",r);let a=l(this,So)._signal;a instanceof AbortSignal&&!a.aborted&&(o.addEventListener("contextmenu",hi,{signal:a}),o.addEventListener("click",i,{signal:a})),l(this,zp).append(o)};De=class De{static initializeAndAddPointerId(t){(l(De,lc)||C(De,lc,new Set)).add(t)}static setPointer(t,e){l(De,ac)||C(De,ac,e),l(De,cc)??C(De,cc,t)}static setTimeStamp(t){C(De,Ih,t)}static isSamePointerId(t){return l(De,ac)===t}static isSamePointerIdOrRemove(t){return l(De,ac)===t?!0:(l(De,lc)?.delete(t),!1)}static isSamePointerType(t){return l(De,cc)===t}static isInitializedAndDifferentPointerType(t){return l(De,cc)!==null&&!De.isSamePointerType(t)}static isSameTimeStamp(t){return l(De,Ih)===t}static isUsingMultiplePointers(){return l(De,lc)?.size>=1}static clearPointerType(){C(De,cc,null)}static clearPointerIds(){C(De,ac,NaN),C(De,lc,null)}static clearTimeStamp(){C(De,Ih,NaN)}};ac=new WeakMap,lc=new WeakMap,Ih=new WeakMap,cc=new WeakMap,O(De,ac,NaN),O(De,lc,null),O(De,Ih,NaN),O(De,cc,null);Qr=De,x1=class{constructor(){O(this,Pv,0)}get id(){return`${_p}${vr(this,Pv)._++}`}};Pv=new WeakMap;Xx=class Xx{constructor(){O(this,Nh);O(this,Oh,Wx());O(this,Hp,0);O(this,tn,null)}static get _isSVGFittingCanvas(){let t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;let o=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return Qt(this,"_isSVGFittingCanvas",o)}async getFromFile(t){let{lastModified:e,name:r,size:i,type:o}=t;return F(this,Nh,vy).call(this,`${e}_${r}_${i}_${o}`,t)}async getFromUrl(t){return F(this,Nh,vy).call(this,t,t)}async getFromBlob(t,e){let r=await e;return F(this,Nh,vy).call(this,t,r)}async getFromId(t){l(this,tn)||C(this,tn,new Map);let e=l(this,tn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){let{blobPromise:r}=e;return delete e.blobPromise,this.getFromBlob(e.id,r)}return this.getFromUrl(e.url)}getFromCanvas(t,e){l(this,tn)||C(this,tn,new Map);let r=l(this,tn).get(t);if(r?.bitmap)return r.refCounter+=1,r;let i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${l(this,Oh)}_${vr(this,Hp)._++}`,refCounter:1,isSvg:!1},l(this,tn).set(t,r),l(this,tn).set(r.id,r),r}getSvgUrl(t){let e=l(this,tn).get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){l(this,tn)||C(this,tn,new Map);let e=l(this,tn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;let{bitmap:r}=e;if(!e.url&&!e.file){let i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),e.blobPromise=i.convertToBlob()}r.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${l(this,Oh)}_`)}};Oh=new WeakMap,Hp=new WeakMap,tn=new WeakMap,Nh=new WeakSet,vy=async function(t,e){l(this,tn)||C(this,tn,new Map);let r=l(this,tn).get(t);if(r===null)return null;if(r?.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${l(this,Oh)}_${vr(this,Hp)._++}`,refCounter:0,isSvg:!1});let i;if(typeof e=="string"?(r.url=e,i=await od(e,"blob")):e instanceof File?i=r.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){let o=Xx._isSVGFittingCanvas,s=new FileReader,a=new Image,c=new Promise((u,h)=>{a.onload=()=>{r.bitmap=a,r.isSvg=!0,u()},s.onload=async()=>{let f=r.svgUrl=s.result;a.src=await o?`${f}#svgView(preserveAspectRatio(none))`:f},a.onerror=s.onerror=h});s.readAsDataURL(i),await c}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){ee(i),r=null}return l(this,tn).set(t,r),r&&l(this,tn).set(r.id,r),r};E1=Xx,S1=class{constructor(t=128){O(this,ur,[]);O(this,Na,!1);O(this,Wp);O(this,Ye,-1);C(this,Wp,t)}add({cmd:t,undo:e,post:r,mustExec:i,type:o=NaN,overwriteIfSameType:s=!1,keepUndo:a=!1}){if(i&&t(),l(this,Na))return;let c={cmd:t,undo:e,post:r,type:o};if(l(this,Ye)===-1){l(this,ur).length>0&&(l(this,ur).length=0),C(this,Ye,0),l(this,ur).push(c);return}if(s&&l(this,ur)[l(this,Ye)].type===o){a&&(c.undo=l(this,ur)[l(this,Ye)].undo),l(this,ur)[l(this,Ye)]=c;return}let u=l(this,Ye)+1;u===l(this,Wp)?l(this,ur).splice(0,1):(C(this,Ye,u),u<l(this,ur).length&&l(this,ur).splice(u)),l(this,ur).push(c)}undo(){if(l(this,Ye)===-1)return;C(this,Na,!0);let{undo:t,post:e}=l(this,ur)[l(this,Ye)];t(),e?.(),C(this,Na,!1),C(this,Ye,l(this,Ye)-1)}redo(){if(l(this,Ye)<l(this,ur).length-1){C(this,Ye,l(this,Ye)+1),C(this,Na,!0);let{cmd:t,post:e}=l(this,ur)[l(this,Ye)];t(),e?.(),C(this,Na,!1)}}hasSomethingToUndo(){return l(this,Ye)!==-1}hasSomethingToRedo(){return l(this,Ye)<l(this,ur).length-1}cleanType(t){if(l(this,Ye)!==-1){for(let e=l(this,Ye);e>=0;e--)if(l(this,ur)[e].type!==t){l(this,ur).splice(e+1,l(this,Ye)-e),C(this,Ye,e);return}l(this,ur).length=0,C(this,Ye,-1)}}destroy(){C(this,ur,null)}};ur=new WeakMap,Na=new WeakMap,Wp=new WeakMap,Ye=new WeakMap;Eu=class{constructor(t){O(this,kv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:e}=sr.platform;for(let[r,i,o={}]of t)for(let s of r){let a=s.startsWith("mac+");e&&a?(this.callbacks.set(s.slice(4),{callback:i,options:o}),this.allKeys.add(s.split("+").at(-1))):!e&&!a&&(this.callbacks.set(s,{callback:i,options:o}),this.allKeys.add(s.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;let r=this.callbacks.get(F(this,kv,PO).call(this,e));if(!r)return;let{callback:i,options:{bubbles:o=!1,args:s=[],checker:a=null}}=r;a&&!a(t,e)||(i.bind(t,...s,e)(),o||Je(e))}};kv=new WeakSet,PO=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);let e=this.buffer.join("+");return this.buffer.length=0,e};Bv=class Bv{get _colors(){let t=new Map([["CanvasText",null],["Canvas",null]]);return H6(t),Qt(this,"_colors",t)}convert(t){let e=ad(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(let[r,i]of this._colors)if(i.every((o,s)=>o===e[s]))return Bv._colorsMapping.get(r);return e}getHexCode(t){let e=this._colors.get(t);return e?Lt.makeHexColor(...e):t}};Dt(Bv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));_1=Bv,Eh=class Eh{constructor(t,e,r,i,o,s,a,c,u,h,f,g,m,y,b,v){O(this,kt);O(this,Ph,new AbortController);O(this,qn,null);O(this,kh,null);O(this,tr,new Map);O(this,Sr,new Map);O(this,Bh,null);O(this,_i,null);O(this,Lh,null);O(this,Ci,new S1);O(this,en,null);O(this,Pa,null);O(this,ka,null);O(this,Fh,0);O(this,Ba,new Set);O(this,Ts,null);O(this,Ti,null);O(this,uc,new Set);Dt(this,"_editorUndoBar",null);O(this,Gp,!1);O(this,Vp,!1);O(this,Mh,!1);O(this,Xp,null);O(this,Ds,null);O(this,La,null);O(this,Uh,null);O(this,Fa,!1);O(this,Rs,null);O(this,Lv,new x1);O(this,Ma,!1);O(this,jh,!1);O(this,Yp,!1);O(this,Ua,null);O(this,hc,null);O(this,$h,null);O(this,ja,null);O(this,Kp,null);O(this,pr,te.NONE);O(this,xe,new Set);O(this,_o,null);O(this,$a,null);O(this,qa,null);O(this,Jp,null);O(this,qh,null);O(this,Zp,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});O(this,za,[0,0]);O(this,Is,null);O(this,Co,null);O(this,Qp,null);O(this,tg,null);O(this,Di,null);let w=this._signal=l(this,Ph).signal;C(this,Co,t),C(this,Qp,e),C(this,tg,r),C(this,Bh,i),C(this,en,o),C(this,$a,s),C(this,qh,c),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:w}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),a._on("setpreference",this.onSetPreference.bind(this),{signal:w}),a._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:w}),window.addEventListener("pointerdown",()=>{C(this,jh,!0)},{capture:!0,signal:w}),window.addEventListener("pointerup",()=>{C(this,jh,!1)},{capture:!0,signal:w}),F(this,kt,LO).call(this),F(this,kt,qO).call(this),F(this,kt,T1).call(this),C(this,_i,c.annotationStorage),C(this,Xp,c.filterFactory),C(this,qa,u),C(this,Uh,h||null),C(this,Gp,f),C(this,Vp,g),C(this,Mh,m),C(this,Kp,y||null),this.viewParameters={realScale:la.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=b||null,this._supportsPinchToZoom=v!==!1,o?.setSidebarUiManager(this)}static get _keyboardManager(){let t=Eh.prototype,e=s=>l(s,Co).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&s.hasSomethingToControl(),r=(s,{target:a})=>{if(a instanceof HTMLInputElement){let{type:c}=a;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Qt(this,"_keyboardManager",new Eu([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],t.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:r}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(s,{target:a})=>!(a instanceof HTMLButtonElement)&&l(s,Co).contains(a)&&!s.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(s,{target:a})=>!(a instanceof HTMLButtonElement)&&l(s,Co).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){l(this,Di)?.resolve(),C(this,Di,null),l(this,Ph)?.abort(),C(this,Ph,null),this._signal=null;for(let t of l(this,Sr).values())t.destroy();l(this,Sr).clear(),l(this,tr).clear(),l(this,uc).clear(),l(this,ja)?.clear(),C(this,qn,null),l(this,xe).clear(),l(this,Ci).destroy(),l(this,Bh)?.destroy(),l(this,en)?.destroy(),l(this,$a)?.destroy(),l(this,Rs)?.hide(),C(this,Rs,null),l(this,$h)?.destroy(),C(this,$h,null),C(this,kh,null),l(this,Ds)&&(clearTimeout(l(this,Ds)),C(this,Ds,null)),l(this,Is)&&(clearTimeout(l(this,Is)),C(this,Is,null)),this._editorUndoBar?.destroy(),C(this,qh,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return l(this,Kp)}get useNewAltTextFlow(){return l(this,Vp)}get useNewAltTextWhenAddingImage(){return l(this,Mh)}get hcmFilter(){return Qt(this,"hcmFilter",l(this,qa)?l(this,Xp).addHCMFilter(l(this,qa).foreground,l(this,qa).background):"none")}get direction(){return Qt(this,"direction",getComputedStyle(l(this,Co)).direction)}get _highlightColors(){return Qt(this,"_highlightColors",l(this,Uh)?new Map(l(this,Uh).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){let{_highlightColors:t}=this;if(!t)return Qt(this,"highlightColors",null);let e=new Map,r=!!l(this,qa);for(let[i,o]of t){let s=i.endsWith("_HCM");if(r&&s){e.set(i.replace("_HCM",""),o);continue}!r&&!s&&e.set(i,o)}return Qt(this,"highlightColors",e)}get highlightColorNames(){return Qt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;let e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),C(this,ka,t)}setMainHighlightColorPicker(t){C(this,$h,t)}editAltText(t,e=!1){l(this,Bh)?.editAltText(this,t,e)}hasCommentManager(){return!!l(this,en)}editComment(t,e,r,i){l(this,en)?.showDialog(this,t,e,r,i)}selectComment(t,e){l(this,Sr).get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){l(this,en)?.updateComment(t.getData())}updatePopupColor(t){l(this,en)?.updatePopupColor(t)}removeComment(t){l(this,en)?.removeComments([t.uid])}toggleComment(t,e,r=void 0){l(this,en)?.toggleCommentPopup(t,e,r)}makeCommentColor(t,e){return t&&l(this,en)?.makeCommentColor(t,e)||null}getCommentDialogElement(){return l(this,en)?.dialogElement||null}async waitForEditorsRendered(t){if(l(this,Sr).has(t-1))return;let{resolve:e,promise:r}=Promise.withResolvers(),i=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",i),e())};this._eventBus.on("editorsrendered",i),await r}getSignature(t){l(this,$a)?.getSignature({uiManager:this,editor:t})}get signatureManager(){return l(this,$a)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":C(this,Mh,e);break}}onPageChanging({pageNumber:t}){C(this,Fh,t-1)}focusMainContainer(){l(this,Co).focus()}findParent(t,e){for(let r of l(this,Sr).values()){let{x:i,y:o,width:s,height:a}=r.div.getBoundingClientRect();if(t>=i&&t<=i+s&&e>=o&&e<=o+a)return r}return null}disableUserSelect(t=!1){l(this,Qp).classList.toggle("noUserSelect",t)}addShouldRescale(t){l(this,uc).add(t)}removeShouldRescale(t){l(this,uc).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*la.PDF_TO_CSS_UNITS;for(let e of l(this,uc))e.onScaleChanging();l(this,ka)?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){let r=document.getSelection();if(!r||r.isCollapsed)return;let{anchorNode:i,anchorOffset:o,focusNode:s,focusOffset:a}=r,c=r.toString(),h=F(this,kt,by).call(this,r).closest(".textLayer"),f=this.getSelectionBoxes(h);if(!f)return;r.empty();let g=F(this,kt,C1).call(this,h),m=l(this,pr)===te.NONE,y=()=>{let b=g?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:f,anchorNode:i,anchorOffset:o,focusNode:s,focusOffset:a,text:c});m&&this.showAllEditors("highlight",!0,!0),e&&b?.editComment()};if(m){this.switchToMode(te.HIGHLIGHT,y);return}y()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!l(this,_i))return null;let e=`${_p}${t}`,r=l(this,_i).getRawValue(e);return r&&l(this,_i).remove(e),r}addToAnnotationStorage(t){!t.isEmpty()&&l(this,_i)&&!l(this,_i).has(t.id)&&l(this,_i).setValue(t.id,t)}a11yAlert(t,e=null){let r=l(this,tg);r&&(r.setAttribute("data-l10n-id",t),e?r.setAttribute("data-l10n-args",JSON.stringify(e)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,l(this,Fa)&&(C(this,Fa,!1),F(this,kt,np).call(this,"main_toolbar")),!this.hasSelection)return;let{activeElement:t}=document;for(let e of l(this,xe))if(e.div.contains(t)){C(this,hc,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!l(this,hc))return;let[t,e]=l(this,hc);C(this,hc,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){F(this,kt,T1).call(this),this.setEditingState(!0)}removeEditListeners(){F(this,kt,UO).call(this),this.setEditingState(!1)}dragOver(t){for(let{type:e}of t.dataTransfer.items)for(let r of l(this,Ti))if(r.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(let e of t.dataTransfer.items)for(let r of l(this,Ti))if(r.isHandlingMimeForPasting(e.type)){r.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),l(this,qn)?.commitOrRemove(),!this.hasSelection)return;let e=[];for(let r of l(this,xe)){let i=r.serialize(!0);i&&e.push(i)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();let{clipboardData:e}=t;for(let o of e.items)for(let s of l(this,Ti))if(s.isHandlingMimeForPasting(o.type)){s.paste(o,this.currentLayer);return}let r=e.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(o){ee(`paste: "${o.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();let i=this.currentLayer;try{let o=[];for(let c of r){let u=await i.deserialize(c);if(!u)return;o.push(u)}let s=()=>{for(let c of o)F(this,kt,D1).call(this,c);F(this,kt,R1).call(this,o)},a=()=>{for(let c of o)c.remove()};this.addCommands({cmd:s,undo:a,mustExec:!0})}catch(o){ee(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,pr)!==te.NONE&&!this.isEditorHandlingKeyboard&&Eh._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Fa)&&(C(this,Fa,!1),F(this,kt,np).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(F(this,kt,FO).call(this),F(this,kt,jO).call(this),F(this,kt,hn).call(this,{isEditing:l(this,pr)!==te.NONE,isEmpty:F(this,kt,ip).call(this),hasSomethingToUndo:l(this,Ci).hasSomethingToUndo(),hasSomethingToRedo:l(this,Ci).hasSomethingToRedo(),hasSelectedEditor:!1})):(F(this,kt,MO).call(this),F(this,kt,$O).call(this),F(this,kt,hn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!l(this,Ti)){C(this,Ti,t);for(let e of l(this,Ti))F(this,kt,wo).call(this,e.defaultPropertiesToUpdate)}}getId(){return l(this,Lv).id}get currentLayer(){return l(this,Sr).get(l(this,Fh))}getLayer(t){return l(this,Sr).get(t)}get currentPageIndex(){return l(this,Fh)}addLayer(t){l(this,Sr).set(t.pageIndex,t),l(this,Ma)?t.enable():t.disable()}removeLayer(t){l(this,Sr).delete(t.pageIndex)}async updateMode(t,e=null,r=!1,i=!1,o=!1,s=!1){if(l(this,pr)!==t&&!(l(this,Di)&&(await l(this,Di).promise,!l(this,Di)))){if(C(this,Di,Promise.withResolvers()),l(this,ka)?.commitOrRemove(),l(this,pr)===te.POPUP&&l(this,en)?.hideSidebar(),l(this,en)?.destroyPopup(),C(this,pr,t),t===te.NONE){this.setEditingState(!1),F(this,kt,HO).call(this);for(let a of l(this,tr).values())a.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),l(this,Di).resolve();return}for(let a of l(this,tr).values())a.addStandaloneCommentButton();t===te.SIGNATURE&&await l(this,$a)?.loadSignatures(),r&&Qr.clearPointerType(),this.setEditingState(!0),await F(this,kt,zO).call(this),this.unselectAll();for(let a of l(this,Sr).values())a.updateMode(t);if(t===te.POPUP){l(this,kh)||C(this,kh,await l(this,qh).getAnnotationsByType(new Set(l(this,Ti).map(u=>u._editorType))));let a=new Set,c=[];for(let u of l(this,tr).values()){let{annotationElementId:h,hasComment:f,deleted:g}=u;h&&a.add(h),f&&!g&&c.push(u.getData())}for(let u of l(this,kh)){let{id:h,popupRef:f,contentsObj:g}=u;f&&g?.str&&!a.has(h)&&!l(this,Ba).has(h)&&c.push(u)}l(this,en)?.showSidebar(c)}if(!e){i&&this.addNewEditorFromKeyboard(),l(this,Di).resolve();return}for(let a of l(this,tr).values())a.uid===e?(this.setSelected(a),s?a.editComment():o?a.enterInEditMode():a.focus()):a.unselect();l(this,Di).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==l(this,pr)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(l(this,Ti)){switch(t){case he.CREATE:this.currentLayer.addNewEditor(e);return;case he.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Jp)||C(this,Jp,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(let r of l(this,xe))r.updateParams(t,e);else for(let r of l(this,Ti))r.updateDefaultParams(t,e)}}showAllEditors(t,e,r=!1){for(let o of l(this,tr).values())o.editorType===t&&o.show(e);(l(this,Jp)?.get(he.HIGHLIGHT_SHOW_ALL)??!0)!==e&&F(this,kt,wo).call(this,[[he.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(l(this,Yp)!==t){C(this,Yp,t);for(let e of l(this,Sr).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(let e of l(this,tr).values())e.pageIndex===t&&(yield e)}getEditor(t){return l(this,tr).get(t)}addEditor(t){l(this,tr).set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(l(this,Ds)&&clearTimeout(l(this,Ds)),C(this,Ds,setTimeout(()=>{this.focusMainContainer(),C(this,Ds,null)},0))),l(this,tr).delete(t.id),t.annotationElementId&&l(this,ja)?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!l(this,Ba).has(t.annotationElementId))&&l(this,_i)?.remove(t.id)}addDeletedAnnotationElement(t){l(this,Ba).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return l(this,Ba).has(t)}removeDeletedAnnotationElement(t){l(this,Ba).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){l(this,qn)!==t&&(C(this,qn,t),t&&F(this,kt,wo).call(this,t.propertiesToUpdate))}updateUI(t){l(this,kt,WO)===t&&F(this,kt,wo).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){F(this,kt,wo).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(l(this,xe).has(t)){l(this,xe).delete(t),t.unselect(),F(this,kt,hn).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,xe).add(t),t.select(),F(this,kt,wo).call(this,t.propertiesToUpdate),F(this,kt,hn).call(this,{hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),l(this,ka)?.commitOrRemove();for(let e of l(this,xe))e!==t&&e.unselect();l(this,xe).clear(),l(this,xe).add(t),t.select(),F(this,kt,wo).call(this,t.propertiesToUpdate),F(this,kt,hn).call(this,{hasSelectedEditor:!0})}isSelected(t){return l(this,xe).has(t)}get firstSelectedEditor(){return l(this,xe).values().next().value}unselect(t){t.unselect(),l(this,xe).delete(t),F(this,kt,hn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,xe).size!==0}get isEnterHandled(){return l(this,xe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,Ci).undo(),F(this,kt,hn).call(this,{hasSomethingToUndo:l(this,Ci).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:F(this,kt,ip).call(this)}),this._editorUndoBar?.hide()}redo(){l(this,Ci).redo(),F(this,kt,hn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,Ci).hasSomethingToRedo(),isEmpty:F(this,kt,ip).call(this)})}addCommands(t){l(this,Ci).add(t),F(this,kt,hn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:F(this,kt,ip).call(this)})}cleanUndoStack(t){l(this,Ci).cleanType(t)}delete(){this.commitOrRemove();let t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;let e=t?[t]:[...l(this,xe)],r=()=>{this._editorUndoBar?.show(i,e.length===1?e[0].editorType:e.length);for(let o of e)o.remove()},i=()=>{for(let o of e)F(this,kt,D1).call(this,o)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){l(this,qn)?.commitOrRemove()}hasSomethingToControl(){return l(this,qn)||this.hasSelection}selectAll(){for(let t of l(this,xe))t.commit();F(this,kt,R1).call(this,l(this,tr).values())}unselectAll(){if(!(l(this,qn)&&(l(this,qn).commitOrRemove(),l(this,pr)!==te.NONE))&&!l(this,ka)?.commitOrRemove()&&this.hasSelection){for(let t of l(this,xe))t.unselect();l(this,xe).clear(),F(this,kt,hn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;l(this,za)[0]+=t,l(this,za)[1]+=e;let[i,o]=l(this,za),s=[...l(this,xe)],a=1e3;l(this,Is)&&clearTimeout(l(this,Is)),C(this,Is,setTimeout(()=>{C(this,Is,null),l(this,za)[0]=l(this,za)[1]=0,this.addCommands({cmd:()=>{for(let c of s)l(this,tr).has(c.id)&&(c.translateInPage(i,o),c.translationDone())},undo:()=>{for(let c of s)l(this,tr).has(c.id)&&(c.translateInPage(-i,-o),c.translationDone())},mustExec:!1})},a));for(let c of s)c.translateInPage(t,e),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),C(this,Ts,new Map);for(let t of l(this,xe))l(this,Ts).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,Ts))return!1;this.disableUserSelect(!1);let t=l(this,Ts);C(this,Ts,null);let e=!1;for(let[{x:i,y:o,pageIndex:s},a]of t)a.newX=i,a.newY=o,a.newPageIndex=s,e||(e=i!==a.savedX||o!==a.savedY||s!==a.savedPageIndex);if(!e)return!1;let r=(i,o,s,a)=>{if(l(this,tr).has(i.id)){let c=l(this,Sr).get(a);c?i._setParentAndPosition(c,o,s):(i.pageIndex=a,i.x=o,i.y=s)}};return this.addCommands({cmd:()=>{for(let[i,{newX:o,newY:s,newPageIndex:a}]of t)r(i,o,s,a)},undo:()=>{for(let[i,{savedX:o,savedY:s,savedPageIndex:a}]of t)r(i,o,s,a)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(l(this,Ts))for(let r of l(this,Ts).keys())r.drag(t,e)}rebuild(t){if(t.parent===null){let e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||l(this,xe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return l(this,qn)===t}getActive(){return l(this,qn)}getMode(){return l(this,pr)}isEditingMode(){return l(this,pr)!==te.NONE}get imageManager(){return Qt(this,"imageManager",new E1)}getSelectionBoxes(t){if(!t)return null;let e=document.getSelection();for(let u=0,h=e.rangeCount;u<h;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;let{x:r,y:i,width:o,height:s}=t.getBoundingClientRect(),a;switch(t.getAttribute("data-main-rotation")){case"90":a=(u,h,f,g)=>({x:(h-i)/s,y:1-(u+f-r)/o,width:g/s,height:f/o});break;case"180":a=(u,h,f,g)=>({x:1-(u+f-r)/o,y:1-(h+g-i)/s,width:f/o,height:g/s});break;case"270":a=(u,h,f,g)=>({x:1-(h+g-i)/s,y:(u-r)/o,width:g/s,height:f/o});break;default:a=(u,h,f,g)=>({x:(u-r)/o,y:(h-i)/s,width:f/o,height:g/s});break}let c=[];for(let u=0,h=e.rangeCount;u<h;u++){let f=e.getRangeAt(u);if(!f.collapsed)for(let{x:g,y:m,width:y,height:b}of f.getClientRects())y===0||b===0||c.push(a(g,m,y,b))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(l(this,Lh)||C(this,Lh,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){l(this,Lh)?.delete(t)}renderAnnotationElement(t){let e=l(this,Lh)?.get(t.data.id);if(!e)return;let r=l(this,_i).getRawValue(e);r&&(l(this,pr)===te.NONE&&!r.hasBeenModified||r.renderAnnotationElement(t))}setMissingCanvas(t,e,r){let i=l(this,ja)?.get(t);i&&(i.setCanvas(e,r),l(this,ja).delete(t))}addMissingCanvas(t,e){(l(this,ja)||C(this,ja,new Map)).set(t,e)}};Ph=new WeakMap,qn=new WeakMap,kh=new WeakMap,tr=new WeakMap,Sr=new WeakMap,Bh=new WeakMap,_i=new WeakMap,Lh=new WeakMap,Ci=new WeakMap,en=new WeakMap,Pa=new WeakMap,ka=new WeakMap,Fh=new WeakMap,Ba=new WeakMap,Ts=new WeakMap,Ti=new WeakMap,uc=new WeakMap,Gp=new WeakMap,Vp=new WeakMap,Mh=new WeakMap,Xp=new WeakMap,Ds=new WeakMap,La=new WeakMap,Uh=new WeakMap,Fa=new WeakMap,Rs=new WeakMap,Lv=new WeakMap,Ma=new WeakMap,jh=new WeakMap,Yp=new WeakMap,Ua=new WeakMap,hc=new WeakMap,$h=new WeakMap,ja=new WeakMap,Kp=new WeakMap,pr=new WeakMap,xe=new WeakMap,_o=new WeakMap,$a=new WeakMap,qa=new WeakMap,Jp=new WeakMap,qh=new WeakMap,Zp=new WeakMap,za=new WeakMap,Is=new WeakMap,Co=new WeakMap,Qp=new WeakMap,tg=new WeakMap,Di=new WeakMap,kt=new WeakSet,by=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},C1=function(t){let{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(let r of l(this,Sr).values())if(r.hasTextLayer(t))return r;return null},kO=function(){let t=document.getSelection();if(!t||t.isCollapsed)return;let r=F(this,kt,by).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(l(this,Rs)||C(this,Rs,new w1(this)),l(this,Rs).show(r,i,this.direction==="ltr"))},BO=function(){let t=document.getSelection();if(!t||t.isCollapsed){l(this,_o)&&(l(this,Rs)?.hide(),C(this,_o,null),F(this,kt,hn).call(this,{hasSelectedText:!1}));return}let{anchorNode:e}=t;if(e===l(this,_o))return;let i=F(this,kt,by).call(this,t).closest(".textLayer");if(!i){l(this,_o)&&(l(this,Rs)?.hide(),C(this,_o,null),F(this,kt,hn).call(this,{hasSelectedText:!1}));return}if(l(this,Rs)?.hide(),C(this,_o,e),F(this,kt,hn).call(this,{hasSelectedText:!0}),!(l(this,pr)!==te.HIGHLIGHT&&l(this,pr)!==te.NONE)&&(l(this,pr)===te.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),C(this,Fa,this.isShiftKeyDown),!this.isShiftKeyDown)){let o=l(this,pr)===te.HIGHLIGHT?F(this,kt,C1).call(this,i):null;if(o?.toggleDrawing(),l(this,jh)){let s=new AbortController,a=this.combinedSignal(s),c=u=>{u.type==="pointerup"&&u.button!==0||(s.abort(),o?.toggleDrawing(!0),u.type==="pointerup"&&F(this,kt,np).call(this,"main_toolbar"))};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})}else o?.toggleDrawing(!0),F(this,kt,np).call(this,"main_toolbar")}},np=function(t=""){l(this,pr)===te.HIGHLIGHT?this.highlightSelection(t):l(this,Gp)&&F(this,kt,kO).call(this)},LO=function(){document.addEventListener("selectionchange",F(this,kt,BO).bind(this),{signal:this._signal})},FO=function(){if(l(this,La))return;C(this,La,new AbortController);let t=this.combinedSignal(l(this,La));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},MO=function(){l(this,La)?.abort(),C(this,La,null)},T1=function(){if(l(this,Ua))return;C(this,Ua,new AbortController);let t=this.combinedSignal(l(this,Ua));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},UO=function(){l(this,Ua)?.abort(),C(this,Ua,null)},jO=function(){if(l(this,Pa))return;C(this,Pa,new AbortController);let t=this.combinedSignal(l(this,Pa));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},$O=function(){l(this,Pa)?.abort(),C(this,Pa,null)},qO=function(){let t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},hn=function(t){Object.entries(t).some(([r,i])=>l(this,Zp)[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,Zp),t)}),l(this,pr)===te.HIGHLIGHT&&t.hasSelectedEditor===!1&&F(this,kt,wo).call(this,[[he.HIGHLIGHT_FREE,!0]]))},wo=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},zO=async function(){if(!l(this,Ma)){C(this,Ma,!0);let t=[];for(let e of l(this,Sr).values())t.push(e.enable());await Promise.all(t);for(let e of l(this,tr).values())e.enable()}},HO=function(){if(this.unselectAll(),l(this,Ma)){C(this,Ma,!1);for(let t of l(this,Sr).values())t.disable();for(let t of l(this,tr).values())t.disable()}},D1=function(t){let e=l(this,Sr).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},WO=function(){let t=null;for(t of l(this,xe));return t},ip=function(){if(l(this,tr).size===0)return!0;if(l(this,tr).size===1)for(let t of l(this,tr).values())return t.isEmpty();return!1},R1=function(t){for(let e of l(this,xe))e.unselect();l(this,xe).clear();for(let e of t)e.isEmpty()||(l(this,xe).add(e),e.select());F(this,kt,hn).call(this,{hasSelectedEditor:this.hasSelection})},Dt(Eh,"TRANSLATE_SMALL",1),Dt(Eh,"TRANSLATE_BIG",10);wl=Eh,fn=class fn{constructor(t){O(this,as);O(this,Ir,null);O(this,Os,!1);O(this,Yi,null);O(this,zh,null);O(this,Ns,null);O(this,zn,null);O(this,Hh,!1);O(this,Ps,null);O(this,In,null);O(this,To,null);O(this,fc,null);O(this,ks,!1);C(this,In,t),C(this,ks,t._uiManager.useNewAltTextFlow),l(fn,Ha)||C(fn,Ha,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){fn._l10n??(fn._l10n=t)}async render(){let t=C(this,Yi,document.createElement("button"));t.className="altText",t.tabIndex="0";let e=C(this,zh,document.createElement("span"));t.append(e),l(this,ks)?(t.classList.add("new"),t.setAttribute("data-l10n-id",l(fn,Ha).missing),e.setAttribute("data-l10n-id",l(fn,Ha)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let r=l(this,In)._uiManager._signal;t.addEventListener("contextmenu",hi,{signal:r}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:r});let i=o=>{o.preventDefault(),l(this,In)._uiManager.editAltText(l(this,In)),l(this,ks)&&l(this,In)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,as,sp)}})};return t.addEventListener("click",i,{capture:!0,signal:r}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(C(this,Hh,!0),i(o))},{signal:r}),await F(this,as,wy).call(this),t}finish(){l(this,Yi)&&(l(this,Yi).focus({focusVisible:l(this,Hh)}),C(this,Hh,!1))}isEmpty(){return l(this,ks)?l(this,Ir)===null:!l(this,Ir)&&!l(this,Os)}hasData(){return l(this,ks)?l(this,Ir)!==null||!!l(this,To):this.isEmpty()}get guessedText(){return l(this,To)}async setGuessedText(t){l(this,Ir)===null&&(C(this,To,t),C(this,fc,await fn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),F(this,as,wy).call(this))}toggleAltTextBadge(t=!1){if(!l(this,ks)||l(this,Ir)){l(this,Ps)?.remove(),C(this,Ps,null);return}if(!l(this,Ps)){let e=C(this,Ps,document.createElement("div"));e.className="noAltTextBadge",l(this,In).div.append(e)}l(this,Ps).classList.toggle("hidden",!t)}serialize(t){let e=l(this,Ir);return!t&&l(this,To)===e&&(e=l(this,fc)),{altText:e,decorative:l(this,Os),guessedText:l(this,To),textWithDisclaimer:l(this,fc)}}get data(){return{altText:l(this,Ir),decorative:l(this,Os)}}set data({altText:t,decorative:e,guessedText:r,textWithDisclaimer:i,cancel:o=!1}){r&&(C(this,To,r),C(this,fc,i)),!(l(this,Ir)===t&&l(this,Os)===e)&&(o||(C(this,Ir,t),C(this,Os,e)),F(this,as,wy).call(this))}toggle(t=!1){l(this,Yi)&&(!t&&l(this,zn)&&(clearTimeout(l(this,zn)),C(this,zn,null)),l(this,Yi).disabled=!t)}shown(){l(this,In)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,as,sp)}})}destroy(){l(this,Yi)?.remove(),C(this,Yi,null),C(this,zh,null),C(this,Ns,null),l(this,Ps)?.remove(),C(this,Ps,null)}};Ir=new WeakMap,Os=new WeakMap,Yi=new WeakMap,zh=new WeakMap,Ns=new WeakMap,zn=new WeakMap,Hh=new WeakMap,Ps=new WeakMap,In=new WeakMap,To=new WeakMap,fc=new WeakMap,ks=new WeakMap,Ha=new WeakMap,as=new WeakSet,sp=function(){return l(this,Ir)&&"added"||l(this,Ir)===null&&this.guessedText&&"review"||"missing"},wy=async function(){let t=l(this,Yi);if(!t)return;if(l(this,ks)){if(t.classList.toggle("done",!!l(this,Ir)),t.setAttribute("data-l10n-id",l(fn,Ha)[l(this,as,sp)]),l(this,zh)?.setAttribute("data-l10n-id",l(fn,Ha)[`${l(this,as,sp)}-label`]),!l(this,Ir)){l(this,Ns)?.remove();return}}else{if(!l(this,Ir)&&!l(this,Os)){t.classList.remove("done"),l(this,Ns)?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=l(this,Ns);if(!e){C(this,Ns,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${l(this,In).id}`;let i=100,o=l(this,In)._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(l(this,zn)),C(this,zn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{C(this,zn,setTimeout(()=>{C(this,zn,null),l(this,Ns).classList.add("show"),l(this,In)._reportTelemetry({action:"alt_text_tooltip"})},i))},{signal:o}),t.addEventListener("mouseleave",()=>{l(this,zn)&&(clearTimeout(l(this,zn)),C(this,zn,null)),l(this,Ns)?.classList.remove("show")},{signal:o})}l(this,Os)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=l(this,Ir)),e.parentNode||t.append(e),l(this,In).getElementForAltText()?.setAttribute("aria-describedby",e.id)},O(fn,Ha,null),Dt(fn,"_l10n",null);tv=fn,Ah=class{constructor(t){O(this,rg);O(this,$r,null);O(this,Ri,null);O(this,dc,!1);O(this,je,null);O(this,eg,null);O(this,pc,null);O(this,Ki,null);O(this,gc,null);O(this,mc,!1);O(this,yc,null);C(this,je,t)}renderForToolbar(){let t=C(this,Ri,document.createElement("button"));return t.className="comment",F(this,rg,I1).call(this,t,!1)}renderForStandalone(){let t=C(this,$r,document.createElement("button"));t.className="annotationCommentButton";let e=l(this,je).commentButtonPosition;if(e){let{style:r}=t;r.insetInlineEnd=`calc(${100*(l(this,je)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,r.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;let i=l(this,je).commentButtonColor;i&&(r.backgroundColor=i)}return F(this,rg,I1).call(this,t,!0)}focusButton(){setTimeout(()=>{(l(this,$r)??l(this,Ri))?.focus()},0)}onUpdatedColor(){if(!l(this,$r))return;let t=l(this,je).commentButtonColor;t&&(l(this,$r).style.backgroundColor=t),l(this,je)._uiManager.updatePopupColor(l(this,je))}get commentButtonWidth(){return(l(this,$r)?.getBoundingClientRect().width??0)/l(this,je).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(l(this,yc))return l(this,yc);if(!l(this,$r))return null;let{x:t,y:e,height:r}=l(this,$r).getBoundingClientRect(),{x:i,y:o,width:s,height:a}=l(this,je).parent.boundingClientRect;return[(t-i)/s,(e+r-o)/a]}set commentPopupPositionInLayer(t){C(this,yc,t)}hasDefaultPopupPosition(){return l(this,yc)===null}removeStandaloneCommentButton(){l(this,$r)?.remove(),C(this,$r,null)}removeToolbarCommentButton(){l(this,Ri)?.remove(),C(this,Ri,null)}setCommentButtonStates({selected:t,hasPopup:e}){l(this,$r)&&(l(this,$r).classList.toggle("selected",t),l(this,$r).ariaExpanded=e)}edit(t){let e=this.commentPopupPositionInLayer,r,i;if(e)[r,i]=e;else{[r,i]=l(this,je).commentButtonPosition;let{width:h,height:f,x:g,y:m}=l(this,je);r=g+r*h,i=m+i*f}let o=l(this,je).parent.boundingClientRect,{x:s,y:a,width:c,height:u}=o;l(this,je)._uiManager.editComment(l(this,je),s+r*c,a+i*u,{...t,parentDimensions:o})}finish(){l(this,Ri)&&(l(this,Ri).focus({focusVisible:l(this,dc)}),C(this,dc,!1))}isDeleted(){return l(this,mc)||l(this,Ki)===""}isEmpty(){return l(this,Ki)===null}hasBeenEdited(){return this.isDeleted()||l(this,Ki)!==l(this,eg)}serialize(){return this.data}get data(){return{text:l(this,Ki),richText:l(this,pc),date:l(this,gc),deleted:this.isDeleted()}}set data(t){if(t!==l(this,Ki)&&C(this,pc,null),t===null){C(this,Ki,""),C(this,mc,!0);return}C(this,Ki,t),C(this,gc,new Date),C(this,mc,!1)}setInitialText(t,e=null){C(this,eg,t),this.data=t,C(this,gc,null),C(this,pc,e)}shown(){}destroy(){l(this,Ri)?.remove(),C(this,Ri,null),l(this,$r)?.remove(),C(this,$r,null),C(this,Ki,""),C(this,pc,null),C(this,gc,null),C(this,je,null),C(this,dc,!1),C(this,mc,!1)}};$r=new WeakMap,Ri=new WeakMap,dc=new WeakMap,je=new WeakMap,eg=new WeakMap,pc=new WeakMap,Ki=new WeakMap,gc=new WeakMap,mc=new WeakMap,yc=new WeakMap,rg=new WeakSet,I1=function(t,e){if(!l(this,je)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[l(this,je)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));let r=l(this,je)._uiManager._signal;if(!(r instanceof AbortSignal)||r.aborted)return t;t.addEventListener("contextmenu",hi,{signal:r}),e&&(t.addEventListener("focusin",o=>{l(this,je)._focusEventsAllowed=!1,Je(o)},{capture:!0,signal:r}),t.addEventListener("focusout",o=>{l(this,je)._focusEventsAllowed=!0,Je(o)},{capture:!0,signal:r})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:r});let i=o=>{o.preventDefault(),t===l(this,Ri)?this.edit():l(this,je).toggleComment(!0)};return t.addEventListener("click",i,{capture:!0,signal:r}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(C(this,dc,!0),i(o))},{signal:r}),t.addEventListener("pointerenter",()=>{l(this,je).toggleComment(!1,!0)},{signal:r}),t.addEventListener("pointerleave",()=>{l(this,je).toggleComment(!1,!1)},{signal:r}),t};Yx=class Yx{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:o=null,onPinchEnd:s=null,signal:a}){O(this,Al);O(this,Wh);O(this,vc,!1);O(this,ng,null);O(this,ig);O(this,sg);O(this,og);O(this,ag);O(this,Do,null);O(this,bc);O(this,Ro,null);O(this,wc);O(this,Io,null);C(this,Wh,t),C(this,ng,r),C(this,ig,e),C(this,sg,i),C(this,og,o),C(this,ag,s),C(this,wc,new AbortController),C(this,bc,AbortSignal.any([a,l(this,wc).signal])),t.addEventListener("touchstart",F(this,Al,GO).bind(this),{passive:!1,signal:l(this,bc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ys.pixelRatio}destroy(){l(this,wc)?.abort(),C(this,wc,null),l(this,Do)?.abort(),C(this,Do,null)}};Wh=new WeakMap,vc=new WeakMap,ng=new WeakMap,ig=new WeakMap,sg=new WeakMap,og=new WeakMap,ag=new WeakMap,Do=new WeakMap,bc=new WeakMap,Ro=new WeakMap,wc=new WeakMap,Io=new WeakMap,Al=new WeakSet,GO=function(t){var i,o,s;if((i=l(this,ig))!=null&&i.call(this))return;if(t.touches.length===1){if(l(this,Do))return;let a=C(this,Do,new AbortController),c=AbortSignal.any([l(this,bc),a.signal]),u=l(this,Wh),h={capture:!0,signal:c,passive:!1},f=g=>{g.pointerType==="touch"&&(l(this,Do)?.abort(),C(this,Do,null))};u.addEventListener("pointerdown",g=>{g.pointerType==="touch"&&(Je(g),f(g))},h),u.addEventListener("pointerup",f,h),u.addEventListener("pointercancel",f,h);return}if(!l(this,Io)){C(this,Io,new AbortController);let a=AbortSignal.any([l(this,bc),l(this,Io).signal]),c=l(this,Wh),u={signal:a,capture:!1,passive:!1};c.addEventListener("touchmove",F(this,Al,VO).bind(this),u);let h=F(this,Al,XO).bind(this);c.addEventListener("touchend",h,u),c.addEventListener("touchcancel",h,u),u.capture=!0,c.addEventListener("pointerdown",Je,u),c.addEventListener("pointermove",Je,u),c.addEventListener("pointercancel",Je,u),c.addEventListener("pointerup",Je,u),(o=l(this,sg))==null||o.call(this)}if(Je(t),t.touches.length!==2||(s=l(this,ng))!=null&&s.call(this)){C(this,Ro,null);return}let[e,r]=t.touches;e.identifier>r.identifier&&([e,r]=[r,e]),C(this,Ro,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:r.screenX,touch1Y:r.screenY})},VO=function(t){var D;if(!l(this,Ro)||t.touches.length!==2)return;Je(t);let[e,r]=t.touches;e.identifier>r.identifier&&([e,r]=[r,e]);let{screenX:i,screenY:o}=e,{screenX:s,screenY:a}=r,c=l(this,Ro),{touch0X:u,touch0Y:h,touch1X:f,touch1Y:g}=c,m=f-u,y=g-h,b=s-i,v=a-o,w=Math.hypot(b,v)||1,x=Math.hypot(m,y)||1;if(!l(this,vc)&&Math.abs(x-w)<=Yx.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=o,c.touch1X=s,c.touch1Y=a,!l(this,vc)){C(this,vc,!0);return}let E=[(i+s)/2,(o+a)/2];(D=l(this,og))==null||D.call(this,E,x,w)},XO=function(t){var e;t.touches.length>=2||(l(this,Io)&&(l(this,Io).abort(),C(this,Io,null),(e=l(this,ag))==null||e.call(this)),l(this,Ro)&&(Je(t),C(this,Ro,null),C(this,vc,!1)))};Rp=Yx,re=class re{constructor(t){O(this,Kt);O(this,Ac,null);O(this,Ji,null);O(this,We,null);O(this,Be,null);O(this,Oo,null);O(this,Gh,!1);O(this,Wa,null);O(this,lg,"");O(this,qr,null);O(this,xc,null);O(this,No,null);O(this,Ii,null);O(this,Ga,null);O(this,cg,"");O(this,Ec,!1);O(this,Hn,null);O(this,ug,!1);O(this,Sc,!1);O(this,Po,!1);O(this,Bs,null);O(this,Vh,0);O(this,Xh,0);O(this,Oi,null);O(this,_c,null);Dt(this,"isSelected",!1);Dt(this,"_isCopy",!1);Dt(this,"_editToolbar",null);Dt(this,"_initialOptions",Object.create(null));Dt(this,"_initialData",null);Dt(this,"_isVisible",!0);Dt(this,"_uiManager",null);Dt(this,"_focusEventsAllowed",!0);O(this,hg,!1);O(this,Fv,re._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;let{rotation:e,rawDims:{pageWidth:r,pageHeight:i,pageX:o,pageY:s}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[o,s];let[a,c]=this.parentDimensions;this.x=t.x/a,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){let t=re.prototype._resizeWithKeyboard,e=wl.TRANSLATE_SMALL,r=wl.TRANSLATE_BIG;return Qt(this,"_resizerKeyboardManager",new Eu([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,r]}],[["Escape","mac+Escape"],re.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Qt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){let e=new M1({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(re._l10n??(re._l10n=t),re._l10nResizer||(re._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),re._borderLineWidth!==-1)return;let r=getComputedStyle(document.documentElement);re._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Me("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,hg)}set _isDraggable(t){C(this,hg,t),this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){let[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,Fv)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(F(this,Kt,op).call(this),l(this,Ii)?.remove(),C(this,Ii,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(l(this,Ec)?C(this,Ec,!1):this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,r,i){let[o,s]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(t+r)/o,this.y=(e+i)/s,this.fixAndSetPosition()}_moveAfterPaste(t,e){let[r,i]=this.parentDimensions;this.setAt(t*r,e*i,this.width*r,this.height*i),this._onTranslated()}translate(t,e){F(this,Kt,O1).call(this,this.parentDimensions,t,e)}translateInPage(t,e){l(this,Hn)||C(this,Hn,[this.x,this.y,this.width,this.height]),F(this,Kt,O1).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){l(this,Hn)||C(this,Hn,[this.x,this.y,this.width,this.height]);let{div:r,parentDimensions:[i,o]}=this;if(this.x+=t/i,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:f,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:a}=this,[c,u]=this.getBaseTranslation();s+=c,a+=u;let{style:h}=r;h.left=`${(100*s).toFixed(2)}%`,h.top=`${(100*a).toFixed(2)}%`,this._onTranslating(s,a),r.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!l(this,Hn)&&(l(this,Hn)[0]!==this.x||l(this,Hn)[1]!==this.y)}get _hasBeenResized(){return!!l(this,Hn)&&(l(this,Hn)[2]!==this.width||l(this,Hn)[3]!==this.height)}getBaseTranslation(){let[t,e]=this.parentDimensions,{_borderLineWidth:r}=re,i=r/t,o=r/e;switch(this.rotation){case 90:return[-i,o];case 180:return[i,o];case 270:return[i,-o];default:return[-i,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){let{div:{style:e},pageDimensions:[r,i]}=this,{x:o,y:s,width:a,height:c}=this;if(a*=r,c*=i,o*=r,s*=i,this._mustFixPosition)switch(t){case 0:o=on(o,0,r-a),s=on(s,0,i-c);break;case 90:o=on(o,0,r-c),s=on(s,a,i);break;case 180:o=on(o,a,r),s=on(s,c,i);break;case 270:o=on(o,c,r),s=on(s,0,i-a);break}this.x=o/=r,this.y=s/=i;let[u,h]=this.getBaseTranslation();o+=u,s+=h,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var r;return F(r=re,fg,N1).call(r,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var r;return F(r=re,fg,N1).call(r,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:t,pageDimensions:[e,r]}=this;return[e*t,r*t]}setDims(){let{div:{style:t},width:e,height:r}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*r).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){l(this,We)?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||l(this,Sc))return this._editToolbar;this._editToolbar=new b1(this),this.div.append(this._editToolbar.render());let{toolbarButtons:t}=this;if(t)for(let[e,r]of t)await this._editToolbar.addButton(e,r);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,l(this,We)?.destroy()}addContainer(t){let e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return l(this,We)||(tv.initialize(re._l10n),C(this,We,new tv(this)),l(this,Ac)&&(l(this,We).data=l(this,Ac),C(this,Ac,null))),l(this,We)}get altTextData(){return l(this,We)?.data}set altTextData(t){l(this,We)&&(l(this,We).data=t)}get guessedAltText(){return l(this,We)?.guessedText}async setGuessedAltText(t){await l(this,We)?.setGuessedText(t)}serializeAltText(t){return l(this,We)?.serialize(t)}hasAltText(){return!!l(this,We)&&!l(this,We).isEmpty()}hasAltTextData(){return l(this,We)?.hasData()??!1}focusCommentButton(){l(this,Be)?.focusButton()}addCommentButton(){return this.canAddComment?l(this,Be)||C(this,Be,new Ah(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(l(this,Oo)){this._uiManager.isEditingMode()&&l(this,Oo).classList.remove("hidden");return}this.hasComment&&(C(this,Oo,l(this,Be).renderForStandalone()),this.div.append(l(this,Oo)))}}removeStandaloneCommentButton(){l(this,Be).removeStandaloneCommentButton(),C(this,Oo,null)}hideStandaloneCommentButton(){l(this,Oo)?.classList.add("hidden")}get comment(){let{data:{richText:t,text:e,date:r,deleted:i}}=l(this,Be);return{text:e,richText:t,date:r,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){l(this,Be)||C(this,Be,new Ah(this)),l(this,Be).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:r}){if(!e||(l(this,Be)||C(this,Be,new Ah(this)),l(this,Be).setInitialText(t,r),!this.annotationElementId))return;let i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return l(this,Be)?.hasBeenEdited()}get hasDeletedComment(){return l(this,Be)?.isDeleted()}get hasComment(){return!!l(this,Be)&&!l(this,Be).isEmpty()&&!l(this,Be).isDeleted()}async editComment(t){l(this,Be)||C(this,Be,new Ah(this)),l(this,Be).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){l(this,Be).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){let[,,,i]=t.rect,[o]=this.pageDimensions,[s]=this.pageTranslation,a=s+o+1,c=i-100,u=a+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,c,u,i]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){l(this,Be).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){let t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=l(this,Gh)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),F(this,Kt,L1).call(this);let[e,r]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*r/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/r).toFixed(2)}%`);let[i,o]=this.getInitialTranslation();return this.translate(i,o),NO(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,_c)||C(this,_c,new Rp({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:F(this,Kt,JO).bind(this),onPinching:F(this,Kt,ZO).bind(this),onPinchEnd:F(this,Kt,QO).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}pointerdown(t){let{isMac:e}=sr.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(C(this,Ec,!0),this._isDraggable){F(this,Kt,tN).call(this,t);return}F(this,Kt,B1).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,Bs)&&clearTimeout(l(this,Bs)),C(this,Bs,setTimeout(()=>{C(this,Bs,null),this.parent?.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,r){t.changeParent(this),this.x=e,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,r=this.rotation){let i=this.parentScale,[o,s]=this.pageDimensions,[a,c]=this.pageTranslation,u=t/i,h=e/i,f=this.x*o,g=this.y*s,m=this.width*o,y=this.height*s;switch(r){case 0:return[f+u+a,s-g-h-y+c,f+u+m+a,s-g-h+c];case 90:return[f+h+a,s-g+u+c,f+h+y+a,s-g+u+m+c];case 180:return[f-u-m+a,s-g+h+c,f-u+a,s-g+h+y+c];case 270:return[f-h-y+a,s-g-u-m+c,f-h+a,s-g-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){let[r,i,o,s]=t,a=o-r,c=s-i;switch(this.rotation){case 0:return[r,e-s,a,c];case 90:return[r,e-i,c,a];case 180:return[o,e-i,a,c];case 270:return[o,e-s,c,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&re._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){l(this,Be)?.onUpdatedColor()}getData(){let{comment:{text:t,color:e,date:r,opacity:i,deleted:o,richText:s},uid:a,pageIndex:c,creationDate:u,modificationDate:h}=this;return{id:a,pageIndex:c,rect:this.getPDFRect(),richText:s,contentsObj:{str:t},creationDate:u,modificationDate:r||h,popupRef:!o,color:e,opacity:i}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),C(this,Sc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),C(this,Sc,!1),!0):!1}isInEditMode(){return l(this,Sc)}shouldGetKeyboardEvents(){return l(this,Po)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){let{top:t,left:e,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:o,innerWidth:s}=window;return e<s&&i>0&&t<o&&r>0}rebuild(){F(this,Kt,L1).call(this)}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,r){let i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:r,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});i.rotation=t.rotation,C(i,Ac,t.accessibilityData),i._isCopy=t.isCopy||!1;let[o,s]=i.pageDimensions,[a,c,u,h]=i.getRectInCurrentCoords(t.rect,s);return i.x=a/o,i.y=c/s,i.width=u/o,i.height=h/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(l(this,Ga)?.abort(),C(this,Ga,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),l(this,Bs)&&(clearTimeout(l(this,Bs)),C(this,Bs,null)),F(this,Kt,op).call(this),this.removeEditToolbar(),l(this,Oi)){for(let t of l(this,Oi).values())clearTimeout(t);C(this,Oi,null)}this.parent=null,l(this,_c)?.destroy(),C(this,_c,null),l(this,Ii)?.remove(),C(this,Ii,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(F(this,Kt,YO).call(this),l(this,qr).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){let{commentButtonPosition:[t,e]}=this,[r,i,o,s]=this.getPDFRect();return[re._round(r+(o-r)*t),re._round(i+(s-i)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return l(this,Be).commentPopupPositionInLayer}set commentPopupPosition(t){l(this,Be).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return l(this,Be).hasDefaultPopupPosition()}get commentButtonWidth(){return l(this,Be).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){l(this,Be)?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),C(this,No,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});let e=l(this,qr).children;if(!l(this,Ji)){C(this,Ji,Array.from(e));let s=F(this,Kt,eN).bind(this),a=F(this,Kt,rN).bind(this),c=this._uiManager._signal;for(let u of l(this,Ji)){let h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",s,{signal:c}),u.addEventListener("blur",a,{signal:c}),u.addEventListener("focus",F(this,Kt,nN).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",re._l10nResizer[h])}}let r=l(this,Ji)[0],i=0;for(let s of e){if(s===r)break;i++}let o=(360-this.rotation+this.parentRotation)%360/90*(l(this,Ji).length/4);if(o!==i){if(o<i)for(let a=0;a<i-o;a++)l(this,qr).append(l(this,qr).firstElementChild);else if(o>i)for(let a=0;a<o-i;a++)l(this,qr).firstElementChild.before(l(this,qr).lastElementChild);let s=0;for(let a of e){let u=l(this,Ji)[s++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",re._l10nResizer[u])}}F(this,Kt,F1).call(this,0),C(this,Po,!0),l(this,qr).firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){l(this,Po)&&F(this,Kt,k1).call(this,l(this,cg),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){F(this,Kt,op).call(this),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),l(this,We)?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,l(this,qr)?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),l(this,We)?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return l(this,ug)}set isEditing(t){C(this,ug,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){l(this,Oi)||C(this,Oi,new Map);let{action:r}=t,i=l(this,Oi).get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),l(this,Oi).delete(r),l(this,Oi).size===0&&C(this,Oi,null)},re._telemetryTimeout),l(this,Oi).set(r,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),C(this,Gh,!1)}disable(){this.div&&(this.div.tabIndex=-1),C(this,Gh,!0)}updateFakeAnnotationElement(t){if(!l(this,Ii)&&!this.deleted){C(this,Ii,t.addFakeAnnotation(this));return}if(this.deleted){l(this,Ii).remove(),C(this,Ii,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&l(this,Ii).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){let r=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),r.before(e)}return e}resetAnnotationElement(t){let{firstElementChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Ac=new WeakMap,Ji=new WeakMap,We=new WeakMap,Be=new WeakMap,Oo=new WeakMap,Gh=new WeakMap,Wa=new WeakMap,lg=new WeakMap,qr=new WeakMap,xc=new WeakMap,No=new WeakMap,Ii=new WeakMap,Ga=new WeakMap,cg=new WeakMap,Ec=new WeakMap,Hn=new WeakMap,ug=new WeakMap,Sc=new WeakMap,Po=new WeakMap,Bs=new WeakMap,Vh=new WeakMap,Xh=new WeakMap,Oi=new WeakMap,_c=new WeakMap,hg=new WeakMap,Fv=new WeakMap,Kt=new WeakSet,O1=function([t,e],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},fg=new WeakSet,N1=function(t,e,r){switch(r){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Ay=function(t){switch(t){case 90:{let[e,r]=this.pageDimensions;return[0,-e/r,r/e,0]}case 180:return[-1,0,0,-1];case 270:{let[e,r]=this.pageDimensions;return[0,e/r,-r/e,0]}default:return[1,0,0,1]}},YO=function(){if(l(this,qr))return;C(this,qr,document.createElement("div")),l(this,qr).classList.add("resizers");let t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(let r of t){let i=document.createElement("div");l(this,qr).append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",F(this,Kt,KO).bind(this,r),{signal:e}),i.addEventListener("contextmenu",hi,{signal:e}),i.tabIndex=-1}this.div.prepend(l(this,qr))},KO=function(t,e){e.preventDefault();let{isMac:r}=sr.platform;if(e.button!==0||e.ctrlKey&&r)return;l(this,We)?.toggle(!1);let i=this._isDraggable;this._isDraggable=!1,C(this,xc,[e.screenX,e.screenY]);let o=new AbortController,s=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",F(this,Kt,k1).bind(this,t),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",Je,{passive:!1,signal:s}),window.addEventListener("contextmenu",hi,{signal:s}),C(this,No,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});let a=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;let u=()=>{o.abort(),this.parent.togglePointerEvents(!0),l(this,We)?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=c,F(this,Kt,xy).call(this)};window.addEventListener("pointerup",u,{signal:s}),window.addEventListener("blur",u,{signal:s})},P1=function(t,e,r,i){this.width=r,this.height=i,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},xy=function(){if(!l(this,No))return;let{savedX:t,savedY:e,savedWidth:r,savedHeight:i}=l(this,No);C(this,No,null);let o=this.x,s=this.y,a=this.width,c=this.height;o===t&&s===e&&a===r&&c===i||this.addCommands({cmd:F(this,Kt,P1).bind(this,o,s,a,c),undo:F(this,Kt,P1).bind(this,t,e,r,i),mustExec:!0})},k1=function(t,e){let[r,i]=this.parentDimensions,o=this.x,s=this.y,a=this.width,c=this.height,u=re.MIN_SIZE/r,h=re.MIN_SIZE/i,f=F(this,Kt,Ay).call(this,this.rotation),g=(J,R)=>[f[0]*J+f[2]*R,f[1]*J+f[3]*R],m=F(this,Kt,Ay).call(this,360-this.rotation),y=(J,R)=>[m[0]*J+m[2]*R,m[1]*J+m[3]*R],b,v,w=!1,x=!1;switch(t){case"topLeft":w=!0,b=(J,R)=>[0,0],v=(J,R)=>[J,R];break;case"topMiddle":b=(J,R)=>[J/2,0],v=(J,R)=>[J/2,R];break;case"topRight":w=!0,b=(J,R)=>[J,0],v=(J,R)=>[0,R];break;case"middleRight":x=!0,b=(J,R)=>[J,R/2],v=(J,R)=>[0,R/2];break;case"bottomRight":w=!0,b=(J,R)=>[J,R],v=(J,R)=>[0,0];break;case"bottomMiddle":b=(J,R)=>[J/2,R],v=(J,R)=>[J/2,0];break;case"bottomLeft":w=!0,b=(J,R)=>[0,R],v=(J,R)=>[J,0];break;case"middleLeft":x=!0,b=(J,R)=>[0,R/2],v=(J,R)=>[J,R/2];break}let E=b(a,c),D=v(a,c),_=g(...D),q=re._round(o+_[0]),N=re._round(s+_[1]),rt=1,Y=1,et,st;if(e.fromKeyboard)({deltaX:et,deltaY:st}=e);else{let{screenX:J,screenY:R}=e,[T,L]=l(this,xc);[et,st]=this.screenToPageTranslation(J-T,R-L),l(this,xc)[0]=J,l(this,xc)[1]=R}if([et,st]=y(et/r,st/i),w){let J=Math.hypot(a,c);rt=Y=Math.max(Math.min(Math.hypot(D[0]-E[0]-et,D[1]-E[1]-st)/J,1/a,1/c),u/a,h/c)}else x?rt=on(Math.abs(D[0]-E[0]-et),u,1)/a:Y=on(Math.abs(D[1]-E[1]-st),h,1)/c;let lt=re._round(a*rt),at=re._round(c*Y);_=g(...v(lt,at));let X=q-_[0],ct=N-_[1];l(this,Hn)||C(this,Hn,[this.x,this.y,this.width,this.height]),this.width=lt,this.height=at,this.x=X,this.y=ct,this.setDims(),this.fixAndSetPosition(),this._onResizing()},JO=function(){C(this,No,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),l(this,We)?.toggle(!1),this.parent.togglePointerEvents(!1)},ZO=function(t,e,r){let o=.7*(r/e)+1-.7;if(o===1)return;let s=F(this,Kt,Ay).call(this,this.rotation),a=(q,N)=>[s[0]*q+s[2]*N,s[1]*q+s[3]*N],[c,u]=this.parentDimensions,h=this.x,f=this.y,g=this.width,m=this.height,y=re.MIN_SIZE/c,b=re.MIN_SIZE/u;o=Math.max(Math.min(o,1/g,1/m),y/g,b/m);let v=re._round(g*o),w=re._round(m*o);if(v===g&&w===m)return;l(this,Hn)||C(this,Hn,[h,f,g,m]);let x=a(g/2,m/2),E=re._round(h+x[0]),D=re._round(f+x[1]),_=a(v/2,w/2);this.x=E-_[0],this.y=D-_[1],this.width=v,this.height=w,this.setDims(),this.fixAndSetPosition(),this._onResizing()},QO=function(){l(this,We)?.toggle(!0),this.parent.togglePointerEvents(!0),F(this,Kt,xy).call(this)},B1=function(t){let{isMac:e}=sr.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},tN=function(t){let{isSelected:e}=this;this._uiManager.setUpDragSession();let r=!1,i=new AbortController,o=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:o},a=u=>{i.abort(),C(this,Wa,null),C(this,Ec,!1),this._uiManager.endDragSession()||F(this,Kt,B1).call(this,u),r&&this._onStopDragging()};e&&(C(this,Vh,t.clientX),C(this,Xh,t.clientY),C(this,Wa,t.pointerId),C(this,lg,t.pointerType),window.addEventListener("pointermove",u=>{r||(r=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());let{clientX:h,clientY:f,pointerId:g}=u;if(g!==l(this,Wa)){Je(u);return}let[m,y]=this.screenToPageTranslation(h-l(this,Vh),f-l(this,Xh));C(this,Vh,h),C(this,Xh,f),this._uiManager.dragSelectedEditors(m,y)},s),window.addEventListener("touchmove",Je,s),window.addEventListener("pointerdown",u=>{u.pointerType===l(this,lg)&&(l(this,_c)||u.isPrimary)&&a(u),Je(u)},s));let c=u=>{if(!l(this,Wa)||l(this,Wa)===u.pointerId){a(u);return}Je(u)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})},L1=function(){if(l(this,Ga)||!this.div)return;C(this,Ga,new AbortController);let t=this._uiManager.combinedSignal(l(this,Ga));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},eN=function(t){re._resizerKeyboardManager.exec(this,t)},rN=function(t){l(this,Po)&&t.relatedTarget?.parentNode!==l(this,qr)&&F(this,Kt,op).call(this)},nN=function(t){C(this,cg,l(this,Po)?t:"")},F1=function(t){if(l(this,Ji))for(let e of l(this,Ji))e.tabIndex=t},op=function(){C(this,Po,!1),F(this,Kt,F1).call(this,-1),F(this,Kt,xy).call(this)},O(re,fg),Dt(re,"_l10n",null),Dt(re,"_l10nResizer",null),Dt(re,"_borderLineWidth",-1),Dt(re,"_colorManager",new _1),Dt(re,"_zIndex",1),Dt(re,"_telemetryTimeout",1e3);$e=re,M1=class extends $e{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}},rO=3285377520,Ai=4294901760,_s=65535,ev=class{constructor(t){this.h1=t?t&4294967295:rO,this.h2=t?t&4294967295:rO}update(t){let e,r;if(typeof t=="string"){e=new Uint8Array(t.length*2),r=0;for(let b=0,v=t.length;b<v;b++){let w=t.charCodeAt(b);w<=255?e[r++]=w:(e[r++]=w>>>8,e[r++]=w&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),r=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");let i=r>>2,o=r-i*4,s=new Uint32Array(e.buffer,0,i),a=0,c=0,u=this.h1,h=this.h2,f=3432918353,g=461845907,m=f&_s,y=g&_s;for(let b=0;b<i;b++)b&1?(a=s[b],a=a*f&Ai|a*m&_s,a=a<<15|a>>>17,a=a*g&Ai|a*y&_s,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(c=s[b],c=c*f&Ai|c*m&_s,c=c<<15|c>>>17,c=c*g&Ai|c*y&_s,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(a=0,o){case 3:a^=e[i*4+2]<<16;case 2:a^=e[i*4+1]<<8;case 1:a^=e[i*4],a=a*f&Ai|a*m&_s,a=a<<15|a>>>17,a=a*g&Ai|a*y&_s,i&1?u^=a:h^=a}this.h1=u,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Ai|t*36045&_s,e=e*4283543511&Ai|((e<<16|t>>>16)*2950163797&Ai)>>>16,t^=e>>>1,t=t*444984403&Ai|t*60499&_s,e=e*3301882366&Ai|((e<<16|t>>>16)*3120437893&Ai)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}},U1=Object.freeze({map:null,hash:"",transfer:void 0}),Ip=class{constructor(){O(this,Mv);O(this,Cc,!1);O(this,Tc,null);O(this,ko,null);O(this,zr,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){let r=l(this,zr).get(t);return r===void 0?e:Object.assign(e,r)}getRawValue(t){return l(this,zr).get(t)}remove(t){let e=l(this,zr).get(t);if(e!==void 0&&(e instanceof $e&&l(this,ko).delete(e.annotationElementId),l(this,zr).delete(t),l(this,zr).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(let r of l(this,zr).values())if(r instanceof $e)return;this.onAnnotationEditor(null)}}setValue(t,e){let r=l(this,zr).get(t),i=!1;if(r!==void 0)for(let[o,s]of Object.entries(e))r[o]!==s&&(i=!0,r[o]=s);else i=!0,l(this,zr).set(t,e);i&&F(this,Mv,iN).call(this),e instanceof $e&&((l(this,ko)||C(this,ko,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return l(this,zr).has(t)}get size(){return l(this,zr).size}resetModified(){l(this,Cc)&&(C(this,Cc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new rv(this)}get serializable(){if(l(this,zr).size===0)return U1;let t=new Map,e=new ev,r=[],i=Object.create(null),o=!1;for(let[s,a]of l(this,zr)){let c=a instanceof $e?a.serialize(!1,i):a;c&&(t.set(s,c),e.update(`${s}:${JSON.stringify(c)}`),o||(o=!!c.bitmap))}if(o)for(let s of t.values())s.bitmap&&r.push(s.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:r}:U1}get editorStats(){let t=null,e=new Map,r=0,i=0;for(let o of l(this,zr).values()){if(!(o instanceof $e)){o.popup&&(o.popup.deleted?i+=1:r+=1);continue}o.isCommentDeleted?i+=1:o.hasEditedComment&&(r+=1);let s=o.telemetryFinalData;if(!s)continue;let{type:a}=s;e.has(a)||e.set(a,Object.getPrototypeOf(o).constructor),t||(t=Object.create(null));let c=t[a]||(t[a]=new Map);for(let[u,h]of Object.entries(s)){if(u==="type")continue;let f=c.get(u);f||(f=new Map,c.set(u,f));let g=f.get(h)??0;f.set(h,g+1)}}if((i>0||r>0)&&(t||(t=Object.create(null)),t.comments={deleted:i,edited:r}),!t)return null;for(let[o,s]of e)t[o]=s.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){C(this,Tc,null)}updateEditor(t,e){let r=l(this,ko)?.get(t);return r?(r.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return l(this,ko)?.get(t)||null}get modifiedIds(){if(l(this,Tc))return l(this,Tc);let t=[];if(l(this,ko))for(let e of l(this,ko).values())e.serialize()&&t.push(e.annotationElementId);return C(this,Tc,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return l(this,zr).entries()}};Cc=new WeakMap,Tc=new WeakMap,ko=new WeakMap,zr=new WeakMap,Mv=new WeakSet,iN=function(){l(this,Cc)||(C(this,Cc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};rv=class extends Ip{constructor(e){super();O(this,dg);let{map:r,hash:i,transfer:o}=e.serializable,s=structuredClone(r,o?{transfer:o}:null);C(this,dg,{map:s,hash:i,transfer:o})}get print(){Me("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,dg)}get modifiedIds(){return Qt(this,"modifiedIds",{ids:new Set,hash:""})}};dg=new WeakMap;j1=class{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){O(this,Yh,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(let t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),l(this,Yh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:r}){if(!(!t||l(this,Yh).has(t.loadedName))){if(fe(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:i,src:o,style:s}=t,a=new FontFace(i,o,s);this.addNativeFontFace(a);try{await a.load(),l(this,Yh).add(i),r?.(t)}catch{ee(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Me("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){let r=t.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw ee(`Failed to load font '${r.family}': '${i}'.`),t.disableFontFace=!0,i}}return}let e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(r=>{let i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){let t=!!this._document?.fonts;return Qt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Qt(this,"isSyncFontLoadingSupported",mn||sr.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(fe(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){let o=r.shift();setTimeout(o.callback,0)}}let{loadingRequests:r}=this,i={done:!1,complete:e,callback:t};return r.push(i),i}get _loadTestFont(){let t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Qt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function r(D,_){return D.charCodeAt(_)<<24|D.charCodeAt(_+1)<<16|D.charCodeAt(_+2)<<8|D.charCodeAt(_+3)&255}function i(D,_,q,N){let rt=D.substring(0,_),Y=D.substring(_+q);return rt+N+Y}let o,s,a=this._document.createElement("canvas");a.width=1,a.height=1;let c=a.getContext("2d"),u=0;function h(D,_){if(++u>30){ee("Load test font never loaded."),_();return}if(c.font="30px "+D,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){_();return}setTimeout(h.bind(null,D,_))}let f=`lt${Date.now()}${this.loadTestFontId++}`,g=this._loadTestFont;g=i(g,976,f.length,f);let y=16,b=1482184792,v=r(g,y);for(o=0,s=f.length-3;o<s;o+=4)v=v-b+r(f,o)|0;o<f.length&&(v=v-b+r(f+"XXX",o)|0),g=i(g,y,4,F6(v));let w=`url(data:font/opentype;base64,${btoa(g)});`,x=`@font-face {font-family:"${f}";src:${w}}`;this.insertRule(x);let E=this._document.createElement("div");E.style.visibility="hidden",E.style.width=E.style.height="10px",E.style.position="absolute",E.style.top=E.style.left="0px";for(let D of[t.loadedName,f]){let _=this._document.createElement("span");_.textContent="Hi",_.style.fontFamily=D,E.append(_)}this._document.body.append(E),h(f,()=>{E.remove(),e.complete()})}};Yh=new WeakMap;$1=class{constructor(t,e=null,r,i){O(this,Re);this.compiledGlyphs=Object.create(null),C(this,Re,t),this._inspectFont=e,r&&Object.assign(this,r),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{let e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let t=`url(data:${this.mimetype};base64,${wO(this.data)});`,e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let r=this.loadedName+"_path_"+e,i;try{i=t.get(r)}catch(s){ee(`getPathGenerator - ignoring character: "${s}".`)}let o=CO(i?.path);return this.fontExtraProperties||t.delete(r),this.compiledGlyphs[e]=o}get black(){return l(this,Re).black}get bold(){return l(this,Re).bold}get disableFontFace(){return l(this,Re).disableFontFace??!1}set disableFontFace(t){Qt(this,"disableFontFace",!!t)}get fontExtraProperties(){return l(this,Re).fontExtraProperties??!1}get isInvalidPDFjsFont(){return l(this,Re).isInvalidPDFjsFont}get isType3Font(){return l(this,Re).isType3Font}get italic(){return l(this,Re).italic}get missingFile(){return l(this,Re).missingFile}get remeasure(){return l(this,Re).remeasure}get vertical(){return l(this,Re).vertical}get ascent(){return l(this,Re).ascent}get defaultWidth(){return l(this,Re).defaultWidth}get descent(){return l(this,Re).descent}get bbox(){return l(this,Re).bbox}set bbox(t){Qt(this,"bbox",t)}get fontMatrix(){return l(this,Re).fontMatrix}get fallbackName(){return l(this,Re).fallbackName}get loadedName(){return l(this,Re).loadedName}get mimetype(){return l(this,Re).mimetype}get name(){return l(this,Re).name}get data(){return l(this,Re).data}clearData(){l(this,Re).clearData()}get cssFontInfo(){return l(this,Re).cssFontInfo}get systemFontInfo(){return l(this,Re).systemFontInfo}get defaultVMetrics(){return l(this,Re).defaultVMetrics}};Re=new WeakMap;Sh=class Sh{constructor(t){O(this,Zh);O(this,Kh);O(this,Jh);O(this,pg);C(this,Kh,t),C(this,Jh,new DataView(l(this,Kh))),C(this,pg,new TextDecoder)}static write(t){let e=new TextEncoder,r={},i=0;for(let u of Sh.strings){let h=e.encode(t[u]);r[u]=h,i+=4+h.length}let o=new ArrayBuffer(i),s=new Uint8Array(o),a=new DataView(o),c=0;for(let u of Sh.strings){let h=r[u],f=h.length;a.setUint32(c,f),s.set(h,c+4),c+=4+f}return fe(c===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}get fontFamily(){return F(this,Zh,Ey).call(this,0)}get fontWeight(){return F(this,Zh,Ey).call(this,1)}get italicAngle(){return F(this,Zh,Ey).call(this,2)}};Kh=new WeakMap,Jh=new WeakMap,pg=new WeakMap,Zh=new WeakSet,Ey=function(t){fe(t<Sh.strings.length,"Invalid string index");let e=0;for(let i=0;i<t;i++)e+=l(this,Jh).getUint32(e)+4;let r=l(this,Jh).getUint32(e);return l(this,pg).decode(new Uint8Array(l(this,Kh),e+4,r))},Dt(Sh,"strings",["fontFamily","fontWeight","italicAngle"]);nv=Sh,_h=class _h{constructor(t){O(this,Rc);O(this,Va);O(this,Ls);O(this,Dc);C(this,Va,t),C(this,Ls,new DataView(l(this,Va))),C(this,Dc,new TextDecoder)}static write(t){let e=new TextEncoder,r={},i=0;for(let g of _h.strings){let m=e.encode(t[g]);r[g]=m,i+=4+m.length}i+=4;let o,s,a=1+i;t.style&&(o=e.encode(t.style.style),s=e.encode(t.style.weight),a+=4+o.length+4+s.length);let c=new ArrayBuffer(a),u=new Uint8Array(c),h=new DataView(c),f=0;h.setUint8(f++,t.guessFallback?1:0),h.setUint32(f,0),f+=4,i=0;for(let g of _h.strings){let m=r[g],y=m.length;i+=4+y,h.setUint32(f,y),u.set(m,f+4),f+=4+y}return h.setUint32(f-i-4,i),t.style&&(h.setUint32(f,o.length),u.set(o,f+4),f+=4+o.length,h.setUint32(f,s.length),u.set(s,f+4),f+=4+s.length),fe(f<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(f)}get guessFallback(){return l(this,Ls).getUint8(0)!==0}get css(){return F(this,Rc,ap).call(this,0)}get loadedName(){return F(this,Rc,ap).call(this,1)}get baseFontName(){return F(this,Rc,ap).call(this,2)}get src(){return F(this,Rc,ap).call(this,3)}get style(){let t=1;t+=4+l(this,Ls).getUint32(t);let e=l(this,Ls).getUint32(t),r=l(this,Dc).decode(new Uint8Array(l(this,Va),t+4,e));t+=4+e;let i=l(this,Ls).getUint32(t),o=l(this,Dc).decode(new Uint8Array(l(this,Va),t+4,i));return{style:r,weight:o}}};Va=new WeakMap,Ls=new WeakMap,Dc=new WeakMap,Rc=new WeakSet,ap=function(t){fe(t<_h.strings.length,"Invalid string index");let e=5;for(let i=0;i<t;i++)e+=l(this,Ls).getUint32(e)+4;let r=l(this,Ls).getUint32(e);return l(this,Dc).decode(new Uint8Array(l(this,Va),e+4,r))},Dt(_h,"strings",["css","loadedName","baseFontName","src"]);iv=_h,ie=class ie{constructor({data:t,extra:e}){O(this,ir);O(this,Fs);O(this,gg);O(this,Ie);C(this,Fs,t),C(this,gg,new TextDecoder),C(this,Ie,new DataView(l(this,Fs))),e&&Object.assign(this,e)}get black(){return F(this,ir,Vi).call(this,0)}get bold(){return F(this,ir,Vi).call(this,1)}get disableFontFace(){return F(this,ir,Vi).call(this,2)}get fontExtraProperties(){return F(this,ir,Vi).call(this,3)}get isInvalidPDFjsFont(){return F(this,ir,Vi).call(this,4)}get isType3Font(){return F(this,ir,Vi).call(this,5)}get italic(){return F(this,ir,Vi).call(this,6)}get missingFile(){return F(this,ir,Vi).call(this,7)}get remeasure(){return F(this,ir,Vi).call(this,8)}get vertical(){return F(this,ir,Vi).call(this,9)}get ascent(){return F(this,ir,Sy).call(this,0)}get defaultWidth(){return F(this,ir,Sy).call(this,1)}get descent(){return F(this,ir,Sy).call(this,2)}get bbox(){let t=l(ie,tf);if(l(this,Ie).getUint8(t)===0)return;t+=1;let r=[];for(let i=0;i<4;i++)r.push(l(this,Ie).getInt16(t,!0)),t+=2;return r}get fontMatrix(){let t=l(ie,ef);if(l(this,Ie).getUint8(t)===0)return;t+=1;let r=[];for(let i=0;i<6;i++)r.push(l(this,Ie).getFloat64(t,!0)),t+=8;return r}get defaultVMetrics(){let t=l(ie,rf);if(l(this,Ie).getUint8(t)===0)return;t+=1;let r=[];for(let i=0;i<3;i++)r.push(l(this,Ie).getInt16(t,!0)),t+=2;return r}get fallbackName(){return F(this,ir,lp).call(this,0)}get loadedName(){return F(this,ir,lp).call(this,1)}get mimetype(){return F(this,ir,lp).call(this,2)}get name(){return F(this,ir,lp).call(this,3)}get data(){let t=l(ie,Wn),e=l(this,Ie).getUint32(t);t+=4+e;let r=l(this,Ie).getUint32(t);t+=4+r;let i=l(this,Ie).getUint32(t);t+=4+i;let o=l(this,Ie).getUint32(t);if(o!==0)return new Uint8Array(l(this,Fs),t+4,o)}clearData(){let t=l(ie,Wn),e=l(this,Ie).getUint32(t);t+=4+e;let r=l(this,Ie).getUint32(t);t+=4+r;let i=l(this,Ie).getUint32(t);t+=4+i;let o=l(this,Ie).getUint32(t);new Uint8Array(l(this,Fs),t+4,o).fill(0),l(this,Ie).setUint32(t,0)}get cssFontInfo(){let t=l(ie,Wn),e=l(this,Ie).getUint32(t);t+=4+e;let r=l(this,Ie).getUint32(t);t+=4+r;let i=l(this,Ie).getUint32(t);if(i===0)return null;let o=new Uint8Array(i);return o.set(new Uint8Array(l(this,Fs),t+4,i)),new nv(o.buffer)}get systemFontInfo(){let t=l(ie,Wn),e=l(this,Ie).getUint32(t);t+=4+e;let r=l(this,Ie).getUint32(t);if(r===0)return null;let i=new Uint8Array(r);return i.set(new Uint8Array(l(this,Fs),t+4,r)),new iv(i.buffer)}static write(t){let e=t.systemFontInfo?iv.write(t.systemFontInfo):null,r=t.cssFontInfo?nv.write(t.cssFontInfo):null,i=new TextEncoder,o={},s=0;for(let b of ie.strings)o[b]=i.encode(t[b]),s+=4+o[b].length;let a=l(ie,Wn)+4+s+4+(e?e.byteLength:0)+4+(r?r.byteLength:0)+4+(t.data?t.data.length:0),c=new ArrayBuffer(a),u=new Uint8Array(c),h=new DataView(c),f=0,g=ie.bools.length,m=0,y=0;for(let b=0;b<g;b++){let v=t[ie.bools[b]];m|=(v===void 0?0:v?2:1)<<y,y+=2,(y===8||b===g-1)&&(h.setUint8(f++,m),m=0,y=0)}fe(f===l(ie,Qh),"FontInfo.write: Boolean properties offset mismatch");for(let b of ie.numbers)h.setFloat64(f,t[b]),f+=8;if(fe(f===l(ie,tf),"FontInfo.write: Number properties offset mismatch"),t.bbox){h.setUint8(f++,4);for(let b of t.bbox)h.setInt16(f,b,!0),f+=2}else h.setUint8(f++,0),f+=8;if(fe(f===l(ie,ef),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){h.setUint8(f++,6);for(let b of t.fontMatrix)h.setFloat64(f,b,!0),f+=8}else h.setUint8(f++,0),f+=48;if(fe(f===l(ie,rf),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){h.setUint8(f++,1);for(let b of t.defaultVMetrics)h.setInt16(f,b,!0),f+=2}else h.setUint8(f++,0),f+=6;fe(f===l(ie,Wn),"FontInfo.write: DefaultVMetrics properties offset mismatch"),h.setUint32(l(ie,Wn),0),f+=4;for(let b of ie.strings){let v=o[b],w=v.length;h.setUint32(f,w),u.set(v,f+4),f+=4+w}if(h.setUint32(l(ie,Wn),f-l(ie,Wn)-4),!e)h.setUint32(f,0),f+=4;else{let b=e.byteLength;h.setUint32(f,b),fe(f+4+b<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(e),f+4),f+=4+b}if(!r)h.setUint32(f,0),f+=4;else{let b=r.byteLength;h.setUint32(f,b),fe(f+4+b<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(r),f+4),f+=4+b}return t.data===void 0?(h.setUint32(f,0),f+=4):(h.setUint32(f,t.data.length),u.set(t.data,f+4),f+=4+t.data.length),fe(f<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(f)}};Qh=new WeakMap,tf=new WeakMap,ef=new WeakMap,rf=new WeakMap,Wn=new WeakMap,Fs=new WeakMap,gg=new WeakMap,Ie=new WeakMap,ir=new WeakSet,Vi=function(t){fe(t<ie.bools.length,"Invalid boolean index");let e=Math.floor(t/4),r=t*2%8,i=l(this,Ie).getUint8(e)>>r&3;return i===0?void 0:i===2},Sy=function(t){return fe(t<ie.numbers.length,"Invalid number index"),l(this,Ie).getFloat64(l(ie,Qh)+t*8)},lp=function(t){fe(t<ie.strings.length,"Invalid string index");let e=l(ie,Wn)+4;for(let o=0;o<t;o++)e+=l(this,Ie).getUint32(e)+4;let r=l(this,Ie).getUint32(e),i=new Uint8Array(r);return i.set(new Uint8Array(l(this,Fs),e+4,r)),l(this,gg).decode(i)},Dt(ie,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Dt(ie,"numbers",["ascent","defaultWidth","descent"]),Dt(ie,"strings",["fallbackName","loadedName","mimetype","name"]),O(ie,Qh,Math.ceil(ie.bools.length*2/8)),O(ie,tf,l(ie,Qh)+ie.numbers.length*8),O(ie,ef,l(ie,tf)+1+8),O(ie,rf,l(ie,ef)+1+48),O(ie,Wn,l(ie,rf)+1+6);q1=ie,Ue=class Ue{constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,r=null,i=[],o=[],s=[],a=[],c=null,u=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,r=t[2],s=t[3],e===1?i.push(...t[4],...t[5]):i.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,c=t[1],i=t[2],o=t[3],a=t[4]||[],r=t[6],u=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}let h=Math.floor(i.length/2),f=Math.floor(o.length/3),g=s.length,m=a.length,y=0;for(let _ of a)y+=1,y=Math.ceil(y/4)*4,y+=4+_.coords.length*4,y+=4+_.colors.length*4,_.verticesPerRow!==void 0&&(y+=4);let b=20+h*8+f*3+g*8+(r?16:0)+(u?3:0)+y,v=new ArrayBuffer(b),w=new DataView(v),x=new Uint8Array(v);w.setUint8(l(Ue,mg),e),w.setUint8(l(Ue,yg),r?1:0),w.setUint8(l(Ue,vg),u?1:0),w.setUint8(l(Ue,bg),c),w.setUint32(l(Ue,wg),h,!0),w.setUint32(l(Ue,Ag),f,!0),w.setUint32(l(Ue,xg),g,!0),w.setUint32(l(Ue,Eg),m,!0);let E=20;new Float32Array(v,E,h*2).set(i),E+=h*8,x.set(o,E),E+=f*3;for(let[_,q]of s)w.setFloat32(E,_,!0),E+=4,w.setUint32(E,parseInt(q.slice(1),16),!0),E+=4;if(r)for(let _ of r)w.setFloat32(E,_,!0),E+=4;u&&(x.set(u,E),E+=3);for(let _=0;_<a.length;_++){let q=a[_];w.setUint8(E,q.type),E+=1,E=Math.ceil(E/4)*4,w.setUint32(E,q.coords.length,!0),E+=4,new Int32Array(v,E,q.coords.length).set(q.coords),E+=q.coords.length*4,w.setUint32(E,q.colors.length,!0),E+=4,new Int32Array(v,E,q.colors.length).set(q.colors),E+=q.colors.length*4,q.verticesPerRow!==void 0&&(w.setUint32(E,q.verticesPerRow,!0),E+=4)}return v}getIR(){let t=this.view,e=this.data[l(Ue,mg)],r=!!this.data[l(Ue,yg)],i=!!this.data[l(Ue,vg)],o=t.getUint32(l(Ue,wg),!0),s=t.getUint32(l(Ue,Ag),!0),a=t.getUint32(l(Ue,xg),!0),c=t.getUint32(l(Ue,Eg),!0),u=20,h=new Float32Array(this.buffer,u,o*2);u+=o*8;let f=new Uint8Array(this.buffer,u,s*3);u+=s*3;let g=[];for(let v=0;v<a;++v){let w=t.getFloat32(u,!0);u+=4;let x=t.getUint32(u,!0);u+=4,g.push([w,`#${x.toString(16).padStart(6,"0")}`])}let m=null;if(r){m=[];for(let v=0;v<4;++v)m.push(t.getFloat32(u,!0)),u+=4}let y=null;i&&(y=new Uint8Array(this.buffer,u,3),u+=3);let b=[];for(let v=0;v<c;++v){let w=t.getUint8(u);u+=1,u=Math.ceil(u/4)*4;let x=t.getUint32(u,!0);u+=4;let E=new Int32Array(this.buffer,u,x);u+=x*4;let D=t.getUint32(u,!0);u+=4;let _=new Int32Array(this.buffer,u,D);u+=D*4;let q={type:w,coords:E,colors:_};w===p1.LATTICE&&(q.verticesPerRow=t.getUint32(u,!0),u+=4),b.push(q)}if(e===1)return["RadialAxial","axial",m,g,Array.from(h.slice(0,2)),Array.from(h.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",m,g,[h[0],h[1]],[h[3],h[4]],h[2],h[5]];if(e===3){let v=this.data[l(Ue,bg)],w=null;if(h.length>0){let x=h[0],E=h[0],D=h[1],_=h[1];for(let q=0;q<h.length;q+=2){let N=h[q],rt=h[q+1];x=x>N?N:x,D=D>rt?rt:D,E=E<N?N:E,_=_<rt?rt:_}w=[x,D,E,_]}return["Mesh",v,h,f,b,w,m,y]}throw new Error(`Unsupported pattern kind: ${e}`)}};mg=new WeakMap,yg=new WeakMap,vg=new WeakMap,bg=new WeakMap,wg=new WeakMap,Ag=new WeakMap,xg=new WeakMap,Eg=new WeakMap,O(Ue,mg,0),O(Ue,yg,1),O(Ue,vg,2),O(Ue,bg,3),O(Ue,wg,4),O(Ue,Ag,8),O(Ue,xg,12),O(Ue,Eg,16);z1=Ue,H1=class{constructor(t){O(this,nf);C(this,nf,t)}static write(t){let e,r;return sr.isFloat16ArraySupported?(r=new ArrayBuffer(t.length*2),e=new Float16Array(r)):(r=new ArrayBuffer(t.length*4),e=new Float32Array(r)),e.set(t),r}get path(){return sr.isFloat16ArraySupported?new Float16Array(l(this,nf)):new Float32Array(l(this,nf))}};nf=new WeakMap;W1=n=>typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0,V6=n=>typeof n=="object"&&typeof n?.name=="string",sN=$6.bind(null,W1,V6),G1=class{constructor(){O(this,Bo,new Map);O(this,Uv,Promise.resolve())}postMessage(t,e){let r={data:structuredClone(t,e?{transfer:e}:null)};l(this,Uv).then(()=>{for(let[i]of l(this,Bo))i.call(this,r)})}addEventListener(t,e,r=null){let i=null;if(r?.signal instanceof AbortSignal){let{signal:o}=r;if(o.aborted){ee("LoopbackPort - cannot use an `aborted` signal.");return}let s=()=>this.removeEventListener(t,e);i=()=>o.removeEventListener("abort",s),o.addEventListener("abort",s)}l(this,Bo).set(e,i)}removeEventListener(t,e){l(this,Bo).get(e)?.(),l(this,Bo).delete(e)}terminate(){for(let[,t]of l(this,Bo))t?.();l(this,Bo).clear()}};Bo=new WeakMap,Uv=new WeakMap;ly={DATA:1,ERROR:2},dr={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};sc=class{constructor(t,e,r){O(this,Mi);O(this,sf,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",F(this,Mi,oN).bind(this),{signal:l(this,sf).signal})}on(t,e){let r=this.actionHandler;if(r[t])throw new Error(`There is already an actionName called "${t}"`);r[t]=e}send(t,e,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},r)}sendWithPromise(t,e,r){let i=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[i]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},r)}catch(s){o.reject(s)}return o.promise}sendWithStream(t,e,r,i){let o=this.streamId++,s=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{let h=Promise.withResolvers();return this.streamControllers[o]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:s,targetName:a,action:t,streamId:o,data:e,desiredSize:u.desiredSize},i),h.promise},pull:u=>{let h=Promise.withResolvers();return this.streamControllers[o].pullCall=h,c.postMessage({sourceName:s,targetName:a,stream:dr.PULL,streamId:o,desiredSize:u.desiredSize}),h.promise},cancel:u=>{fe(u instanceof Error,"cancel must have a valid reason");let h=Promise.withResolvers();return this.streamControllers[o].cancelCall=h,this.streamControllers[o].isClosed=!0,c.postMessage({sourceName:s,targetName:a,stream:dr.CANCEL,streamId:o,reason:Dn(u)}),h.promise}},r)}destroy(){l(this,sf)?.abort(),C(this,sf,null)}};sf=new WeakMap,Mi=new WeakSet,oN=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){F(this,Mi,lN).call(this,t);return}if(t.callback){let r=t.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],t.callback===ly.DATA)i.resolve(t.data);else if(t.callback===ly.ERROR)i.reject(Dn(t.reason));else throw new Error("Unexpected callback case");return}let e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){let r=this.sourceName,i=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(s){o.postMessage({sourceName:r,targetName:i,callback:ly.DATA,callbackId:t.callbackId,data:s})},function(s){o.postMessage({sourceName:r,targetName:i,callback:ly.ERROR,callbackId:t.callbackId,reason:Dn(s)})});return}if(t.streamId){F(this,Mi,aN).call(this,t);return}e(t.data)},aN=function(t){let e=t.streamId,r=this.sourceName,i=t.sourceName,o=this.comObj,s=this,a=this.actionHandler[t.action],c={enqueue(u,h=1,f){if(this.isCancelled)return;let g=this.desiredSize;this.desiredSize-=h,g>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:r,targetName:i,stream:dr.ENQUEUE,streamId:e,chunk:u},f)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:r,targetName:i,stream:dr.CLOSE,streamId:e}),delete s.streamSinks[e])},error(u){fe(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:r,targetName:i,stream:dr.ERROR,streamId:e,reason:Dn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(a,t.data,c).then(function(){o.postMessage({sourceName:r,targetName:i,stream:dr.START_COMPLETE,streamId:e,success:!0})},function(u){o.postMessage({sourceName:r,targetName:i,stream:dr.START_COMPLETE,streamId:e,reason:Dn(u)})})},lN=function(t){let e=t.streamId,r=this.sourceName,i=t.sourceName,o=this.comObj,s=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case dr.START_COMPLETE:t.success?s.startCall.resolve():s.startCall.reject(Dn(t.reason));break;case dr.PULL_COMPLETE:t.success?s.pullCall.resolve():s.pullCall.reject(Dn(t.reason));break;case dr.PULL:if(!a){o.postMessage({sourceName:r,targetName:i,stream:dr.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,Promise.try(a.onPull||nO).then(function(){o.postMessage({sourceName:r,targetName:i,stream:dr.PULL_COMPLETE,streamId:e,success:!0})},function(u){o.postMessage({sourceName:r,targetName:i,stream:dr.PULL_COMPLETE,streamId:e,reason:Dn(u)})});break;case dr.ENQUEUE:if(fe(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(t.chunk);break;case dr.CLOSE:if(fe(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),F(this,Mi,_y).call(this,s,e);break;case dr.ERROR:fe(s,"error should have stream controller"),s.controller.error(Dn(t.reason)),F(this,Mi,_y).call(this,s,e);break;case dr.CANCEL_COMPLETE:t.success?s.cancelCall.resolve():s.cancelCall.reject(Dn(t.reason)),F(this,Mi,_y).call(this,s,e);break;case dr.CANCEL:if(!a)break;let c=Dn(t.reason);Promise.try(a.onCancel||nO,c).then(function(){o.postMessage({sourceName:r,targetName:i,stream:dr.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){o.postMessage({sourceName:r,targetName:i,stream:dr.CANCEL_COMPLETE,streamId:e,reason:Dn(u)})}),a.sinkCapability.reject(c),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},_y=async function(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]};sv=class{constructor({enableHWA:t=!1}){O(this,Sg,!1);C(this,Sg,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");let r=this._createCanvas(t,e);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!l(this,Sg)})}}reset(t,e,r){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||r<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=r}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Me("Abstract method `_createCanvas` called.")}};Sg=new WeakMap;V1=class extends sv{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){let r=this._document.createElement("canvas");return r.width=t,r.height=e,r}},ov=class{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");let e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Me("Abstract method `_fetch` called.")}},av=class extends ov{async _fetch(t){let e=await od(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Om(e)}},lv=class{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,r,i,o){return"none"}destroy(t=!1){}},X1=class extends lv{constructor({docId:e,ownerDocument:r=globalThis.document}){super();O(this,$t);O(this,Ic);O(this,of);O(this,Lo);O(this,Fo);O(this,rn);O(this,Oc);O(this,Nc,0);C(this,Fo,e),C(this,rn,r)}addFilter(e){if(!e)return"none";let r=l(this,$t,Zr).get(e);if(r)return r;let[i,o,s]=F(this,$t,Cy).call(this,e),a=e.length===1?i:`${i}${o}${s}`;if(r=l(this,$t,Zr).get(a),r)return l(this,$t,Zr).set(e,r),r;let c=`g_${l(this,Fo)}_transfer_map_${vr(this,Nc)._++}`,u=F(this,$t,gh).call(this,c);l(this,$t,Zr).set(e,u),l(this,$t,Zr).set(a,u);let h=F(this,$t,mh).call(this,c);return F(this,$t,hp).call(this,i,o,s,h),u}addHCMFilter(e,r){let i=`${e}-${r}`,o="base",s=l(this,$t,cp).get(o);if(s?.key===i||(s?(s.filter?.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},l(this,$t,cp).set(o,s)),!e||!r))return s.url;let a=F(this,$t,fp).call(this,e);e=Lt.makeHexColor(...a);let c=F(this,$t,fp).call(this,r);if(r=Lt.makeHexColor(...c),l(this,$t,ph).style.color="",e==="#000000"&&r==="#ffffff"||e===r)return s.url;let u=new Array(256);for(let y=0;y<=255;y++){let b=y/255;u[y]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}let h=u.join(","),f=`g_${l(this,Fo)}_hcm_filter`,g=s.filter=F(this,$t,mh).call(this,f);F(this,$t,hp).call(this,h,h,h,g),F(this,$t,Y1).call(this,g);let m=(y,b)=>{let v=a[y]/255,w=c[y]/255,x=new Array(b+1);for(let E=0;E<=b;E++)x[E]=v+E/b*(w-v);return x.join(",")};return F(this,$t,hp).call(this,m(0,5),m(1,5),m(2,5),g),s.url=F(this,$t,gh).call(this,f),s.url}addAlphaFilter(e){let r=l(this,$t,Zr).get(e);if(r)return r;let[i]=F(this,$t,Cy).call(this,[e]),o=`alpha_${i}`;if(r=l(this,$t,Zr).get(o),r)return l(this,$t,Zr).set(e,r),r;let s=`g_${l(this,Fo)}_alpha_map_${vr(this,Nc)._++}`,a=F(this,$t,gh).call(this,s);l(this,$t,Zr).set(e,a),l(this,$t,Zr).set(o,a);let c=F(this,$t,mh).call(this,s);return F(this,$t,K1).call(this,i,c),a}addLuminosityFilter(e){let r=l(this,$t,Zr).get(e||"luminosity");if(r)return r;let i,o;if(e?([i]=F(this,$t,Cy).call(this,[e]),o=`luminosity_${i}`):o="luminosity",r=l(this,$t,Zr).get(o),r)return l(this,$t,Zr).set(e,r),r;let s=`g_${l(this,Fo)}_luminosity_map_${vr(this,Nc)._++}`,a=F(this,$t,gh).call(this,s);l(this,$t,Zr).set(e,a),l(this,$t,Zr).set(o,a);let c=F(this,$t,mh).call(this,s);return F(this,$t,cN).call(this,c),e&&F(this,$t,K1).call(this,i,c),a}addHighlightHCMFilter(e,r,i,o,s){let a=`${r}-${i}-${o}-${s}`,c=l(this,$t,cp).get(e);if(c?.key===a||(c?(c.filter?.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},l(this,$t,cp).set(e,c)),!r||!i))return c.url;let[u,h]=[r,i].map(F(this,$t,fp).bind(this)),f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),g=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[m,y]=[o,s].map(F(this,$t,fp).bind(this));g<f&&([f,g,m,y]=[g,f,y,m]),l(this,$t,ph).style.color="";let b=(x,E,D)=>{let _=new Array(256),q=(g-f)/D,N=x/255,rt=(E-x)/(255*D),Y=0;for(let et=0;et<=D;et++){let st=Math.round(f+et*q),lt=N+et*rt;for(let at=Y;at<=st;at++)_[at]=lt;Y=st+1}for(let et=Y;et<256;et++)_[et]=_[Y-1];return _.join(",")},v=`g_${l(this,Fo)}_hcm_${e}_filter`,w=c.filter=F(this,$t,mh).call(this,v);return F(this,$t,Y1).call(this,w),F(this,$t,hp).call(this,b(m[0],y[0],5),b(m[1],y[1],5),b(m[2],y[2],5),w),c.url=F(this,$t,gh).call(this,v),c.url}destroy(e=!1){e&&l(this,Oc)?.size||(l(this,Lo)?.parentNode.parentNode.remove(),C(this,Lo,null),l(this,of)?.clear(),C(this,of,null),l(this,Oc)?.clear(),C(this,Oc,null),C(this,Nc,0))}};Ic=new WeakMap,of=new WeakMap,Lo=new WeakMap,Fo=new WeakMap,rn=new WeakMap,Oc=new WeakMap,Nc=new WeakMap,$t=new WeakSet,Zr=function(){return l(this,of)||C(this,of,new Map)},cp=function(){return l(this,Oc)||C(this,Oc,new Map)},ph=function(){if(!l(this,Lo)){let e=l(this,rn).createElement("div"),{style:r}=e;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;let i=l(this,rn).createElementNS(bo,"svg");i.setAttribute("width",0),i.setAttribute("height",0),C(this,Lo,l(this,rn).createElementNS(bo,"defs")),e.append(i),i.append(l(this,Lo)),l(this,rn).body.append(e)}return l(this,Lo)},Cy=function(e){if(e.length===1){let u=e[0],h=new Array(256);for(let g=0;g<256;g++)h[g]=u[g]/255;let f=h.join(",");return[f,f,f]}let[r,i,o]=e,s=new Array(256),a=new Array(256),c=new Array(256);for(let u=0;u<256;u++)s[u]=r[u]/255,a[u]=i[u]/255,c[u]=o[u]/255;return[s.join(","),a.join(","),c.join(",")]},gh=function(e){if(l(this,Ic)===void 0){C(this,Ic,"");let r=l(this,rn).URL;r!==l(this,rn).baseURI&&(Nm(r)?ee('#createUrl: ignore "data:"-URL for performance reasons.'):C(this,Ic,Hx(r,"")))}return`url(${l(this,Ic)}#${e})`},cN=function(e){let r=l(this,rn).createElementNS(bo,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(r)},Y1=function(e){let r=l(this,rn).createElementNS(bo,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(r)},mh=function(e){let r=l(this,rn).createElementNS(bo,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",e),l(this,$t,ph).append(r),r},up=function(e,r,i){let o=l(this,rn).createElementNS(bo,r);o.setAttribute("type","discrete"),o.setAttribute("tableValues",i),e.append(o)},hp=function(e,r,i,o){let s=l(this,rn).createElementNS(bo,"feComponentTransfer");o.append(s),F(this,$t,up).call(this,s,"feFuncR",e),F(this,$t,up).call(this,s,"feFuncG",r),F(this,$t,up).call(this,s,"feFuncB",i)},K1=function(e,r){let i=l(this,rn).createElementNS(bo,"feComponentTransfer");r.append(i),F(this,$t,up).call(this,i,"feFuncA",e)},fp=function(e){return l(this,$t,ph).style.color=e,ad(getComputedStyle(l(this,$t,ph)).getPropertyValue("color"))};cv=class{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");let e=`${this.baseUrl}${t}`;return this._fetch(e).catch(r=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Me("Abstract method `_fetch` called.")}},uv=class extends cv{async _fetch(t){let e=await od(t,"arraybuffer");return new Uint8Array(e)}},hv=class{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");let e=`${this.baseUrl}${t}`;return this._fetch(e).catch(r=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Me("Abstract method `_fetch` called.")}},fv=class extends hv{async _fetch(t){let e=await od(t,"arraybuffer");return new Uint8Array(e)}};mn&&ee("Please use the `legacy` build in Node.js environments.");J1=class extends lv{},Z1=class extends sv{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire("")("@napi-rs/canvas").createCanvas(t,e)}},Q1=class extends ov{async _fetch(t){return Vx(t)}},tA=class extends cv{async _fetch(t){return Vx(t)}},eA=class extends hv{async _fetch(t){return Vx(t)}},hh="__forcedDependency",{floor:iO,ceil:sO}=Math;rA=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0],nA=class{constructor(t,e){O(this,af);O(this,Xa);C(this,af,t),C(this,Xa,e)}get length(){return l(this,af).length}isEmpty(t){return l(this,af)[t]===rA}minX(t){return l(this,Xa)[t*4+0]/256}minY(t){return l(this,Xa)[t*4+1]/256}maxX(t){return(l(this,Xa)[t*4+2]+1)/256}maxY(t){return(l(this,Xa)[t*4+3]+1)/256}};af=new WeakMap,Xa=new WeakMap;uy=(n,t)=>{if(!n)return;let e=n.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},n.set(t,e)),e},iA=class{constructor(t,e,r=!1){O(this,Cg);O(this,On,{__proto__:null});O(this,Nn,{__proto__:null,transform:[],moveText:[],sameLineText:[],[hh]:[]});O(this,Pc,new Map);O(this,Zi,[]);O(this,kc,[]);O(this,Mo,[[1,0,0,1,0,0]]);O(this,Ee,[-1/0,-1/0,1/0,1/0]);O(this,Oe,new Float64Array([1/0,1/0,-1/0,-1/0]));O(this,Uo,-1);O(this,Pn,new Set);O(this,_g,new Map);O(this,lf,new Map);O(this,Bc);O(this,Lc);O(this,jo);O(this,nn);O(this,Ms);C(this,Bc,t.width),C(this,Lc,t.height),F(this,Cg,sA).call(this,e),r&&C(this,Ms,new Map)}growOperationsCount(t){t>=l(this,nn).length&&F(this,Cg,sA).call(this,t,l(this,nn))}save(t){return C(this,On,{__proto__:l(this,On)}),C(this,Nn,{__proto__:l(this,Nn),transform:{__proto__:l(this,Nn).transform},moveText:{__proto__:l(this,Nn).moveText},sameLineText:{__proto__:l(this,Nn).sameLineText},[hh]:{__proto__:l(this,Nn)[hh]}}),C(this,Ee,{__proto__:l(this,Ee)}),l(this,Zi).push(t),this}restore(t){let e=Object.getPrototypeOf(l(this,On));if(e===null)return this;C(this,On,e),C(this,Nn,Object.getPrototypeOf(l(this,Nn))),C(this,Ee,Object.getPrototypeOf(l(this,Ee)));let r=l(this,Zi).pop();return r!==void 0&&(uy(l(this,Ms),t)?.dependencies.add(r),l(this,nn)[t]=l(this,nn)[r]),this}recordOpenMarker(t){return l(this,Zi).push(t),this}getOpenMarker(){return l(this,Zi).length===0?null:l(this,Zi).at(-1)}recordCloseMarker(t){let e=l(this,Zi).pop();return e!==void 0&&(uy(l(this,Ms),t)?.dependencies.add(e),l(this,nn)[t]=l(this,nn)[e]),this}beginMarkedContent(t){return l(this,kc).push(t),this}endMarkedContent(t){let e=l(this,kc).pop();return e!==void 0&&(uy(l(this,Ms),t)?.dependencies.add(e),l(this,nn)[t]=l(this,nn)[e]),this}pushBaseTransform(t){return l(this,Mo).push(Lt.multiplyByDOMMatrix(l(this,Mo).at(-1),t.getTransform())),this}popBaseTransform(){return l(this,Mo).length>1&&l(this,Mo).pop(),this}recordSimpleData(t,e){return l(this,On)[t]=e,this}recordIncrementalData(t,e){return l(this,Nn)[t].push(e),this}resetIncrementalData(t,e){return l(this,Nn)[t].length=0,this}recordNamedData(t,e){return l(this,Pc).set(t,e),this}recordSimpleDataFromNamed(t,e,r){l(this,On)[t]=l(this,Pc).get(e)??r}recordFutureForcedDependency(t,e){return this.recordIncrementalData(hh,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(let e of t)e in l(this,On)&&this.recordFutureForcedDependency(e,l(this,On)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(let t of l(this,Pn))this.recordFutureForcedDependency(hh,t);return this}resetBBox(t){return l(this,Uo)!==t&&(C(this,Uo,t),l(this,Oe)[0]=1/0,l(this,Oe)[1]=1/0,l(this,Oe)[2]=-1/0,l(this,Oe)[3]=-1/0),this}recordClipBox(t,e,r,i,o,s){let a=Lt.multiplyByDOMMatrix(l(this,Mo).at(-1),e.getTransform()),c=[1/0,1/0,-1/0,-1/0];Lt.axialAlignedBoundingBox([r,o,i,s],a,c);let u=Lt.intersect(l(this,Ee),c);return u?(l(this,Ee)[0]=u[0],l(this,Ee)[1]=u[1],l(this,Ee)[2]=u[2],l(this,Ee)[3]=u[3]):(l(this,Ee)[0]=l(this,Ee)[1]=1/0,l(this,Ee)[2]=l(this,Ee)[3]=-1/0),this}recordBBox(t,e,r,i,o,s){let a=l(this,Ee);if(a[0]===1/0)return this;let c=Lt.multiplyByDOMMatrix(l(this,Mo).at(-1),e.getTransform());if(a[0]===-1/0)return Lt.axialAlignedBoundingBox([r,o,i,s],c,l(this,Oe)),this;let u=[1/0,1/0,-1/0,-1/0];return Lt.axialAlignedBoundingBox([r,o,i,s],c,u),l(this,Oe)[0]=Math.min(l(this,Oe)[0],Math.max(u[0],a[0])),l(this,Oe)[1]=Math.min(l(this,Oe)[1],Math.max(u[1],a[1])),l(this,Oe)[2]=Math.max(l(this,Oe)[2],Math.min(u[2],a[2])),l(this,Oe)[3]=Math.max(l(this,Oe)[3],Math.min(u[3],a[3])),this}recordCharacterBBox(t,e,r,i=1,o=0,s=0,a){let c=r.bbox,u,h;if(c&&(u=c[2]!==c[0]&&c[3]!==c[1]&&l(this,lf).get(r),u!==!1&&(h=[0,0,0,0],Lt.axialAlignedBoundingBox(c,r.fontMatrix,h),(i!==1||o!==0||s!==0)&&Lt.scaleMinMax([i,0,0,-i,o,s],h),u)))return this.recordBBox(t,e,h[0],h[2],h[1],h[3]);if(!a)return this.recordFullPageBBox(t);let f=a();return c&&h&&u===void 0&&(u=h[0]<=o-f.actualBoundingBoxLeft&&h[2]>=o+f.actualBoundingBoxRight&&h[1]<=s-f.actualBoundingBoxAscent&&h[3]>=s+f.actualBoundingBoxDescent,l(this,lf).set(r,u),u)?this.recordBBox(t,e,h[0],h[2],h[1],h[3]):this.recordBBox(t,e,o-f.actualBoundingBoxLeft,o+f.actualBoundingBoxRight,s-f.actualBoundingBoxAscent,s+f.actualBoundingBoxDescent)}recordFullPageBBox(t){return l(this,Oe)[0]=Math.max(0,l(this,Ee)[0]),l(this,Oe)[1]=Math.max(0,l(this,Ee)[1]),l(this,Oe)[2]=Math.min(l(this,Bc),l(this,Ee)[2]),l(this,Oe)[3]=Math.min(l(this,Lc),l(this,Ee)[3]),this}getSimpleIndex(t){return l(this,On)[t]}recordDependencies(t,e){let r=l(this,Pn),i=l(this,On),o=l(this,Nn);for(let s of e)s in l(this,On)?r.add(i[s]):s in o&&o[s].forEach(r.add,r);return this}recordNamedDependency(t,e){return l(this,Pc).has(e)&&l(this,Pn).add(l(this,Pc).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[hh]),l(this,Ms)){let r=uy(l(this,Ms),t),{dependencies:i}=r;l(this,Pn).forEach(i.add,i),l(this,Zi).forEach(i.add,i),l(this,kc).forEach(i.add,i),i.delete(t),r.isRenderingOperation=!0}if(l(this,Uo)===t){let r=iO(l(this,Oe)[0]*256/l(this,Bc)),i=iO(l(this,Oe)[1]*256/l(this,Lc)),o=sO(l(this,Oe)[2]*256/l(this,Bc)),s=sO(l(this,Oe)[3]*256/l(this,Lc));cy(l(this,jo),t,r,i,o,s);for(let a of l(this,Pn))a!==t&&cy(l(this,jo),a,r,i,o,s);for(let a of l(this,Zi))a!==t&&cy(l(this,jo),a,r,i,o,s);for(let a of l(this,kc))a!==t&&cy(l(this,jo),a,r,i,o,s);e||(l(this,Pn).clear(),C(this,Uo,-1))}return this}recordShowTextOperation(t,e=!1){let r=Array.from(l(this,Pn));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(let i of r)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(t,e=!1){return l(this,Uo)===t&&(C(this,Uo,-1),l(this,Ee)[0]=Math.max(l(this,Ee)[0],l(this,Oe)[0]),l(this,Ee)[1]=Math.max(l(this,Ee)[1],l(this,Oe)[1]),l(this,Ee)[2]=Math.min(l(this,Ee)[2],l(this,Oe)[2]),l(this,Ee)[3]=Math.min(l(this,Ee)[3],l(this,Oe)[3]),e||l(this,Pn).clear()),this}_takePendingDependencies(){let t=l(this,Pn);return C(this,Pn,new Set),t}_extractOperation(t){let e=l(this,_g).get(t);return l(this,_g).delete(t),e}_pushPendingDependencies(t){for(let e of t)l(this,Pn).add(e)}take(){return l(this,lf).clear(),new nA(l(this,nn),l(this,jo))}takeDebugMetadata(){return l(this,Ms)}};On=new WeakMap,Nn=new WeakMap,Pc=new WeakMap,Zi=new WeakMap,kc=new WeakMap,Mo=new WeakMap,Ee=new WeakMap,Oe=new WeakMap,Uo=new WeakMap,Pn=new WeakMap,_g=new WeakMap,lf=new WeakMap,Bc=new WeakMap,Lc=new WeakMap,jo=new WeakMap,nn=new WeakMap,Ms=new WeakMap,Cg=new WeakSet,sA=function(t,e){let r=new ArrayBuffer(t*4);C(this,jo,new Uint8ClampedArray(r)),C(this,nn,new Uint32Array(r)),e&&e.length>0?(l(this,nn).set(e),l(this,nn).fill(rA,e.length)):l(this,nn).fill(rA)};Kx=class Kx{constructor(t,e,r){O(this,Le);O(this,er);O(this,Qi);O(this,cf,0);O(this,uf,0);if(t instanceof Kx&&l(t,Qi)===!!r)return t;C(this,Le,t),C(this,er,e),C(this,Qi,!!r)}growOperationsCount(){throw new Error("Unreachable")}save(t){return vr(this,uf)._++,l(this,Le).save(l(this,er)),this}restore(t){return l(this,uf)>0&&(l(this,Le).restore(l(this,er)),vr(this,uf)._--),this}recordOpenMarker(t){return vr(this,cf)._++,this}getOpenMarker(){return l(this,cf)>0?l(this,er):l(this,Le).getOpenMarker()}recordCloseMarker(t){return vr(this,cf)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return l(this,Le).pushBaseTransform(t),this}popBaseTransform(){return l(this,Le).popBaseTransform(),this}recordSimpleData(t,e){return l(this,Le).recordSimpleData(t,l(this,er)),this}recordIncrementalData(t,e){return l(this,Le).recordIncrementalData(t,l(this,er)),this}resetIncrementalData(t,e){return l(this,Le).resetIncrementalData(t,l(this,er)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,r){return l(this,Le).recordSimpleDataFromNamed(t,e,l(this,er)),this}recordFutureForcedDependency(t,e){return l(this,Le).recordFutureForcedDependency(t,l(this,er)),this}inheritSimpleDataAsFutureForcedDependencies(t){return l(this,Le).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return l(this,Le).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return l(this,Qi)||l(this,Le).resetBBox(l(this,er)),this}recordClipBox(t,e,r,i,o,s){return l(this,Qi)||l(this,Le).recordClipBox(l(this,er),e,r,i,o,s),this}recordBBox(t,e,r,i,o,s){return l(this,Qi)||l(this,Le).recordBBox(l(this,er),e,r,i,o,s),this}recordCharacterBBox(t,e,r,i,o,s,a){return l(this,Qi)||l(this,Le).recordCharacterBBox(l(this,er),e,r,i,o,s,a),this}recordFullPageBBox(t){return l(this,Qi)||l(this,Le).recordFullPageBBox(l(this,er)),this}getSimpleIndex(t){return l(this,Le).getSimpleIndex(t)}recordDependencies(t,e){return l(this,Le).recordDependencies(l(this,er),e),this}recordNamedDependency(t,e){return l(this,Le).recordNamedDependency(l(this,er),e),this}recordOperation(t){return l(this,Le).recordOperation(l(this,er),!0),this}recordShowTextOperation(t){return l(this,Le).recordShowTextOperation(l(this,er),!0),this}bboxToClipBoxDropOperation(t){return l(this,Qi)||l(this,Le).bboxToClipBoxDropOperation(l(this,er),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Le=new WeakMap,er=new WeakMap,Qi=new WeakMap,cf=new WeakMap,uf=new WeakMap;dv=Kx,xi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Gr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};Op=class{isModifyingCurrentTransform(){return!1}getPattern(){Me("Abstract method `getPattern` called.")}},aA=class extends Op{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let r,i=this._p0,o=this._p1;if(e&&(i=i.slice(),o=o.slice(),Lt.applyTransform(i,e),Lt.applyTransform(o,e)),this._type==="axial")r=t.createLinearGradient(i[0],i[1],o[0],o[1]);else if(this._type==="radial"){let s=this._r0,a=this._r1;if(e){let c=new Float32Array(2);Lt.singularValueDecompose2dScale(e,c),s*=c[0],a*=c[0]}r=t.createRadialGradient(i[0],i[1],s,o[0],o[1],a)}for(let s of this._colorStops)r.addColorStop(s[0],s[1]);return r}getPattern(t,e,r,i){let o;if(i===Gr.STROKE||i===Gr.FILL){if(this.isOriginBased()){let g=Lt.transform(r,e.baseTransform);this.matrix&&(g=Lt.transform(g,this.matrix));let m=.001,y=Math.hypot(g[0],g[1]),b=Math.hypot(g[2],g[3]),v=(g[0]*g[2]+g[1]*g[3])/(y*b);if(Math.abs(v)<m)if(this.isRadial()){if(Math.abs(y-b)<m)return this._createGradient(t,g)}else return this._createGradient(t,g)}let s=e.current.getClippedPathBoundingBox(i,Ke(t))||[0,0,0,0],a=Math.ceil(s[2]-s[0])||1,c=Math.ceil(s[3]-s[1])||1,u=e.cachedCanvases.getCanvas("pattern",a,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-s[0],-s[1]),r=Lt.transform(r,[1,0,0,1,s[0],s[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),oA(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),o=t.createPattern(u.canvas,"no-repeat");let f=new DOMMatrix(r);o.setTransform(f)}else oA(t,this._bbox),o=this._createGradient(t);return o}};lA=class extends Op{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,r){let a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,h=Math.ceil(this._bounds[3])-c,f=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),g=Math.min(Math.ceil(Math.abs(h*t[1]*1.1)),3e3),m=u/f,y=h/g,b={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/m,scaleY:1/y},v=f+4,w=g+4,x=r.getCanvas("mesh",v,w),E=x.context,D=E.createImageData(f,g);if(e){let q=D.data;for(let N=0,rt=q.length;N<rt;N+=4)q[N]=e[0],q[N+1]=e[1],q[N+2]=e[2],q[N+3]=255}for(let q of this._figures)X6(D,q,b);return E.putImageData(D,2,2),{canvas:x.canvas,offsetX:a-2*m,offsetY:c-2*y,scaleX:m,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(t,e,r,i){oA(t,this._bbox);let o=new Float32Array(2);if(i===Gr.SHADING)Lt.singularValueDecompose2dScale(Ke(t),o);else if(this.matrix){Lt.singularValueDecompose2dScale(this.matrix,o);let[a,c]=o;Lt.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=a,o[1]*=c}else Lt.singularValueDecompose2dScale(e.baseTransform,o);let s=this._createMeshCanvas(o,i===Gr.SHADING?null:this._background,e.cachedCanvases);return i!==Gr.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(s.offsetX,s.offsetY),t.scale(s.scaleX,s.scaleY),t.createPattern(s.canvas,"no-repeat")}},cA=class extends Op{getPattern(){return"hotpink"}};oO={COLORED:1,UNCOLORED:2},jv=class jv{constructor(t,e,r,i){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(t,e){let{bbox:r,operatorList:i,paintType:o,tilingType:s,color:a,canvasGraphicsFactory:c}=this,{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),Zv("TilingType: "+s);let f=r[0],g=r[1],m=r[2],y=r[3],b=m-f,v=y-g,w=new Float32Array(2);Lt.singularValueDecompose2dScale(this.matrix,w);let[x,E]=w;Lt.singularValueDecompose2dScale(this.baseTransform,w);let D=x*w[0],_=E*w[1],q=b,N=v,rt=!1,Y=!1,et=Math.ceil(u*D),st=Math.ceil(h*_),lt=Math.ceil(b*D),at=Math.ceil(v*_);et>=lt?q=u:rt=!0,st>=at?N=h:Y=!0;let X=this.getSizeAndScale(q,this.ctx.canvas.width,D),ct=this.getSizeAndScale(N,this.ctx.canvas.height,_),J=t.cachedCanvases.getCanvas("pattern",X.size,ct.size),R=J.context,T=c.createCanvasGraphics(R,e);if(T.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(T,o,a),R.translate(-X.scale*f,-ct.scale*g),T.transform(0,X.scale,0,0,ct.scale,0,0),R.save(),T.dependencyTracker?.save(),this.clipBbox(T,f,g,m,y),T.baseTransform=Ke(T.ctx),T.executeOperatorList(i),T.endDrawing(),T.dependencyTracker?.restore(),R.restore(),rt||Y){let L=J.canvas;rt&&(q=u),Y&&(N=h);let k=this.getSizeAndScale(q,this.ctx.canvas.width,D),B=this.getSizeAndScale(N,this.ctx.canvas.height,_),$=k.size,H=B.size,tt=t.cachedCanvases.getCanvas("pattern-workaround",$,H),it=tt.context,ut=rt?Math.floor(b/u):0,V=Y?Math.floor(v/h):0;for(let K=0;K<=ut;K++)for(let ot=0;ot<=V;ot++)it.drawImage(L,$*K,H*ot,$,H,0,0,$,H);return{canvas:tt.canvas,scaleX:k.scale,scaleY:B.scale,offsetX:f,offsetY:g}}return{canvas:J.canvas,scaleX:X.scale,scaleY:ct.scale,offsetX:f,offsetY:g}}getSizeAndScale(t,e,r){let i=Math.max(jv.MAX_PATTERN_SIZE,e),o=Math.ceil(t*r);return o>=i?o=i:r=o/t,{scale:r,size:o}}clipBbox(t,e,r,i,o){let s=i-e,a=o-r;t.ctx.rect(e,r,s,a),Lt.axialAlignedBoundingBox([e,r,i,o],Ke(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,r){let i=t.ctx,o=t.current;switch(e){case oO.COLORED:let{fillStyle:s,strokeStyle:a}=this.ctx;i.fillStyle=o.fillColor=s,i.strokeStyle=o.strokeColor=a;break;case oO.UNCOLORED:i.fillStyle=i.strokeStyle=r,o.fillColor=o.strokeColor=r;break;default:throw new g1(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,r,i,o){let s=r;i!==Gr.SHADING&&(s=Lt.transform(s,e.baseTransform),this.matrix&&(s=Lt.transform(s,this.matrix)));let a=this.createPatternCanvas(e,o),c=new DOMMatrix(s);c=c.translate(a.offsetX,a.offsetY),c=c.scale(1/a.scaleX,1/a.scaleY);let u=t.createPattern(a.canvas,"repeat");return u.setTransform(c),u}};Dt(jv,"MAX_PATTERN_SIZE",3e3);uA=jv;aO=16,lO=100,J6=15,cO=10,Ln=16,u1=new DOMMatrix,li=new Float32Array(2),xh=new Float32Array([1/0,1/0,-1/0,-1/0]);hA=class{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,r){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,r)):(i=this.canvasFactory.create(e,r),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(let t in this.cache){let e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}};pv=class{constructor(t,e,r){Dt(this,"alphaIsShape",!1);Dt(this,"fontSize",0);Dt(this,"fontSizeScale",1);Dt(this,"textMatrix",null);Dt(this,"textMatrixScale",1);Dt(this,"fontMatrix",d1);Dt(this,"leading",0);Dt(this,"x",0);Dt(this,"y",0);Dt(this,"lineX",0);Dt(this,"lineY",0);Dt(this,"charSpacing",0);Dt(this,"wordSpacing",0);Dt(this,"textHScale",1);Dt(this,"textRenderingMode",xr.FILL);Dt(this,"textRise",0);Dt(this,"fillColor","#000000");Dt(this,"strokeColor","#000000");Dt(this,"patternFill",!1);Dt(this,"patternStroke",!1);Dt(this,"fillAlpha",1);Dt(this,"strokeAlpha",1);Dt(this,"lineWidth",1);Dt(this,"activeSMask",null);Dt(this,"transferMaps","none");r?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=xh.slice()}clone(){let t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Gr.FILL,e=null){let r=this.minMax.slice();if(t===Gr.STROKE){e||Me("Stroke bounding box must include transform."),Lt.singularValueDecompose2dScale(e,li);let i=li[0]*this.lineWidth/2,o=li[1]*this.lineWidth/2;r[0]-=i,r[1]-=o,r[2]+=i,r[3]+=o}return r}updateClipFromPath(){let t=Lt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(xh,0)}getClippedPathBoundingBox(t=Gr.FILL,e=null){return Lt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}};Q6=["butt","round","square"],t5=["miter","round","bevel"],e5={},dO={},Jx=class Jx{constructor(t,e,r,i,o,{optionalContentConfig:s,markedContentStack:a=null},c,u,h){O(this,cs);this.ctx=t,this.current=new pv(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=r,this.canvasFactory=i,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=s,this.cachedCanvases=new hA(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(t,e,r=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):r}beginDrawing({transform:t,viewport:e,transparency:r=!1,background:i=null}){let o=this.ctx.canvas.width,s=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,o,s),this.ctx.fillStyle=a,r){let c=this.cachedCanvases.getCanvas("transparent",o,s);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Ke(this.compositeCtx))}this.ctx.save(),fy(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Ke(this.ctx)}executeOperatorList(t,e,r,i,o){let s=t.argsArray,a=t.fnArray,c=e||0,u=s.length;if(u===c)return c;let h=u-c>cO&&typeof r=="function",f=h?Date.now()+J6:0,g=0,m=this.commonObjs,y=this.objs,b,v;for(;;){if(i!==void 0&&c===i.nextBreakPoint)return i.breakIt(c,r),c;if(!o||o(c))if(b=a[c],v=s[c]??null,b!==ed.dependency)v===null?this[b](c):this[b](c,...v);else for(let w of v){this.dependencyTracker?.recordNamedData(w,c);let x=w.startsWith("g_")?m:y;if(!x.has(w))return x.get(w,r),c}if(c++,c===u)return c;if(h&&++g>cO){if(Date.now()>f)return r(),c;g=0}}}endDrawing(){F(this,cs,fA).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let t of this._cachedBitmapsMap.values()){for(let e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),F(this,cs,dA).call(this)}_scaleImage(t,e){let r=t.width??t.displayWidth,i=t.height??t.displayHeight,o=Math.max(Math.hypot(e[0],e[1]),1),s=Math.max(Math.hypot(e[2],e[3]),1),a=r,c=i,u="prescale1",h,f;for(;o>2&&a>1||s>2&&c>1;){let g=a,m=c;o>2&&a>1&&(g=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),o/=a/g),s>2&&c>1&&(m=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,s/=c/m),h=this.cachedCanvases.getCanvas(u,g,m),f=h.context,f.clearRect(0,0,g,m),f.drawImage(t,0,0,a,c,0,0,g,m),t=h.canvas,a=g,c=m,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:c}}_createMaskCanvas(t,e){let r=this.ctx,{width:i,height:o}=e,s=this.current.fillColor,a=this.current.patternFill,c=Ke(r),u,h,f,g;if((e.bitmap||e.data)&&e.count>1){let et=e.bitmap||e.data.buffer;h=JSON.stringify(a?c:[c.slice(0,4),s]),u=this._cachedBitmapsMap.get(et),u||(u=new Map,this._cachedBitmapsMap.set(et,u));let st=u.get(h);if(st&&!a){let lt=Math.round(Math.min(c[0],c[2])+c[4]),at=Math.round(Math.min(c[1],c[3])+c[5]);return this.dependencyTracker?.recordDependencies(t,xi.transformAndFill),{canvas:st,offsetX:lt,offsetY:at}}f=st}f||(g=this.cachedCanvases.getCanvas("maskCanvas",i,o),hO(g.context,e));let m=Lt.transform(c,[1/i,0,0,-1/o,0,0]);m=Lt.transform(m,[1,0,0,1,0,-o]);let y=xh.slice();Lt.axialAlignedBoundingBox([0,0,i,o],m,y);let[b,v,w,x]=y,E=Math.round(w-b)||1,D=Math.round(x-v)||1,_=this.cachedCanvases.getCanvas("fillCanvas",E,D),q=_.context,N=b,rt=v;q.translate(-N,-rt),q.transform(...m),f||(f=this._scaleImage(g.canvas,Ss(q)),f=f.img,u&&a&&u.set(h,f)),q.imageSmoothingEnabled=fO(Ke(q),e.interpolate),hy(q,f,0,0,f.width,f.height,0,0,i,o),q.globalCompositeOperation="source-in";let Y=Lt.transform(Ss(q),[1,0,0,1,-N,-rt]);return q.fillStyle=a?s.getPattern(r,this,Y,Gr.FILL,t):s,q.fillRect(0,0,i,o),u&&!a&&(this.cachedCanvases.delete("fillCanvas"),u.set(h,_.canvas)),this.dependencyTracker?.recordDependencies(t,xi.transformAndFill),{canvas:_.canvas,offsetX:Math.round(N),offsetY:Math.round(rt)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=Q6[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=t5[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,r){this.dependencyTracker?.recordSimpleData("dash",t);let i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=r)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(let[r,i]of e)switch(r){case"LW":this.setLineWidth(t,i);break;case"LC":this.setLineCap(t,i);break;case"LJ":this.setLineJoin(t,i);break;case"ML":this.setMiterLimit(t,i);break;case"D":this.setDash(t,i[0],i[1]);break;case"RI":this.setRenderingIntent(t,i);break;case"FL":this.setFlatness(t,i);break;case"Font":this.setFont(t,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let e=this.ctx.canvas.width,r=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(i,e,r);this.suspendedCtx=this.ctx;let s=this.ctx=o.context;s.setTransform(this.suspendedCtx.getTransform()),Jd(this.suspendedCtx,s),Z6(s,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Jd(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let e=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,r,i){let o=i[0],s=i[1],a=i[2]-o,c=i[3]-s;a===0||c===0||(this.genericComposeSMask(e.context,r,a,c,e.subtype,e.backdrop,e.transferMap,o,s,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(r.canvas,0,0),t.restore())}genericComposeSMask(t,e,r,i,o,s,a,c,u,h,f){let g=t.canvas,m=c-h,y=u-f;if(s)if(m<0||y<0||m+r>g.width||y+i>g.height){let v=this.cachedCanvases.getCanvas("maskExtension",r,i),w=v.context;w.drawImage(g,-m,-y),w.globalCompositeOperation="destination-atop",w.fillStyle=s,w.fillRect(0,0,r,i),w.globalCompositeOperation="source-over",g=v.canvas,m=y=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);let v=new Path2D;v.rect(m,y,r,i),t.clip(v),t.globalCompositeOperation="destination-atop",t.fillStyle=s,t.fillRect(m,y,r,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));let b=new Path2D;b.rect(c,u,r,i),e.clip(b),e.globalCompositeOperation="destination-in",e.drawImage(g,m,y,r,i,c,u,r,i),e.restore()}save(t){this.inSMaskMode&&Jd(this.ctx,this.suspendedCtx),this.ctx.save();let e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Jd(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,r,i,o,s,a){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,r,i,o,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,r,i){let[o]=r;if(!i){o||(o=r[0]=new Path2D),this[e](t,o);return}if(this.dependencyTracker!==null){let s=e===ed.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,i[0]-s,i[2]+s,i[1]-s,i[3]+s).recordDependencies(t,["transform"])}o instanceof Path2D||(o=r[0]=CO(o)),Lt.axialAlignedBoundingBox(i,Ke(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,r=!0){let i=this.ctx,o=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){let s=o.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=o.getPattern(i,this,Ss(i),Gr.STROKE,t),s){let a=new Path2D;a.addPath(e,i.getTransform().invertSelf().multiplySelf(s)),e=a}this.rescaleAndStroke(e,!1),i.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,xi.stroke),r&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Gr.STROKE,Ke(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,r=!0){let i=this.ctx,o=this.current.fillColor,s=this.current.patternFill,a=!1;if(s){let u=o.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(t),i.save(),i.fillStyle=o.getPattern(i,this,Ss(i),Gr.FILL,t),u){let h=new Path2D;h.addPath(e,i.getTransform().invertSelf().multiplySelf(u)),e=h}a=!0}let c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(i.fill(e,"evenodd"),this.pendingEOFill=!1):i.fill(e)),this.dependencyTracker?.recordDependencies(t,xi.fill),a&&(i.restore(),this.dependencyTracker?.restore(t)),r&&this.consumePath(t,e,c)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,xi.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=e5}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=dO}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){let e=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){let{dependencyTracker:i}=this;e!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",t),i.recordCloseMarker(t)}if(e!==void 0){let i=new Path2D,o=r.getTransform().invertSelf();for(let{transform:s,x:a,y:c,fontSize:u,path:h}of e)h&&i.addPath(h,new DOMMatrix(s).preMultiplySelf(o).translate(a,c).scale(u,-u));r.clip(i)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,r){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);let i=this.commonObjs.get(e),o=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=i.fontMatrix||d1,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&ee("Invalid font matrix for font "+e),r<0?(r=-r,o.fontDirection=-1):o.fontDirection=1,this.current.font=i,this.current.fontSize=r,i.isType3Font)return;let s=i.loadedName||"sans-serif",a=i.systemFontInfo?.css||`"${s}", ${i.fallbackName}`,c="normal";i.black?c="900":i.bold&&(c="bold");let u=i.italic?"italic":"normal",h=r;r<aO?h=aO:r>lO&&(h=lO),this.current.fontSizeScale=r/h,this.ctx.font=`${u} ${c} ${h}px ${a}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,r){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=r}setLeadingMoveText(t,e,r){this.setLeading(t,-r),this.moveText(t,e,r)}setTextMatrix(t,e){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);let{current:r}=this;r.textMatrix=e,r.textMatrixScale=Math.hypot(e[0],e[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,r,i,o,s){let a=this.ctx,c=this.current,u=c.font,h=c.textRenderingMode,f=c.fontSize/c.fontSizeScale,g=h&xr.FILL_STROKE_MASK,m=!!(h&xr.ADD_TO_PATH_FLAG),y=c.patternFill&&!u.missingFile,b=c.patternStroke&&!u.missingFile,v;if((u.disableFontFace||m||y||b)&&!u.missingFile&&(v=u.getPathGenerator(this.commonObjs,e)),v&&(u.disableFontFace||y||b)){a.save(),a.translate(r,i),a.scale(f,-f),this.dependencyTracker?.recordCharacterBBox(t,a,u);let w;if(g===xr.FILL||g===xr.FILL_STROKE)if(o){w=a.getTransform(),a.setTransform(...o);let x=F(this,cs,pA).call(this,v,w,o);a.fill(x)}else a.fill(v);if(g===xr.STROKE||g===xr.FILL_STROKE)if(s){w||(w=a.getTransform()),a.setTransform(...s);let{a:x,b:E,c:D,d:_}=w,q=Lt.inverseTransform(s),N=Lt.transform([x,E,D,_,0,0],q);Lt.singularValueDecompose2dScale(N,li),a.lineWidth*=Math.max(li[0],li[1])/f,a.stroke(F(this,cs,pA).call(this,v,w,s))}else a.lineWidth/=f,a.stroke(v);a.restore()}else(g===xr.FILL||g===xr.FILL_STROKE)&&(a.fillText(e,r,i),this.dependencyTracker?.recordCharacterBBox(t,a,u,f,r,i,()=>a.measureText(e))),(g===xr.STROKE||g===xr.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,a,u,f,r,i,()=>a.measureText(e)).recordDependencies(t,xi.stroke),a.strokeText(e,r,i));m&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ke(a),x:r,y:i,fontSize:f,path:v}),this.dependencyTracker?.recordCharacterBBox(t,a,u,f,r,i))}get isFontSubpixelAAEnabled(){let{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);let e=t.getImageData(0,0,10,10).data,r=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){r=!0;break}return Qt(this,"isFontSubpixelAAEnabled",r)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,xi.showText).resetBBox(t),this.current.textRenderingMode&xr.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());let r=this.current,i=r.font;if(i.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}let o=r.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}let s=this.ctx,a=r.fontSizeScale,c=r.charSpacing,u=r.wordSpacing,h=r.fontDirection,f=r.textHScale*h,g=e.length,m=i.vertical,y=m?1:-1,b=i.defaultVMetrics,v=o*r.fontMatrix[0],w=r.textRenderingMode===xr.FILL&&!i.disableFontFace&&!r.patternFill;s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),h>0?s.scale(f,-1):s.scale(f,1);let x,E,D=r.textRenderingMode&xr.FILL_STROKE_MASK,_=D===xr.FILL||D===xr.FILL_STROKE,q=D===xr.STROKE||D===xr.FILL_STROKE;if(_&&r.patternFill){s.save();let st=r.fillColor.getPattern(s,this,Ss(s),Gr.FILL,t);x=Ke(s),s.restore(),s.fillStyle=st}if(q&&r.patternStroke){s.save();let st=r.strokeColor.getPattern(s,this,Ss(s),Gr.STROKE,t);E=Ke(s),s.restore(),s.strokeStyle=st}let N=r.lineWidth,rt=r.textMatrixScale;if(rt===0||N===0?q&&(N=this.getSinglePixelWidth()):N/=rt,a!==1&&(s.scale(a,a),N/=a),s.lineWidth=N,i.isInvalidPDFjsFont){let st=[],lt=0;for(let X of e)st.push(X.unicode),lt+=X.width;let at=st.join("");if(s.fillText(at,0,0),this.dependencyTracker!==null){let X=s.measureText(at);this.dependencyTracker.recordBBox(t,this.ctx,-X.actualBoundingBoxLeft,X.actualBoundingBoxRight,-X.actualBoundingBoxAscent,X.actualBoundingBoxDescent).recordShowTextOperation(t)}r.x+=lt*v*f,s.restore(),this.compose();return}let Y=0,et;for(et=0;et<g;++et){let st=e[et];if(typeof st=="number"){Y+=y*st*o/1e3;continue}let lt=!1,at=(st.isSpace?u:0)+c,X=st.fontChar,ct=st.accent,J,R,T=st.width;if(m){let B=st.vmetric||b,$=-(st.vmetric?B[1]:T*.5)*v,H=B[2]*v;T=B?-B[0]:T,J=$/a,R=(Y+H)/a}else J=Y/a,R=0;let L;if(i.remeasure&&T>0){L=s.measureText(X);let B=L.width*1e3/o*a;if(T<B&&this.isFontSubpixelAAEnabled){let $=T/B;lt=!0,s.save(),s.scale($,1),J/=$}else T!==B&&(J+=(T-B)/2e3*o/a)}if(this.contentVisible&&(st.isInFont||i.missingFile)){if(w&&!ct)s.fillText(X,J,R),this.dependencyTracker?.recordCharacterBBox(t,s,L?{bbox:null}:i,o/a,J,R,()=>L??s.measureText(X));else if(this.paintChar(t,X,J,R,x,E),ct){let B=J+o*ct.offset.x/a,$=R-o*ct.offset.y/a;this.paintChar(t,ct.fontChar,B,$,x,E)}}let k=m?T*v-at*h:T*v+at*h;Y+=k,lt&&s.restore()}m?r.y-=Y:r.x+=Y*f,s.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){let r=this.ctx,i=this.current,o=i.font,s=i.fontSize,a=i.fontDirection,c=o.vertical?1:-1,u=i.charSpacing,h=i.wordSpacing,f=i.textHScale*a,g=i.fontMatrix||d1,m=e.length,y=i.textRenderingMode===xr.INVISIBLE,b,v,w,x;if(y||s===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),i.textMatrix&&r.transform(...i.textMatrix),r.translate(i.x,i.y+i.textRise),r.scale(f,a);let E=this.dependencyTracker;for(this.dependencyTracker=E?new dv(E,t):null,b=0;b<m;++b){if(v=e[b],typeof v=="number"){x=c*v*s/1e3,this.ctx.translate(x,0),i.x+=x*f;continue}let D=(v.isSpace?h:0)+u,_=o.charProcOperatorList[v.operatorListId];_?this.contentVisible&&(this.save(),r.scale(s,s),r.transform(...g),this.executeOperatorList(_),this.restore()):ee(`Type3 character "${v.operatorListId}" is not available.`);let q=[v.width,0];Lt.applyTransform(q,g),w=q[0]*s+D,r.translate(w,0),i.x+=w*f}r.restore(),E&&(this.dependencyTracker=E)}setCharWidth(t,e,r){}setCharWidthAndBounds(t,e,r,i,o,s,a){let c=new Path2D;c.rect(i,o,s-i,a-o),this.ctx.clip(c),this.dependencyTracker?.recordBBox(t,this.ctx,i,s,o,a).recordClipBox(t,this.ctx,i,s,o,a),this.endPath(t)}getColorN_Pattern(t,e){let r;if(e[0]==="TilingPattern"){let i=this.baseTransform||Ke(this.ctx),o={createCanvasGraphics:(s,a)=>new Jx(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new dv(this.dependencyTracker,a,!0):null)};r=new uA(e,this.ctx,o,i)}else r=this._getPattern(t,e[1],e[2]);return r}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,r=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=Y6(this.getObject(t,e)),this.cachedPatterns.set(e,i)),r&&(i.matrix=r),i}shadingFill(t,e){if(!this.contentVisible)return;let r=this.ctx;this.save(t);let i=this._getPattern(t,e);r.fillStyle=i.getPattern(r,this,Ss(r),Gr.SHADING,t);let o=Ss(r);if(o){let{width:s,height:a}=r.canvas,c=xh.slice();Lt.axialAlignedBoundingBox([0,0,s,a],o,c);let[u,h,f,g]=c;this.ctx.fillRect(u,h,f-u,g-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,xi.transform).recordDependencies(t,xi.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Me("Should not call beginInlineImage")}beginImageData(){Me("Should not call beginImageData")}paintFormXObjectBegin(t,e,r){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Ke(this.ctx),r)){Lt.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);let[i,o,s,a]=r,c=new Path2D;c.rect(i,o,s-i,a-o),this.ctx.clip(c),this.dependencyTracker?.recordClipBox(t,this.ctx,i,s,o,a),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let r=this.ctx;e.isolated||Zv("TODO: Support non-isolated groups."),e.knockout&&ee("Knockout groups not supported.");let i=Ke(r);if(e.matrix&&r.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=xh.slice();Lt.axialAlignedBoundingBox(e.bbox,Ke(r),o);let s=[0,0,r.canvas.width,r.canvas.height];o=Lt.intersect(o,s)||[0,0,0,0];let a=Math.floor(o[0]),c=Math.floor(o[1]),u=Math.max(Math.ceil(o[2])-a,1),h=Math.max(Math.ceil(o[3])-c,1);this.current.startNewPathAndClipBox([0,0,u,h]);let f="groupAt"+this.groupLevel;e.smask&&(f+="_smask_"+this.smaskCounter++%2);let g=this.cachedCanvases.getCanvas(f,u,h),m=g.context;m.translate(-a,-c),m.transform(...i);let y=new Path2D,[b,v,w,x]=e.bbox;if(y.rect(b,v,w-b,x-v),e.matrix){let E=new Path2D;E.addPath(y,new DOMMatrix(e.matrix)),y=E}m.clip(y),e.smask&&this.smaskStack.push({canvas:g.canvas,context:m,offsetX:a,offsetY:c,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(a,c),r.save()),Jd(r,m),this.ctx=m,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;let r=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();let o=Ke(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);let s=xh.slice();Lt.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],o,s),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(t,e,r,i,o,s){if(F(this,cs,fA).call(this),fy(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){let a=r[2]-r[0],c=r[3]-r[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=r[0],i[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=a,r[3]=c,Lt.singularValueDecompose2dScale(Ke(this.ctx),li);let{viewportScale:u}=this,h=Math.ceil(a*this.outputScaleX*u),f=Math.ceil(c*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(h,f);let{canvas:g,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(li[0],0,0,-li[1],0,c*li[1]),fy(this.ctx)}else{fy(this.ctx),this.endPath(t);let u=new Path2D;u.rect(r[0],r[1],a,c),this.ctx.clip(u)}}this.current=new pv(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...i),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),F(this,cs,dA).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;let r=e.count;e=this.getObject(t,e.data,e),e.count=r;let i=this.ctx,o=this._createMaskCanvas(t,e),s=o.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+s.width,o.offsetY,o.offsetY+s.height).recordOperation(t),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,r,i=0,o=0,s,a){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);let c=this.ctx;c.save();let u=Ke(c);c.transform(r,i,o,s,0,0);let h=this._createMaskCanvas(t,e);c.setTransform(1,0,0,1,h.offsetX-u[4],h.offsetY-u[5]),this.dependencyTracker?.resetBBox(t);for(let f=0,g=a.length;f<g;f+=2){let m=Lt.transform(u,[r,i,o,s,a[f],a[f+1]]);c.drawImage(h.canvas,m[4],m[5]),this.dependencyTracker?.recordBBox(t,this.ctx,m[4],m[4]+h.canvas.width,m[5],m[5]+h.canvas.height)}c.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;let r=this.ctx,i=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,xi.transformAndFill);for(let s of e){let{data:a,width:c,height:u,transform:h}=s,f=this.cachedCanvases.getCanvas("maskCanvas",c,u),g=f.context;g.save();let m=this.getObject(t,a,s);hO(g,m),g.globalCompositeOperation="source-in",g.fillStyle=o?i.getPattern(g,this,Ss(r),Gr.FILL,t):i,g.fillRect(0,0,c,u),g.restore(),r.save(),r.transform(...h),r.scale(1,-1),hy(r,f.canvas,0,0,c,u,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,c,0,u),r.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;let r=this.getObject(t,e);if(!r){ee("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,r)}paintImageXObjectRepeat(t,e,r,i,o){if(!this.contentVisible)return;let s=this.getObject(t,e);if(!s){ee("Dependent image isn't ready yet");return}let a=s.width,c=s.height,u=[];for(let h=0,f=o.length;h<f;h+=2)u.push({transform:[r,0,0,i,o[h],o[h+1]],x:0,y:0,w:a,h:c});this.paintInlineImageXObjectGroup(t,s,u)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;let{bitmap:e,width:r,height:i}=t,o=this.cachedCanvases.getCanvas("inlineImage",r,i),s=o.context;return s.filter=this.current.transferMaps,s.drawImage(e,0,0),s.filter="none",o.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;let r=e.width,i=e.height,o=this.ctx;this.save(t);let{filter:s}=o;s!=="none"&&s!==""&&(o.filter="none"),o.scale(1/r,-1/i);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{let h=this.cachedCanvases.getCanvas("inlineImage",r,i).context;uO(h,e),a=this.applyTransferMapsToCanvas(h)}let c=this._scaleImage(a,Ss(o));o.imageSmoothingEnabled=fO(Ke(o),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,r,-i,0).recordDependencies(t,xi.imageXObject).recordOperation(t),hy(o,c.img,0,0,c.paintWidth,c.paintHeight,0,-i,r,i),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,r){if(!this.contentVisible)return;let i=this.ctx,o;if(e.bitmap)o=e.bitmap;else{let s=e.width,a=e.height,u=this.cachedCanvases.getCanvas("inlineImage",s,a).context;uO(u,e),o=this.applyTransferMapsToCanvas(u)}this.dependencyTracker?.resetBBox(t);for(let s of r)i.save(),i.transform(...s.transform),i.scale(1,-1),hy(i,o,s.x,s.y,s.w,s.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,xi.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,r){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,r){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,r){let i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);let o=this.ctx;this.pendingClip?(i||(this.pendingClip===dO?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let t=Ke(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{let e=Math.abs(t[0]*t[3]-t[2]*t[1]),r=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:t}=this.current,{a:e,b:r,c:i,d:o}=this.ctx.getTransform(),s,a;if(r===0&&i===0){let c=Math.abs(e),u=Math.abs(o);if(c===u)if(t===0)s=a=1/c;else{let h=c*t;s=a=h<1?1/h:1}else if(t===0)s=1/c,a=1/u;else{let h=c*t,f=u*t;s=h<1?1/h:1,a=f<1?1/f:1}}else{let c=Math.abs(e*o-r*i),u=Math.hypot(e,r),h=Math.hypot(i,o);if(t===0)s=h/c,a=u/c;else{let f=t*c;s=h>f?h/f:1,a=u>f?u/f:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t,e){let{ctx:r,current:{lineWidth:i}}=this,[o,s]=this.getScaleForStroking();if(o===s){r.lineWidth=(i||1)*o,r.stroke(t);return}let a=r.getLineDash();e&&r.save(),r.scale(o,s),u1.a=1/o,u1.d=1/s;let c=new Path2D;if(c.addPath(t,u1),a.length>0){let u=Math.max(o,s);r.setLineDash(a.map(h=>h/u)),r.lineDashOffset/=u}r.lineWidth=i||1,r.stroke(c),e&&r.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};cs=new WeakSet,fA=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},dA=function(){if(this.pageColors){let t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){let e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},pA=function(t,e,r){let i=new Path2D;return i.addPath(t,new DOMMatrix(r).invertSelf().multiplySelf(e)),i};Th=Jx;for(let n in ed)Th.prototype[n]!==void 0&&(Th.prototype[ed[n]]=Th.prototype[n]);Bi=class{static get workerPort(){return l(this,Tg)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");C(this,Tg,t)}static get workerSrc(){return l(this,Dg)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");C(this,Dg,t)}};Tg=new WeakMap,Dg=new WeakMap,O(Bi,Tg,null),O(Bi,Dg,"");gA=class{constructor({parsedData:t,rawData:e}){O(this,hf);O(this,Rg);C(this,hf,t),C(this,Rg,e)}getRaw(){return l(this,Rg)}get(t){return l(this,hf).get(t)??null}[Symbol.iterator](){return l(this,hf).entries()}};hf=new WeakMap,Rg=new WeakMap;yh=Symbol("INTERNAL"),mA=class{constructor(t,{name:e,intent:r,usage:i,rbGroups:o}){O(this,Ig,!1);O(this,Og,!1);O(this,Ng,!1);O(this,ff,!0);C(this,Ig,!!(t&ai.DISPLAY)),C(this,Og,!!(t&ai.PRINT)),this.name=e,this.intent=r,this.usage=i,this.rbGroups=o}get visible(){if(l(this,Ng))return l(this,ff);if(!l(this,ff))return!1;let{print:t,view:e}=this.usage;return l(this,Ig)?e?.viewState!=="OFF":l(this,Og)?t?.printState!=="OFF":!0}_setVisible(t,e,r=!1){t!==yh&&Me("Internal method `_setVisible` called."),C(this,Ng,r),C(this,ff,e)}};Ig=new WeakMap,Og=new WeakMap,Ng=new WeakMap,ff=new WeakMap;yA=class{constructor(t,e=ai.DISPLAY){O(this,Pg);O(this,Ya,null);O(this,Ne,new Map);O(this,df,null);O(this,pf,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,C(this,pf,t.order);for(let r of t.groups)l(this,Ne).set(r.id,new mA(e,r));if(t.baseState==="OFF")for(let r of l(this,Ne).values())r._setVisible(yh,!1);for(let r of t.on)l(this,Ne).get(r)._setVisible(yh,!0);for(let r of t.off)l(this,Ne).get(r)._setVisible(yh,!1);C(this,df,this.getHash())}}isVisible(t){if(l(this,Ne).size===0)return!0;if(!t)return Zv("Optional content group not defined."),!0;if(t.type==="OCG")return l(this,Ne).has(t.id)?l(this,Ne).get(t.id).visible:(ee(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return F(this,Pg,vA).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(let e of t.ids){if(!l(this,Ne).has(e))return ee(`Optional content group not found: ${e}`),!0;if(l(this,Ne).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(let e of t.ids){if(!l(this,Ne).has(e))return ee(`Optional content group not found: ${e}`),!0;if(!l(this,Ne).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(let e of t.ids){if(!l(this,Ne).has(e))return ee(`Optional content group not found: ${e}`),!0;if(!l(this,Ne).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(let e of t.ids){if(!l(this,Ne).has(e))return ee(`Optional content group not found: ${e}`),!0;if(l(this,Ne).get(e).visible)return!1}return!0}return ee(`Unknown optional content policy ${t.policy}.`),!0}return ee(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,r=!0){let i=l(this,Ne).get(t);if(!i){ee(`Optional content group not found: ${t}`);return}if(r&&e&&i.rbGroups.length)for(let o of i.rbGroups)for(let s of o)s!==t&&l(this,Ne).get(s)?._setVisible(yh,!1,!0);i._setVisible(yh,!!e,!0),C(this,Ya,null)}setOCGState({state:t,preserveRB:e}){let r;for(let i of t){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}let o=l(this,Ne).get(i);if(o)switch(r){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!o.visible,e);break}}C(this,Ya,null)}get hasInitialVisibility(){return l(this,df)===null||this.getHash()===l(this,df)}getOrder(){return l(this,Ne).size?l(this,pf)?l(this,pf).slice():[...l(this,Ne).keys()]:null}getGroup(t){return l(this,Ne).get(t)||null}getHash(){if(l(this,Ya)!==null)return l(this,Ya);let t=new ev;for(let[e,r]of l(this,Ne))t.update(`${e}:${r.visible}`);return C(this,Ya,t.hexdigest())}[Symbol.iterator](){return l(this,Ne).entries()}};Ya=new WeakMap,Ne=new WeakMap,df=new WeakMap,pf=new WeakMap,Pg=new WeakSet,vA=function(t){let e=t.length;if(e<2)return!0;let r=t[0];for(let i=1;i<e;i++){let o=t[i],s;if(Array.isArray(o))s=F(this,Pg,vA).call(this,o);else if(l(this,Ne).has(o))s=l(this,Ne).get(o).visible;else return ee(`Optional content group not found: ${o}`),!0;switch(r){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return r==="And"};bA=class{constructor(t,{disableRange:e=!1,disableStream:r=!1}){fe(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:i,initialData:o,progressiveDone:s,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=a,o?.length>0){let c=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!r,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),t.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){let r=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{let i=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(r),!0)});fe(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){let e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){fe(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let t=this._queuedChunks;return this._queuedChunks=null,new wA(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let r=new AA(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(r),r}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}},wA=class{constructor(t,e,r=!1,i=null){this._stream=t,this._done=r||!1,this._filename=Qv(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(let o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},AA=class{constructor(t,e,r){this._stream=t,this._begin=e,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(let r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};xA=class{constructor(t){Dt(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=uN(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return fe(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new EA(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let r=new SA(this,t,e);return this._rangeRequestReaders.push(r),r}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},EA=class{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;let e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;let r=new Headers(t.headers),i=e.url;fetch(i,pN(r,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=tb(o.url),!dN(o.status))throw Pm(o.status,i);this._reader=o.body.getReader(),this._headersCapability.resolve();let s=o.headers,{allowRangeRequests:a,suggestedLength:c}=hN({responseHeaders:s,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=c||this._contentLength,this._filename=fN(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ls("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;let{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:gN(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}},SA=class{constructor(t,e,r){this._stream=t,this._reader=null,this._loaded=0;let i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;let o=new Headers(t.headers);o.append("Range",`bytes=${e}-${r-1}`);let s=i.url;fetch(s,pN(o,this._withCredentials,this._abortController)).then(a=>{let c=tb(a.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!dN(a.status))throw Pm(a.status,s);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;let{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:gN(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}},h1=200,f1=206;_A=class{constructor({url:t,httpHeaders:e,withCredentials:r}){Dt(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=uN(this.isHttp,e),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){let e=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(let[o,s]of this.headers)e.setRequestHeader(o,s);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=f1):i.expectedStatus=h1,e.responseType="arraybuffer",fe(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,r),e.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),r}onProgress(t,e){let r=this.pendingRequests[t];r&&r.onProgress?.(e)}onStateChange(t,e){let r=this.pendingRequests[t];if(!r)return;let i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){r.onError(i.status);return}let o=i.status||h1;if(!(o===h1&&r.expectedStatus===f1)&&o!==r.expectedStatus){r.onError(i.status);return}let a=n5(i);if(o===f1){let c=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?r.onDone({begin:parseInt(u[1],10),chunk:a}):(ee('Missing or invalid "Content-Range" header.'),r.onError(0))}else a?r.onDone({begin:0,chunk:a}):r.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){let e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}},CA=class{constructor(t){this._source=t,this._manager=new _A(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){let e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return fe(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new TA(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){let r=new DA(this._manager,t,e);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},TA=class{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=tb(e.responseURL);let r=e.getAllResponseHeaders(),i=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{let[c,...u]=a.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:s}=hN({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=fN(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Pm(t,this._url),this._headersCapability.reject(this._storedError);for(let e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},DA=class{constructor(t,e,r){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){let t=tb(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){let e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(let r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Pm(t,this._url));for(let e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},i5=/^[a-z][a-z0-9\-+.]+:/i;RA=class{constructor(t){this.source=t,this.url=s5(t.url),fe(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return fe(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new IA(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let r=new OA(this,t,e);return this._rangeRequestReaders.push(r),r}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},IA=class{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;let e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();let r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=Pm(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ls("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},OA=class{constructor(t,e,r){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let i=t.source;this._isStreamingSupported=!i.disableStream;let o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}},Zd=Symbol("INITIAL_DATA"),gv=class{constructor(){O(this,kg);O(this,Gn,Object.create(null))}get(t,e=null){if(e){let i=F(this,kg,NA).call(this,t);return i.promise.then(()=>e(i.data)),null}let r=l(this,Gn)[t];if(!r||r.data===Zd)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return r.data}has(t){let e=l(this,Gn)[t];return!!e&&e.data!==Zd}delete(t){let e=l(this,Gn)[t];return!e||e.data===Zd?!1:(delete l(this,Gn)[t],!0)}resolve(t,e=null){let r=F(this,kg,NA).call(this,t);r.data=e,r.resolve()}clear(){for(let t in l(this,Gn)){let{data:e}=l(this,Gn)[t];e?.bitmap?.close()}C(this,Gn,Object.create(null))}*[Symbol.iterator](){for(let t in l(this,Gn)){let{data:e}=l(this,Gn)[t];e!==Zd&&(yield[t,e])}}};Gn=new WeakMap,kg=new WeakSet,NA=function(t){var e;return(e=l(this,Gn))[t]||(e[t]={...Promise.withResolvers(),data:Zd})};o5=1e5,pO=30,jr=class jr{constructor({textContentSource:t,container:e,viewport:r}){O(this,ha);O(this,Ka,Promise.withResolvers());O(this,Vn,null);O(this,Bg,!1);O(this,Lg,!!globalThis.FontInspector?.enabled);O(this,Fc,null);O(this,$o,null);O(this,Fg,0);O(this,Mg,0);O(this,Mc,null);O(this,Ug,null);O(this,gf,0);O(this,Ja,0);O(this,mf,Object.create(null));O(this,jg,[]);O(this,yf,null);O(this,Uc,[]);O(this,$g,new WeakMap);O(this,qg,null);var c;if(t instanceof ReadableStream)C(this,yf,t);else if(typeof t=="object")C(this,yf,new ReadableStream({start(u){u.enqueue(t),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');C(this,Vn,C(this,Ug,e)),C(this,Ja,r.scale*Ys.pixelRatio),C(this,gf,r.rotation),C(this,$o,{div:null,properties:null,ctx:null});let{pageWidth:i,pageHeight:o,pageX:s,pageY:a}=r.rawDims;C(this,qg,[1,0,0,-1,-s,a+o]),C(this,Mg,i),C(this,Fg,o),F(c=jr,ui,vN).call(c),e.style.setProperty("--min-font-size",l(jr,bf)),bl(e,r),l(this,Ka).promise.finally(()=>{l(jr,wf).delete(this),C(this,$o,null),C(this,mf,null)}).catch(()=>{})}static get fontFamilyMap(){let{isWindows:t,isFirefox:e}=sr.platform;return Qt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){let t=()=>{l(this,Mc).read().then(({value:e,done:r})=>{if(r){l(this,Ka).resolve();return}l(this,Fc)??C(this,Fc,e.lang),Object.assign(l(this,mf),e.styles),F(this,ha,mN).call(this,e.items),t()},l(this,Ka).reject)};return C(this,Mc,l(this,yf).getReader()),l(jr,wf).add(this),t(),l(this,Ka).promise}update({viewport:t,onBefore:e=null}){var o;let r=t.scale*Ys.pixelRatio,i=t.rotation;if(i!==l(this,gf)&&(e?.(),C(this,gf,i),bl(l(this,Ug),{rotation:i})),r!==l(this,Ja)){e?.(),C(this,Ja,r);let s={div:null,properties:null,ctx:F(o=jr,ui,Ty).call(o,l(this,Fc))};for(let a of l(this,Uc))s.properties=l(this,$g).get(a),s.div=a,F(this,ha,PA).call(this,s)}}cancel(){let t=new ls("TextLayer task cancelled.");l(this,Mc)?.cancel(t).catch(()=>{}),C(this,Mc,null),l(this,Ka).reject(t)}get textDivs(){return l(this,Uc)}get textContentItemsStr(){return l(this,jg)}static cleanup(){if(!(l(this,wf).size>0)){l(this,vf).clear();for(let{canvas:t}of l(this,jc).values())t.remove();l(this,jc).clear()}}};Ka=new WeakMap,Vn=new WeakMap,Bg=new WeakMap,Lg=new WeakMap,Fc=new WeakMap,$o=new WeakMap,Fg=new WeakMap,Mg=new WeakMap,Mc=new WeakMap,Ug=new WeakMap,gf=new WeakMap,Ja=new WeakMap,mf=new WeakMap,jg=new WeakMap,yf=new WeakMap,Uc=new WeakMap,$g=new WeakMap,qg=new WeakMap,vf=new WeakMap,jc=new WeakMap,zg=new WeakMap,bf=new WeakMap,wf=new WeakMap,ha=new WeakSet,mN=function(t){var i,o;if(l(this,Bg))return;(o=l(this,$o)).ctx??(o.ctx=F(i=jr,ui,Ty).call(i,l(this,Fc)));let e=l(this,Uc),r=l(this,jg);for(let s of t){if(e.length>o5){ee("Ignoring additional textDivs for performance reasons."),C(this,Bg,!0);return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){let a=l(this,Vn);C(this,Vn,document.createElement("span")),l(this,Vn).classList.add("markedContent"),s.id&&l(this,Vn).setAttribute("id",`${s.id}`),a.append(l(this,Vn))}else s.type==="endMarkedContent"&&C(this,Vn,l(this,Vn).parentNode);continue}r.push(s.str),F(this,ha,yN).call(this,s)}},yN=function(t){var y;let e=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};l(this,Uc).push(e);let i=Lt.transform(l(this,qg),t.transform),o=Math.atan2(i[1],i[0]),s=l(this,mf)[t.fontName];s.vertical&&(o+=Math.PI/2);let a=l(this,Lg)&&s.fontSubstitution||s.fontFamily;a=jr.fontFamilyMap.get(a)||a;let c=Math.hypot(i[2],i[3]),u=c*F(y=jr,ui,bN).call(y,a,s,l(this,Fc)),h,f;o===0?(h=i[4],f=i[5]-u):(h=i[4]+u*Math.sin(o),f=i[5]-u*Math.cos(o));let g=e.style;g.left=`${(100*h/l(this,Mg)).toFixed(2)}%`,g.top=`${(100*f/l(this,Fg)).toFixed(2)}%`,g.setProperty("--font-height",`${c.toFixed(2)}px`),g.fontFamily=a,r.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,l(this,Lg)&&(e.dataset.fontName=s.fontSubstitutionLoadedName||t.fontName),o!==0&&(r.angle=o*(180/Math.PI));let m=!1;if(t.str.length>1)m=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){let b=Math.abs(t.transform[0]),v=Math.abs(t.transform[3]);b!==v&&Math.max(b,v)/Math.min(b,v)>1.5&&(m=!0)}if(m&&(r.canvasWidth=s.vertical?t.height:t.width),l(this,$g).set(e,r),l(this,$o).div=e,l(this,$o).properties=r,F(this,ha,PA).call(this,l(this,$o)),r.hasText&&l(this,Vn).append(e),r.hasEOL){let b=document.createElement("br");b.setAttribute("role","presentation"),l(this,Vn).append(b)}},PA=function(t){var s;let{div:e,properties:r,ctx:i}=t,{style:o}=e;if(r.canvasWidth!==0&&r.hasText){let{fontFamily:a}=o,{canvasWidth:c,fontSize:u}=r;F(s=jr,ui,kA).call(s,i,u*l(this,Ja),a);let{width:h}=i.measureText(e.textContent);h>0&&o.setProperty("--scale-x",c*l(this,Ja)/h)}r.angle!==0&&o.setProperty("--rotate",`${r.angle}deg`)},ui=new WeakSet,Ty=function(t=null){let e=l(this,jc).get(t||(t=""));if(!e){let r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=t,document.body.append(r),e=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,jc).set(t,e),l(this,zg).set(e,{size:0,family:""})}return e},kA=function(t,e,r){let i=l(this,zg).get(t);e===i.size&&r===i.family||(t.font=`${e}px ${r}`,i.size=e,i.family=r)},vN=function(){if(l(this,bf)!==null)return;let t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),C(this,bf,t.getBoundingClientRect().height),t.remove()},bN=function(t,e,r){let i=l(this,vf).get(t);if(i)return i;let o=F(this,ui,Ty).call(this,r);o.canvas.width=o.canvas.height=pO,F(this,ui,kA).call(this,o,pO,t);let s=o.measureText(""),a=s.fontBoundingBoxAscent,c=Math.abs(s.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let u=.8;return a?u=a/(a+c):(sr.platform.isFirefox&&ee("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?u=e.ascent:e.descent&&(u=1+e.descent)),l(this,vf).set(t,u),u},O(jr,ui),O(jr,vf,new Map),O(jr,jc,new Map),O(jr,zg,new WeakMap),O(jr,bf,null),O(jr,wf,new Set);id=jr,a5=100;qv=class qv{constructor(){Dt(this,"_capability",Promise.withResolvers());Dt(this,"_transport",null);Dt(this,"_worker",null);Dt(this,"docId",`d${vr(qv,$v)._++}`);Dt(this,"destroyed",!1);Dt(this,"onPassword",null);Dt(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}};$v=new WeakMap,O(qv,$v,0);BA=qv,Np=class{constructor(t,e,r=!1,i=null){O(this,$c,Promise.withResolvers());O(this,Hg,[]);O(this,Wg,[]);O(this,Gg,[]);O(this,Vg,[]);this.length=t,this.initialData=e,this.progressiveDone=r,this.contentDispositionFilename=i}addRangeListener(t){l(this,Vg).push(t)}addProgressListener(t){l(this,Gg).push(t)}addProgressiveReadListener(t){l(this,Wg).push(t)}addProgressiveDoneListener(t){l(this,Hg).push(t)}onDataRange(t,e){for(let r of l(this,Vg))r(t,e)}onDataProgress(t,e){l(this,$c).promise.then(()=>{for(let r of l(this,Gg))r(t,e)})}onDataProgressiveRead(t){l(this,$c).promise.then(()=>{for(let e of l(this,Wg))e(t)})}onDataProgressiveDone(){l(this,$c).promise.then(()=>{for(let t of l(this,Hg))t()})}transportReady(){l(this,$c).resolve()}requestDataRange(t,e){Me("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};$c=new WeakMap,Hg=new WeakMap,Wg=new WeakMap,Gg=new WeakMap,Vg=new WeakMap;LA=class{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Qt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){let{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},FA=class{constructor(t,e,r,i=!1){O(this,qc);O(this,qo,!1);this._pageIndex=t,this._pageInfo=e,this._transport=r,this._stats=i?new Jy:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new gv,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:o=!1}={}){return new Dp({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:r,offsetY:i,dontFlip:o})}getAnnotations({intent:t="display"}={}){let{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Qt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:r,intent:i="display",annotationMode:o=ia.ENABLE,transform:s=null,background:a=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:h=null,printAnnotationStorage:f=null,isEditing:g=!1,recordOperations:m=!1,operationsFilter:y=null}){this._stats?.time("Overall");let b=this._transport.getRenderingIntent(i,o,f,g),{renderingIntent:v,cacheKey:w}=b;C(this,qo,!1),c||(c=this._transport.getOptionalContentConfig(v));let x=this._intentStates.get(w);x||(x=Object.create(null),this._intentStates.set(w,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);let E=!!(v&ai.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(b));let D=!!(this._pdfBug&&globalThis.StepperManager?.enabled),_=!this.recordedBBoxes&&(m||D),q=Y=>{if(x.renderTasks.delete(N),_){let et=N.gfx?.dependencyTracker.take();et&&(N.stepper&&N.stepper.setOperatorBBoxes(et,N.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=et))}E&&C(this,qo,!0),F(this,qc,dp).call(this),Y?(N.capability.reject(Y),this._abortOperatorList({intentState:x,reason:Y instanceof Error?Y:new Error(Y)})):N.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},N=new jA({callback:q,params:{canvas:e,canvasContext:t,dependencyTracker:_?new iA(e,x.operatorList.length,D):null,viewport:r,transform:s,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:y});(x.renderTasks||(x.renderTasks=new Set)).add(N);let rt=N.task;return Promise.all([x.displayReadyCapability.promise,c]).then(([Y,et])=>{if(this.destroyed){q();return}if(this._stats?.time("Rendering"),!(et.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");N.initializeGraphics({transparency:Y,optionalContentConfig:et}),N.operatorListChanged()}).catch(q),rt}getOperatorList({intent:t="display",annotationMode:e=ia.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){function o(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(c))}let s=this._transport.getRenderingIntent(t,e,r,i,!0),a=this._intentStates.get(s.cacheKey);a||(a=Object.create(null),this._intentStates.set(s.cacheKey,a));let c;return a.opListReadCapability||(c=Object.create(null),c.operatorListChanged=o,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(c),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(s)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>Cp.textContent(r));let e=this.streamTextContent(t);return new Promise(function(r,i){function o(){s.read().then(function({value:c,done:u}){if(u){r(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),o()},i)}let s=e.getReader(),a={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let t=[];for(let e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(let r of e.renderTasks)t.push(r.completed),r.cancel();return this.objs.clear(),C(this,qo,!1),Promise.all(t)}cleanup(t=!1){C(this,qo,!0);let e=F(this,qc,dp).call(this);return t&&e&&this._stats&&(this._stats=new Jy),e}_startRenderPage(t,e){let r=this._intentStates.get(e);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let r=0,i=t.length;r<i;r++)e.operatorList.fnArray.push(t.fnArray[r]),e.operatorList.argsArray.push(t.argsArray[r]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(let r of e.renderTasks)r.operatorListChanged();t.lastChunk&&F(this,qc,dp).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:r,modifiedIds:i}){let{map:o,transfer:s}=r,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:i},s).getReader(),u=this._intentStates.get(e);u.streamReader=c;let h=()=>{c.read().then(({value:f,done:g})=>{if(g){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,u),h())},f=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(let g of u.renderTasks)g.operatorListChanged();F(this,qc,dp).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(f);else if(u.opListReadCapability)u.opListReadCapability.reject(f);else throw f}})};h()}_abortOperatorList({intentState:t,reason:e,force:r=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!r){if(t.renderTasks.size>0)return;if(e instanceof nd){let i=a5;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new ls(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(let[i,o]of this._intentStates)if(o===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}};qo=new WeakMap,qc=new WeakSet,dp=function(){if(!l(this,qo)||this.destroyed)return!1;for(let{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),C(this,qo,!1),!0};He=class He{constructor({name:t=null,port:e=null,verbosity:r=B6()}={}){O(this,yn);O(this,Za,Promise.withResolvers());O(this,ts,null);O(this,zo,null);O(this,zc,null);if(this.name=t,this.destroyed=!1,this.verbosity=r,e){if(l(He,Wc).has(e))throw new Error("Cannot use more than one PDFWorker per port.");l(He,Wc).set(e,this),F(this,yn,AN).call(this,e)}else F(this,yn,xN).call(this)}get promise(){return l(this,Za).promise}get port(){return l(this,zo)}get messageHandler(){return l(this,ts)}destroy(){this.destroyed=!0,l(this,zc)?.terminate(),C(this,zc,null),l(He,Wc).delete(l(this,zo)),C(this,zo,null),l(this,ts)?.destroy(),C(this,ts,null)}static create(t){let e=l(this,Wc).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new He(t)}static get workerSrc(){if(Bi.workerSrc)return Bi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Qt(this,"_setupFakeWorkerGlobal",(async()=>l(this,Af,Ry)?l(this,Af,Ry):(await import(this.workerSrc)).WorkerMessageHandler)())}};Za=new WeakMap,ts=new WeakMap,zo=new WeakMap,zc=new WeakMap,zv=new WeakMap,Hc=new WeakMap,Wc=new WeakMap,yn=new WeakSet,Dy=function(){l(this,Za).resolve(),l(this,ts).send("configure",{verbosity:this.verbosity})},AN=function(t){C(this,zo,t),C(this,ts,new sc("main","worker",t)),l(this,ts).on("ready",()=>{}),F(this,yn,Dy).call(this)},xN=function(){if(l(He,Hc)||l(He,Af,Ry)){F(this,yn,pp).call(this);return}let{workerSrc:t}=He;try{He._isSameOrigin(window.location,t)||(t=He._createCDNWrapper(new URL(t,window.location).href));let e=new Worker(t,{type:"module"}),r=new sc("main","worker",e),i=()=>{o.abort(),r.destroy(),e.terminate(),this.destroyed?l(this,Za).reject(new Error("Worker was destroyed")):F(this,yn,pp).call(this)},o=new AbortController;e.addEventListener("error",()=>{l(this,zc)||i()},{signal:o.signal}),r.on("test",a=>{if(o.abort(),this.destroyed||!a){i();return}C(this,ts,r),C(this,zo,e),C(this,zc,e),F(this,yn,Dy).call(this)}),r.on("ready",a=>{if(o.abort(),this.destroyed){i();return}try{s()}catch{F(this,yn,pp).call(this)}});let s=()=>{let a=new Uint8Array;r.send("test",a,[a.buffer])};s();return}catch{Zv("The worker has been disabled.")}F(this,yn,pp).call(this)},pp=function(){l(He,Hc)||(ee("Setting up fake worker."),C(He,Hc,!0)),He._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){l(this,Za).reject(new Error("Worker was destroyed"));return}let e=new G1;C(this,zo,e);let r=`fake${vr(He,zv)._++}`,i=new sc(r+"_worker",r,e);t.setup(i,e),C(this,ts,new sc(r,r+"_worker",e)),F(this,yn,Dy).call(this)}).catch(t=>{l(this,Za).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Af=new WeakSet,Ry=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},O(He,Af),O(He,zv,0),O(He,Hc,!1),O(He,Wc,new WeakMap),mn&&(C(He,Hc,!0),Bi.workerSrc||(Bi.workerSrc="./pdf.worker.mjs")),He._isSameOrigin=(t,e)=>{let r=URL.parse(t);if(!r?.origin||r.origin==="null")return!1;let i=new URL(e,r);return r.origin===i.origin},He._createCDNWrapper=t=>{let e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},He.fromPort=t=>{if(z6("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return He.create(t)};sd=He,MA=class{constructor(t,e,r,i,o,s){O(this,Gc);O(this,Ho,new Map);O(this,Us,new Map);O(this,xf,new Map);O(this,Ef,new Map);O(this,Wo,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new gv,this.fontLoader=new j1({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}get annotationStorage(){return Qt(this,"annotationStorage",new Ip)}getRenderingIntent(t,e=ia.ENABLE,r=null,i=!1,o=!1){let s=ai.DISPLAY,a=U1;switch(t){case"any":s=ai.ANY;break;case"display":break;case"print":s=ai.PRINT;break;default:ee(`getRenderingIntent - invalid intent: ${t}`)}let c=s&ai.PRINT&&r instanceof rv?r:this.annotationStorage;switch(e){case ia.DISABLE:s+=ai.ANNOTATIONS_DISABLE;break;case ia.ENABLE:break;case ia.ENABLE_FORMS:s+=ai.ANNOTATIONS_FORMS;break;case ia.ENABLE_STORAGE:s+=ai.ANNOTATIONS_STORAGE,a=c.serializable;break;default:ee(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(s+=ai.IS_EDITING),o&&(s+=ai.OPLIST);let{ids:u,hash:h}=c.modifiedIds,f=[s,a.hash,h];return{renderingIntent:s,cacheKey:f.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),l(this,Wo)?.reject(new Error("Worker was destroyed during onPassword callback"));let t=[];for(let r of l(this,Us).values())t.push(r._destroy());l(this,Us).clear(),l(this,xf).clear(),l(this,Ef).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),l(this,Ho).clear(),this.filterFactory.destroy(),id.cleanup(),this._networkStream?.cancelAllRequests(new ls("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(r,i)=>{fe(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},i.onPull=()=>{this._fullReader.read().then(function({value:o,done:s}){if(s){i.close();return}fe(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{this._fullReader.cancel(o),i.ready.catch(s=>{if(!this.destroyed)throw s})}}),t.on("ReaderHeadersReady",async r=>{await this._fullReader.headersReady;let{isStreamingSupported:i,isRangeSupported:o,contentLength:s}=this._fullReader;return(!i||!o)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=a=>{e.onProgress?.({loaded:a.loaded,total:a.total})}),{isStreamingSupported:i,isRangeSupported:o,contentLength:s}}),t.on("GetRangeReader",(r,i)=>{fe(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let o=this._networkStream.getRangeReader(r.begin,r.end);if(!o){i.close();return}i.onPull=()=>{o.read().then(function({value:s,done:a}){if(a){i.close();return}fe(s instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{o.cancel(s),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,e._capability.resolve(new LA(r,this))}),t.on("DocException",r=>{e._capability.reject(Dn(r))}),t.on("PasswordRequest",r=>{C(this,Wo,Promise.withResolvers());try{if(!e.onPassword)throw Dn(r);let i=o=>{o instanceof Error?l(this,Wo).reject(o):l(this,Wo).resolve({password:o})};e.onPassword(i,r.code)}catch(i){l(this,Wo).reject(i)}return l(this,Wo).promise}),t.on("DataLoaded",r=>{e.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),t.on("StartRenderPage",r=>{if(this.destroyed)return;l(this,Us).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),t.on("commonobj",([r,i,o])=>{if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":if("error"in o){let f=o.error;ee(`Error during font loading: ${f}`),this.commonObjs.resolve(r,f);break}let s=new q1(o),a=this._params.pdfBug&&globalThis.FontInspector?.enabled?(f,g)=>globalThis.FontInspector.fontAdded(f,g):null,c=new $1(s,a,o.extra,o.charProcOperatorList);this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:r})).finally(()=>{!c.fontExtraProperties&&c.data&&c.clearData(),this.commonObjs.resolve(r,c)});break;case"CopyLocalImage":let{imageRef:u}=o;fe(u,"The imageRef must be defined.");for(let f of l(this,Us).values())for(let[,g]of f.objs)if(g?.ref===u)return g.dataLen?(this.commonObjs.resolve(r,structuredClone(g)),g.dataLen):null;break;case"FontPath":this.commonObjs.resolve(r,new H1(o));break;case"Image":this.commonObjs.resolve(r,o);break;case"Pattern":let h=new z1(o);this.commonObjs.resolve(r,h.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([r,i,o,s])=>{if(this.destroyed)return;let a=l(this,Us).get(i);if(!a.objs.has(r)){if(a._intentStates.size===0){s?.bitmap?.close();return}switch(o){case"Image":case"Pattern":a.objs.resolve(r,s);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",r=>{this.destroyed||e.onProgress?.({loaded:r.loaded,total:r.total})}),t.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");let i=this[r.type];if(!i)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&ee("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));let e=t-1,r=l(this,xf).get(e);if(r)return r;let i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&l(this,Ef).set(o.refStr,t);let s=new FA(e,o,this,this._params.pdfBug);return l(this,Us).set(e,s),s});return l(this,xf).set(e,i),i}getPageIndex(t){return W1(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return F(this,Gc,gp).call(this,"GetFieldObjects")}hasJSActions(){return F(this,Gc,gp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return F(this,Gc,gp).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return F(this,Gc,gp).call(this,"GetOptionalContentConfig").then(e=>new yA(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let t="GetMetadata",e=l(this,Ho).get(t);if(e)return e;let r=this.messageHandler.sendWithPromise(t,null).then(i=>({info:i[0],metadata:i[1]?new gA(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:i[2]}));return l(this,Ho).set(t,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(let e of l(this,Us).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),l(this,Ho).clear(),this.filterFactory.destroy(!0),id.cleanup()}}cachedPageNumber(t){if(!W1(t))return null;let e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return l(this,Ef).get(e)??null}};Ho=new WeakMap,Us=new WeakMap,xf=new WeakMap,Ef=new WeakMap,Wo=new WeakMap,Gc=new WeakSet,gp=function(t,e=null){let r=l(this,Ho).get(t);if(r)return r;let i=this.messageHandler.sendWithPromise(t,e);return l(this,Ho).set(t,i),i};UA=class{constructor(t){O(this,Qa,null);Dt(this,"onContinue",null);Dt(this,"onError",null);C(this,Qa,t)}get promise(){return l(this,Qa).capability.promise}cancel(t=0){l(this,Qa).cancel(null,t)}get separateAnnots(){let{separateAnnots:t}=l(this,Qa).operatorList;if(!t)return!1;let{annotationCanvasMap:e}=l(this,Qa);return t.form||t.canvas&&e?.size>0}};Qa=new WeakMap;nc=class nc{constructor({callback:t,params:e,objs:r,commonObjs:i,annotationCanvasMap:o,operatorList:s,pageIndex:a,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:f=!1,pageColors:g=null,enableHWA:m=!1,operationsFilter:y=null}){O(this,tl,null);this.callback=t,this.params=e,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=f,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new UA(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=m,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=y}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(l(nc,Vc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(nc,Vc).add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{viewport:r,transform:i,background:o,dependencyTracker:s}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Th(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,s),this.gfx.beginDrawing({transform:i,viewport:r,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),l(this,tl)&&(window.cancelAnimationFrame(l(this,tl)),C(this,tl,null)),l(nc,Vc).delete(this._canvas),t||(t=new nd(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?C(this,tl,window.requestAnimationFrame(()=>{C(this,tl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(nc,Vc).delete(this._canvas),this.callback())))}};tl=new WeakMap,Vc=new WeakMap,O(nc,Vc,new WeakSet);jA=nc,EN="5.4.530",SN="50cc4adac",Rn=class Rn{constructor({editor:t=null,uiManager:e=null}){O(this,Pe);O(this,Xn,null);O(this,Xc,null);O(this,Sf);O(this,_r,null);O(this,Xg,!1);O(this,_f,!1);O(this,Go,null);O(this,Yg);O(this,el,null);O(this,es,null);t?(C(this,_f,!1),C(this,Go,t)):C(this,_f,!0),C(this,es,t?._uiManager||e),C(this,Yg,l(this,es)._eventBus),C(this,Sf,t?.color?.toUpperCase()||l(this,es)?.highlightColors.values().next().value||"#FFFF98"),l(Rn,Kg)||C(Rn,Kg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Qt(this,"_keyboardManager",new Eu([[["Escape","mac+Escape"],Rn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Rn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Rn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Rn.prototype._moveToPrevious],[["Home","mac+Home"],Rn.prototype._moveToBeginning],[["End","mac+End"],Rn.prototype._moveToEnd]]))}renderButton(){let t=C(this,Xn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",l(this,Go)&&(t.ariaControls=`${l(this,Go).id}_colorpicker_dropdown`);let e=l(this,es)._signal;t.addEventListener("click",F(this,Pe,Ql).bind(this),{signal:e}),t.addEventListener("keydown",F(this,Pe,zA).bind(this),{signal:e});let r=C(this,Xc,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=l(this,Sf),t.append(r),t}renderMainDropdown(){let t=C(this,_r,F(this,Pe,$A).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===l(this,Xn)){F(this,Pe,Ql).call(this,t);return}let e=t.target.getAttribute("data-color");e&&F(this,Pe,qA).call(this,e,t)}_moveToNext(t){if(!l(this,Pe,Da)){F(this,Pe,Ql).call(this,t);return}if(t.target===l(this,Xn)){l(this,_r).firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===l(this,_r)?.firstElementChild||t.target===l(this,Xn)){l(this,Pe,Da)&&this._hideDropdownFromKeyboard();return}l(this,Pe,Da)||F(this,Pe,Ql).call(this,t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!l(this,Pe,Da)){F(this,Pe,Ql).call(this,t);return}l(this,_r).firstElementChild?.focus()}_moveToEnd(t){if(!l(this,Pe,Da)){F(this,Pe,Ql).call(this,t);return}l(this,_r).lastElementChild?.focus()}hideDropdown(){l(this,_r)?.classList.add("hidden"),l(this,Xn).ariaExpanded="false",l(this,el)?.abort(),C(this,el,null)}_hideDropdownFromKeyboard(){if(!l(this,_f)){if(!l(this,Pe,Da)){l(this,Go)?.unselect();return}this.hideDropdown(),l(this,Xn).focus({preventScroll:!0,focusVisible:l(this,Xg)})}}updateColor(t){if(l(this,Xc)&&(l(this,Xc).style.backgroundColor=t),!l(this,_r))return;let e=l(this,es).highlightColors.values();for(let r of l(this,_r).children)r.ariaSelected=e.next().value===t.toUpperCase()}destroy(){l(this,Xn)?.remove(),C(this,Xn,null),C(this,Xc,null),l(this,_r)?.remove(),C(this,_r,null)}};Xn=new WeakMap,Xc=new WeakMap,Sf=new WeakMap,_r=new WeakMap,Xg=new WeakMap,_f=new WeakMap,Go=new WeakMap,Yg=new WeakMap,el=new WeakMap,es=new WeakMap,Kg=new WeakMap,Pe=new WeakSet,$A=function(){let t=document.createElement("div"),e=l(this,es)._signal;t.addEventListener("contextmenu",hi,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),l(this,Go)&&(t.id=`${l(this,Go).id}_colorpicker_dropdown`);for(let[r,i]of l(this,es).highlightColors){let o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",i),o.title=r,o.setAttribute("data-l10n-id",l(Rn,Kg)[r]);let s=document.createElement("span");o.append(s),s.className="swatch",s.style.backgroundColor=i,o.ariaSelected=i===l(this,Sf),o.addEventListener("click",F(this,Pe,qA).bind(this,i),{signal:e}),t.append(o)}return t.addEventListener("keydown",F(this,Pe,zA).bind(this),{signal:e}),t},qA=function(t,e){e.stopPropagation(),l(this,Yg).dispatch("switchannotationeditorparams",{source:this,type:he.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},zA=function(t){Rn._keyboardManager.exec(this,t)},Ql=function(t){if(l(this,Pe,Da)){this.hideDropdown();return}if(C(this,Xg,t.detail===0),l(this,el)||(C(this,el,new AbortController),window.addEventListener("pointerdown",F(this,Pe,_N).bind(this),{signal:l(this,es).combinedSignal(l(this,el))})),l(this,Xn).ariaExpanded="true",l(this,_r)){l(this,_r).classList.remove("hidden");return}let e=C(this,_r,F(this,Pe,$A).call(this));l(this,Xn).append(e)},_N=function(t){l(this,_r)?.contains(t.target)||this.hideDropdown()},Da=function(){return l(this,_r)&&!l(this,_r).classList.contains("hidden")},O(Rn,Kg,null);Pp=Rn,ic=class ic{constructor(t){O(this,js,null);O(this,Jg,null);O(this,Cf,null);C(this,Jg,t),C(this,Cf,t._uiManager),l(ic,Zg)||C(ic,Zg,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(l(this,js))return l(this,js);let{editorType:t,colorType:e,color:r}=l(this,Jg),i=C(this,js,document.createElement("input"));return i.type="color",i.value=r||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",l(ic,Zg)[t]),i.addEventListener("input",()=>{l(this,Cf).updateParams(e,i.value)},{signal:l(this,Cf)._signal}),i}update(t){l(this,js)&&(l(this,js).value=t)}destroy(){l(this,js)?.remove(),C(this,js,null)}hideDropdown(){}};js=new WeakMap,Jg=new WeakMap,Cf=new WeakMap,Zg=new WeakMap,O(ic,Zg,null);mv=ic;yv=class{static CMYK_G([t,e,r,i]){return["G",1-Math.min(1,.3*t+.59*r+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Qd(t),[t,t,t]}static G_HTML([t]){let e=gO(t);return`#${e}${e}${e}`}static RGB_G([t,e,r]){return["G",.3*t+.59*e+.11*r]}static RGB_rgb(t){return t.map(Qd)}static RGB_HTML(t){return`#${t.map(gO).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,r,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,r+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,r,i]){return[Qd(1-Math.min(1,t+i)),Qd(1-Math.min(1,r+i)),Qd(1-Math.min(1,e+i))]}static CMYK_HTML(t){let e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,r]){let i=1-t,o=1-e,s=1-r,a=Math.min(i,o,s);return["CMYK",i,o,s,a]}},HA=class{create(t,e,r=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");let i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Me("Abstract method `_createSVG` called.")}},Su=class extends HA{_createSVG(t){return document.createElementNS(bo,t)}},l5=9,_u=new WeakSet,c5=new Date().getTimezoneOffset()*60*1e3,Sp=class{static create(t){switch(t.data.annotationType){case cr.LINK:return new kp(t);case cr.TEXT:return new VA(t);case cr.WIDGET:switch(t.data.fieldType){case"Tx":return new XA(t);case"Btn":return t.data.radioButton?new vv(t):t.data.checkBox?new KA(t):new JA(t);case"Ch":return new ZA(t);case"Sig":return new YA(t)}return new ca(t);case cr.POPUP:return new Bp(t);case cr.FREETEXT:return new bv(t);case cr.LINE:return new ox(t);case cr.SQUARE:return new ax(t);case cr.CIRCLE:return new lx(t);case cr.POLYLINE:return new wv(t);case cr.CARET:return new ux(t);case cr.INK:return new Lp(t);case cr.POLYGON:return new cx(t);case cr.HIGHLIGHT:return new Av(t);case cr.UNDERLINE:return new fx(t);case cr.SQUIGGLY:return new dx(t);case cr.STRIKEOUT:return new px(t);case cr.STAMP:return new xv(t);case cr.FILEATTACHMENT:return new gx(t);default:return new Ze(t)}}},Zx=class Zx{constructor(t,{isRenderable:e=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){O(this,Qg);O(this,Yc,null);O(this,Tf,!1);O(this,Ni,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Zx._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){let{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){let t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;let{quadPoints:e,inkLists:r,rect:i}=this.data,o=-1/0,s=-1/0;if(e?.length>=8){for(let a=0;a<e.length;a+=8)e[a+1]>s?(s=e[a+1],o=e[a+2]):e[a+1]===s&&(o=Math.max(o,e[a+2]));return[o,s]}if(r?.length>=1){for(let a of r)for(let c=0,u=a.length;c<u;c+=2)a[c+1]>s?(s=a[c+1],o=a[c]):a[c+1]===s&&(o=Math.max(o,a[c]));if(o!==1/0)return[o,s]}return i?[i[2],i[3]]:null}_normalizePoint(t){let{page:{view:e},viewport:{rawDims:{pageWidth:r,pageHeight:i,pageX:o,pageY:s}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/r,t[1]=100*(t[1]-s)/i,t}get commentText(){let{data:t}=this;return this.annotationStorage.getRawValue(`${_p}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){let{data:e}=this,r={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:r})||this.annotationStorage.setValue(`${_p}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:r,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(l(this,Ni)?.popup||this.popup)?.remove(),C(this,Ni,this.popup=null)}updateEdited(t){if(!this.container)return;t.rect&&(l(this,Yc)||C(this,Yc,{rect:this.data.rect.slice(0)}));let{rect:e,popup:r}=t;e&&F(this,Qg,WA).call(this,e);let i=l(this,Ni)?.popup||this.popup;!i&&r?.text&&(this._createPopup(r),i=l(this,Ni).popup),i&&(i.updateEdited(t),r?.deleted&&(i.remove(),C(this,Ni,null),this.popup=null))}resetEdited(){l(this,Yc)&&(F(this,Qg,WA).call(this,l(this,Yc).rect),l(this,Ni)?.popup.resetEdited(),C(this,Yc,null))}_createContainer(t){let{data:e,parent:{page:r,viewport:i}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof ca)&&!(this instanceof kp)&&(o.tabIndex=0);let{style:s}=o;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof Bp){let{rotation:b}=e;return!e.hasOwnCanvas&&b!==0&&this.setRotation(b,o),o}let{width:a,height:c}=this;if(!t&&e.borderStyle.width>0){s.borderWidth=`${e.borderStyle.width}px`;let b=e.borderStyle.horizontalCornerRadius,v=e.borderStyle.verticalCornerRadius;if(b>0||v>0){let x=`calc(${b}px * var(--total-scale-factor)) / calc(${v}px * var(--total-scale-factor))`;s.borderRadius=x}else if(this instanceof vv){let x=`calc(${a}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;s.borderRadius=x}switch(e.borderStyle.style){case fh.SOLID:s.borderStyle="solid";break;case fh.DASHED:s.borderStyle="dashed";break;case fh.BEVELED:ee("Unimplemented border style: beveled");break;case fh.INSET:ee("Unimplemented border style: inset");break;case fh.UNDERLINE:s.borderBottomStyle="solid";break;default:break}let w=e.borderColor||null;w?(C(this,Tf,!0),s.borderColor=Lt.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):s.borderWidth=0}let u=Lt.normalizeRect([e.rect[0],r.view[3]-e.rect[1]+r.view[1],e.rect[2],r.view[3]-e.rect[3]+r.view[1]]),{pageWidth:h,pageHeight:f,pageX:g,pageY:m}=i.rawDims;s.left=`${100*(u[0]-g)/h}%`,s.top=`${100*(u[1]-m)/f}%`;let{rotation:y}=e;return e.hasOwnCanvas||y===0?(s.width=`${100*a/h}%`,s.height=`${100*c/f}%`):this.setRotation(y,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;let{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims,{width:o,height:s}=this;t%180!==0&&([o,s]=[s,o]),e.style.width=`${100*o/r}%`,e.style.height=`${100*s/i}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){let t=(e,r,i)=>{let o=i.detail[e],s=o[0],a=o.slice(1);i.target.style[r]=yv[`${s}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[r]:yv[`${s}_rgb`](a)})};return Qt(this,"_commonActions",{display:e=>{let{display:r}=e.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{let{hidden:r}=e.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{let r=e.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(t,e){let r=this._commonActions;for(let i of Object.keys(e.detail))(t[i]||r[i])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;let e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;let r=this._commonActions;for(let[i,o]of Object.entries(e)){let s=r[i];if(s){let a={detail:{[i]:o},target:t};s(a),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:t}=this.data;if(!t)return;let[e,r,i,o]=this.data.rect.map(b=>Math.fround(b));if(t.length===8){let[b,v,w,x]=t.subarray(2,6);if(i===b&&o===v&&e===w&&r===x)return}let{style:s}=this.container,a;if(l(this,Tf)){let{borderColor:b,borderWidth:v}=s;s.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${v}">`],this.container.classList.add("hasBorder")}let c=i-e,u=o-r,{svgFactory:h}=this,f=h.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0),f.role="none";let g=h.createElement("defs");f.append(g);let m=h.createElement("clipPath"),y=`clippath_${this.data.id}`;m.setAttribute("id",y),m.setAttribute("clipPathUnits","objectBoundingBox"),g.append(m);for(let b=2,v=t.length;b<v;b+=8){let w=t[b],x=t[b+1],E=t[b+2],D=t[b+3],_=h.createElement("rect"),q=(E-e)/c,N=(o-x)/u,rt=(w-E)/c,Y=(x-D)/u;_.setAttribute("x",q),_.setAttribute("y",N),_.setAttribute("width",rt),_.setAttribute("height",Y),m.append(_),a?.push(`<rect vector-effect="non-scaling-stroke" x="${q}" y="${N}" width="${rt}" height="${Y}"/>`)}l(this,Tf)&&(a.push("</g></svg>')"),s.backgroundImage=a.join("")),this.container.append(f),this.container.style.clipPath=`url(#${y})`}_createPopup(t=null){let{data:e}=this,r,i;t?(r={str:t.text},i=t.date):(r=e.contentsObj,i=e.modificationDate),C(this,Ni,new Bp({data:{color:e.color,titleObj:e.titleObj,modificationDate:i,contentsObj:r,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(l(this,Ni)||this.popup||this.data.popupRef)}get extraPopupElement(){return l(this,Ni)}render(){Me("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){let r=[];if(this._fieldObjects){let i=this._fieldObjects[t];if(i)for(let{page:o,id:s,exportValues:a}of i){if(o===-1||s===e)continue;let c=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${s}"]`);if(u&&!_u.has(u)){ee(`_getElementsByName - element not allowed: ${s}`);continue}r.push({id:s,exportValue:c,domElement:u})}return r}for(let i of document.getElementsByName(t)){let{exportValue:o}=i,s=i.getAttribute("data-element-id");s!==e&&_u.has(i)&&r.push({id:s,exportValue:o,domElement:i})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(let e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Yc=new WeakMap,Tf=new WeakMap,Ni=new WeakMap,Qg=new WeakSet,WA=function(t){let{container:{style:e},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:s,pageX:a,pageY:c}}}}=this;r?.splice(0,4,...t),e.left=`${100*(t[0]-a)/o}%`,e.top=`${100*(s-t[3]+c)/s}%`,i===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/s}%`):this.setRotation(i)};Ze=Zx,GA=class extends Ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){let{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}},kp=class extends Ze{constructor(e,r=null){super(e,{isRenderable:!0,ignoreBorder:!!r?.ignoreBorder,createQuadrilaterals:!0});O(this,ci);this.isTooltipOnly=e.data.isTooltipOnly}render(){let{data:e,linkService:r}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let o=!1;return e.url?(r.addLinkAttributes(i,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(i,e.action,e.overlaidText),o=!0):e.attachment?(F(this,ci,CN).call(this,i,e.attachment,e.overlaidText,e.attachmentDest),o=!0):e.setOCGState?(F(this,ci,TN).call(this,i,e.setOCGState,e.overlaidText),o=!0):e.dest?(this._bindLink(i,e.dest,e.overlaidText),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),o=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(i,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&(this.contentElement=i,this.container.append(i)),this.container}_bindLink(e,r,i=""){e.href=this.linkService.getDestinationHash(r),e.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&F(this,ci,tc).call(this),i&&(e.title=i)}_bindNamedAction(e,r,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(r),!1),i&&(e.title=i),F(this,ci,tc).call(this)}_bindJSAction(e,r){e.href=this.linkService.getAnchorUrl("");let i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let o of Object.keys(r.actions)){let s=i.get(o);s&&(e[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:o}}),!1))}r.overlaidText&&(e.title=r.overlaidText),e.onclick||(e.onclick=()=>!1),F(this,ci,tc).call(this)}_bindResetFormAction(e,r){let i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),F(this,ci,tc).call(this),!this._fieldObjects){ee('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{i?.();let{fields:o,refs:s,include:a}=r,c=[];if(o.length!==0||s.length!==0){let f=new Set(s);for(let g of o){let m=this._fieldObjects[g]||[];for(let{id:y}of m)f.add(y)}for(let g of Object.values(this._fieldObjects))for(let m of g)f.has(m.id)===a&&c.push(m)}else for(let f of Object.values(this._fieldObjects))c.push(...f);let u=this.annotationStorage,h=[];for(let f of c){let{id:g}=f;switch(h.push(g),f.type){case"text":{let y=f.defaultValue||"";u.setValue(g,{value:y});break}case"checkbox":case"radiobutton":{let y=f.defaultValue===f.exportValues;u.setValue(g,{value:y});break}case"combobox":case"listbox":{let y=f.defaultValue||"";u.setValue(g,{value:y});break}default:continue}let m=document.querySelector(`[data-element-id="${g}"]`);if(m){if(!_u.has(m)){ee(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}};ci=new WeakSet,tc=function(){this.container.setAttribute("data-internal-link","")},CN=function(e,r,i="",o=null){e.href=this.linkService.getAnchorUrl(""),r.description?e.title=r.description:i&&(e.title=i),e.onclick=()=>(this.downloadManager?.openOrDownloadData(r.content,r.filename,o),!1),F(this,ci,tc).call(this)},TN=function(e,r,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(r),!1),i&&(e.title=i),F(this,ci,tc).call(this)};VA=class extends Ze{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}},ca=class extends Ze{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return sr.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,r,i,o){r.includes("mouse")?t.addEventListener(r,s=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(s),shift:s.shiftKey,modifier:this._getKeyModifier(s)}})}):t.addEventListener(r,s=>{if(r==="blur"){if(!e.focused||!s.relatedTarget)return;e.focused=!1}else if(r==="focus"){if(e.focused)return;e.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(s)}})})}_setEventListeners(t,e,r,i){for(let[o,s]of r)(s==="Action"||this.data.actions?.[s])&&((s==="Focus"||s==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,o,s,i),s==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):s==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){let e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Lt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){let e=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||l5,o=t.style,s,a=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){let u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),h=Math.round(u/(my*i))||1,f=u/h;s=Math.min(i,c(f/my))}else{let u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);s=Math.min(i,c(u/my))}o.fontSize=`calc(${s}px * var(--total-scale-factor))`,o.color=Lt.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}},XA=class extends ca{constructor(t){let e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,r,i){let o=this.annotationStorage;for(let s of this._getElementsByName(t.name,t.id))s.domElement&&(s.domElement[e]=r),o.setValue(s.id,{[i]:r})}render(){let t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){let i=t.getValue(e,{value:this.data.fieldValue}),o=i.value||"",s=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;s&&o.length>s&&(o=o.slice(0,s));let a=i.formattedValue||this.data.textContent?.join(`
`)||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));let c={userValue:o,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=a??o,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",a??o),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),_u.add(r),this.contentElement=r,r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;let{datetimeFormat:u,datetimeType:h,timeStep:f}=this.data,g=!!h&&this.enableScripting;u&&(r.title=u),this._setRequired(r,this.data.required),s&&(r.maxLength=s),r.addEventListener("input",y=>{t.setValue(e,{value:y.target.value}),this.setPropertyOnSiblings(r,"value",y.target.value,"value"),c.formattedValue=null}),r.addEventListener("resetform",y=>{let b=this.data.defaultFieldValue??"";r.value=c.userValue=b,c.formattedValue=null});let m=y=>{let{formattedValue:b}=c;b!=null&&(y.target.value=b),y.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",b=>{if(c.focused)return;let{target:v}=b;if(g&&(v.type=h,f&&(v.step=f)),c.userValue){let w=c.userValue;if(g)if(h==="time"){let x=new Date(w),E=[x.getHours(),x.getMinutes(),x.getSeconds()];v.value=E.map(D=>D.toString().padStart(2,"0")).join(":")}else v.value=new Date(w-c5).toISOString().split(h==="date"?"T":".",1)[0];else v.value=w}c.lastCommittedValue=v.value,c.commitKey=1,this.data.actions?.Focus||(c.focused=!0)}),r.addEventListener("updatefromsandbox",b=>{this.showElementAndHideCanvas(b.target);let v={value(w){c.userValue=w.detail.value??"",g||t.setValue(e,{value:c.userValue.toString()}),w.target.value=c.userValue},formattedValue(w){let{formattedValue:x}=w.detail;c.formattedValue=x,x!=null&&w.target!==document.activeElement&&(w.target.value=x);let E={formattedValue:x};g&&(E.value=x),t.setValue(e,E)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{let{charLimit:x}=w.detail,{target:E}=w;if(x===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",x);let D=c.userValue;!D||D.length<=x||(D=D.slice(0,x),E.value=c.userValue=D,t.setValue(e,{value:D}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(v,b)}),r.addEventListener("keydown",b=>{c.commitKey=1;let v=-1;if(b.key==="Escape"?v=0:b.key==="Enter"&&!this.data.multiLine?v=2:b.key==="Tab"&&(c.commitKey=3),v===-1)return;let{value:w}=b.target;c.lastCommittedValue!==w&&(c.lastCommittedValue=w,c.userValue=w,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:v,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}))});let y=m;m=null,r.addEventListener("blur",b=>{if(!c.focused||!b.relatedTarget)return;this.data.actions?.Blur||(c.focused=!1);let{target:v}=b,{value:w}=v;if(g){if(w&&h==="time"){let x=w.split(":").map(E=>parseInt(E,10));w=new Date(2e3,0,1,x[0],x[1],x[2]||0).valueOf(),v.step=""}else w.includes("T")||(w=`${w}T00:00`),w=new Date(w).valueOf();v.type="text"}c.userValue=w,c.lastCommittedValue!==w&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:c.commitKey,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}),y(b)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",b=>{c.lastCommittedValue=null;let{data:v,target:w}=b,{value:x,selectionStart:E,selectionEnd:D}=w,_=E,q=D;switch(b.inputType){case"deleteWordBackward":{let N=x.substring(0,E).match(/\w*[^\w]*$/);N&&(_-=N[0].length);break}case"deleteWordForward":{let N=x.substring(E).match(/^[^\w]*\w*/);N&&(q+=N[0].length);break}case"deleteContentBackward":E===D&&(_-=1);break;case"deleteContentForward":E===D&&(q+=1);break}b.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,change:v||"",willCommit:!1,selStart:_,selEnd:q}})}),this._setEventListeners(r,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],b=>b.target.value)}if(m&&r.addEventListener("blur",m),this.data.comb){let b=(this.data.rect[2]-this.data.rect[0])/s;r.classList.add("comb"),r.style.letterSpacing=`calc(${b}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}},YA=class extends ca{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}},KA=class extends ca{constructor(t){super(t,{isRenderable:t.renderForms})}render(){let t=this.annotationStorage,e=this.data,r=e.id,i=t.getValue(r,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let o=document.createElement("input");return _u.add(o),o.setAttribute("data-element-id",r),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,i&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",s=>{let{name:a,checked:c}=s.target;for(let u of this._getElementsByName(a,r)){let h=c&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=h),t.setValue(u.id,{value:h})}t.setValue(r,{value:c})}),o.addEventListener("resetform",s=>{let a=e.defaultFieldValue||"Off";s.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",s=>{let a={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(r,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,s)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}},vv=class extends ca{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let t=this.annotationStorage,e=this.data,r=e.id,i=t.getValue(r,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(r,{value:i})),i)for(let s of this._getElementsByName(e.fieldName,r))t.setValue(s.id,{value:!1});let o=document.createElement("input");if(_u.add(o),o.setAttribute("data-element-id",r),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,i&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",s=>{let{name:a,checked:c}=s.target;for(let u of this._getElementsByName(a,r))t.setValue(u.id,{value:!1});t.setValue(r,{value:c})}),o.addEventListener("resetform",s=>{let a=e.defaultFieldValue;s.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){let s=e.buttonValue;o.addEventListener("updatefromsandbox",a=>{let c={value:u=>{let h=s===u.detail.value;for(let f of this._getElementsByName(u.target.name)){let g=h&&f.id===r;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}},JA=class extends kp{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){let t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");let e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),t}},ZA=class extends ca{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let t=this.annotationStorage,e=this.data.id,r=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");_u.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{let f=this.data.defaultFieldValue;for(let g of i.options)g.selected=g.value===f});for(let h of this.data.options){let f=document.createElement("option");f.textContent=h.displayValue,f.value=h.exportValue,r.value.includes(h.exportValue)&&(f.setAttribute("selected",!0),o=!1),i.append(f)}let s=null;if(o){let h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),s=()=>{h.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}let a=h=>{let f=h?"value":"textContent",{options:g,multiple:m}=i;return m?Array.prototype.filter.call(g,y=>y.selected).map(y=>y[f]):g.selectedIndex===-1?null:g[g.selectedIndex][f]},c=a(!1),u=h=>{let f=h.target.options;return Array.prototype.map.call(f,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{let f={value(g){s?.();let m=g.detail.value,y=new Set(Array.isArray(m)?m:[m]);for(let b of i.options)b.selected=y.has(b.value);t.setValue(e,{value:a(!0)}),c=a(!1)},multipleSelection(g){i.multiple=!0},remove(g){let m=i.options,y=g.detail.remove;m[y].selected=!1,i.remove(y),m.length>0&&Array.prototype.findIndex.call(m,v=>v.selected)===-1&&(m[0].selected=!0),t.setValue(e,{value:a(!0),items:u(g)}),c=a(!1)},clear(g){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),c=a(!1)},insert(g){let{index:m,displayValue:y,exportValue:b}=g.detail.insert,v=i.children[m],w=document.createElement("option");w.textContent=y,w.value=b,v?v.before(w):i.append(w),t.setValue(e,{value:a(!0),items:u(g)}),c=a(!1)},items(g){let{items:m}=g.detail;for(;i.length!==0;)i.remove(0);for(let y of m){let{displayValue:b,exportValue:v}=y,w=document.createElement("option");w.textContent=b,w.value=v,i.append(w)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:a(!0),items:u(g)}),c=a(!1)},indices(g){let m=new Set(g.detail.indices);for(let y of g.target.options)y.selected=m.has(y.index);t.setValue(e,{value:a(!0)}),c=a(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(f,h)}),i.addEventListener("input",h=>{let f=a(!0),g=a(!1);t.setValue(e,{value:f}),h.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:g,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}},Bp=class extends Ze{constructor(e){let{data:r,elements:i,parent:o}=e,s=!!o._commentManager;super(e,{isRenderable:!s&&Ze._hasPopupData(r)});O(this,tm);if(this.elements=i,s&&Ze._hasPopupData(r)){let a=this.popup=F(this,tm,QA).call(this);for(let c of i)c.popup=a}else this.popup=null}render(){let{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";let r=this.popup=F(this,tm,QA).call(this),i=[];for(let o of this.elements)o.popup=r,o.container.ariaHasPopup="dialog",i.push(o.data.id),o.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(o=>`${wh}${o}`).join(",")),this.container}};tm=new WeakSet,QA=function(){return new tx({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};tx=class{constructor({container:t,color:e,elements:r,titleObj:i,modificationDate:o,contentsObj:s,richText:a,parent:c,rect:u,parentRect:h,open:f,commentManager:g=null}){O(this,oe);O(this,Yn,null);O(this,rl,F(this,oe,IN).bind(this));O(this,Hv,F(this,oe,sx).bind(this));O(this,Wv,F(this,oe,Py).bind(this));O(this,Df,F(this,oe,Ny).bind(this));O(this,Rf,null);O(this,rr,null);O(this,$s,null);O(this,nl,null);O(this,Kc,null);O(this,If,null);O(this,Of,null);O(this,qs,!1);O(this,Kn,null);O(this,Vo,null);O(this,Xo,null);O(this,nr,null);O(this,Yo,null);O(this,il,null);O(this,em,null);O(this,Ko,null);O(this,Nf,null);O(this,Jc,null);O(this,sl,!1);O(this,Or,null);O(this,ol,null);C(this,rr,t),C(this,Nf,i),C(this,$s,s),C(this,Ko,a),C(this,If,c),C(this,Rf,e),C(this,em,u),C(this,Of,h),C(this,Kc,r),C(this,Yn,g),C(this,Or,r[0]),C(this,nl,Au.toDateObject(o)),this.trigger=r.flatMap(m=>m.getElementsToTriggerPopup()),g||(F(this,oe,Iy).call(this),l(this,rr).hidden=!0,f&&F(this,oe,Ny).call(this))}renderCommentButton(){if(l(this,nr)){l(this,nr).parentNode||l(this,Or).container.after(l(this,nr));return}if(l(this,Yo)||F(this,oe,ex).call(this),!l(this,Yo))return;let{signal:t}=C(this,Vo,new AbortController),e=l(this,Or).hasOwnCommentButton,r=()=>{l(this,Yn).toggleCommentPopup(this,!0,void 0,!e)},i=()=>{l(this,Yn).toggleCommentPopup(this,!1,!0,!e)},o=()=>{l(this,Yn).toggleCommentPopup(this,!1,!1)};if(e){C(this,nr,l(this,Or).container);for(let s of this.trigger)s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.addEventListener("keydown",l(this,rl),{signal:t}),s.addEventListener("click",r,{signal:t}),s.addEventListener("pointerenter",i,{signal:t}),s.addEventListener("pointerleave",o,{signal:t}),s.classList.add("popupTriggerArea")}else{let s=C(this,nr,document.createElement("button"));s.className="annotationCommentButton";let a=l(this,Or).container;s.style.zIndex=a.style.zIndex+1,s.tabIndex=0,s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.setAttribute("data-l10n-id","pdfjs-show-comment-button"),F(this,oe,nx).call(this),F(this,oe,rx).call(this),s.addEventListener("keydown",l(this,rl),{signal:t}),s.addEventListener("click",r,{signal:t}),s.addEventListener("pointerenter",i,{signal:t}),s.addEventListener("pointerleave",o,{signal:t}),a.after(s)}}get commentButtonColor(){let{color:t,opacity:e}=l(this,Or).commentData;return t?l(this,If)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{l(this,nr)?.focus()},0)}getData(){let{richText:t,color:e,opacity:r,creationDate:i,modificationDate:o}=l(this,Or).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:r,creationDate:i,modificationDate:o}}get elementBeforePopup(){return l(this,nr)}get comment(){return l(this,ol)||C(this,ol,l(this,Or).commentText),l(this,ol)}set comment(t){t!==this.comment&&(l(this,Or).commentText=C(this,ol,t))}focus(){l(this,Or).container?.focus()}get parentBoundingClientRect(){return l(this,Or).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){l(this,nr)&&(l(this,nr).classList.toggle("selected",t),l(this,nr).ariaExpanded=e)}setSelectedCommentButton(t){l(this,nr).classList.toggle("selected",t)}get commentPopupPosition(){if(l(this,il))return l(this,il);let{x:t,y:e,height:r}=l(this,nr).getBoundingClientRect(),{x:i,y:o,width:s,height:a}=l(this,Or).layer.getBoundingClientRect();return[(t-i)/s,(e+r-o)/a]}set commentPopupPosition(t){C(this,il,t)}hasDefaultPopupPosition(){return l(this,il)===null}get commentButtonPosition(){return l(this,Yo)}get commentButtonWidth(){return l(this,nr).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){let[e,r]=l(this,il)||this.commentButtonPosition.map(u=>u/100),i=this.parentBoundingClientRect,{x:o,y:s,width:a,height:c}=i;l(this,Yn).showDialog(null,this,o+e*a,s+r*c,{...t,parentDimensions:i})}render(){if(l(this,Kn))return;let t=C(this,Kn,document.createElement("div"));if(t.className="popup",l(this,Rf)){let r=t.style.outlineColor=Lt.makeHexColor(...l(this,Rf));t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}let e=document.createElement("span");if(e.className="header",l(this,Nf)?.str){let r=document.createElement("span");r.className="title",e.append(r),{dir:r.dir,str:r.textContent}=l(this,Nf)}if(t.append(e),l(this,nl)){let r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,nl).valueOf()})),r.dateTime=l(this,nl).toISOString(),e.append(r)}Gx({html:l(this,oe,Oy)||l(this,$s).str,dir:l(this,$s)?.dir,className:"popupContent"},t),l(this,rr).append(t)}updateEdited({rect:t,popup:e,deleted:r}){if(l(this,Yn)){r?(this.remove(),C(this,ol,null)):e&&(e.deleted?this.remove():(F(this,oe,nx).call(this),C(this,ol,e.text))),t&&(C(this,Yo,null),F(this,oe,ex).call(this),F(this,oe,rx).call(this));return}if(r||e?.deleted){this.remove();return}F(this,oe,Iy).call(this),l(this,Jc)||C(this,Jc,{contentsObj:l(this,$s),richText:l(this,Ko)}),t&&C(this,Xo,null),e&&e.text&&(C(this,Ko,F(this,oe,RN).call(this,e.text)),C(this,nl,Au.toDateObject(e.date)),C(this,$s,null)),l(this,Kn)?.remove(),C(this,Kn,null)}resetEdited(){l(this,Jc)&&({contentsObj:vr(this,$s)._,richText:vr(this,Ko)._}=l(this,Jc),C(this,Jc,null),l(this,Kn)?.remove(),C(this,Kn,null),C(this,Xo,null))}remove(){if(l(this,Vo)?.abort(),C(this,Vo,null),l(this,Kn)?.remove(),C(this,Kn,null),C(this,sl,!1),C(this,qs,!1),l(this,nr)?.remove(),C(this,nr,null),this.trigger)for(let t of this.trigger)t.classList.remove("popupTriggerArea")}forceHide(){C(this,sl,this.isVisible),l(this,sl)&&(l(this,rr).hidden=!0)}maybeShow(){l(this,Yn)||(F(this,oe,Iy).call(this),l(this,sl)&&(l(this,Kn)||F(this,oe,Py).call(this),C(this,sl,!1),l(this,rr).hidden=!1))}get isVisible(){return l(this,Yn)?!1:l(this,rr).hidden===!1}};Yn=new WeakMap,rl=new WeakMap,Hv=new WeakMap,Wv=new WeakMap,Df=new WeakMap,Rf=new WeakMap,rr=new WeakMap,$s=new WeakMap,nl=new WeakMap,Kc=new WeakMap,If=new WeakMap,Of=new WeakMap,qs=new WeakMap,Kn=new WeakMap,Vo=new WeakMap,Xo=new WeakMap,nr=new WeakMap,Yo=new WeakMap,il=new WeakMap,em=new WeakMap,Ko=new WeakMap,Nf=new WeakMap,Jc=new WeakMap,sl=new WeakMap,Or=new WeakMap,ol=new WeakMap,oe=new WeakSet,Iy=function(){if(l(this,Vo))return;C(this,Vo,new AbortController);let{signal:t}=l(this,Vo);for(let e of this.trigger)e.addEventListener("click",l(this,Df),{signal:t}),e.addEventListener("pointerenter",l(this,Wv),{signal:t}),e.addEventListener("pointerleave",l(this,Hv),{signal:t}),e.classList.add("popupTriggerArea");for(let e of l(this,Kc))e.container?.addEventListener("keydown",l(this,rl),{signal:t})},ex=function(){let t=l(this,Kc).find(e=>e.hasCommentButton);t&&C(this,Yo,t._normalizePoint(t.commentButtonPosition))},rx=function(){if(l(this,Or).extraPopupElement&&!l(this,Or).editor)return;l(this,nr)||this.renderCommentButton();let[t,e]=l(this,Yo),{style:r}=l(this,nr);r.left=`calc(${t}%)`,r.top=`calc(${e}% - var(--comment-button-dim))`},nx=function(){l(this,Or).extraPopupElement||(l(this,nr)||this.renderCommentButton(),l(this,nr).style.backgroundColor=this.commentButtonColor||"")},Oy=function(){let t=l(this,Ko),e=l(this,$s);return t?.str&&(!e?.str||e.str===t.str)&&l(this,Ko).html||null},ix=function(){return l(this,oe,Oy)?.attributes?.style?.fontSize||0},DN=function(){return l(this,oe,Oy)?.attributes?.style?.color||null},RN=function(t){let e=[],r={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:l(this,oe,DN),fontSize:l(this,oe,ix)?`calc(${l(this,oe,ix)}px * var(--total-scale-factor))`:""}};for(let o of t.split(`
`))e.push({name:"span",value:o,attributes:i});return r},IN=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&l(this,qs))&&F(this,oe,Ny).call(this)},ON=function(){if(l(this,Xo)!==null)return;let{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:r,pageX:i,pageY:o}}}=l(this,If),s=!!l(this,Of),a=s?l(this,Of):l(this,em);for(let y of l(this,Kc))if(!a||Lt.intersect(y.data.rect,a)!==null){a=y.data.rect,s=!0;break}let c=Lt.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),h=s?a[2]-a[0]+5:0,f=c[0]+h,g=c[1];C(this,Xo,[100*(f-i)/e,100*(g-o)/r]);let{style:m}=l(this,rr);m.left=`${l(this,Xo)[0]}%`,m.top=`${l(this,Xo)[1]}%`},Ny=function(){if(l(this,Yn)){l(this,Yn).toggleCommentPopup(this,!1);return}C(this,qs,!l(this,qs)),l(this,qs)?(F(this,oe,Py).call(this),l(this,rr).addEventListener("click",l(this,Df)),l(this,rr).addEventListener("keydown",l(this,rl))):(F(this,oe,sx).call(this),l(this,rr).removeEventListener("click",l(this,Df)),l(this,rr).removeEventListener("keydown",l(this,rl)))},Py=function(){l(this,Kn)||this.render(),this.isVisible?l(this,qs)&&l(this,rr).classList.add("focused"):(F(this,oe,ON).call(this),l(this,rr).hidden=!1,l(this,rr).style.zIndex=parseInt(l(this,rr).style.zIndex)+1e3)},sx=function(){l(this,rr).classList.remove("focused"),!(l(this,qs)||!this.isVisible)&&(l(this,rr).hidden=!0,l(this,rr).style.zIndex=parseInt(l(this,rr).style.zIndex)-1e3)};bv=class extends Ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=te.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(let e of this.textContent){let r=document.createElement("span");r.textContent=e,t.append(r)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}},ox=class extends Ze{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});O(this,rm,null)}render(){this.container.classList.add("lineAnnotation");let{data:e,width:r,height:i}=this,o=this.svgFactory.create(r,i,!0),s=C(this,rm,this.svgFactory.createElement("svg:line"));return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),o.append(s),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,rm)}addHighlightArea(){this.container.classList.add("highlightArea")}};rm=new WeakMap;ax=class extends Ze{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});O(this,nm,null)}render(){this.container.classList.add("squareAnnotation");let{data:e,width:r,height:i}=this,o=this.svgFactory.create(r,i,!0),s=e.borderStyle.width,a=C(this,nm,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",s/2),a.setAttribute("y",s/2),a.setAttribute("width",r-s),a.setAttribute("height",i-s),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),o.append(a),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,nm)}addHighlightArea(){this.container.classList.add("highlightArea")}};nm=new WeakMap;lx=class extends Ze{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});O(this,im,null)}render(){this.container.classList.add("circleAnnotation");let{data:e,width:r,height:i}=this,o=this.svgFactory.create(r,i,!0),s=e.borderStyle.width,a=C(this,im,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",r/2),a.setAttribute("cy",i/2),a.setAttribute("rx",r/2-s/2),a.setAttribute("ry",i/2-s/2),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),o.append(a),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,im)}addHighlightArea(){this.container.classList.add("highlightArea")}};im=new WeakMap;wv=class extends Ze{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});O(this,sm,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,vertices:r,borderStyle:i,popupRef:o},width:s,height:a}=this;if(!r)return this.container;let c=this.svgFactory.create(s,a,!0),u=[];for(let f=0,g=r.length;f<g;f+=2){let m=r[f]-e[0],y=e[3]-r[f+1];u.push(`${m},${y}`)}u=u.join(" ");let h=C(this,sm,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,sm)}addHighlightArea(){this.container.classList.add("highlightArea")}};sm=new WeakMap;cx=class extends wv{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},ux=class extends Ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}},Lp=class extends Ze{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});O(this,am);O(this,om,null);O(this,Zc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?te.HIGHLIGHT:te.INK}render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,rotation:r,inkLists:i,borderStyle:o,popupRef:s}}=this,{transform:a,width:c,height:u}=F(this,am,hx).call(this,r,e),h=this.svgFactory.create(c,u,!0),f=C(this,om,this.svgFactory.createElement("svg:g"));h.append(f),f.setAttribute("stroke-width",o.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",a);for(let g=0,m=i.length;g<m;g++){let y=this.svgFactory.createElement(this.svgElementName);l(this,Zc).push(y),y.setAttribute("points",i[g].join(",")),f.append(y)}return!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);let{thickness:r,points:i,rect:o}=e,s=l(this,om);if(r>=0&&s.setAttribute("stroke-width",r||1),i)for(let a=0,c=l(this,Zc).length;a<c;a++)l(this,Zc)[a].setAttribute("points",i[a].join(","));if(o){let{transform:a,width:c,height:u}=F(this,am,hx).call(this,this.data.rotation,o);s.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),s.setAttribute("transform",a)}}getElementsToTriggerPopup(){return l(this,Zc)}addHighlightArea(){this.container.classList.add("highlightArea")}};om=new WeakMap,Zc=new WeakMap,am=new WeakSet,hx=function(e,r){switch(e){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};Av=class extends Ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=te.HIGHLIGHT}render(){let{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){let r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=t,this.container.append(r)}return this.container}},fx=class extends Ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){let r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=t,this.container.append(r)}return this.container}},dx=class extends Ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){let r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=t,this.container.append(r)}return this.container}},px=class extends Ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){let r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=t,this.container.append(r)}return this.container}},xv=class extends Ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=te.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}},gx=class extends Ze{constructor(e){super(e,{isRenderable:!0});O(this,cm);O(this,lm,null);let{file:r}=this.data;this.filename=r.filename,this.content=r.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:e,data:r}=this,i;r.hasAppearance||r.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),i.addEventListener("dblclick",F(this,cm,mx).bind(this)),C(this,lm,i);let{isMac:o}=sr.platform;return e.addEventListener("keydown",s=>{s.key==="Enter"&&(o?s.metaKey:s.ctrlKey)&&F(this,cm,mx).call(this)}),!r.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return l(this,lm)}addHighlightArea(){this.container.classList.add("highlightArea")}};lm=new WeakMap,cm=new WeakSet,mx=function(){this.downloadManager?.openOrDownloadData(this.content,this.filename)};Qx=class Qx{constructor({div:t,accessibilityManager:e,annotationCanvasMap:r,annotationEditorUIManager:i,page:o,viewport:s,structTreeLayer:a,commentManager:c,linkService:u,annotationStorage:h}){O(this,oa);O(this,Qc,null);O(this,tu,null);O(this,Pf,null);O(this,al,new Map);O(this,um,null);O(this,eu,null);O(this,Jn,[]);O(this,hm,!1);this.div=t,C(this,Qc,e),C(this,tu,r),C(this,um,a||null),C(this,eu,u||null),C(this,Pf,h||new Ip),this.page=o,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=c||null}hasEditableAnnotations(){return l(this,al).size>0}async render(t){let{annotations:e}=t,r=this.div;bl(r,this.viewport);let i=new Map,o=[],s={data:null,layer:r,linkService:l(this,eu),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Su,annotationStorage:l(this,Pf),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(let a of e){if(a.noHTML)continue;let c=a.annotationType===cr.POPUP;if(c){let f=i.get(a.id);if(!f)continue;if(!this._commentManager){o.push(a);continue}s.elements=f}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;s.data=a;let u=Sp.create(s);if(!u.isRenderable)continue;if(!c&&(l(this,Jn).push(u),a.popupRef)){let f=i.get(a.popupRef);f?f.push(u):i.set(a.popupRef,[u])}let h=u.render();a.hidden&&(h.style.visibility="hidden"),u._isEditable&&(l(this,al).set(u.data.id,u),this._annotationEditorUIManager?.renderAnnotationElement(u))}await F(this,oa,ky).call(this);for(let a of o){let c=s.elements=i.get(a.id);s.data=a;let u=Sp.create(s);if(!u.isRenderable)continue;let h=u.render();u.contentElement.id=`${wh}${a.id}`,a.hidden&&(h.style.visibility="hidden"),c.at(-1).container.after(h)}F(this,oa,yx).call(this)}async addLinkAnnotations(t){let e={data:null,layer:this.div,linkService:l(this,eu),svgFactory:new Su,parent:this};for(let r of t){r.borderStyle||(r.borderStyle=Qx._defaultBorderStyle),e.data=r;let i=Sp.create(e);i.isRenderable&&(i.render(),i.contentElement.id=`${wh}${r.id}`,l(this,Jn).push(i))}await F(this,oa,ky).call(this)}update({viewport:t}){let e=this.div;this.viewport=t,bl(e,{rotation:t.rotation}),F(this,oa,yx).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(l(this,al).values())}getEditableAnnotation(t){return l(this,al).get(t)}addFakeAnnotation(t){let{div:e}=this,{id:r,rotation:i}=t,o=new GA({data:{id:r,rect:t.getPDFRect(),rotation:i},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:l(this,eu),annotationStorage:l(this,Pf)});return o.render(),o.contentElement.id=`${wh}${r}`,o.createOrUpdatePopup(),l(this,Jn).push(o),o}removeAnnotation(t){let e=l(this,Jn).findIndex(i=>i.data.id===t);if(e<0)return;let[r]=l(this,Jn).splice(e,1);l(this,Qc)?.removePointerInTextLayer(r.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(let e of t)e.updateFakeAnnotationElement(this);F(this,oa,ky).call(this)}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Qt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:fh.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Qc=new WeakMap,tu=new WeakMap,Pf=new WeakMap,al=new WeakMap,um=new WeakMap,eu=new WeakMap,Jn=new WeakMap,hm=new WeakMap,oa=new WeakSet,ky=async function(){if(l(this,Jn).length===0)return;this.div.replaceChildren();let t=[];if(!l(this,hm)){C(this,hm,!0);for(let{contentElement:r,data:{id:i}}of l(this,Jn)){let o=r.id=`${wh}${i}`;t.push(l(this,um)?.getAriaAttributes(o).then(s=>{if(s)for(let[a,c]of s)r.setAttribute(a,c)}))}}l(this,Jn).sort(({data:{rect:[r,i,o,s]}},{data:{rect:[a,c,u,h]}})=>{if(r===o&&i===s)return 1;if(a===u&&c===h)return-1;let f=s,g=i,m=(i+s)/2,y=h,b=c,v=(c+h)/2;if(m>=y&&v<=g)return-1;if(v>=f&&m<=b)return 1;let w=(r+o)/2,x=(a+u)/2;return w-x});let e=document.createDocumentFragment();for(let r of l(this,Jn))e.append(r.container),this._commentManager?(r.extraPopupElement?.popup||r.popup)?.renderCommentButton():r.extraPopupElement&&e.append(r.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),l(this,Qc))for(let r of l(this,Jn))l(this,Qc).addPointerInTextLayer(r.contentElement,!1)},yx=function(){if(!l(this,tu))return;let t=this.div;for(let[e,r]of l(this,tu)){let i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;r.className="annotationContent";let{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(r):o.classList.contains("annotationContent")?o.after(r):o.before(r):i.append(r);let s=l(this,al).get(e);s&&(s._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,i.id,r),s._hasNoCanvas=!1):s.canvas=r)}l(this,tu).clear()};Ev=Qx,dy=/\r\n?|\n/g,ze=class ze extends $e{constructor(e){super({...e,name:"freeTextEditor"});O(this,gr);O(this,Zn,"");O(this,fm,`${this.id}-editor`);O(this,ru,null);O(this,Qn);Dt(this,"_colorPicker",null);this.color=e.color||ze._defaultColor||$e._defaultLineColor,C(this,Qn,e.fontSize||ze._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){let e=ze.prototype,r=s=>s.isEmpty(),i=wl.TRANSLATE_SMALL,o=wl.TRANSLATE_BIG;return Qt(this,"_keyboardManager",new Eu([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:r}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:r}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:r}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:r}]]))}static initialize(e,r){$e.initialize(e,r);let i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,r){switch(e){case he.FREETEXT_SIZE:ze._defaultFontSize=r;break;case he.FREETEXT_COLOR:ze._defaultColor=r;break}}updateParams(e,r){switch(e){case he.FREETEXT_SIZE:F(this,gr,NN).call(this,r);break;case he.FREETEXT_COLOR:F(this,gr,PN).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[he.FREETEXT_SIZE,ze._defaultFontSize],[he.FREETEXT_COLOR,ze._defaultColor||$e._defaultLineColor]]}get propertiesToUpdate(){return[[he.FREETEXT_SIZE,l(this,Qn)],[he.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new mv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return he.FREETEXT_COLOR}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}_translateEmpty(e,r){this._uiManager.translateSelectedEditors(e,r,!0)}getInitialTranslation(){let e=this.parentScale;return[-ze._internalPadding*e,-(ze._internalPadding+l(this,Qn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),C(this,ru,new AbortController);let e=this._uiManager.combinedSignal(l(this,ru));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,fm)),this._isDraggable=!0,l(this,ru)?.abort(),C(this,ru,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let e=l(this,Zn),r=C(this,Zn,F(this,gr,kN).call(this).trimEnd());if(e===r)return;let i=o=>{if(C(this,Zn,o),!o){this.remove();return}F(this,gr,Fy).call(this),this._uiManager.rebuild(this),F(this,gr,By).call(this)};this.addCommands({cmd:()=>{i(r)},undo:()=>{i(e)},mustExec:!1}),F(this,gr,By).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){ze._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,r;(this._isCopy||this.annotationElementId)&&(e=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,fm)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:i}=this.editorDiv;if(i.fontSize=`calc(${l(this,Qn)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){let[o,s]=this.parentDimensions;if(this.annotationElementId){let{position:a}=this._initialData,[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);let[h,f]=this.pageDimensions,[g,m]=this.pageTranslation,y,b;switch(this.rotation){case 0:y=e+(a[0]-g)/h,b=r+this.height-(a[1]-m)/f;break;case 90:y=e+(a[0]-g)/h,b=r-(a[1]-m)/f,[c,u]=[u,-c];break;case 180:y=e-this.width+(a[0]-g)/h,b=r-(a[1]-m)/f,[c,u]=[-c,-u];break;case 270:y=e+(a[0]-g-this.height*f)/h,b=r+(a[1]-m-this.width*h)/f,[c,u]=[-u,c];break}this.setAt(y*o,b*s,c,u)}else this._moveAfterPaste(e,r);F(this,gr,Fy).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var y,b,v;let r=e.clipboardData||window.clipboardData,{types:i}=r;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();let o=F(y=ze,aa,bx).call(y,r.getData("text")||"").replaceAll(dy,`
`);if(!o)return;let s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();let a=s.getRangeAt(0);if(!o.includes(`
`)){a.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),s.collapseToStart();return}let{startContainer:c,startOffset:u}=a,h=[],f=[];if(c.nodeType===Node.TEXT_NODE){let w=c.parentElement;if(f.push(c.nodeValue.slice(u).replaceAll(dy,"")),w!==this.editorDiv){let x=h;for(let E of this.editorDiv.childNodes){if(E===w){x=f;continue}x.push(F(b=ze,aa,Ly).call(b,E))}}h.push(c.nodeValue.slice(0,u).replaceAll(dy,""))}else if(c===this.editorDiv){let w=h,x=0;for(let E of this.editorDiv.childNodes)x++===u&&(w=f),w.push(F(v=ze,aa,Ly).call(v,E))}C(this,Zn,`${h.join(`
`)}${o}${f.join(`
`)}`),F(this,gr,Fy).call(this);let g=new Range,m=Math.sumPrecise(h.map(w=>w.length));for(let{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){let x=w.nodeValue.length;if(m<=x){g.setStart(w,m),g.setEnd(w,m);break}m-=x}s.removeAllRanges(),s.addRange(g)}get contentDiv(){return this.editorDiv}getPDFRect(){let e=ze._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,r,i){var a;let o=null;if(e instanceof bv){let{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:f,id:g,popupRef:m,richText:y,contentsObj:b,creationDate:v,modificationDate:w},textContent:x,textPosition:E,parent:{page:{pageNumber:D}}}=e;if(!x||x.length===0)return null;o=e={annotationType:te.FREETEXT,color:Array.from(u),fontSize:c,value:x.join(`
`),position:E,pageIndex:D-1,rect:h.slice(0),rotation:f,annotationElementId:g,id:g,deleted:!1,popupRef:m,comment:b?.str||null,richText:y,creationDate:v,modificationDate:w}}let s=await super.deserialize(e,r,i);return C(s,Qn,e.fontSize),s.color=Lt.makeHexColor(...e.color),C(s,Zn,F(a=ze,aa,bx).call(a,e.value)),s._initialData=o,e.comment&&s.setCommentData(e),s}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let r=$e._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(e),{color:r,fontSize:l(this,Qn),value:F(this,gr,BN).call(this)});return this.addComment(i),e?(i.isCopy=!0,i):this.annotationElementId&&!F(this,gr,LN).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){let r=super.renderAnnotationElement(e);if(!r)return null;let{style:i}=r;i.fontSize=`calc(${l(this,Qn)}px * var(--total-scale-factor))`,i.color=this.color,r.replaceChildren();for(let o of l(this,Zn).split(`
`)){let s=document.createElement("div");s.append(o?document.createTextNode(o):document.createElement("br")),r.append(s)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:l(this,Zn)}}),r}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Zn=new WeakMap,fm=new WeakMap,ru=new WeakMap,Qn=new WeakMap,gr=new WeakSet,NN=function(e){let r=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--total-scale-factor))`,this.translate(0,-(o-l(this,Qn))*this.parentScale),C(this,Qn,o),F(this,gr,By).call(this)},i=l(this,Qn);this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:he.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},PN=function(e){let r=o=>{this.color=o,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:he.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},kN=function(){var i;let e=[];this.editorDiv.normalize();let r=null;for(let o of this.editorDiv.childNodes)r?.nodeType===Node.TEXT_NODE&&o.nodeName==="BR"||(e.push(F(i=ze,aa,Ly).call(i,o)),r=o);return e.join(`
`)},By=function(){let[e,r]=this.parentDimensions,i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{let{currentLayer:o,div:s}=this,a=s.style.display,c=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",o.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=a,s.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/r):(this.width=i.height/e,this.height=i.width/r),this.fixAndSetPosition()},aa=new WeakSet,Ly=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(dy,"")},Fy=function(){if(this.editorDiv.replaceChildren(),!!l(this,Zn))for(let e of l(this,Zn).split(`
`)){let r=document.createElement("div");r.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(r)}},BN=function(){return l(this,Zn).replaceAll("\xA0"," ")},bx=function(e){return e.replaceAll(" ","\xA0")},LN=function(e){let{value:r,fontSize:i,color:o,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==r||e.fontSize!==i||e.color.some((a,c)=>a!==o[c])||e.pageIndex!==s},O(ze,aa),Dt(ze,"_freeTextDefaultContent",""),Dt(ze,"_internalPadding",0),Dt(ze,"_defaultColor",null),Dt(ze,"_defaultFontSize",10),Dt(ze,"_type","freetext"),Dt(ze,"_editorType",te.FREETEXT);vx=ze,jt=class{toSVGPath(){Me("Abstract method `toSVGPath` must be implemented.")}get box(){Me("Abstract getter `box` must be implemented.")}serialize(t,e){Me("Abstract method `serialize` must be implemented.")}static _rescale(t,e,r,i,o,s){s||(s=new Float32Array(t.length));for(let a=0,c=t.length;a<c;a+=2)s[a]=e+t[a]*i,s[a+1]=r+t[a+1]*o;return s}static _rescaleAndSwap(t,e,r,i,o,s){s||(s=new Float32Array(t.length));for(let a=0,c=t.length;a<c;a+=2)s[a]=e+t[a+1]*i,s[a+1]=r+t[a]*o;return s}static _translate(t,e,r,i){i||(i=new Float32Array(t.length));for(let o=0,s=t.length;o<s;o+=2)i[o]=e+t[o],i[o+1]=r+t[o+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,r,i,o){switch(o){case 90:return[1-e/r,t/i];case 180:return[1-t/r,1-e/i];case 270:return[e/r,1-t/i];default:return[t/r,e/i]}}static _normalizePagePoint(t,e,r){switch(r){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,r,i,o,s){return[(t+5*r)/6,(e+5*i)/6,(5*r+o)/6,(5*i+s)/6,(r+o)/2,(i+s)/2]}};Dt(jt,"PRECISION",1e-4);Eo=class Eo{constructor({x:t,y:e},r,i,o,s,a=0){O(this,Cr);O(this,ti);O(this,rs,[]);O(this,kf);O(this,Bf);O(this,zs,[]);O(this,ae,new Float32Array(18));O(this,nu);O(this,iu);O(this,dm);O(this,pm);O(this,Lf);O(this,Ff);O(this,ll,[]);C(this,ti,r),C(this,Ff,o*i),C(this,Bf,s),l(this,ae).set([NaN,NaN,NaN,NaN,t,e],6),C(this,kf,a),C(this,pm,l(Eo,gm)*i),C(this,dm,l(Eo,Vv)*i),C(this,Lf,i),l(this,ll).push(t,e)}isEmpty(){return isNaN(l(this,ae)[8])}add({x:t,y:e}){C(this,nu,t),C(this,iu,e);let[r,i,o,s]=l(this,ti),[a,c,u,h]=l(this,ae).subarray(8,12),f=t-u,g=e-h,m=Math.hypot(f,g);if(m<l(this,dm))return!1;let y=m-l(this,pm),b=y/m,v=b*f,w=b*g,x=a,E=c;a=u,c=h,u+=v,h+=w,l(this,ll)?.push(t,e);let D=-w/y,_=v/y,q=D*l(this,Ff),N=_*l(this,Ff);return l(this,ae).set(l(this,ae).subarray(2,8),0),l(this,ae).set([u+q,h+N],4),l(this,ae).set(l(this,ae).subarray(14,18),12),l(this,ae).set([u-q,h-N],16),isNaN(l(this,ae)[6])?(l(this,zs).length===0&&(l(this,ae).set([a+q,c+N],2),l(this,zs).push(NaN,NaN,NaN,NaN,(a+q-r)/o,(c+N-i)/s),l(this,ae).set([a-q,c-N],14),l(this,rs).push(NaN,NaN,NaN,NaN,(a-q-r)/o,(c-N-i)/s)),l(this,ae).set([x,E,a,c,u,h],6),!this.isEmpty()):(l(this,ae).set([x,E,a,c,u,h],6),Math.abs(Math.atan2(E-c,x-a)-Math.atan2(w,v))<Math.PI/2?([a,c,u,h]=l(this,ae).subarray(2,6),l(this,zs).push(NaN,NaN,NaN,NaN,((a+u)/2-r)/o,((c+h)/2-i)/s),[a,c,x,E]=l(this,ae).subarray(14,18),l(this,rs).push(NaN,NaN,NaN,NaN,((x+a)/2-r)/o,((E+c)/2-i)/s),!0):([x,E,a,c,u,h]=l(this,ae).subarray(0,6),l(this,zs).push(((x+5*a)/6-r)/o,((E+5*c)/6-i)/s,((5*a+u)/6-r)/o,((5*c+h)/6-i)/s,((a+u)/2-r)/o,((c+h)/2-i)/s),[u,h,a,c,x,E]=l(this,ae).subarray(12,18),l(this,rs).push(((x+5*a)/6-r)/o,((E+5*c)/6-i)/s,((5*a+u)/6-r)/o,((5*c+h)/6-i)/s,((a+u)/2-r)/o,((c+h)/2-i)/s),!0))}toSVGPath(){if(this.isEmpty())return"";let t=l(this,zs),e=l(this,rs);if(isNaN(l(this,ae)[6])&&!this.isEmpty())return F(this,Cr,FN).call(this);let r=[];r.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?r.push(`L${t[i+4]} ${t[i+5]}`):r.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);F(this,Cr,UN).call(this,r);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return F(this,Cr,MN).call(this,r),r.join(" ")}newFreeDrawOutline(t,e,r,i,o,s){return new _v(t,e,r,i,o,s)}getOutlines(){let t=l(this,zs),e=l(this,rs),r=l(this,ae),[i,o,s,a]=l(this,ti),c=new Float32Array((l(this,ll)?.length??0)+2);for(let f=0,g=c.length-2;f<g;f+=2)c[f]=(l(this,ll)[f]-i)/s,c[f+1]=(l(this,ll)[f+1]-o)/a;if(c[c.length-2]=(l(this,nu)-i)/s,c[c.length-1]=(l(this,iu)-o)/a,isNaN(r[6])&&!this.isEmpty())return F(this,Cr,jN).call(this,c);let u=new Float32Array(l(this,zs).length+24+l(this,rs).length),h=t.length;for(let f=0;f<h;f+=2){if(isNaN(t[f])){u[f]=u[f+1]=NaN;continue}u[f]=t[f],u[f+1]=t[f+1]}h=F(this,Cr,qN).call(this,u,h);for(let f=e.length-6;f>=6;f-=6)for(let g=0;g<6;g+=2){if(isNaN(e[f+g])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=e[f+g],u[h+1]=e[f+g+1],h+=2}return F(this,Cr,$N).call(this,u,h),this.newFreeDrawOutline(u,c,l(this,ti),l(this,Lf),l(this,kf),l(this,Bf))}};ti=new WeakMap,rs=new WeakMap,kf=new WeakMap,Bf=new WeakMap,zs=new WeakMap,ae=new WeakMap,nu=new WeakMap,iu=new WeakMap,dm=new WeakMap,pm=new WeakMap,Lf=new WeakMap,Ff=new WeakMap,ll=new WeakMap,gm=new WeakMap,Gv=new WeakMap,Vv=new WeakMap,Cr=new WeakSet,mp=function(){let t=l(this,ae).subarray(4,6),e=l(this,ae).subarray(16,18),[r,i,o,s]=l(this,ti);return[(l(this,nu)+(t[0]-e[0])/2-r)/o,(l(this,iu)+(t[1]-e[1])/2-i)/s,(l(this,nu)+(e[0]-t[0])/2-r)/o,(l(this,iu)+(e[1]-t[1])/2-i)/s]},FN=function(){let[t,e,r,i]=l(this,ti),[o,s,a,c]=F(this,Cr,mp).call(this);return`M${(l(this,ae)[2]-t)/r} ${(l(this,ae)[3]-e)/i} L${(l(this,ae)[4]-t)/r} ${(l(this,ae)[5]-e)/i} L${o} ${s} L${a} ${c} L${(l(this,ae)[16]-t)/r} ${(l(this,ae)[17]-e)/i} L${(l(this,ae)[14]-t)/r} ${(l(this,ae)[15]-e)/i} Z`},MN=function(t){let e=l(this,rs);t.push(`L${e[4]} ${e[5]} Z`)},UN=function(t){let[e,r,i,o]=l(this,ti),s=l(this,ae).subarray(4,6),a=l(this,ae).subarray(16,18),[c,u,h,f]=F(this,Cr,mp).call(this);t.push(`L${(s[0]-e)/i} ${(s[1]-r)/o} L${c} ${u} L${h} ${f} L${(a[0]-e)/i} ${(a[1]-r)/o}`)},jN=function(t){let e=l(this,ae),[r,i,o,s]=l(this,ti),[a,c,u,h]=F(this,Cr,mp).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(e[2]-r)/o,(e[3]-i)/s,NaN,NaN,NaN,NaN,(e[4]-r)/o,(e[5]-i)/s,NaN,NaN,NaN,NaN,a,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(e[16]-r)/o,(e[17]-i)/s,NaN,NaN,NaN,NaN,(e[14]-r)/o,(e[15]-i)/s],0),this.newFreeDrawOutline(f,t,l(this,ti),l(this,Lf),l(this,kf),l(this,Bf))},$N=function(t,e){let r=l(this,rs);return t.set([NaN,NaN,NaN,NaN,r[4],r[5]],e),e+=6},qN=function(t,e){let r=l(this,ae).subarray(4,6),i=l(this,ae).subarray(16,18),[o,s,a,c]=l(this,ti),[u,h,f,g]=F(this,Cr,mp).call(this);return t.set([NaN,NaN,NaN,NaN,(r[0]-o)/a,(r[1]-s)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(i[0]-o)/a,(i[1]-s)/c],e),e+=24},O(Eo,gm,8),O(Eo,Gv,2),O(Eo,Vv,l(Eo,gm)+l(Eo,Gv));Sv=Eo,_v=class extends jt{constructor(e,r,i,o,s,a){super();O(this,Xv);O(this,Mf);O(this,su,new Float32Array(4));O(this,Jo);O(this,mm);O(this,ei);O(this,ym);O(this,hr);C(this,hr,e),C(this,ei,r),C(this,Mf,i),C(this,ym,o),C(this,Jo,s),C(this,mm,a),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],F(this,Xv,zN).call(this,a);let[c,u,h,f]=l(this,su);for(let g=0,m=e.length;g<m;g+=2)e[g]=(e[g]-c)/h,e[g+1]=(e[g+1]-u)/f;for(let g=0,m=r.length;g<m;g+=2)r[g]=(r[g]-c)/h,r[g+1]=(r[g+1]-u)/f}toSVGPath(){let e=[`M${l(this,hr)[4]} ${l(this,hr)[5]}`];for(let r=6,i=l(this,hr).length;r<i;r+=6){if(isNaN(l(this,hr)[r])){e.push(`L${l(this,hr)[r+4]} ${l(this,hr)[r+5]}`);continue}e.push(`C${l(this,hr)[r]} ${l(this,hr)[r+1]} ${l(this,hr)[r+2]} ${l(this,hr)[r+3]} ${l(this,hr)[r+4]} ${l(this,hr)[r+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,r,i,o],s){let a=i-e,c=o-r,u,h;switch(s){case 0:u=jt._rescale(l(this,hr),e,o,a,-c),h=jt._rescale(l(this,ei),e,o,a,-c);break;case 90:u=jt._rescaleAndSwap(l(this,hr),e,r,a,c),h=jt._rescaleAndSwap(l(this,ei),e,r,a,c);break;case 180:u=jt._rescale(l(this,hr),i,r,-a,c),h=jt._rescale(l(this,ei),i,r,-a,c);break;case 270:u=jt._rescaleAndSwap(l(this,hr),i,o,-a,-c),h=jt._rescaleAndSwap(l(this,ei),i,o,-a,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return l(this,su)}newOutliner(e,r,i,o,s,a=0){return new Sv(e,r,i,o,s,a)}getNewOutline(e,r){let[i,o,s,a]=l(this,su),[c,u,h,f]=l(this,Mf),g=s*h,m=a*f,y=i*h+c,b=o*f+u,v=this.newOutliner({x:l(this,ei)[0]*g+y,y:l(this,ei)[1]*m+b},l(this,Mf),l(this,ym),e,l(this,mm),r??l(this,Jo));for(let w=2;w<l(this,ei).length;w+=2)v.add({x:l(this,ei)[w]*g+y,y:l(this,ei)[w+1]*m+b});return v.getOutlines()}};Mf=new WeakMap,su=new WeakMap,Jo=new WeakMap,mm=new WeakMap,ei=new WeakMap,ym=new WeakMap,hr=new WeakMap,Xv=new WeakSet,zN=function(e){let r=l(this,hr),i=r[4],o=r[5],s=[i,o,i,o],a=i,c=o,u=i,h=o,f=e?Math.max:Math.min,g=new Float32Array(4);for(let y=6,b=r.length;y<b;y+=6){let v=r[y+4],w=r[y+5];isNaN(r[y])?(Lt.pointBoundingBox(v,w,s),c>w?(a=v,c=w):c===w&&(a=f(a,v)),h<w?(u=v,h=w):h===w&&(u=f(u,v))):(g[0]=g[1]=1/0,g[2]=g[3]=-1/0,Lt.bezierBoundingBox(i,o,...r.slice(y,y+6),g),Lt.rectBoundingBox(g[0],g[1],g[2],g[3],s),c>g[1]?(a=g[0],c=g[1]):c===g[1]&&(a=f(a,g[0])),h<g[3]?(u=g[2],h=g[3]):h===g[3]&&(u=f(u,g[2]))),i=v,o=w}let m=l(this,su);m[0]=s[0]-l(this,Jo),m[1]=s[1]-l(this,Jo),m[2]=s[2]-s[0]+2*l(this,Jo),m[3]=s[3]-s[1]+2*l(this,Jo),this.firstPoint=[a,c],this.lastPoint=[u,h]};Fp=class{constructor(t,e=0,r=0,i=!0){O(this,vn);O(this,vm);O(this,bm);O(this,wm);O(this,cl,[]);O(this,ns,[]);let o=[1/0,1/0,-1/0,-1/0],a=10**-4;for(let{x:v,y:w,width:x,height:E}of t){let D=Math.floor((v-e)/a)*a,_=Math.ceil((v+x+e)/a)*a,q=Math.floor((w-e)/a)*a,N=Math.ceil((w+E+e)/a)*a,rt=[D,q,N,!0],Y=[_,q,N,!1];l(this,cl).push(rt,Y),Lt.rectBoundingBox(D,q,_,N,o)}let c=o[2]-o[0]+2*r,u=o[3]-o[1]+2*r,h=o[0]-r,f=o[1]-r,g=i?-1/0:1/0,m=1/0,y=l(this,cl).at(i?-1:-2),b=[y[0],y[2]];for(let v of l(this,cl)){let[w,x,E,D]=v;!D&&i?x<m?(m=x,g=w):x===m&&(g=Math.max(g,w)):D&&!i&&(x<m?(m=x,g=w):x===m&&(g=Math.min(g,w))),v[0]=(w-h)/c,v[1]=(x-f)/u,v[2]=(E-f)/u}C(this,vm,new Float32Array([h,f,c,u])),C(this,bm,[g,m]),C(this,wm,b)}getOutlines(){l(this,cl).sort((e,r)=>e[0]-r[0]||e[1]-r[1]||e[2]-r[2]);let t=[];for(let e of l(this,cl))e[3]?(t.push(...F(this,vn,wx).call(this,e)),F(this,vn,WN).call(this,e)):(F(this,vn,GN).call(this,e),t.push(...F(this,vn,wx).call(this,e)));return F(this,vn,HN).call(this,t)}};vm=new WeakMap,bm=new WeakMap,wm=new WeakMap,cl=new WeakMap,ns=new WeakMap,vn=new WeakSet,HN=function(t){let e=[],r=new Set;for(let s of t){let[a,c,u]=s;e.push([a,c,s],[a,u,s])}e.sort((s,a)=>s[1]-a[1]||s[0]-a[0]);for(let s=0,a=e.length;s<a;s+=2){let c=e[s][2],u=e[s+1][2];c.push(u),u.push(c),r.add(c),r.add(u)}let i=[],o;for(;r.size>0;){let s=r.values().next().value,[a,c,u,h,f]=s;r.delete(s);let g=a,m=c;for(o=[a,u],i.push(o);;){let y;if(r.has(h))y=h;else if(r.has(f))y=f;else break;r.delete(y),[a,c,u,h,f]=y,g!==a&&(o.push(g,m,a,m===c?c:u),g=a),m=m===c?u:c}o.push(g,m)}return new Ax(i,l(this,vm),l(this,bm),l(this,wm))},My=function(t){let e=l(this,ns),r=0,i=e.length-1;for(;r<=i;){let o=r+i>>1,s=e[o][0];if(s===t)return o;s<t?r=o+1:i=o-1}return i+1},WN=function([,t,e]){let r=F(this,vn,My).call(this,t);l(this,ns).splice(r,0,[t,e])},GN=function([,t,e]){let r=F(this,vn,My).call(this,t);for(let i=r;i<l(this,ns).length;i++){let[o,s]=l(this,ns)[i];if(o!==t)break;if(o===t&&s===e){l(this,ns).splice(i,1);return}}for(let i=r-1;i>=0;i--){let[o,s]=l(this,ns)[i];if(o!==t)break;if(o===t&&s===e){l(this,ns).splice(i,1);return}}},wx=function(t){let[e,r,i]=t,o=[[e,r,i]],s=F(this,vn,My).call(this,i);for(let a=0;a<s;a++){let[c,u]=l(this,ns)[a];for(let h=0,f=o.length;h<f;h++){let[,g,m]=o[h];if(!(u<=g||m<=c)){if(g>=c){if(m>u)o[h][1]=u;else{if(f===1)return[];o.splice(h,1),h--,f--}continue}o[h][2]=c,m>u&&o.push([e,u,m])}}}return o};Ax=class extends jt{constructor(e,r,i,o){super();O(this,Am);O(this,Uf);C(this,Uf,e),C(this,Am,r),this.firstPoint=i,this.lastPoint=o}toSVGPath(){let e=[];for(let r of l(this,Uf)){let[i,o]=r;e.push(`M${i} ${o}`);for(let s=2;s<r.length;s+=2){let a=r[s],c=r[s+1];a===i?(e.push(`V${c}`),o=c):c===o&&(e.push(`H${a}`),i=a)}e.push("Z")}return e.join(" ")}serialize([e,r,i,o],s){let a=[],c=i-e,u=o-r;for(let h of l(this,Uf)){let f=new Array(h.length);for(let g=0;g<h.length;g+=2)f[g]=e+h[g]*c,f[g+1]=o-h[g+1]*u;a.push(f)}return a}get box(){return l(this,Am)}get classNamesForOutlining(){return["highlightOutline"]}};Am=new WeakMap,Uf=new WeakMap;Mp=class extends Sv{newFreeDrawOutline(t,e,r,i,o,s){return new xx(t,e,r,i,o,s)}},xx=class extends _v{newOutliner(t,e,r,i,o,s=0){return new Mp(t,e,r,i,o,s)}},ve=class ve extends $e{constructor(e){super({...e,name:"highlightEditor"});O(this,se);O(this,jf,null);O(this,xm,0);O(this,Zo);O(this,ou,null);O(this,Em,null);O(this,kn,null);O(this,Sm,null);O(this,_m,0);O(this,au,null);O(this,ri,null);O(this,ni,null);O(this,Hr,!1);O(this,$f,null);O(this,qf,null);O(this,sn,null);O(this,zf,"");O(this,Pi);O(this,Cm,"");this.color=e.color||ve._defaultColor,C(this,Pi,e.thickness||ve._defaultThickness),this.opacity=e.opacity||ve._defaultOpacity,C(this,Zo,e.boxes||null),C(this,Cm,e.methodOfCreation||""),C(this,zf,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(C(this,Hr,!0),F(this,se,Uy).call(this,e),F(this,se,ec).call(this)):l(this,Zo)&&(C(this,jf,e.anchorNode),C(this,xm,e.anchorOffset),C(this,Sm,e.focusNode),C(this,_m,e.focusOffset),F(this,se,Ex).call(this),F(this,se,ec).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){let e=ve.prototype;return Qt(this,"_keyboardManager",new Eu([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,Hr)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:l(this,Pi),methodOfCreation:l(this,Cm)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,r){$e.initialize(e,r),ve._defaultColor||(ve._defaultColor=r.highlightColors?.values().next().value||"#fff066")}static updateDefaultParams(e,r){switch(e){case he.HIGHLIGHT_COLOR:ve._defaultColor=r;break;case he.HIGHLIGHT_THICKNESS:ve._defaultThickness=r;break}}translateInPage(e,r){}get toolbarPosition(){return l(this,qf)}get commentButtonPosition(){return l(this,$f)}updateParams(e,r){switch(e){case he.HIGHLIGHT_COLOR:F(this,se,VN).call(this,r);break;case he.HIGHLIGHT_THICKNESS:F(this,se,XN).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[he.HIGHLIGHT_COLOR,ve._defaultColor],[he.HIGHLIGHT_THICKNESS,ve._defaultThickness]]}get propertiesToUpdate(){return[[he.HIGHLIGHT_COLOR,this.color||ve._defaultColor],[he.HIGHLIGHT_THICKNESS,l(this,Pi)||ve._defaultThickness],[he.HIGHLIGHT_FREE,l(this,Hr)]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(l(this,ni),{root:{fill:this.color,"fill-opacity":this.opacity}}),l(this,Em)?.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",C(this,Em,new Pp({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(F(this,se,$y).call(this))}getBaseTranslation(){return[0,0]}getRect(e,r){return super.getRect(e,r,F(this,se,$y).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){F(this,se,Sx).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(F(this,se,ec).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let r=!1;this.parent&&!e?F(this,se,Sx).call(this):e&&(F(this,se,ec).call(this,e),r=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),r&&this.select()}rotate(e){var o,s,a;let{drawLayer:r}=this.parent,i;l(this,Hr)?(e=(e-this.rotation+360)%360,i=F(o=ve,Fi,vh).call(o,l(this,ri).box,e)):i=F(s=ve,Fi,vh).call(s,[this.x,this.y,this.width,this.height],e),r.updateProperties(l(this,ni),{bbox:i,root:{"data-main-rotation":e}}),r.updateProperties(l(this,sn),{bbox:F(a=ve,Fi,vh).call(a,l(this,kn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;let e=super.render();l(this,zf)&&(e.setAttribute("aria-label",l(this,zf)),e.setAttribute("role","mark")),l(this,Hr)?e.classList.add("free"):this.div.addEventListener("keydown",F(this,se,KN).bind(this),{signal:this._uiManager._signal});let r=C(this,au,document.createElement("div"));return e.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=l(this,ou),this.setDims(),NO(this,l(this,au),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(l(this,sn),{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(l(this,sn),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:F(this,se,jy).call(this,!0);break;case 1:case 3:F(this,se,jy).call(this,!1);break}}select(){super.select(),l(this,sn)&&this.parent?.drawLayer.updateProperties(l(this,sn),{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),l(this,sn)&&(this.parent?.drawLayer.updateProperties(l(this,sn),{rootClass:{selected:!1}}),l(this,Hr)||F(this,se,jy).call(this,!1))}get _mustFixPosition(){return!l(this,Hr)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(l(this,ni),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(l(this,sn),{rootClass:{hidden:!e}}))}static startHighlighting(e,r,{target:i,x:o,y:s}){let{x:a,y:c,width:u,height:h}=i.getBoundingClientRect(),f=new AbortController,g=e.combinedSignal(f),m=y=>{f.abort(),F(this,Fi,tP).call(this,e,y)};window.addEventListener("blur",m,{signal:g}),window.addEventListener("pointerup",m,{signal:g}),window.addEventListener("pointerdown",Je,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",hi,{signal:g}),i.addEventListener("pointermove",F(this,Fi,QN).bind(this,e),{signal:g}),this._freeHighlight=new Mp({x:o,y:s},[a,c,u,h],e.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,r,i){var b,v,w,x;let o=null;if(e instanceof Av){let{data:{quadPoints:E,rect:D,rotation:_,id:q,color:N,opacity:rt,popupRef:Y,richText:et,contentsObj:st,creationDate:lt,modificationDate:at},parent:{page:{pageNumber:X}}}=e;o=e={annotationType:te.HIGHLIGHT,color:Array.from(N),opacity:rt,quadPoints:E,boxes:null,pageIndex:X-1,rect:D.slice(0),rotation:_,annotationElementId:q,id:q,deleted:!1,popupRef:Y,richText:et,comment:st?.str||null,creationDate:lt,modificationDate:at}}else if(e instanceof Lp){let{data:{inkLists:E,rect:D,rotation:_,id:q,color:N,borderStyle:{rawWidth:rt},popupRef:Y,richText:et,contentsObj:st,creationDate:lt,modificationDate:at},parent:{page:{pageNumber:X}}}=e;o=e={annotationType:te.HIGHLIGHT,color:Array.from(N),thickness:rt,inkLists:E,boxes:null,pageIndex:X-1,rect:D.slice(0),rotation:_,annotationElementId:q,id:q,deleted:!1,popupRef:Y,richText:et,comment:st?.str||null,creationDate:lt,modificationDate:at}}let{color:s,quadPoints:a,inkLists:c,opacity:u}=e,h=await super.deserialize(e,r,i);h.color=Lt.makeHexColor(...s),h.opacity=u||1,c&&C(h,Pi,e.thickness),h._initialData=o,e.comment&&h.setCommentData(e);let[f,g]=h.pageDimensions,[m,y]=h.pageTranslation;if(a){let E=C(h,Zo,[]);for(let D=0;D<a.length;D+=8)E.push({x:(a[D]-m)/f,y:1-(a[D+1]-y)/g,width:(a[D+2]-a[D])/f,height:(a[D+1]-a[D+5])/g});F(b=h,se,Ex).call(b),F(v=h,se,ec).call(v),h.rotate(h.rotation)}else if(c){C(h,Hr,!0);let E=c[0],D={x:E[0]-m,y:g-(E[1]-y)},_=new Mp(D,[0,0,f,g],1,l(h,Pi)/2,!0,.001);for(let rt=0,Y=E.length;rt<Y;rt+=2)D.x=E[rt]-m,D.y=g-(E[rt+1]-y),_.add(D);let{id:q,clipPathId:N}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);F(w=h,se,Uy).call(w,{highlightOutlines:_.getOutlines(),highlightId:q,clipPathId:N}),F(x=h,se,ec).call(x),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();let r=$e._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(e);return Object.assign(i,{color:r,opacity:this.opacity,thickness:l(this,Pi),quadPoints:F(this,se,JN).call(this),outlines:F(this,se,ZN).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!F(this,se,eP).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};jf=new WeakMap,xm=new WeakMap,Zo=new WeakMap,ou=new WeakMap,Em=new WeakMap,kn=new WeakMap,Sm=new WeakMap,_m=new WeakMap,au=new WeakMap,ri=new WeakMap,ni=new WeakMap,Hr=new WeakMap,$f=new WeakMap,qf=new WeakMap,sn=new WeakMap,zf=new WeakMap,Pi=new WeakMap,Cm=new WeakMap,se=new WeakSet,Ex=function(){let e=new Fp(l(this,Zo),.001);C(this,ri,e.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,ri).box;let r=new Fp(l(this,Zo),.0025,.001,this._uiManager.direction==="ltr");C(this,kn,r.getOutlines());let{firstPoint:i}=l(this,ri);C(this,$f,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);let{lastPoint:o}=l(this,kn);C(this,qf,[(o[0]-this.x)/this.width,(o[1]-this.y)/this.height])},Uy=function({highlightOutlines:e,highlightId:r,clipPathId:i}){var g,m;if(C(this,ri,e),C(this,kn,e.getNewOutline(l(this,Pi)/2+1.5,.0025)),r>=0)C(this,ni,r),C(this,ou,i),this.parent.drawLayer.finalizeDraw(r,{bbox:e.box,path:{d:e.toSVGPath()}}),C(this,sn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,kn).box,path:{d:l(this,kn).toSVGPath()}},!0));else if(this.parent){let y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,ni),{bbox:F(g=ve,Fi,vh).call(g,l(this,ri).box,(y-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,sn),{bbox:F(m=ve,Fi,vh).call(m,l(this,kn).box,y),path:{d:l(this,kn).toSVGPath()}})}let[s,a,c,u]=e.box;switch(this.rotation){case 0:this.x=s,this.y=a,this.width=c,this.height=u;break;case 90:{let[y,b]=this.parentDimensions;this.x=a,this.y=1-s,this.width=c*b/y,this.height=u*y/b;break}case 180:this.x=1-s,this.y=1-a,this.width=c,this.height=u;break;case 270:{let[y,b]=this.parentDimensions;this.x=1-a,this.y=s,this.width=c*b/y,this.height=u*y/b;break}}let{firstPoint:h}=e;C(this,$f,[(h[0]-s)/c,(h[1]-a)/u]);let{lastPoint:f}=l(this,kn);C(this,qf,[(f[0]-s)/c,(f[1]-a)/u])},VN=function(e){let r=(s,a)=>{this.color=s,this.opacity=a,this.onUpdatedColor()},i=this.color,o=this.opacity;this.addCommands({cmd:r.bind(this,e,ve._defaultOpacity),undo:r.bind(this,i,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:he.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},XN=function(e){let r=l(this,Pi),i=o=>{C(this,Pi,o),F(this,se,YN).call(this,o)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:he.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},YN=function(e){l(this,Hr)&&(F(this,se,Uy).call(this,{highlightOutlines:l(this,ri).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())},Sx=function(){l(this,ni)===null||!this.parent||(this.parent.drawLayer.remove(l(this,ni)),C(this,ni,null),this.parent.drawLayer.remove(l(this,sn)),C(this,sn,null))},ec=function(e=this.parent){l(this,ni)===null&&({id:vr(this,ni)._,clipPathId:vr(this,ou)._}=e.drawLayer.draw({bbox:l(this,ri).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:l(this,Hr)},path:{d:l(this,ri).toSVGPath()}},!1,!0),C(this,sn,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,Hr)},bbox:l(this,kn).box,path:{d:l(this,kn).toSVGPath()}},l(this,Hr))),l(this,au)&&(l(this,au).style.clipPath=l(this,ou)))},Fi=new WeakSet,vh=function([e,r,i,o],s){switch(s){case 90:return[1-r-o,e,o,i];case 180:return[1-e-i,1-r-o,i,o];case 270:return[r,1-e-i,o,i]}return[e,r,i,o]},KN=function(e){ve._keyboardManager.exec(this,e)},jy=function(e){if(!l(this,jf))return;let r=window.getSelection();e?r.setPosition(l(this,jf),l(this,xm)):r.setPosition(l(this,Sm),l(this,_m))},$y=function(){return l(this,Hr)?this.rotation:0},JN=function(){if(l(this,Hr))return null;let[e,r]=this.pageDimensions,[i,o]=this.pageTranslation,s=l(this,Zo),a=new Float32Array(s.length*8),c=0;for(let{x:u,y:h,width:f,height:g}of s){let m=u*e+i,y=(1-h)*r+o;a[c]=a[c+4]=m,a[c+1]=a[c+3]=y,a[c+2]=a[c+6]=m+f*e,a[c+5]=a[c+7]=y-g*r,c+=8}return a},ZN=function(e){return l(this,ri).serialize(e,F(this,se,$y).call(this))},QN=function(e,r){this._freeHighlight.add(r)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},tP=function(e,r){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},eP=function(e){let{color:r}=this._initialData;return this.hasEditedComment||e.color.some((i,o)=>i!==r[o])},O(ve,Fi),Dt(ve,"_defaultColor",null),Dt(ve,"_defaultOpacity",1),Dt(ve,"_defaultThickness",12),Dt(ve,"_type","highlight"),Dt(ve,"_editorType",te.HIGHLIGHT),Dt(ve,"_freeHighlightId",-1),Dt(ve,"_freeHighlight",null),Dt(ve,"_freeHighlightClipId","");Cv=ve,Tv=class{constructor(){O(this,lu,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(let[e,r]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,r)}updateSVGProperty(t,e){l(this,lu)[t]=e}toSVGProperties(){let t=l(this,lu);return C(this,lu,Object.create(null)),{root:t}}reset(){C(this,lu,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Me("Not implemented")}};lu=new WeakMap;ue=class ue extends $e{constructor(e){super(e);O(this,pe);O(this,ii,null);O(this,Hf);Dt(this,"_colorPicker",null);Dt(this,"_drawId",null);C(this,Hf,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(F(this,pe,_x).call(this,e),F(this,pe,yp).call(this))}static _mergeSVGProperties(e,r){let i=new Set(Object.keys(e));for(let[o,s]of Object.entries(r))i.has(o)?Object.assign(e[o],s):e[o]=s;return e}static getDefaultDrawingOptions(e){Me("Not implemented")}static get typesMap(){Me("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,r){let i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,r),this._currentParent&&(l(ue,Nr).updateProperty(i,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,r){let i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,r)}static get defaultPropertiesToUpdate(){let e=[],r=this._defaultDrawingOptions;for(let[i,o]of this.typesMap)e.push([i,r[o]]);return e}get propertiesToUpdate(){let e=[],{_drawingOptions:r}=this;for(let[i,o]of this.constructor.typesMap)e.push([i,r[o]]);return e}_updateProperty(e,r,i){let o=this._drawingOptions,s=o[r],a=c=>{o.updateProperty(r,c);let u=l(this,ii).updateProperty(r,c);u&&F(this,pe,vp).call(this,u),this.parent?.drawLayer.updateProperties(this._drawId,o.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,ue._mergeSVGProperties(l(this,ii).getPathResizingSVGProperties(F(this,pe,qy).call(this)),{bbox:F(this,pe,bh).call(this)}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,ue._mergeSVGProperties(l(this,ii).getPathResizedSVGProperties(F(this,pe,qy).call(this)),{bbox:F(this,pe,bh).call(this)}))}_onTranslating(e,r){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:F(this,pe,bh).call(this)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,ue._mergeSVGProperties(l(this,ii).getPathTranslatedSVGProperties(F(this,pe,qy).call(this),this.parentDimensions),{bbox:F(this,pe,bh).call(this)}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,Hf)&&(C(this,Hf,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){F(this,pe,Tx).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(F(this,pe,yp).call(this),F(this,pe,vp).call(this,l(this,ii).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let r=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),F(this,pe,Tx).call(this)):e&&(this._uiManager.addShouldRescale(this),F(this,pe,yp).call(this,e),r=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ue._mergeSVGProperties({bbox:F(this,pe,bh).call(this)},l(this,ii).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&F(this,pe,vp).call(this,l(this,ii).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,r;this._isCopy&&(e=this.x,r=this.y);let i=super.render();i.classList.add("draw");let o=document.createElement("div");return i.append(o),o.setAttribute("aria-hidden","true"),o.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,r),i}static createDrawerInstance(e,r,i,o,s){Me("Not implemented")}static startDrawing(e,r,i,o){let{target:s,offsetX:a,offsetY:c,pointerId:u,pointerType:h}=o;if(Qr.isInitializedAndDifferentPointerType(h))return;let{viewport:{rotation:f}}=e,{width:g,height:m}=s.getBoundingClientRect(),y=C(ue,cu,new AbortController),b=e.combinedSignal(y);if(Qr.setPointer(h,u),window.addEventListener("pointerup",v=>{Qr.isSamePointerIdOrRemove(v.pointerId)&&this._endDraw(v)},{signal:b}),window.addEventListener("pointercancel",v=>{Qr.isSamePointerIdOrRemove(v.pointerId)&&this._currentParent.endDrawingSession()},{signal:b}),window.addEventListener("pointerdown",v=>{Qr.isSamePointerType(v.pointerType)&&(Qr.initializeAndAddPointerId(v.pointerId),l(ue,Nr).isCancellable()&&(l(ue,Nr).removeLastElement(),l(ue,Nr).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",hi,{signal:b}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:b}),s.addEventListener("touchmove",v=>{Qr.isSameTimeStamp(v.timeStamp)&&Je(v)},{signal:b}),e.toggleDrawing(),r._editorUndoBar?.hide(),l(ue,Nr)){e.drawLayer.updateProperties(this._currentDrawId,l(ue,Nr).startNew(a,c,g,m,f));return}r.updateUIForDefaultProperties(this),C(ue,Nr,this.createDrawerInstance(a,c,g,m,f)),C(ue,uu,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(l(ue,uu).toSVGProperties(),l(ue,Nr).defaultSVGProperties),!0,!1)}static _drawMove(e){if(Qr.isSameTimeStamp(e.timeStamp),!l(ue,Nr))return;let{offsetX:r,offsetY:i,pointerId:o}=e;if(Qr.isSamePointerId(o)){if(Qr.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(ue,Nr).add(r,i)),Qr.setTimeStamp(e.timeStamp),Je(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,C(ue,Nr,null),C(ue,uu,null),Qr.clearTimeStamp()),l(ue,cu)&&(l(ue,cu).abort(),C(ue,cu,null),Qr.clearPointerIds())}static _endDraw(e){let r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),e?.target===r.div&&r.drawLayer.updateProperties(this._currentDrawId,l(ue,Nr).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){let i=l(ue,Nr),o=this._currentDrawId,s=i.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(o,i.setLastElement(s))},undo:()=>{r.drawLayer.updateProperties(o,i.removeLastElement())},mustExec:!1,type:he.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){let r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(he.DRAW_STEP),!l(ue,Nr).isEmpty()){let{pageDimensions:[i,o],scale:s}=r,a=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(ue,Nr).getOutlines(i*s,o*s,s,this._INNER_MARGIN),drawingOptions:l(ue,uu),mustBeCommitted:!e});return this._cleanup(!0),a}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,r,i,o,s,a){Me("Not implemented")}static async deserialize(e,r,i){var f,g;let{rawDims:{pageWidth:o,pageHeight:s,pageX:a,pageY:c}}=r.viewport,u=this.deserializeDraw(a,c,o,s,this._INNER_MARGIN,e),h=await super.deserialize(e,r,i);return h.createDrawingOptions(e),F(f=h,pe,_x).call(f,{drawOutlines:u}),F(g=h,pe,yp).call(g),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){let[r,i]=this.pageTranslation,[o,s]=this.pageDimensions;return l(this,ii).serialize([r,i,o,s],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};ii=new WeakMap,Hf=new WeakMap,Nr=new WeakMap,cu=new WeakMap,uu=new WeakMap,pe=new WeakSet,_x=function({drawOutlines:e,drawId:r,drawingOptions:i}){C(this,ii,e),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,e.defaultProperties)):this._drawId=F(this,pe,Cx).call(this,e,this.parent),F(this,pe,vp).call(this,e.box)},Cx=function(e,r){let{id:i}=r.drawLayer.draw(ue._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i},Tx=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},yp=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=F(this,pe,Cx).call(this,l(this,ii),e)}},rP=function([e,r,i,o]){let{parentDimensions:[s,a],rotation:c}=this;switch(c){case 90:return[r,1-e,i*(a/s),o*(s/a)];case 180:return[1-e,1-r,i,o];case 270:return[1-r,e,i*(a/s),o*(s/a)];default:return[e,r,i,o]}},qy=function(){let{x:e,y:r,width:i,height:o,parentDimensions:[s,a],rotation:c}=this;switch(c){case 90:return[1-r,e,i*(s/a),o*(a/s)];case 180:return[1-e,1-r,i,o];case 270:return[r,1-e,i*(s/a),o*(a/s)];default:return[e,r,i,o]}},vp=function(e){[this.x,this.y,this.width,this.height]=F(this,pe,rP).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},bh=function(){let{x:e,y:r,width:i,height:o,rotation:s,parentRotation:a,parentDimensions:[c,u]}=this;switch((s*4+a)/90){case 1:return[1-r-o,e,o,i];case 2:return[1-e-i,1-r-o,i,o];case 3:return[r,1-e-i,o,i];case 4:return[e,r-i*(c/u),o*(u/c),i*(c/u)];case 5:return[1-r,e,i*(c/u),o*(u/c)];case 6:return[1-e-o*(u/c),1-r,o*(u/c),i*(c/u)];case 7:return[r-i*(c/u),1-e-o*(u/c),i*(c/u),o*(u/c)];case 8:return[e-i,r-o,i,o];case 9:return[1-r,e-i,o,i];case 10:return[1-e,1-r,i,o];case 11:return[r-o,1-e,o,i];case 12:return[e-o*(u/c),r,o*(u/c),i*(c/u)];case 13:return[1-r-i*(c/u),e-o*(u/c),i*(c/u),o*(u/c)];case 14:return[1-e,1-r-i*(c/u),o*(u/c),i*(c/u)];case 15:return[r,1-e,i*(c/u),o*(u/c)];default:return[e,r,i,o]}},Dt(ue,"_currentDrawId",-1),Dt(ue,"_currentParent",null),O(ue,Nr,null),O(ue,cu,null),O(ue,uu,null),Dt(ue,"_INNER_MARGIN",3);Dv=ue,Dx=class{constructor(t,e,r,i,o,s){O(this,Gf);O(this,Hs,new Float64Array(6));O(this,Pr);O(this,kr);O(this,hu);O(this,Wf);O(this,dn);O(this,Wr,"");O(this,ki,0);O(this,fu,new Cu);O(this,du);O(this,pu);C(this,du,r),C(this,pu,i),C(this,hu,o),C(this,Wf,s),[t,e]=F(this,Gf,zy).call(this,t,e);let a=C(this,Pr,[NaN,NaN,NaN,NaN,t,e]);C(this,dn,[t,e]),C(this,kr,[{line:a,points:l(this,dn)}]),l(this,Hs).set(a,0)}updateProperty(t,e){t==="stroke-width"&&C(this,Wf,e)}isEmpty(){return!l(this,kr)||l(this,kr).length===0}isCancellable(){return l(this,dn).length<=10}add(t,e){[t,e]=F(this,Gf,zy).call(this,t,e);let[r,i,o,s]=l(this,Hs).subarray(2,6),a=t-o,c=e-s;return Math.hypot(l(this,du)*a,l(this,pu)*c)<=2?null:(l(this,dn).push(t,e),isNaN(r)?(l(this,Hs).set([o,s,t,e],2),l(this,Pr).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(l(this,Hs)[0])&&l(this,Pr).splice(6,6),l(this,Hs).set([r,i,o,s,t,e],0),l(this,Pr).push(...jt.createBezierPoints(r,i,o,s,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){let r=this.add(t,e);return r||(l(this,dn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,r,i,o){C(this,du,r),C(this,pu,i),C(this,hu,o),[t,e]=F(this,Gf,zy).call(this,t,e);let s=C(this,Pr,[NaN,NaN,NaN,NaN,t,e]);C(this,dn,[t,e]);let a=l(this,kr).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),l(this,kr).push({line:s,points:l(this,dn)}),l(this,Hs).set(s,0),C(this,ki,0),this.toSVGPath(),null}getLastElement(){return l(this,kr).at(-1)}setLastElement(t){return l(this,kr)?(l(this,kr).push(t),C(this,Pr,t.line),C(this,dn,t.points),C(this,ki,0),{path:{d:this.toSVGPath()}}):l(this,fu).setLastElement(t)}removeLastElement(){if(!l(this,kr))return l(this,fu).removeLastElement();l(this,kr).pop(),C(this,Wr,"");for(let t=0,e=l(this,kr).length;t<e;t++){let{line:r,points:i}=l(this,kr)[t];C(this,Pr,r),C(this,dn,i),C(this,ki,0),this.toSVGPath()}return{path:{d:l(this,Wr)}}}toSVGPath(){let t=jt.svgRound(l(this,Pr)[4]),e=jt.svgRound(l(this,Pr)[5]);if(l(this,dn).length===2)return C(this,Wr,`${l(this,Wr)} M ${t} ${e} Z`),l(this,Wr);if(l(this,dn).length<=6){let i=l(this,Wr).lastIndexOf("M");C(this,Wr,`${l(this,Wr).slice(0,i)} M ${t} ${e}`),C(this,ki,6)}if(l(this,dn).length===4){let i=jt.svgRound(l(this,Pr)[10]),o=jt.svgRound(l(this,Pr)[11]);return C(this,Wr,`${l(this,Wr)} L ${i} ${o}`),C(this,ki,12),l(this,Wr)}let r=[];l(this,ki)===0&&(r.push(`M ${t} ${e}`),C(this,ki,6));for(let i=l(this,ki),o=l(this,Pr).length;i<o;i+=6){let[s,a,c,u,h,f]=l(this,Pr).slice(i,i+6).map(jt.svgRound);r.push(`C${s} ${a} ${c} ${u} ${h} ${f}`)}return C(this,Wr,l(this,Wr)+r.join(" ")),C(this,ki,l(this,Pr).length),l(this,Wr)}getOutlines(t,e,r,i){let o=l(this,kr).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),l(this,fu).build(l(this,kr),t,e,r,l(this,hu),l(this,Wf),i),C(this,Hs,null),C(this,Pr,null),C(this,kr,null),C(this,Wr,null),l(this,fu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}};Hs=new WeakMap,Pr=new WeakMap,kr=new WeakMap,hu=new WeakMap,Wf=new WeakMap,dn=new WeakMap,Wr=new WeakMap,ki=new WeakMap,fu=new WeakMap,du=new WeakMap,pu=new WeakMap,Gf=new WeakSet,zy=function(t,e){return jt._normalizePoint(t,e,l(this,du),l(this,pu),l(this,hu))};Cu=class extends jt{constructor(){super(...arguments);O(this,Vr);O(this,pn);O(this,Tm,0);O(this,Dm);O(this,si);O(this,Ws);O(this,Gs);O(this,Vf);O(this,Xf);O(this,gu)}build(e,r,i,o,s,a,c){C(this,Ws,r),C(this,Gs,i),C(this,Vf,o),C(this,Xf,s),C(this,gu,a),C(this,Dm,c??0),C(this,si,e),F(this,Vr,iP).call(this)}get thickness(){return l(this,gu)}setLastElement(e){return l(this,si).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,si).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){let e=[];for(let{line:r}of l(this,si)){if(e.push(`M${jt.svgRound(r[4])} ${jt.svgRound(r[5])}`),r.length===6){e.push("Z");continue}if(r.length===12&&isNaN(r[6])){e.push(`L${jt.svgRound(r[10])} ${jt.svgRound(r[11])}`);continue}for(let i=6,o=r.length;i<o;i+=6){let[s,a,c,u,h,f]=r.subarray(i,i+6).map(jt.svgRound);e.push(`C${s} ${a} ${c} ${u} ${h} ${f}`)}}return e.join("")}serialize([e,r,i,o],s){let a=[],c=[],[u,h,f,g]=F(this,Vr,nP).call(this),m,y,b,v,w,x,E,D,_;switch(l(this,Xf)){case 0:_=jt._rescale,m=e,y=r+o,b=i,v=-o,w=e+u*i,x=r+(1-h-g)*o,E=e+(u+f)*i,D=r+(1-h)*o;break;case 90:_=jt._rescaleAndSwap,m=e,y=r,b=i,v=o,w=e+h*i,x=r+u*o,E=e+(h+g)*i,D=r+(u+f)*o;break;case 180:_=jt._rescale,m=e+i,y=r,b=-i,v=o,w=e+(1-u-f)*i,x=r+h*o,E=e+(1-u)*i,D=r+(h+g)*o;break;case 270:_=jt._rescaleAndSwap,m=e+i,y=r+o,b=-i,v=-o,w=e+(1-h-g)*i,x=r+(1-u-f)*o,E=e+(1-h)*i,D=r+(1-u)*o;break}for(let{line:q,points:N}of l(this,si))a.push(_(q,m,y,b,v,s?new Array(q.length):null)),c.push(_(N,m,y,b,v,s?new Array(N.length):null));return{lines:a,points:c,rect:[w,x,E,D]}}static deserialize(e,r,i,o,s,{paths:{lines:a,points:c},rotation:u,thickness:h}){let f=[],g,m,y,b,v;switch(u){case 0:v=jt._rescale,g=-e/i,m=r/o+1,y=1/i,b=-1/o;break;case 90:v=jt._rescaleAndSwap,g=-r/o,m=-e/i,y=1/o,b=1/i;break;case 180:v=jt._rescale,g=e/i+1,m=-r/o,y=-1/i,b=1/o;break;case 270:v=jt._rescaleAndSwap,g=r/o+1,m=e/i+1,y=-1/o,b=-1/i;break}if(!a){a=[];for(let x of c){let E=x.length;if(E===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(E===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}let D=new Float32Array(3*(E-2));a.push(D);let[_,q,N,rt]=x.subarray(0,4);D.set([NaN,NaN,NaN,NaN,_,q],0);for(let Y=4;Y<E;Y+=2){let et=x[Y],st=x[Y+1];D.set(jt.createBezierPoints(_,q,N,rt,et,st),(Y-2)*3),[_,q,N,rt]=[N,rt,et,st]}}}for(let x=0,E=a.length;x<E;x++)f.push({line:v(a[x].map(D=>D??NaN),g,m,y,b),points:v(c[x].map(D=>D??NaN),g,m,y,b)});let w=new this.prototype.constructor;return w.build(f,i,o,1,u,h,s),w}get box(){return l(this,pn)}updateProperty(e,r){return e==="stroke-width"?F(this,Vr,sP).call(this,r):null}updateParentDimensions([e,r],i){let[o,s]=F(this,Vr,Ao).call(this);C(this,Ws,e),C(this,Gs,r),C(this,Vf,i);let[a,c]=F(this,Vr,Ao).call(this),u=a-o,h=c-s,f=l(this,pn);return f[0]-=u,f[1]-=h,f[2]+=2*u,f[3]+=2*h,f}updateRotation(e){return C(this,Tm,e),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,pn).map(jt.svgRound).join(" ")}get defaultProperties(){let[e,r]=l(this,pn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${jt.svgRound(e)} ${jt.svgRound(r)}`}}}get rotationTransform(){let[,,e,r]=l(this,pn),i=0,o=0,s=0,a=0,c=0,u=0;switch(l(this,Tm)){case 90:o=r/e,s=-e/r,c=e;break;case 180:i=-1,a=-1,c=e,u=r;break;case 270:o=-r/e,s=e/r,u=r;break;default:return""}return`matrix(${i} ${o} ${s} ${a} ${jt.svgRound(c)} ${jt.svgRound(u)})`}getPathResizingSVGProperties([e,r,i,o]){let[s,a]=F(this,Vr,Ao).call(this),[c,u,h,f]=l(this,pn);if(Math.abs(h-s)<=jt.PRECISION||Math.abs(f-a)<=jt.PRECISION){let v=e+i/2-(c+h/2),w=r+o/2-(u+f/2);return{path:{"transform-origin":`${jt.svgRound(e)} ${jt.svgRound(r)}`,transform:`${this.rotationTransform} translate(${v} ${w})`}}}let g=(i-2*s)/(h-2*s),m=(o-2*a)/(f-2*a),y=h/i,b=f/o;return{path:{"transform-origin":`${jt.svgRound(c)} ${jt.svgRound(u)}`,transform:`${this.rotationTransform} scale(${y} ${b}) translate(${jt.svgRound(s)} ${jt.svgRound(a)}) scale(${g} ${m}) translate(${jt.svgRound(-s)} ${jt.svgRound(-a)})`}}}getPathResizedSVGProperties([e,r,i,o]){let[s,a]=F(this,Vr,Ao).call(this),c=l(this,pn),[u,h,f,g]=c;if(c[0]=e,c[1]=r,c[2]=i,c[3]=o,Math.abs(f-s)<=jt.PRECISION||Math.abs(g-a)<=jt.PRECISION){let w=e+i/2-(u+f/2),x=r+o/2-(h+g/2);for(let{line:E,points:D}of l(this,si))jt._translate(E,w,x,E),jt._translate(D,w,x,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${jt.svgRound(e)} ${jt.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}let m=(i-2*s)/(f-2*s),y=(o-2*a)/(g-2*a),b=-m*(u+s)+e+s,v=-y*(h+a)+r+a;if(m!==1||y!==1||b!==0||v!==0)for(let{line:w,points:x}of l(this,si))jt._rescale(w,b,v,m,y,w),jt._rescale(x,b,v,m,y,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${jt.svgRound(e)} ${jt.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,r],i){let[o,s]=i,a=l(this,pn),c=e-a[0],u=r-a[1];if(l(this,Ws)===o&&l(this,Gs)===s)for(let{line:h,points:f}of l(this,si))jt._translate(h,c,u,h),jt._translate(f,c,u,f);else{let h=l(this,Ws)/o,f=l(this,Gs)/s;C(this,Ws,o),C(this,Gs,s);for(let{line:g,points:m}of l(this,si))jt._rescale(g,c,u,h,f,g),jt._rescale(m,c,u,h,f,m);a[2]*=h,a[3]*=f}return a[0]=e,a[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${jt.svgRound(e)} ${jt.svgRound(r)}`}}}get defaultSVGProperties(){let e=l(this,pn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${jt.svgRound(e[0])} ${jt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}};pn=new WeakMap,Tm=new WeakMap,Dm=new WeakMap,si=new WeakMap,Ws=new WeakMap,Gs=new WeakMap,Vf=new WeakMap,Xf=new WeakMap,gu=new WeakMap,Vr=new WeakSet,Ao=function(e=l(this,gu)){let r=l(this,Dm)+e/2*l(this,Vf);return l(this,Xf)%180===0?[r/l(this,Ws),r/l(this,Gs)]:[r/l(this,Gs),r/l(this,Ws)]},nP=function(){let[e,r,i,o]=l(this,pn),[s,a]=F(this,Vr,Ao).call(this,0);return[e+s,r+a,i-2*s,o-2*a]},iP=function(){let e=C(this,pn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(let{line:o}of l(this,si)){if(o.length<=12){for(let c=4,u=o.length;c<u;c+=6)Lt.pointBoundingBox(o[c],o[c+1],e);continue}let s=o[4],a=o[5];for(let c=6,u=o.length;c<u;c+=6){let[h,f,g,m,y,b]=o.subarray(c,c+6);Lt.bezierBoundingBox(s,a,h,f,g,m,y,b,e),s=y,a=b}}let[r,i]=F(this,Vr,Ao).call(this);e[0]=on(e[0]-r,0,1),e[1]=on(e[1]-i,0,1),e[2]=on(e[2]+r,0,1),e[3]=on(e[3]+i,0,1),e[2]-=e[0],e[3]-=e[1]},sP=function(e){let[r,i]=F(this,Vr,Ao).call(this);C(this,gu,e);let[o,s]=F(this,Vr,Ao).call(this),[a,c]=[o-r,s-i],u=l(this,pn);return u[0]-=a,u[1]-=c,u[2]+=2*a,u[3]+=2*c,u};Rv=class n extends Tv{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:$e._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){let t=new n(this._viewParameters);return t.updateAll(this),t}},Ch=class Ch extends Dv{constructor(e){super({...e,name:"inkEditor"});O(this,Yv);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,r){$e.initialize(e,r),this._defaultDrawingOptions=new Rv(r.viewParameters)}static getDefaultDrawingOptions(e){let r=this._defaultDrawingOptions.clone();return r.updateProperties(e),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return Qt(this,"typesMap",new Map([[he.INK_THICKNESS,"stroke-width"],[he.INK_COLOR,"stroke"],[he.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,r,i,o,s){return new Dx(e,r,i,o,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,r,i,o,s,a){return Cu.deserialize(e,r,i,o,s,a)}static async deserialize(e,r,i){let o=null;if(e instanceof Lp){let{data:{inkLists:a,rect:c,rotation:u,id:h,color:f,opacity:g,borderStyle:{rawWidth:m},popupRef:y,richText:b,contentsObj:v,creationDate:w,modificationDate:x},parent:{page:{pageNumber:E}}}=e;o=e={annotationType:te.INK,color:Array.from(f),thickness:m,opacity:g,paths:{points:a},boxes:null,pageIndex:E-1,rect:c.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:y,richText:b,comment:v?.str||null,creationDate:w,modificationDate:x}}let s=await super.deserialize(e,r,i);return s._initialData=o,e.comment&&s.setCommentData(e),s}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new mv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return he.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();let{_drawId:e,_drawingOptions:r,parent:i}=this;r.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,r.toSVGProperties())}static onScaleChangingWhenDrawing(){let e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:r,opacity:i}){this._drawingOptions=Ch.getDefaultDrawingOptions({stroke:Lt.makeHexColor(...e),"stroke-width":r,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let{lines:r,points:i}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":s,"stroke-width":a}}=this,c=Object.assign(super.serialize(e),{color:$e._colorManager.convert(o),opacity:s,thickness:a,paths:{lines:r,points:i}});return this.addComment(c),e?(c.isCopy=!0,c):this.annotationElementId&&!F(this,Yv,oP).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let{points:r,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:r,popup:this.comment}),null}};Yv=new WeakSet,oP=function(e){let{color:r,thickness:i,opacity:o,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((a,c)=>a!==r[c])||e.thickness!==i||e.opacity!==o||e.pageIndex!==s},Dt(Ch,"_type","ink"),Dt(Ch,"_editorType",te.INK),Dt(Ch,"_defaultDrawingOptions",null);Rx=Ch,Up=class extends Cu{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}},py=8,tp=3,Li=class{static extractContoursFromText(t,{fontFamily:e,fontStyle:r,fontWeight:i},o,s,a,c){let u=new OffscreenCanvas(1,1),h=u.getContext("2d",{alpha:!1}),f=200,g=h.font=`${r} ${i} ${f}px ${e}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:y,actualBoundingBoxAscent:b,actualBoundingBoxDescent:v,fontBoundingBoxAscent:w,fontBoundingBoxDescent:x,width:E}=h.measureText(t),D=1.5,_=Math.ceil(Math.max(Math.abs(m)+Math.abs(y)||0,E)*D),q=Math.ceil(Math.max(Math.abs(b)+Math.abs(v)||f,Math.abs(w)+Math.abs(x)||f)*D);u=new OffscreenCanvas(_,q),h=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=g,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,_,q),h.fillStyle="black",h.fillText(t,_*(D-1)/2,q*(3-D)/2);let N=F(this,we,Nx).call(this,h.getImageData(0,0,_,q).data),rt=F(this,we,hP).call(this,N),Y=F(this,we,Px).call(this,rt),et=F(this,we,Ox).call(this,N,_,q,Y);return this.processDrawnLines({lines:{curves:et,width:_,height:q},pageWidth:o,pageHeight:s,rotation:a,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(t,e,r,i,o){let[s,a,c]=F(this,we,fP).call(this,t),[u,h]=F(this,we,uP).call(this,s,a,c,Math.hypot(a,c)*l(this,mu).sigmaSFactor,l(this,mu).sigmaR,l(this,mu).kernelSize),f=F(this,we,Px).call(this,h),g=F(this,we,Ox).call(this,u,a,c,f);return this.processDrawnLines({lines:{curves:g,width:a,height:c},pageWidth:e,pageHeight:r,rotation:i,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:r,rotation:i,innerMargin:o,mustSmooth:s,areContours:a}){i%180!==0&&([e,r]=[r,e]);let{curves:c,width:u,height:h}=t,f=t.thickness??0,g=[],m=Math.min(e/u,r/h),y=m/e,b=m/r,v=[];for(let{points:x}of c){let E=s?F(this,we,cP).call(this,x):x;if(!E)continue;v.push(E);let D=E.length,_=new Float32Array(D),q=new Float32Array(3*(D===2?2:D-2));if(g.push({line:q,points:_}),D===2){_[0]=E[0]*y,_[1]=E[1]*b,q.set([NaN,NaN,NaN,NaN,_[0],_[1]],0);continue}let[N,rt,Y,et]=E;N*=y,rt*=b,Y*=y,et*=b,_.set([N,rt,Y,et],0),q.set([NaN,NaN,NaN,NaN,N,rt],0);for(let st=4;st<D;st+=2){let lt=_[st]=E[st]*y,at=_[st+1]=E[st+1]*b;q.set(jt.createBezierPoints(N,rt,Y,et,lt,at),(st-2)*3),[N,rt,Y,et]=[Y,et,lt,at]}}if(g.length===0)return null;let w=a?new Up:new Cu;return w.build(g,e,r,1,i,a?0:f,o),{outline:w,newCurves:v,areContours:a,thickness:f,width:u,height:h}}static async compressSignature({outlines:t,areContours:e,thickness:r,width:i,height:o}){let s=1/0,a=-1/0,c=0;for(let E of t){c+=E.length;for(let D=2,_=E.length;D<_;D++){let q=E[D]-E[D-2];s=Math.min(s,q),a=Math.max(a,q)}}let u;s>=-128&&a<=127?u=Int8Array:s>=-32768&&a<=32767?u=Int16Array:u=Int32Array;let h=t.length,f=py+tp*h,g=new Uint32Array(f),m=0;g[m++]=f*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*u.BYTES_PER_ELEMENT,g[m++]=0,g[m++]=i,g[m++]=o,g[m++]=e?0:1,g[m++]=Math.max(0,Math.floor(r??0)),g[m++]=h,g[m++]=u.BYTES_PER_ELEMENT;for(let E of t)g[m++]=E.length-2,g[m++]=E[0],g[m++]=E[1];let y=new CompressionStream("deflate-raw"),b=y.writable.getWriter();await b.ready,b.write(g);let v=u.prototype.constructor;for(let E of t){let D=new v(E.length-2);for(let _=2,q=E.length;_<q;_++)D[_-2]=E[_]-E[_-2];b.write(D)}b.close();let w=await new Response(y.readable).arrayBuffer(),x=new Uint8Array(w);return wO(x)}static async decompressSignature(t){try{let e=q6(t),{readable:r,writable:i}=new DecompressionStream("deflate-raw"),o=i.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let s=null,a=0;for await(let E of r)s||(s=new Uint8Array(new Uint32Array(E.buffer,0,4)[0])),s.set(E,a),a+=E.length;let c=new Uint32Array(s.buffer,0,s.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);let h=c[2],f=c[3],g=c[4]===0,m=c[5],y=c[6],b=c[7],v=[],w=(py+tp*y)*Uint32Array.BYTES_PER_ELEMENT,x;switch(b){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(s.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(s.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(s.buffer,w);break}a=0;for(let E=0;E<y;E++){let D=c[tp*E+py],_=new Float32Array(D+2);v.push(_);for(let q=0;q<tp-1;q++)_[q]=c[tp*E+py+q+1];for(let q=0;q<D;q++)_[q+2]=_[q]+x[a++]}return{areContours:g,thickness:m,outlines:v,width:h,height:f}}catch(e){return ee(`decompressSignature: ${e}`),null}}};mu=new WeakMap,we=new WeakSet,Ix=function(t,e,r,i){return r-=t,i-=e,r===0?i>0?0:4:r===1?i+6:2-i},is=new WeakMap,aP=function(t,e,r,i,o,s,a){let c=F(this,we,Ix).call(this,r,i,o,s);for(let u=0;u<8;u++){let h=(-u+c-a+16)%8,f=l(this,is)[2*h],g=l(this,is)[2*h+1];if(t[(r+f)*e+(i+g)]!==0)return h}return-1},lP=function(t,e,r,i,o,s,a){let c=F(this,we,Ix).call(this,r,i,o,s);for(let u=0;u<8;u++){let h=(u+c+a+16)%8,f=l(this,is)[2*h],g=l(this,is)[2*h+1];if(t[(r+f)*e+(i+g)]!==0)return h}return-1},Ox=function(t,e,r,i){let o=t.length,s=new Int32Array(o);for(let h=0;h<o;h++)s[h]=t[h]<=i?1:0;for(let h=1;h<r-1;h++)s[h*e]=s[h*e+e-1]=0;for(let h=0;h<e;h++)s[h]=s[e*r-1-h]=0;let a=1,c,u=[];for(let h=1;h<r-1;h++){c=1;for(let f=1;f<e-1;f++){let g=h*e+f,m=s[g];if(m===0)continue;let y=h,b=f;if(m===1&&s[g-1]===0)a+=1,b-=1;else if(m>=1&&s[g+1]===0)a+=1,b+=1,m>1&&(c=m);else{m!==1&&(c=Math.abs(m));continue}let v=[f,h],w=b===f+1,x={isHole:w,points:v,id:a,parent:0};u.push(x);let E;for(let st of u)if(st.id===c){E=st;break}E?E.isHole?x.parent=w?E.parent:c:x.parent=w?c:E.parent:x.parent=w?c:0;let D=F(this,we,aP).call(this,s,e,h,f,y,b,0);if(D===-1){s[g]=-a,s[g]!==1&&(c=Math.abs(s[g]));continue}let _=l(this,is)[2*D],q=l(this,is)[2*D+1],N=h+_,rt=f+q;y=N,b=rt;let Y=h,et=f;for(;;){let st=F(this,we,lP).call(this,s,e,Y,et,y,b,1);_=l(this,is)[2*st],q=l(this,is)[2*st+1];let lt=Y+_,at=et+q;v.push(at,lt);let X=Y*e+et;if(s[X+1]===0?s[X]=-a:s[X]===1&&(s[X]=a),lt===h&&at===f&&Y===N&&et===rt){s[g]!==1&&(c=Math.abs(s[g]));break}else y=Y,b=et,Y=lt,et=at}}}return u},Hy=function(t,e,r,i){if(r-e<=4){for(let N=e;N<r-2;N+=2)i.push(t[N],t[N+1]);return}let o=t[e],s=t[e+1],a=t[r-4]-o,c=t[r-3]-s,u=Math.hypot(a,c),h=a/u,f=c/u,g=h*s-f*o,m=c/a,y=1/u,b=Math.atan(m),v=Math.cos(b),w=Math.sin(b),x=y*(Math.abs(v)+Math.abs(w)),E=y*(1-x+x**2),D=Math.max(Math.atan(Math.abs(w+v)*E),Math.atan(Math.abs(w-v)*E)),_=0,q=e;for(let N=e+2;N<r-2;N+=2){let rt=Math.abs(g-h*t[N+1]+f*t[N]);rt>_&&(q=N,_=rt)}_>(u*D)**2?(F(this,we,Hy).call(this,t,e,q+2,i),F(this,we,Hy).call(this,t,q,r,i)):i.push(o,s)},cP=function(t){let e=[],r=t.length;return F(this,we,Hy).call(this,t,0,r,e),e.push(t[r-2],t[r-1]),e.length<=4?null:e},uP=function(t,e,r,i,o,s){let a=new Float32Array(s**2),c=-2*i**2,u=s>>1;for(let b=0;b<s;b++){let v=(b-u)**2;for(let w=0;w<s;w++)a[b*s+w]=Math.exp((v+(w-u)**2)/c)}let h=new Float32Array(256),f=-2*o**2;for(let b=0;b<256;b++)h[b]=Math.exp(b**2/f);let g=t.length,m=new Uint8Array(g),y=new Uint32Array(256);for(let b=0;b<r;b++)for(let v=0;v<e;v++){let w=b*e+v,x=t[w],E=0,D=0;for(let q=0;q<s;q++){let N=b+q-u;if(!(N<0||N>=r))for(let rt=0;rt<s;rt++){let Y=v+rt-u;if(Y<0||Y>=e)continue;let et=t[N*e+Y],st=a[q*s+rt]*h[Math.abs(et-x)];E+=et*st,D+=st}}let _=m[w]=Math.round(E/D);y[_]++}return[m,y]},hP=function(t){let e=new Uint32Array(256);for(let r of t)e[r]++;return e},Nx=function(t){let e=t.length,r=new Uint8ClampedArray(e>>2),i=-1/0,o=1/0;for(let a=0,c=r.length;a<c;a++){let u=r[a]=t[a<<2];i=Math.max(i,u),o=Math.min(o,u)}let s=255/(i-o);for(let a=0,c=r.length;a<c;a++)r[a]=(r[a]-o)*s;return r},Px=function(t){let e,r=-1/0,i=-1/0,o=t.findIndex(c=>c!==0),s=o,a=o;for(e=o;e<256;e++){let c=t[e];c>r&&(e-s>i&&(i=e-s,a=e-1),r=c,s=e)}for(e=a-1;e>=0&&!(t[e]>t[e+1]);e--);return e},fP=function(t){let e=t,{width:r,height:i}=t,{maxDim:o}=l(this,mu),s=r,a=i;if(r>o||i>o){let g=r,m=i,y=Math.log2(Math.max(r,i)/o),b=Math.floor(y);y=y===b?b-1:b;for(let w=0;w<y;w++){s=Math.ceil(g/2),a=Math.ceil(m/2);let x=new OffscreenCanvas(s,a);x.getContext("2d").drawImage(t,0,0,g,m,0,0,s,a),g=s,m=a,t!==e&&t.close(),t=x.transferToImageBitmap()}let v=Math.min(o/s,o/a);s=Math.round(s*v),a=Math.round(a*v)}let u=new OffscreenCanvas(s,a).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,s,a),u.filter="grayscale(1)",u.drawImage(t,0,0,t.width,t.height,0,0,s,a);let h=u.getImageData(0,0,s,a).data;return[F(this,we,Nx).call(this,h),s,a]},O(Li,we),O(Li,mu,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),O(Li,is,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));kx=class n extends Tv{constructor(){super(),super.updateProperties({fill:$e._defaultLineColor,"stroke-width":0})}clone(){let t=new n;return t.updateAll(this),t}},Bx=class n extends Rv{constructor(t){super(t),super.updateProperties({stroke:$e._defaultLineColor,"stroke-width":1})}clone(){let t=new n(this._viewParameters);return t.updateAll(this),t}},$n=class $n extends Dv{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});O(this,ul,!1);O(this,Vs,null);O(this,hl,null);O(this,yu,null);this._willKeepAspectRatio=!0,C(this,hl,e.signatureData||null),C(this,Vs,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,r){$e.initialize(e,r),this._defaultDrawingOptions=new kx,this._defaultDrawnSignatureOptions=new Bx(r.viewParameters)}static getDefaultDrawingOptions(e){let r=this._defaultDrawingOptions.clone();return r.updateProperties(e),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return Qt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!l(this,Vs)}}static computeTelemetryFinalData(e){let r=e.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,r,{_isCopy:i}=this;if(i&&(this._isCopy=!1,e=this.x,r=this.y),super.render(),this._drawId===null)if(l(this,hl)){let{lines:o,mustSmooth:s,areContours:a,description:c,uuid:u,heightInPage:h}=l(this,hl),{rawDims:{pageWidth:f,pageHeight:g},rotation:m}=this.parent.viewport,y=Li.processDrawnLines({lines:o,pageWidth:f,pageHeight:g,rotation:m,innerMargin:$n._INNER_MARGIN,mustSmooth:s,areContours:a});this.addSignature(y,h,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:l(this,Vs)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(e,r)),this.div}setUuid(e){C(this,yu,e),this.addEditToolbar()}getUuid(){return l(this,yu)}get description(){return l(this,Vs)}set description(e){C(this,Vs,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(r=>{r?.updateEditSignatureButton(e)}))}getSignaturePreview(){let{newCurves:e,areContours:r,thickness:i,width:o,height:s}=l(this,hl),a=Math.max(o,s),c=Li.processDrawnLines({lines:{curves:e.map(u=>({points:u})),thickness:i,width:o,height:s},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,r,i,o){let{x:s,y:a}=this,{outline:c}=C(this,hl,e);C(this,ul,c instanceof Up),this.description=i;let u;l(this,ul)?u=$n.getDefaultDrawingOptions():(u=$n._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});let[,h]=this.pageDimensions,f=r/h;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=s,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(o),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!o,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(e){let{rawDims:{pageWidth:r,pageHeight:i},rotation:o}=this.parent.viewport;return Li.process(e,r,i,o,$n._INNER_MARGIN)}getFromText(e,r){let{rawDims:{pageWidth:i,pageHeight:o},rotation:s}=this.parent.viewport;return Li.extractContoursFromText(e,r,i,o,s,$n._INNER_MARGIN)}getDrawnSignature(e){let{rawDims:{pageWidth:r,pageHeight:i},rotation:o}=this.parent.viewport;return Li.processDrawnLines({lines:e,pageWidth:r,pageHeight:i,rotation:o,innerMargin:$n._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:r}){e?this._drawingOptions=$n.getDefaultDrawingOptions():(this._drawingOptions=$n._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(e=!1){if(this.isEmpty())return null;let{lines:r,points:i}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,s=Object.assign(super.serialize(e),{isSignature:!0,areContours:l(this,ul),color:[0,0,0],thickness:l(this,ul)?0:o});return this.addComment(s),e?(s.paths={lines:r,points:i},s.uuid=l(this,yu),s.isCopy=!0):s.lines=r,l(this,Vs)&&(s.accessibilityData={type:"Figure",alt:l(this,Vs)}),s}static deserializeDraw(e,r,i,o,s,a){return a.areContours?Up.deserialize(e,r,i,o,s,a):Cu.deserialize(e,r,i,o,s,a)}static async deserialize(e,r,i){let o=await super.deserialize(e,r,i);return C(o,ul,e.areContours),o.description=e.accessibilityData?.alt||"",C(o,yu,e.uuid),o}};ul=new WeakMap,Vs=new WeakMap,hl=new WeakMap,yu=new WeakMap,Dt($n,"_type","signature"),Dt($n,"_editorType",te.SIGNATURE),Dt($n,"_defaultDrawingOptions",null);Lx=$n,bp=class extends $e{constructor(e){super({...e,name:"stampEditor"});O(this,ge);O(this,Ge,null);O(this,Br,null);O(this,fl,null);O(this,Qo,null);O(this,dl,null);O(this,Yf,"");O(this,ta,null);O(this,vu,!1);O(this,Xs,null);O(this,oi,!1);O(this,Kf,!1);C(this,Qo,e.bitmapUrl),C(this,dl,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,r){$e.initialize(e,r)}static isHandlingMimeForPasting(e){return Zy.includes(e)}static paste(e,r){r.pasteEditor({mode:te.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){let r=e.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(e=null,r=!0){if(this.hasAltTextData())return null;let{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");let{data:o,width:s,height:a}=e||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:o,width:s,height:a,channels:o.length/(s*a)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");let u=c.output;return await this.setGuessedAltText(u),r&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){l(this,Br)&&(C(this,Ge,null),this._uiManager.imageManager.deleteId(l(this,Br)),l(this,ta)?.remove(),C(this,ta,null),l(this,Xs)&&(clearTimeout(l(this,Xs)),C(this,Xs,null))),super.remove()}rebuild(){if(!this.parent){l(this,Br)&&F(this,ge,Wy).call(this);return}super.rebuild(),this.div!==null&&(l(this,Br)&&l(this,ta)===null&&F(this,ge,Wy).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(l(this,fl)||l(this,Ge)||l(this,Qo)||l(this,dl)||l(this,Br)||l(this,vu))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,r;return this._isCopy&&(e=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),l(this,vu)||(l(this,Ge)?F(this,ge,Gy).call(this):F(this,ge,Wy).call(this)),this._isCopy&&this._moveAfterPaste(e,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,r){let{id:i,bitmap:o}=this._uiManager.imageManager.getFromCanvas(e,r);r.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(C(this,Br,i),o&&C(this,Ge,o),C(this,vu,!1),F(this,ge,Gy).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,Xs)!==null&&clearTimeout(l(this,Xs)),C(this,Xs,setTimeout(()=>{C(this,Xs,null),F(this,ge,Fx).call(this)},200))}copyCanvas(e,r,i=!1){e||(e=224);let{width:o,height:s}=l(this,Ge),a=new Ys,c=l(this,Ge),u=o,h=s,f=null;if(r){if(o>r||s>r){let N=Math.min(r/o,r/s);u=Math.floor(o*N),h=Math.floor(s*N)}f=document.createElement("canvas");let m=f.width=Math.ceil(u*a.sx),y=f.height=Math.ceil(h*a.sy);l(this,oi)||(c=F(this,ge,Vy).call(this,m,y));let b=f.getContext("2d");b.filter=this._uiManager.hcmFilter;let v="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":y1.isDarkMode&&(v="#8f8f9d",w="#42414d");let x=15,E=x*a.sx,D=x*a.sy,_=new OffscreenCanvas(E*2,D*2),q=_.getContext("2d");q.fillStyle=v,q.fillRect(0,0,E*2,D*2),q.fillStyle=w,q.fillRect(0,0,E,D),q.fillRect(E,D,E,D),b.fillStyle=b.createPattern(_,"repeat"),b.fillRect(0,0,m,y),b.drawImage(c,0,0,c.width,c.height,0,0,m,y)}let g=null;if(i){let m,y;if(a.symmetric&&c.width<e&&c.height<e)m=c.width,y=c.height;else if(c=l(this,Ge),o>e||s>e){let w=Math.min(e/o,e/s);m=Math.floor(o*w),y=Math.floor(s*w),l(this,oi)||(c=F(this,ge,Vy).call(this,m,y))}let v=new OffscreenCanvas(m,y).getContext("2d",{willReadFrequently:!0});v.drawImage(c,0,0,c.width,c.height,0,0,m,y),g={width:m,height:y,data:v.getImageData(0,0,m,y).data}}return{canvas:f,width:u,height:h,imageData:g}}static async deserialize(e,r,i){let o=null,s=!1;if(e instanceof xv){let{data:{rect:v,rotation:w,id:x,structParent:E,popupRef:D,richText:_,contentsObj:q,creationDate:N,modificationDate:rt},container:Y,parent:{page:{pageNumber:et}},canvas:st}=e,lt,at;st?(delete e.canvas,{id:lt,bitmap:at}=i.imageManager.getFromCanvas(Y.id,st),st.remove()):(s=!0,e._hasNoCanvas=!0);let X=(await r._structTree.getAriaAttributes(`${wh}${x}`))?.get("aria-label")||"";o=e={annotationType:te.STAMP,bitmapId:lt,bitmap:at,pageIndex:et-1,rect:v.slice(0),rotation:w,annotationElementId:x,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:X},isSvg:!1,structParent:E,popupRef:D,richText:_,comment:q?.str||null,creationDate:N,modificationDate:rt}}let a=await super.deserialize(e,r,i),{rect:c,bitmap:u,bitmapUrl:h,bitmapId:f,isSvg:g,accessibilityData:m}=e;s?(i.addMissingCanvas(e.id,a),C(a,vu,!0)):f&&i.imageManager.isValidId(f)?(C(a,Br,f),u&&C(a,Ge,u)):C(a,Qo,h),C(a,oi,g);let[y,b]=a.pageDimensions;return a.width=(c[2]-c[0])/y,a.height=(c[3]-c[1])/b,m&&(a.altTextData=m),a._initialData=o,e.comment&&a.setCommentData(e),C(a,Kf,!!o),a}serialize(e=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let i=Object.assign(super.serialize(e),{bitmapId:l(this,Br),isSvg:l(this,oi)});if(this.addComment(i),e)return i.bitmapUrl=F(this,ge,Xy).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;let{decorative:o,altText:s}=this.serializeAltText(!1);if(!o&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){let c=F(this,ge,dP).call(this,i);return c.isSame?null:(c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(r===null)return i;r.stamps||(r.stamps=new Map);let a=l(this,oi)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!r.stamps.has(l(this,Br)))r.stamps.set(l(this,Br),{area:a,serialized:i}),i.bitmap=F(this,ge,Xy).call(this,!1);else if(l(this,oi)){let c=r.stamps.get(l(this,Br));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=F(this,ge,Xy).call(this,!1))}return i}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}};Ge=new WeakMap,Br=new WeakMap,fl=new WeakMap,Qo=new WeakMap,dl=new WeakMap,Yf=new WeakMap,ta=new WeakMap,vu=new WeakMap,Xs=new WeakMap,oi=new WeakMap,Kf=new WeakMap,ge=new WeakSet,wp=function(e,r=!1){if(!e){this.remove();return}C(this,Ge,e.bitmap),r||(C(this,Br,e.id),C(this,oi,e.isSvg)),e.file&&C(this,Yf,e.file.name),F(this,ge,Gy).call(this)},Ap=function(){if(C(this,fl,null),this._uiManager.enableWaiting(!1),!!l(this,ta)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Ge)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Ge)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Wy=function(){if(l(this,Br)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,Br)).then(i=>F(this,ge,wp).call(this,i,!0)).finally(()=>F(this,ge,Ap).call(this));return}if(l(this,Qo)){let i=l(this,Qo);C(this,Qo,null),this._uiManager.enableWaiting(!0),C(this,fl,this._uiManager.imageManager.getFromUrl(i).then(o=>F(this,ge,wp).call(this,o)).finally(()=>F(this,ge,Ap).call(this)));return}if(l(this,dl)){let i=l(this,dl);C(this,dl,null),this._uiManager.enableWaiting(!0),C(this,fl,this._uiManager.imageManager.getFromFile(i).then(o=>F(this,ge,wp).call(this,o)).finally(()=>F(this,ge,Ap).call(this)));return}let e=document.createElement("input");e.type="file",e.accept=Zy.join(",");let r=this._uiManager._signal;C(this,fl,new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let o=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),F(this,ge,wp).call(this,o)}i()},{signal:r}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:r})}).finally(()=>F(this,ge,Ap).call(this))),e.click()},Gy=function(){let{div:e}=this,{width:r,height:i}=l(this,Ge),[o,s]=this.pageDimensions,a=.75;if(this.width)r=this.width*o,i=this.height*s;else if(r>a*o||i>a*s){let u=Math.min(a*o/r,a*s/i);r*=u,i*=u}this._uiManager.enableWaiting(!1);let c=C(this,ta,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=r/o,this.height=i/s,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),F(this,ge,Fx).call(this),l(this,Kf)||(this.parent.addUndoableEditor(this),C(this,Kf,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,Yf)&&this.div.setAttribute("aria-description",l(this,Yf)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Vy=function(e,r){let{width:i,height:o}=l(this,Ge),s=i,a=o,c=l(this,Ge);for(;s>2*e||a>2*r;){let u=s,h=a;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),a>2*r&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));let f=new OffscreenCanvas(s,a);f.getContext("2d").drawImage(c,0,0,u,h,0,0,s,a),c=f.transferToImageBitmap()}return c},Fx=function(){let[e,r]=this.parentDimensions,{width:i,height:o}=this,s=new Ys,a=Math.ceil(i*e*s.sx),c=Math.ceil(o*r*s.sy),u=l(this,ta);if(!u||u.width===a&&u.height===c)return;u.width=a,u.height=c;let h=l(this,oi)?l(this,Ge):F(this,ge,Vy).call(this,a,c),f=u.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,a,c)},Xy=function(e){if(e){if(l(this,oi)){let o=this._uiManager.imageManager.getSvgUrl(l(this,Br));if(o)return o}let r=document.createElement("canvas");return{width:r.width,height:r.height}=l(this,Ge),r.getContext("2d").drawImage(l(this,Ge),0,0),r.toDataURL()}if(l(this,oi)){let[r,i]=this.pageDimensions,o=Math.round(this.width*r*la.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*la.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(o,s);return a.getContext("2d").drawImage(l(this,Ge),0,0,l(this,Ge).width,l(this,Ge).height,0,0,o,s),a.transferToImageBitmap()}return structuredClone(l(this,Ge))},dP=function(e){let{pageIndex:r,accessibilityData:{altText:i}}=this._initialData,o=e.pageIndex===r,s=(e.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&o&&s,isSameAltText:s}},Dt(bp,"_type","stamp"),Dt(bp,"_editorType",te.STAMP);Xi=class Xi{constructor({uiManager:t,pageIndex:e,div:r,structTreeLayer:i,accessibilityManager:o,annotationLayer:s,drawLayer:a,textLayer:c,viewport:u,l10n:h}){O(this,Fe);O(this,bu);O(this,Jf,!1);O(this,pl,null);O(this,gl,null);O(this,ea,null);O(this,Bn,new Map);O(this,ml,!1);O(this,Zf,!1);O(this,Qf,!1);O(this,ss,null);O(this,ra,null);O(this,Lr,null);O(this,na,null);O(this,yl,null);O(this,td,-1);O(this,Gt);let f=[...l(Xi,vl).values()];if(!Xi._initialized){Xi._initialized=!0;for(let g of f)g.initialize(h,t)}t.registerEditorTypes(f),C(this,Gt,t),this.pageIndex=e,this.div=r,C(this,bu,o),C(this,pl,s),this.viewport=u,C(this,Lr,c),this.drawLayer=a,this._structTree=i,l(this,Gt).addLayer(this)}get isEmpty(){return l(this,Bn).size===0}get isInvisible(){return this.isEmpty&&l(this,Gt).getMode()===te.NONE}updateToolbar(t){l(this,Gt).updateToolbar(t)}updateMode(t=l(this,Gt).getMode()){switch(F(this,Fe,Yy).call(this),t){case te.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case te.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case te.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===te.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(let r of l(Xi,vl).values())e.toggle(`${r._type}Editing`,t===r._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===l(this,Lr)?.div}setEditingState(t){l(this,Gt).setEditingState(t)}addCommands(t){l(this,Gt).addCommands(t)}cleanUndoStack(t){l(this,Gt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){l(this,pl)?.togglePointerEvents(t)}async enable(){C(this,Qf,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),l(this,yl)?.abort(),C(this,yl,null);let t=new Set;for(let r of l(this,Fe,Mx))r.enableEditing(),r.show(!0),r.annotationElementId&&(l(this,Gt).removeChangedExistingAnnotation(r),t.add(r.annotationElementId));let e=l(this,pl);if(e)for(let r of e.getEditableAnnotations()){if(r.hide(),l(this,Gt).isDeletedAnnotationElement(r.data.id)||t.has(r.data.id))continue;let i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}C(this,Qf,!1),l(this,Gt)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(C(this,Zf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),l(this,Lr)&&!l(this,yl)){C(this,yl,new AbortController);let i=l(this,Gt).combinedSignal(l(this,yl));l(this,Lr).div.addEventListener("pointerdown",o=>{let{clientX:a,clientY:c,timeStamp:u}=o,h=l(this,td);if(u-h>500){C(this,td,u);return}C(this,td,-1);let{classList:f}=this.div;f.toggle("getElements",!0);let g=document.elementsFromPoint(a,c);if(f.toggle("getElements",!1),!this.div.contains(g[0]))return;let m,y=new RegExp(`^${_p}[0-9]+$`);for(let v of g)if(y.test(v.id)){m=v.id;break}if(!m)return;let b=l(this,Bn).get(m);b?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),b.dblclick(o))},{signal:i,capture:!0})}let t=l(this,pl),e=[];if(t){let i=new Map,o=new Map;for(let a of l(this,Fe,Mx)){if(a.disableEditing(),!a.annotationElementId){e.push(a);continue}if(a.serialize()!==null){i.set(a.annotationElementId,a);continue}else o.set(a.annotationElementId,a);this.getEditableAnnotation(a.annotationElementId)?.show(),a.remove()}let s=t.getEditableAnnotations();for(let a of s){let{id:c}=a.data;if(l(this,Gt).isDeletedAnnotationElement(c)){a.updateEdited({deleted:!0});continue}let u=o.get(c);if(u){u.resetAnnotationElement(a),u.show(!1),a.show();continue}u=i.get(c),u&&(l(this,Gt).addChangedExistingAnnotation(u),u.renderAnnotationElement(a)&&u.show(!1)),a.show()}}F(this,Fe,Yy).call(this),this.isEmpty&&(this.div.hidden=!0);let{classList:r}=this.div;for(let i of l(Xi,vl).values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(e),C(this,Zf,!1)}getEditableAnnotation(t){return l(this,pl)?.getEditableAnnotation(t)||null}setActiveEditor(t){l(this,Gt).getActive()!==t&&l(this,Gt).setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,l(this,Lr)?.div&&!l(this,na)){C(this,na,new AbortController);let t=l(this,Gt).combinedSignal(l(this,na));l(this,Lr).div.addEventListener("pointerdown",F(this,Fe,pP).bind(this),{signal:t}),l(this,Lr).div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,l(this,Lr)?.div&&l(this,na)&&(l(this,na).abort(),C(this,na,null),l(this,Lr).div.classList.remove("highlighting"))}enableClick(){if(l(this,gl))return;C(this,gl,new AbortController);let t=l(this,Gt).combinedSignal(l(this,gl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});let e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){l(this,gl)?.abort(),C(this,gl,null)}attach(t){l(this,Bn).set(t.id,t);let{annotationElementId:e}=t;e&&l(this,Gt).isDeletedAnnotationElement(e)&&l(this,Gt).removeDeletedAnnotationElement(t)}detach(t){l(this,Bn).delete(t.id),l(this,bu)?.removePointerInTextLayer(t.contentDiv),!l(this,Zf)&&t.annotationElementId&&l(this,Gt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),l(this,Gt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(l(this,Gt).addDeletedAnnotationElement(t),$e.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),l(this,Gt).addEditor(t),this.attach(t),!t.isAttachedToDOM){let e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!l(this,Qf)),l(this,Gt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;let{activeElement:e}=document;t.div.contains(e)&&!l(this,ea)&&(t._focusEventsAllowed=!1,C(this,ea,setTimeout(()=>{C(this,ea,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:l(this,Gt)._signal}),e.focus())},0))),t._structTreeParentId=l(this,bu)?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){let e=()=>t._uiManager.rebuild(t),r=()=>{t.remove()};this.addCommands({cmd:e,undo:r,mustExec:!1})}getEditorByUID(t){for(let e of l(this,Bn).values())if(e.uid===t)return e;return null}getNextId(){return l(this,Gt).getId()}combinedSignal(t){return l(this,Gt).combinedSignal(t)}canCreateNewEmptyEditor(){return l(this,Fe,Cs)?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await l(this,Gt).updateMode(t.mode);let{offsetX:r,offsetY:i}=F(this,Fe,jx).call(this),o=this.getNextId(),s=F(this,Fe,Ux).call(this,{parent:this,id:o,x:r,y:i,uiManager:l(this,Gt),isCentered:!0,...e});s&&this.add(s)}async deserialize(t){return await l(Xi,vl).get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,l(this,Gt))||null}createAndAddNewEditor(t,e,r={}){let i=this.getNextId(),o=F(this,Fe,Ux).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:l(this,Gt),isCentered:e,...r});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(F(this,Fe,jx).call(this),!0,t)}setSelected(t){l(this,Gt).setSelected(t)}toggleSelected(t){l(this,Gt).toggleSelected(t)}unselect(t){l(this,Gt).unselect(t)}pointerup(t){let{isMac:e}=sr.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!l(this,ml)||(C(this,ml,!1),l(this,Fe,Cs)?.isDrawer&&l(this,Fe,Cs).supportMultipleDrawings))return;if(!l(this,Jf)){C(this,Jf,!0);return}let r=l(this,Gt).getMode();if(r===te.STAMP||r===te.SIGNATURE){l(this,Gt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(l(this,Gt).getMode()===te.HIGHLIGHT&&this.enableTextSelection(),l(this,ml)){C(this,ml,!1);return}let{isMac:e}=sr.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(C(this,ml,!0),l(this,Fe,Cs)?.isDrawer){this.startDrawingSession(t);return}let r=l(this,Gt).getActive();C(this,Jf,!r||r.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),l(this,ss)){l(this,Fe,Cs).startDrawing(this,l(this,Gt),!1,t);return}l(this,Gt).setCurrentDrawingSession(this),C(this,ss,new AbortController);let e=l(this,Gt).combinedSignal(l(this,ss));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(C(this,ra,null),this.commitOrRemove())},{signal:e}),l(this,Fe,Cs).startDrawing(this,l(this,Gt),!1,t)}pause(t){if(t){let{activeElement:e}=document;this.div.contains(e)&&C(this,ra,e);return}l(this,ra)&&setTimeout(()=>{l(this,ra)?.focus(),C(this,ra,null)},0)}endDrawingSession(t=!1){return l(this,ss)?(l(this,Gt).setCurrentDrawingSession(null),l(this,ss).abort(),C(this,ss,null),C(this,ra,null),l(this,Fe,Cs).endDrawing(t)):null}findNewParent(t,e,r){let i=l(this,Gt).findParent(e,r);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return l(this,ss)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,ss)&&l(this,Fe,Cs).onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),l(this,Gt).getActive()?.parent===this&&(l(this,Gt).commitOrRemove(),l(this,Gt).setActiveEditor(null)),l(this,ea)&&(clearTimeout(l(this,ea)),C(this,ea,null));for(let t of l(this,Bn).values())l(this,bu)?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,l(this,Bn).clear(),l(this,Gt).removeLayer(this)}render({viewport:t}){this.viewport=t,bl(this.div,t);for(let e of l(this,Gt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){l(this,Gt).commitOrRemove(),F(this,Fe,Yy).call(this);let e=this.viewport.rotation,r=t.rotation;if(this.viewport=t,bl(this.div,{rotation:r}),e!==r)for(let i of l(this,Bn).values())i.rotate(r)}get pageDimensions(){let{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return l(this,Gt).viewParameters.realScale}};bu=new WeakMap,Jf=new WeakMap,pl=new WeakMap,gl=new WeakMap,ea=new WeakMap,Bn=new WeakMap,ml=new WeakMap,Zf=new WeakMap,Qf=new WeakMap,ss=new WeakMap,ra=new WeakMap,Lr=new WeakMap,na=new WeakMap,yl=new WeakMap,td=new WeakMap,Gt=new WeakMap,vl=new WeakMap,Fe=new WeakSet,Mx=function(){return l(this,Bn).size!==0?l(this,Bn).values():l(this,Gt).getEditors(this.pageIndex)},pP=function(t){l(this,Gt).unselectAll();let{target:e}=t;if(e===l(this,Lr).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&l(this,Lr).div.contains(e)){let{isMac:r}=sr.platform;if(t.button!==0||t.ctrlKey&&r)return;l(this,Gt).showAllEditors("highlight",!0,!0),l(this,Lr).div.classList.add("free"),this.toggleDrawing(),Cv.startHighlighting(this,l(this,Gt).direction==="ltr",{target:l(this,Lr).div,x:t.x,y:t.y}),l(this,Lr).div.addEventListener("pointerup",()=>{l(this,Lr).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,Gt)._signal}),t.preventDefault()}},Cs=function(){return l(Xi,vl).get(l(this,Gt).getMode())},Ux=function(t){let e=l(this,Fe,Cs);return e?new e.prototype.constructor(t):null},jx=function(){let{x:t,y:e,width:r,height:i}=this.boundingClientRect,o=Math.max(0,t),s=Math.max(0,e),a=Math.min(window.innerWidth,t+r),c=Math.min(window.innerHeight,e+i),u=(o+a)/2-t,h=(s+c)/2-e,[f,g]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:f,offsetY:g}},Yy=function(){for(let t of l(this,Bn).values())t.isEmpty()&&t.remove()},Dt(Xi,"_initialized",!1),O(Xi,vl,new Map([vx,Rx,bp,Cv,Lx].map(t=>[t._editorType,t])));Iv=Xi,Er=class Er{constructor({pageIndex:t}){O(this,Ks);O(this,os,null);O(this,gn,new Map);O(this,wu,new Map);this.pageIndex=t}setParent(t){if(!l(this,os)){C(this,os,t);return}if(l(this,os)!==t){if(l(this,gn).size>0)for(let e of l(this,gn).values())e.remove(),t.append(e);C(this,os,t)}}static get _svgFactory(){return Qt(this,"_svgFactory",new Su)}draw(t,e=!1,r=!1){let i=vr(Er,Rm)._++,o=F(this,Ks,$x).call(this),s=Er._svgFactory.createElement("defs");o.append(s);let a=Er._svgFactory.createElement("path");s.append(a);let c=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",c),a.setAttribute("vector-effect","non-scaling-stroke"),e&&l(this,wu).set(i,a);let u=r?F(this,Ks,mP).call(this,s,c):null,h=Er._svgFactory.createElement("use");return o.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(o,t),l(this,gn).set(i,o),{id:i,clipPathId:`url(#${u})`}}drawOutline(t,e){let r=vr(Er,Rm)._++,i=F(this,Ks,$x).call(this),o=Er._svgFactory.createElement("defs");i.append(o);let s=Er._svgFactory.createElement("path");o.append(s);let a=`path_p${this.pageIndex}_${r}`;s.setAttribute("id",a),s.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){let f=Er._svgFactory.createElement("mask");o.append(f),c=`mask_p${this.pageIndex}_${r}`,f.setAttribute("id",c),f.setAttribute("maskUnits","objectBoundingBox");let g=Er._svgFactory.createElement("rect");f.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");let m=Er._svgFactory.createElement("use");f.append(m),m.setAttribute("href",`#${a}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}let u=Er._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${a}`),c&&u.setAttribute("mask",`url(#${c})`);let h=u.cloneNode();return i.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(i,t),l(this,gn).set(r,i),r}finalizeDraw(t,e){l(this,wu).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;let{root:r,bbox:i,rootClass:o,path:s}=e,a=typeof t=="number"?l(this,gn).get(t):t;if(a){if(r&&F(this,Ks,qx).call(this,a,r),i&&F(c=Er,Kv,gP).call(c,a,i),o){let{classList:u}=a;for(let[h,f]of Object.entries(o))u.toggle(h,f)}if(s){let h=a.firstElementChild.firstElementChild;F(this,Ks,qx).call(this,h,s)}}}updateParent(t,e){if(e===this)return;let r=l(this,gn).get(t);r&&(l(e,os).append(r),l(this,gn).delete(t),l(e,gn).set(t,r))}remove(t){l(this,wu).delete(t),l(this,os)!==null&&(l(this,gn).get(t).remove(),l(this,gn).delete(t))}destroy(){C(this,os,null);for(let t of l(this,gn).values())t.remove();l(this,gn).clear(),l(this,wu).clear()}};os=new WeakMap,gn=new WeakMap,wu=new WeakMap,Rm=new WeakMap,Kv=new WeakSet,gP=function(t,[e,r,i,o]){let{style:s}=t;s.top=`${100*r}%`,s.left=`${100*e}%`,s.width=`${100*i}%`,s.height=`${100*o}%`},Ks=new WeakSet,$x=function(){let t=Er._svgFactory.create(1,1,!0);return l(this,os).append(t),t.setAttribute("aria-hidden",!0),t},mP=function(t,e){let r=Er._svgFactory.createElement("clipPath");t.append(r);let i=`clip_${e}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");let o=Er._svgFactory.createElement("use");return r.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),i},qx=function(t,e){for(let[r,i]of Object.entries(e))i===null?t.removeAttribute(r):t.setAttribute(r,i)},O(Er,Kv),O(Er,Rm,0);Ov=Er;globalThis._pdfjsTestingUtils={HighlightOutliner:Fp};globalThis.pdfjsLib={AbortException:ls,AnnotationEditorLayer:Iv,AnnotationEditorParamsType:he,AnnotationEditorType:te,AnnotationEditorUIManager:wl,AnnotationLayer:Ev,AnnotationMode:ia,AnnotationType:cr,applyOpacity:SO,build:SN,ColorPicker:Pp,createValidAbsoluteUrl:zx,CSSConstants:Qy,DOMSVGFactory:Su,DrawLayer:Ov,FeatureTest:sr,fetchData:od,findContrastColor:_O,getDocument:wN,getFilenameFromUrl:AO,getPdfFilenameFromUrl:xO,getRGB:ad,getUuid:Wx,getXfaPageViewport:EO,GlobalWorkerOptions:Bi,ImageKind:xp,InvalidPDFException:rd,isDataScheme:Nm,isPdfFile:Qv,isValidExplicitDest:sN,MathClamp:on,noContextMenu:hi,normalizeUnicode:bO,OPS:ed,OutputScale:Ys,PasswordResponses:yO,PDFDataRangeTransport:Np,PDFDateString:Au,PDFWorker:sd,PermissionFlag:mO,PixelsPerInch:la,RenderingCancelledException:nd,renderRichText:Gx,ResponseException:xu,setLayerDimensions:bl,shadow:Qt,SignatureExtractor:Li,stopEvent:Je,SupportedImageMimeTypes:Zy,TextLayer:id,TouchManager:Rp,updateUrlHash:Hx,Util:Lt,VerbosityLevel:Im,version:EN,XfaLayer:Tp}});var S5={};Mm(S5,{OfficeParser:()=>Du,default:()=>x5,parseOffice:()=>A5});wt();xt();At();wt();xt();At();var CP=dd(HD());b2();wt();xt();At();wt();xt();At();wt();xt();At();var MR=dd(Z0()),me=n=>new MR.DOMParser().parseFromString(n,"text/xml"),pt=(n,t)=>Array.from(n.getElementsByTagName(t)),Ur=(n,t)=>{let e=[];if(!n.childNodes)return e;for(let r=0;r<n.childNodes.length;r++){let i=n.childNodes[r];i.nodeType===1&&i.tagName===t&&e.push(i)}return e},Ca=n=>{let t=me(n),e={},r=pt(t,"cp:coreProperties")[0];if(r){let o=pt(r,"dc:title")[0];o&&o.textContent&&(e.title=o.textContent);let s=pt(r,"dc:creator")[0];s&&s.textContent&&(e.author=s.textContent);let a=pt(r,"cp:lastModifiedBy")[0];a&&a.textContent&&(e.lastModifiedBy=a.textContent);let c=pt(r,"dcterms:created")[0];c&&c.textContent&&(e.created=new Date(c.textContent));let u=pt(r,"dcterms:modified")[0];u&&u.textContent&&(e.modified=new Date(u.textContent));let h=pt(r,"dc:description")[0];h&&h.textContent&&(e.description=h.textContent);let f=pt(r,"dc:subject")[0];return f&&f.textContent&&(e.subject=f.textContent),e}let i=pt(t,"office:meta")[0];if(i){let o=pt(i,"dc:title")[0];o&&o.textContent&&(e.title=o.textContent);let s=pt(i,"dc:creator")[0];s&&s.textContent&&(e.author=s.textContent);let a=pt(i,"dc:description")[0];a&&a.textContent&&(e.description=a.textContent);let c=pt(i,"dc:subject")[0];c&&c.textContent&&(e.subject=c.textContent);let u=pt(i,"meta:creation-date")[0];u&&u.textContent&&(e.created=new Date(u.textContent));let h=pt(i,"dc:date")[0];h&&h.textContent&&(e.modified=new Date(h.textContent));let f=pt(i,"meta:user-defined");if(f.length>0){let g={};for(let m of f){let y=m.getAttribute("meta:name");if(!y||!m.textContent)continue;let b=m.getAttribute("meta:value-type")||"string",v=m.textContent;if(b==="boolean")g[y]=v.toLowerCase()==="true";else if(b==="float"){let w=Number(v);isNaN(w)||(g[y]=w)}else if(b==="date"||b==="time"){let w=new Date(v);isNaN(w.getTime())?g[y]=v:g[y]=w}else g[y]=v}Object.keys(g).length>0&&(e.customProperties=g)}}return e},lh=n=>{let t=me(n),e={},r=pt(t,"property");for(let i of r){let o=i.getAttribute("name");if(o)for(let s=0;s<i.childNodes.length;s++){let a=i.childNodes[s];if(a.nodeType!==1)continue;let c=a,u=c.tagName||"",h=c.textContent||"";if(/vt:(?:lpw?str|bstr)/.test(u))e[o]=h;else if(/vt:bool/.test(u))e[o]=h.toLowerCase()==="true";else if(/vt:(u?i(?:[1248]|nt)|r[48]|decimal)/.test(u)){let f=Number(h);isNaN(f)||(e[o]=f)}else if(/vt:(?:filetime|date)/.test(u)){let f=new Date(h);isNaN(f.getTime())?e[o]=h:e[o]=f}else h&&(e[o]=h);break}}return e};var Vd=(n,t)=>{let e=n.localName===t||n.tagName===t?n:n.getElementsByTagName(t)[0];if(!e)return;let r=e.getElementsByTagName("c:rich"),i=e.getElementsByTagName("a:p"),o=r.length>0?Array.from(r):Array.from(i);if(o.length>0){let a="";for(let c of o){let u=c.getElementsByTagName("a:t");for(let h=0;h<u.length;h++)a+=(u[h].textContent||"")+" "}if(a.trim())return a.trim()}let s=e.getElementsByTagName("c:v")[0];if(s&&s.textContent)return s.textContent.trim()||void 0},F8=n=>{let t=n.toString("utf8"),r=me(t).documentElement,i=Vd(r,"c:title"),o,s,a=r.getElementsByTagName("c:catAx");a.length>0&&(o=Vd(a[0],"c:title"));let c=r.getElementsByTagName("c:valAx");c.length>0&&(s=Vd(c[0],"c:title"));let u=r.getElementsByTagName("c:ser"),h=[],f=[];for(let m=0;m<u.length;m++){let y=u[m],b=Vd(y,"c:tx"),v=[],w=y.getElementsByTagName("c:val")[0]||y.getElementsByTagName("c:yVal")[0];if(w){let _=w.getElementsByTagName("c:v");for(let q=0;q<_.length;q++){let N=_[q].textContent?.trim();N&&v.push(N)}}let x=[],E=y.getElementsByTagName("c:dLbl");for(let _=0;_<E.length;_++){let q=Vd(E[_],"c:tx");q&&x.push(q)}let D=y.getElementsByTagName("c:cat")[0]||y.getElementsByTagName("c:xVal")[0];if(D){let _=D.getElementsByTagName("c:v"),q=[];for(let N=0;N<_.length;N++){let rt=_[N].textContent?.trim();rt&&q.push(rt)}q.length>0&&f.length===0&&f.push(...q)}h.push({name:b,values:v,pointLabels:x})}let g=[];for(let m of h)m.name&&g.push(m.name),g.push(...f),g.push(...m.values);return{title:i,xAxisTitle:o,yAxisTitle:s,dataSets:h,labels:f,rawTexts:g}},M8=n=>{let t=n.toString("utf8"),e=me(t),r=pt(e,"chart:chart")[0]||e.documentElement,i=pt(r,"chart:title")[0],o=i&&pt(i,"text:p")[0]?.textContent||void 0,s=pt(r,"table:table")[0],a=[],c=[],u=[];if(s){let m=[],y=Ur(s,"table:table-header-rows")[0];if(y&&m.push(...Ur(y,"table:table-row")),m.push(...Ur(s,"table:table-row")),m.length>0){let b=Ur(m[0],"table:table-cell");for(let v=1;v<b.length;v++){let w=parseInt(b[v].getAttribute("table:number-columns-repeated")||"1"),x=Ur(b[v],"text:p")[0]?.textContent||void 0;for(let E=0;E<w;E++)a.push({name:x,values:[],pointLabels:[]})}for(let v=1;v<m.length;v++){let w=Ur(m[v],"table:table-cell");if(w.length>0){let x=Ur(w[0],"text:p")[0]?.textContent||void 0;x&&c.push(x);let E=0;for(let D=1;D<w.length;D++){let _=parseInt(w[D].getAttribute("table:number-columns-repeated")||"1"),q=w[D].getAttribute("office:value")||Ur(w[D],"text:p")[0]?.textContent||"";for(let N=0;N<_;N++)a[E]&&a[E].values.push(q),E++}}}}}else{let m=pt(r,"chart:series");for(let b of m){let v=b.getAttribute("chart:label-cell-address"),w=b.getAttribute("chart:values-cell-range-address"),x,E=pt(b,"text:p");E.length>0&&(x=E[0].textContent||void 0),!x&&v&&(x=`Series ${v.split(".").pop()?.replace(/\$/g,"")||v}`);let D={name:x,values:[],pointLabels:[]};w&&D.values.push(`[${w}]`),a.push(D)}let y=pt(r,"chart:categories")[0];if(y){let b=y.getAttribute("table:cell-range-address");b&&c.push(`[${b}]`)}}let h=pt(e,"chart:axis"),f,g;for(let m of h){let y=m.getAttribute("chart:dimension"),b=pt(m,"chart:title")[0],v=b&&pt(b,"text:p")[0]?.textContent||void 0;y==="x"?f=v:y==="y"&&(g=v)}o&&u.push(o);for(let m of a)m.name&&u.push(m.name),u.push(...c),u.push(...m.values);return{title:o,xAxisTitle:f,yAxisTitle:g,dataSets:a,labels:c,rawTexts:u}},Kl=n=>n.toString("utf8",0,500).includes("urn:oasis:names:tc:opendocument:xmlns:chart:1.0")?M8(n):F8(n);wt();xt();At();var ch="[OfficeParser]: ";var U8={EXTENSION_UNSUPPORTED:n=>`Sorry, OfficeParser currently supports docx, pptx, xlsx, odt, odp, ods, pdf, rtf files only. Create a ticket in Issues on github to add support for ${n} files. Stay tuned for further updates.`,FILE_CORRUPTED:n=>`Your file ${n} seems to be corrupted. If you are sure it is fine, please create a ticket in Issues on github with the file to reproduce error.`,FILE_DOES_NOT_EXIST:n=>`File ${n} could not be found! Check if the file exists or verify if the relative path to the file is correct from your terminal's location.`,LOCATION_NOT_FOUND:n=>`Entered location ${n} is not reachable! Please make sure that the entered directory location exists. Check relative paths and reenter.`,IMPROPER_ARGUMENTS:"Improper arguments",IMPROPER_BUFFERS:"Error occured while reading the file buffers",INVALID_INPUT:"Invalid input type: Expected a Buffer or a valid file path",PDF_WORKER_MISSING:'Missing PDF worker configuration. PDF parsing in browser environments requires a worker source. Please provide "pdfWorkerSrc" in your configuration.'},UR=(n,t)=>{let e=U8[n];return typeof e=="function"?e(t):e},yo=(n,t,e)=>{let r=UR(n,e);return t.outputErrorToConsole&&console.error(ch+r),new Error(ch+r)},jR=(n,t,e)=>{let r=n.message||n;return e&&(r.includes("end of central directory record")||r.includes("invalid XML")||r.includes("Failed to open zip file")||r.includes("invalid distance too far back"))&&(r=UR("FILE_CORRUPTED",e)),t.outputErrorToConsole&&console.error(ch+r),new Error(ch+r)},Tn=(n,t,e)=>{t.outputErrorToConsole&&(e?console.warn(ch+n,e):console.warn(ch+n))};wt();xt();At();var j8=n=>{switch(n.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"bmp":return"image/bmp";case"tiff":return"image/tiff";case"webp":return"image/webp";default:return"application/octet-stream"}},$8=n=>{if(!(n.length<4)){if(n[0]===137&&n[1]===80&&n[2]===78&&n[3]===71)return"image/png";if(n[0]===255&&n[1]===216&&n[2]===255)return"image/jpeg";if(n[0]===71&&n[1]===73&&n[2]===70&&n[3]===56)return"image/gif";if(n[0]===66&&n[1]===77)return"image/bmp";if(n[0]===73&&n[1]===73&&n[2]===42&&n[3]===0||n[0]===77&&n[1]===77&&n[2]===0&&n[3]===42)return"image/tiff";if(n.length>=12&&n[0]===82&&n[1]===73&&n[2]===70&&n[3]===70&&n[8]===87&&n[9]===69&&n[10]===66&&n[11]===80)return"image/webp"}},Wi=(n,t)=>{let e=n.split(".").pop()||"",r=$8(t);return r||(r=j8(e)),{type:"image",mimeType:r,data:t.toString("base64"),name:n,extension:e}};wt();xt();At();var II=dd(RI()),bi=async(n,t="eng")=>{let e=await(0,II.createWorker)(t,1,{logger:()=>{}}),r=n;typeof window<"u"&&typeof Blob<"u"&&Buffer.isBuffer(n)&&(r=new Blob([n],{type:"image/bmp"}));let i=await e.recognize(r);return await e.terminate(),i.data.text};wt();xt();At();wt();xt();At();var OI={},v6=(function(n,t,e,r,i){var o=new Worker(OI[t]||(OI[t]=URL.createObjectURL(new Blob([n+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return o.onmessage=function(s){var a=s.data,c=a.$e$;if(c){var u=new Error(c[0]);u.code=c[1],u.stack=c[2],i(u,null)}else i(null,a)},o.postMessage(e,r),o}),un=Uint8Array,Zl=Uint16Array,kI=Int32Array,n1=new un([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i1=new un([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),BI=new un([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),LI=function(n,t){for(var e=new Zl(31),r=0;r<31;++r)e[r]=t+=1<<n[r-1];for(var i=new kI(e[30]),r=1;r<30;++r)for(var o=e[r];o<e[r+1];++o)i[o]=o-e[r]<<5|r;return{b:e,r:i}},FI=LI(n1,2),s1=FI.b,b6=FI.r;s1[28]=258,b6[258]=28;var MI=LI(i1,0),UI=MI.b,Fq=MI.r,sy=new Zl(32768);for(ye=0;ye<32768;++ye)vo=(ye&43690)>>1|(ye&21845)<<1,vo=(vo&52428)>>2|(vo&13107)<<2,vo=(vo&61680)>>4|(vo&3855)<<4,sy[ye]=((vo&65280)>>8|(vo&255)<<8)>>1;var vo,ye,uh=(function(n,t,e){for(var r=n.length,i=0,o=new Zl(t);i<r;++i)n[i]&&++o[n[i]-1];var s=new Zl(t);for(i=1;i<t;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(e){a=new Zl(1<<t);var c=15-t;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],h=t-n[i],f=s[n[i]-1]++<<h,g=f|(1<<h)-1;f<=g;++f)a[sy[f]>>c]=u}else for(a=new Zl(r),i=0;i<r;++i)n[i]&&(a[i]=sy[s[n[i]-1]++]>>15-n[i]);return a}),Yd=new un(288);for(ye=0;ye<144;++ye)Yd[ye]=8;var ye;for(ye=144;ye<256;++ye)Yd[ye]=9;var ye;for(ye=256;ye<280;++ye)Yd[ye]=7;var ye;for(ye=280;ye<288;++ye)Yd[ye]=8;var ye,jI=new un(32);for(ye=0;ye<32;++ye)jI[ye]=5;var ye;var $I=uh(Yd,9,1);var qI=uh(jI,5,1),ny=function(n){for(var t=n[0],e=1;e<n.length;++e)n[e]>t&&(t=n[e]);return t},wi=function(n,t,e){var r=t/8|0;return(n[r]|n[r+1]<<8)>>(t&7)&e},iy=function(n,t){var e=t/8|0;return(n[e]|n[e+1]<<8|n[e+2]<<16)>>(t&7)},zI=function(n){return(n+7)/8|0},oy=function(n,t,e){return(t==null||t<0)&&(t=0),(e==null||e>n.length)&&(e=n.length),new un(n.subarray(t,e))};var HI=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],cn=function(n,t,e){var r=new Error(t||HI[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,cn),!e)throw r;return r},WI=function(n,t,e,r){var i=n.length,o=r?r.length:0;if(!i||t.f&&!t.l)return e||new un(0);var s=!e,a=s||t.i!=2,c=t.i;s&&(e=new un(i*3));var u=function(mt){var j=e.length;if(mt>j){var z=new un(Math.max(j*2,mt));z.set(e),e=z}},h=t.f||0,f=t.p||0,g=t.b||0,m=t.l,y=t.d,b=t.m,v=t.n,w=i*8;do{if(!m){h=wi(n,f,1);var x=wi(n,f+1,3);if(f+=3,x)if(x==1)m=$I,y=qI,b=9,v=5;else if(x==2){var q=wi(n,f,31)+257,N=wi(n,f+10,15)+4,rt=q+wi(n,f+5,31)+1;f+=14;for(var Y=new un(rt),et=new un(19),st=0;st<N;++st)et[BI[st]]=wi(n,f+st*3,7);f+=N*3;for(var lt=ny(et),at=(1<<lt)-1,X=uh(et,lt,1),st=0;st<rt;){var ct=X[wi(n,f,at)];f+=ct&15;var E=ct>>4;if(E<16)Y[st++]=E;else{var J=0,R=0;for(E==16?(R=3+wi(n,f,3),f+=2,J=Y[st-1]):E==17?(R=3+wi(n,f,7),f+=3):E==18&&(R=11+wi(n,f,127),f+=7);R--;)Y[st++]=J}}var T=Y.subarray(0,q),L=Y.subarray(q);b=ny(T),v=ny(L),m=uh(T,b,1),y=uh(L,v,1)}else cn(1);else{var E=zI(f)+4,D=n[E-4]|n[E-3]<<8,_=E+D;if(_>i){c&&cn(0);break}a&&u(g+D),e.set(n.subarray(E,_),g),t.b=g+=D,t.p=f=_*8,t.f=h;continue}if(f>w){c&&cn(0);break}}a&&u(g+131072);for(var k=(1<<b)-1,B=(1<<v)-1,$=f;;$=f){var J=m[iy(n,f)&k],H=J>>4;if(f+=J&15,f>w){c&&cn(0);break}if(J||cn(2),H<256)e[g++]=H;else if(H==256){$=f,m=null;break}else{var tt=H-254;if(H>264){var st=H-257,it=n1[st];tt=wi(n,f,(1<<it)-1)+s1[st],f+=it}var ut=y[iy(n,f)&B],V=ut>>4;ut||cn(3),f+=ut&15;var L=UI[V];if(V>3){var it=i1[V];L+=iy(n,f)&(1<<it)-1,f+=it}if(f>w){c&&cn(0);break}a&&u(g+131072);var K=g+tt;if(g<L){var ot=o-L,yt=Math.min(L,K);for(ot+g<0&&cn(3);g<yt;++g)e[g]=r[ot+g]}for(;g<K;++g)e[g]=e[g-L]}}t.l=m,t.p=$,t.b=g,t.f=h,m&&(h=1,t.m=b,t.d=y,t.n=v)}while(!h);return g!=e.length&&s?oy(e,0,g):e.subarray(0,g)};var w6=new un(0);var A6=function(n,t){var e={};for(var r in n)e[r]=n[r];for(var r in t)e[r]=t[r];return e},NI=function(n,t,e){for(var r=n(),i=n.toString(),o=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/\s+/g,"").split(","),s=0;s<r.length;++s){var a=r[s],c=o[s];if(typeof a=="function"){t+=";"+c+"=";var u=a.toString();if(a.prototype)if(u.indexOf("[native code]")!=-1){var h=u.indexOf(" ",8)+1;t+=u.slice(h,u.indexOf("(",h))}else{t+=u;for(var f in a.prototype)t+=";"+c+".prototype."+f+"="+a.prototype[f].toString()}else t+=u}else e[c]=a}return t},ry=[],x6=function(n){var t=[];for(var e in n)n[e].buffer&&t.push((n[e]=new n[e].constructor(n[e])).buffer);return t},E6=function(n,t,e,r){if(!ry[e]){for(var i="",o={},s=n.length-1,a=0;a<s;++a)i=NI(n[a],i,o);ry[e]={c:NI(n[s],i,o),e:o}}var c=A6({},ry[e].e);return v6(ry[e].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",e,c,x6(c),r)},S6=function(){return[un,Zl,kI,n1,i1,BI,s1,UI,$I,qI,sy,HI,uh,ny,wi,iy,zI,oy,cn,WI,o1,GI,VI]};var GI=function(n){return postMessage(n,[n.buffer])},VI=function(n){return n&&{out:n.size&&new un(n.size),dictionary:n.dictionary}},_6=function(n,t,e,r,i,o){var s=E6(e,r,i,function(a,c){s.terminate(),o(a,c)});return s.postMessage([n,t],t.consume?[n.buffer]:[]),function(){s.terminate()}};var Es=function(n,t){return n[t]|n[t+1]<<8},Gi=function(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16|n[t+3]<<24)>>>0},e1=function(n,t){return Gi(n,t)+Gi(n,t+4)*4294967296};function C6(n,t,e){return e||(e=t,t={}),typeof e!="function"&&cn(7),_6(n,t,[S6],function(r){return GI(o1(r.data[0],VI(r.data[1])))},1,e)}function o1(n,t){return WI(n,{i:2},t&&t.out,t&&t.dictionary)}var r1=typeof TextDecoder<"u"&&new TextDecoder,T6=0;try{r1.decode(w6,{stream:!0}),T6=1}catch{}var D6=function(n){for(var t="",e=0;;){var r=n[e++],i=(r>127)+(r>223)+(r>239);if(e+i>n.length)return{s:t,r:oy(n,e-1)};i?i==3?(r=((r&15)<<18|(n[e++]&63)<<12|(n[e++]&63)<<6|n[e++]&63)-65536,t+=String.fromCharCode(55296|r>>10,56320|r&1023)):i&1?t+=String.fromCharCode((r&31)<<6|n[e++]&63):t+=String.fromCharCode((r&15)<<12|(n[e++]&63)<<6|n[e++]&63):t+=String.fromCharCode(r)}};function R6(n,t){if(t){for(var e="",r=0;r<n.length;r+=16384)e+=String.fromCharCode.apply(null,n.subarray(r,r+16384));return e}else{if(r1)return r1.decode(n);var i=D6(n),o=i.s,e=i.r;return e.length&&cn(8),o}}var I6=function(n,t){return t+30+Es(n,t+26)+Es(n,t+28)},O6=function(n,t,e){var r=Es(n,t+28),i=R6(n.subarray(t+46,t+46+r),!(Es(n,t+8)&2048)),o=t+46+r,s=Gi(n,t+20),a=e&&s==4294967295?N6(n,o):[s,Gi(n,t+24),Gi(n,t+42)],c=a[0],u=a[1],h=a[2];return[Es(n,t+10),c,u,i,o+Es(n,t+30)+Es(n,t+32),h]},N6=function(n,t){for(;Es(n,t)!=1;t+=4+Es(n,t+2));return[e1(n,t+12),e1(n,t+4),e1(n,t+20)]};var PI=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(n){n()};function XI(n,t,e){e||(e=t,t={}),typeof e!="function"&&cn(7);var r=[],i=function(){for(var v=0;v<r.length;++v)r[v]()},o={},s=function(v,w){PI(function(){e(v,w)})};PI(function(){s=e});for(var a=n.length-22;Gi(n,a)!=101010256;--a)if(!a||n.length-a>65558)return s(cn(13,0,1),null),i;var c=Es(n,a+8);if(c){var u=c,h=Gi(n,a+16),f=h==4294967295||u==65535;if(f){var g=Gi(n,a-12);f=Gi(n,g)==101075792,f&&(u=c=Gi(n,g+32),h=Gi(n,g+48))}for(var m=t&&t.filter,y=function(v){var w=O6(n,h,f),x=w[0],E=w[1],D=w[2],_=w[3],q=w[4],N=w[5],rt=I6(n,N);h=q;var Y=function(st,lt){st?(i(),s(st,null)):(lt&&(o[_]=lt),--c||s(null,o))};if(!m||m({name:_,size:E,originalSize:D,compression:x}))if(!x)Y(null,oy(n,rt,rt+E));else if(x==8){var et=n.subarray(rt,rt+E);if(D<524288||E>.8*D)try{Y(null,o1(et,{out:new un(D)}))}catch(st){Y(st,null)}else r.push(C6(et,{size:D},Y))}else Y(cn(14,"unknown compression type "+x,1),null);else Y(null,null)},b=0;b<u;++b)y(b)}else s(null,{});return i}var Ta=(n,t)=>new Promise((e,r)=>{XI(new Uint8Array(n),{filter:i=>t(i.name)},(i,o)=>{if(i)return r(i);e(Object.entries(o).map(([s,a])=>({path:s,content:Buffer.from(a)})))})});var YI=async(n,t)=>{let e=/xl\/worksheets\/sheet\d+.xml/g,r=/xl\/drawings\/drawing\d+.xml/g,i=/xl\/charts\/chart\d+.xml/g,o="xl/sharedStrings.xml",s=/xl\/media\/.*/,a=/docProps\/core\.xml/,c=/docProps\/custom\.xml/,u=/xl\/worksheets\/_rels\/sheet\d+\.xml\.rels/g,h=/xl\/drawings\/_rels\/drawing\d+\.xml\.rels/g,f=await Ta(n,X=>!!X.match(e)||!!X.match(r)||!!X.match(i)||X===o||X==="xl/styles.xml"||X==="xl/workbook.xml"||X==="xl/_rels/workbook.xml.rels"||!!X.match(a)||!!X.match(c)||!!t.extractAttachments&&(!!X.match(s)||!!X.match(u)||!!X.match(h))),g=f.find(X=>X.path===o),m=[];if(g){let X=me(g.content.toString()),ct=pt(X,"si");for(let J of ct){let R=pt(J,"r");if(R.length>0){let T=[];for(let L of R){let k=pt(L,"t")[0];if(k){let B=k.textContent||"",$=pt(L,"rPr")[0],H={};if($){pt($,"b").length>0&&(H.bold=!0),pt($,"i").length>0&&(H.italic=!0),pt($,"u").length>0&&(H.underline=!0),pt($,"strike").length>0&&(H.strikethrough=!0);let tt=pt($,"sz")[0];tt&&(H.size=tt.getAttribute("val")+"pt");let it=pt($,"color")[0];if(it){let K=it.getAttribute("rgb");K&&(H.color="#"+K.substring(2))}let ut=pt($,"rFont")[0];ut&&(H.font=ut.getAttribute("val")||void 0);let V=pt($,"vertAlign")[0];if(V){let K=V.getAttribute("val");K==="subscript"&&(H.subscript=!0),K==="superscript"&&(H.superscript=!0)}}T.push({type:"text",text:B,formatting:Object.keys(H).length>0?H:void 0})}}m.push(T)}else{let T=pt(J,"t"),L="";for(let k of T)L+=k.textContent||"";m.push(L)}}}let y=f.find(X=>X.path==="xl/styles.xml"),b={};if(y){let X=me(y.content.toString()),ct=pt(X,"fonts")[0],J=[];if(ct){let k=pt(ct,"font");for(let B of k){let $={};pt(B,"b").length>0&&($.bold=!0),pt(B,"i").length>0&&($.italic=!0),pt(B,"u").length>0&&($.underline=!0),pt(B,"strike").length>0&&($.strikethrough=!0);let H=pt(B,"sz")[0];if(H){let V=H.getAttribute("val");V&&($.size=V+"pt")}let tt=pt(B,"color")[0];if(tt){let V=tt.getAttribute("rgb");V&&($.color="#"+V.substring(2))}let it=pt(B,"name")[0];if(it){let V=it.getAttribute("val");V&&($.font=V)}let ut=pt(B,"vertAlign")[0];if(ut){let V=ut.getAttribute("val");V==="subscript"&&($.subscript=!0),V==="superscript"&&($.superscript=!0)}J.push($)}}let R=pt(X,"fills")[0],T=[];if(R){let k=pt(R,"fill");for(let B of k){let $={},H=pt(B,"patternFill")[0];if(H){let tt=pt(H,"fgColor")[0];if(tt){let it=tt.getAttribute("rgb"),ut=tt.getAttribute("theme");if(it&&it!=="00000000")$.backgroundColor="#"+it.substring(2);else if(ut){let V=parseInt(ut);V===0?$.backgroundColor="#FFFFFF":V===1?$.backgroundColor="#000000":V===2?$.backgroundColor="#EEECE1":V===3&&($.backgroundColor="#1F497D")}}}T.push($)}}let L=pt(X,"cellXfs")[0];if(L){let k=pt(L,"xf");for(let B=0;B<k.length;B++){let $=k[B],H={},tt=$.getAttribute("fontId");if(tt){let V=parseInt(tt);J[V]&&Object.assign(H,J[V])}let it=$.getAttribute("fillId");if(it){let V=parseInt(it);T[V]&&T[V].backgroundColor&&(H.backgroundColor=T[V].backgroundColor)}let ut=pt($,"alignment")[0];if(ut){let V=ut.getAttribute("horizontal");(V==="center"||V==="right"||V==="justify"||V==="left")&&(H.alignment=V)}b[B]=H}}}let v=[],w=f.filter(X=>X.path.match(/xl\/media\/.*/)),x=f.filter(X=>X.path.match(i)),E={};if(t.extractAttachments){let X=f.filter(J=>J.path.match(h));for(let J of X){let T=`xl/drawings/${J.path.split("/").pop()?.replace(".rels","")||""}`,L=me(J.content.toString()),k=pt(L,"Relationship");E[T]||(E[T]={});for(let B of k){let $=B.getAttribute("Id"),H=B.getAttribute("Target");if($&&H&&H.includes("media/")){let tt="xl/"+H.replace("../","");E[T][$]={path:tt}}}}let ct=f.filter(J=>J.path.match(r));for(let J of ct){let R=me(J.content.toString()),T=pt(R,"xdr:pic"),L=E[J.path]||{};for(let k of T){let B=pt(k,"xdr:blipFill")[0],$=B?pt(B,"a:blip")[0]:null,H=$?$.getAttribute("r:embed"):null,tt=pt(k,"xdr:nvPicPr")[0],it=tt?pt(tt,"xdr:cNvPr")[0]:null,ut=it?it.getAttribute("descr")||it.getAttribute("name"):void 0;H&&L[H]&&(L[H].altText=ut||"")}}for(let J of w){let R=Wi(J.path.split("/").pop()||"image",J.content),T="";for(let L in E){for(let k in E[L])if(E[L][k].path===J.path){T=E[L][k].altText||"";break}if(T)break}if(T&&(R.altText=T),v.push(R),t.ocr&&R.mimeType.startsWith("image/"))try{let L=await bi(J.content,t.ocrLanguage);L.trim()&&(R.ocrText=L.trim())}catch(L){Tn(`OCR failed for ${R.name}:`,t,L)}}for(let J of x){let R={type:"chart",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",data:J.content.toString("base64"),name:J.path.split("/").pop()||"",extension:"xml"};try{let T=Kl(J.content);R.chartData=T}catch(T){Tn(`Failed to extract chart data from ${J.path}:`,t,T)}v.push(R)}}let D={};if(t.extractAttachments){let X=f.filter(ct=>ct.path.match(h));for(let ct of X){let R=`xl/drawings/${ct.path.split("/").pop()?.replace(".rels","")||""}`,T=me(ct.content.toString()),L=pt(T,"Relationship");D[R]||(D[R]={});for(let k of L){let B=k.getAttribute("Id"),$=k.getAttribute("Target"),H=k.getAttribute("Type");if(B&&$&&H&&H.includes("chart")){let tt=$.split("/").pop()||"";D[R][B]=tt}}}}let _={},q=f.find(X=>X.path==="xl/workbook.xml"),N=f.find(X=>X.path==="xl/_rels/workbook.xml.rels");if(q&&N){let X=me(N.content.toString()),ct=pt(X,"Relationship"),J={};for(let L of ct){let k=L.getAttribute("Id"),B=L.getAttribute("Target");if(k&&B){let $=B.split("/").pop()||"";J[k]=$}}let R=me(q.content.toString()),T=pt(R,"sheet");for(let L of T){let k=L.getAttribute("name"),B=L.getAttribute("r:id");k&&B&&J[B]&&(_[J[B]]=k)}}let rt=[],Y=[];for(let X of f)if(!X.path.match(s)&&X.path!==o&&X.path!=="xl/styles.xml"&&!X.path.match(r)&&!X.path.match(i)&&!X.path.match(u)&&!X.path.match(h)&&X.path.match(e)){t.includeRawContent&&Y.push(X.content.toString());let ct=[],J=/<row.*?>[\s\S]*?<\/row>/g,R=X.content.toString().match(J);if(R)for(let k of R){let B=[],$=/<c.*?>[\s\S]*?<\/c>/g,H=k.match($),tt=k.match(/r="(\d+)"/),it=tt?parseInt(tt[1])-1:0;if(H)for(let ut of H){let V=ut.match(/t="([a-z]+)"/),K=V?V[1]:"n",ot=ut.match(/<v>(.*?)<\/v>/),yt=ut.match(/<t>(.*?)<\/t>/),mt="",j=[];if(K==="s"&&ot){let _t=parseInt(ot[1]),gt=m[_t];Array.isArray(gt)?(j=JSON.parse(JSON.stringify(gt)),mt=j.map(Et=>Et.text).join("")):mt=gt||""}else K==="inlineStr"&&yt?mt=yt[1]:ot&&(mt=ot[1]);let z=ut.match(/r="([A-Z]+)(\d+)"/),vt=(z?z[1]:"").charCodeAt(0)-65;if(mt||j.length>0){let _t=ut.match(/s="(\d+)"/),gt=_t?parseInt(_t[1]):void 0,Et=gt!==void 0&&b[gt]?b[gt]:{};if(j.length>0)for(let Ht of j)Ht.formatting||(Ht.formatting={}),Et.backgroundColor&&(Ht.formatting.backgroundColor=Et.backgroundColor),Et.alignment&&(Ht.formatting.alignment=Et.alignment),!Ht.formatting.font&&Et.font&&(Ht.formatting.font=Et.font),!Ht.formatting.size&&Et.size&&(Ht.formatting.size=Et.size);else j.push({type:"text",text:mt,formatting:Et});let Rt={type:"cell",text:mt,children:j,metadata:{row:it,col:vt}};t.includeRawContent&&(Rt.rawContent=ut),B.push(Rt)}}if(B.length>0){let ut={type:"row",children:B,metadata:void 0};t.includeRawContent&&(ut.rawContent=k),ct.push(ut)}}if(t.extractAttachments){let B=`xl/worksheets/_rels/${X.path.split("/").pop()||""}.rels`,$=f.find(it=>it.path===B),H={};if($){let it=me($.content.toString()),ut=pt(it,"Relationship");for(let V of ut){let K=V.getAttribute("Id"),ot=V.getAttribute("Target"),yt=V.getAttribute("Type");K&&ot&&yt&&yt.includes("drawing")&&(H[K]="xl/drawings/"+ot.replace("../drawings/",""))}}let tt=X.content.toString().match(/<drawing r:id="(.*?)"/g);if(tt)for(let it of tt){let ut=it.match(/r:id="(.*?)"/),V=ut?ut[1]:null;if(V&&H[V]){let K=H[V],ot=E[K];if(ot)for(let mt in ot){let j=ot[mt],z=v.find(ft=>ft.name===j.path.split("/").pop());if(z){let ft={type:"image",text:"",children:[],metadata:{attachmentName:z.name||"unknown",altText:j.altText||void 0}};ct.push(ft)}}let yt=D[K];if(yt)for(let mt in yt){let j=yt[mt];if(v.find(ft=>ft.name===j)){let ft={type:"chart",text:"",children:[],metadata:{attachmentName:j}};ct.push(ft)}}}}}let T=X.path.split("/").pop()||"Sheet",L=_[T]||T;rt.push({type:"sheet",children:ct,metadata:{sheetName:L},rawContent:t.includeRawContent?X.content.toString():void 0})}let et=f.find(X=>X.path.match(a)),st=et?Ca(et.content.toString()):{},lt=f.find(X=>X.path.match(c));if(lt){let X=lh(lt.content.toString());Object.keys(X).length>0&&(st.customProperties=X)}let at=X=>{for(let ct of X){if("attachmentName"in(ct.metadata||{})){let J=ct.metadata,R=v.find(T=>T.name===J.attachmentName);R&&(ct.type==="image"&&(R.ocrText&&(ct.text=R.ocrText),J.altText&&(R.altText=J.altText)),ct.type==="chart"&&R.chartData&&(ct.text=R.chartData.rawTexts.join(t.newlineDelimiter||`
`)))}ct.children&&at(ct.children)}};return at(rt),{type:"xlsx",metadata:st,content:rt,attachments:v,toText:()=>rt.map(X=>{let ct=J=>{let R="";return J.children?R+=J.children.map(ct).filter(T=>T!="").join(J.children[0]?.children?t.newlineDelimiter??`
`:""):R+=J.text||"",R};return ct(X)}).filter(X=>X!="").join(t.newlineDelimiter??`
`)}};wt();xt();At();var KI=async(n,t)=>{let e=/content\.xml/,r=/Object \d+\/content\.xml/,i=/(Pictures|media)\/.*/,o=/meta\.xml/,s=/styles\.xml/,a=/mimetype/,c=await Ta(n,X=>!!X.match(e)||!!X.match(r)||!!X.match(o)||!!X.match(s)||!!X.match(a)||!!t.extractAttachments&&!!X.match(i)),u=c.find(X=>X.path==="mimetype"),h="odt";if(u){let X=u.content.toString().trim();X.includes("spreadsheet")?h="ods":X.includes("presentation")?h="odp":X.includes("text")&&(h="odt")}let f=c.find(X=>X.path==="content.xml")||c.find(X=>X.path.match(e)),g=c.find(X=>X.path==="styles.xml"),m=[],y=[],b={},v={},w={};g&&(X=>{let ct=me(X),J=pt(ct,"style:style");for(let R of J){let T=R.getAttribute("style:name");if(!T)continue;let L={},k=pt(R,"style:paragraph-properties")[0];if(k){let tt=k.getAttribute("fo:text-align");if(tt){let ut={start:"left",left:"left",center:"center",end:"right",right:"right",justify:"justify"};ut[tt]&&(L.alignment=ut[tt])}pt(k,"style:drop-cap")[0]&&(L.dropCap=!0)}Object.keys(L).length>0&&(v[T]=L);let B=pt(R,"style:text-properties")[0],$=pt(R,"style:table-cell-properties")[0],H={};if($){let tt=$.getAttribute("fo:background-color");tt&&tt!=="transparent"&&(H.backgroundColor=tt)}if(B){(B.getAttribute("fo:font-weight")==="bold"||B.getAttribute("style:font-weight-asian")==="bold")&&(H.bold=!0),(B.getAttribute("fo:font-style")==="italic"||B.getAttribute("style:font-style-asian")==="italic")&&(H.italic=!0),B.getAttribute("style:text-underline-style")==="solid"&&(H.underline=!0),B.getAttribute("style:text-line-through-style")==="solid"&&(H.strikethrough=!0);let tt=B.getAttribute("fo:font-size")||B.getAttribute("style:font-size-asian");tt&&(H.size=tt);let it=B.getAttribute("fo:color");it&&(H.color=it);let ut=B.getAttribute("fo:background-color");ut&&ut!=="transparent"&&(H.backgroundColor=ut);let V=B.getAttribute("style:font-name")||B.getAttribute("fo:font-family");V&&(H.font=V);let K=B.getAttribute("style:text-position");K&&(K.startsWith("sub")&&(H.subscript=!0),K.startsWith("super")&&(H.superscript=!0)),Object.keys(H).length>0&&(b[T]=H)}}})(g.content.toString());let E=(X,ct,J,R,T,L={},k)=>{let B=[],$="";if(!X.childNodes)return{text:"",children:[]};for(let H=0;H<X.childNodes.length;H++){let tt=X.childNodes[H];if(tt.nodeType===3){let it=tt.textContent||"";it&&($+=it,B.push({type:"text",text:it,formatting:L,metadata:k?{...k}:void 0}))}else if(tt.nodeType===1){let it=tt,ut=it.tagName;if(ut==="text:s"){let V=parseInt(it.getAttribute("text:c")||"1"),K=" ".repeat(V);$+=K,B.push({type:"text",text:K,formatting:L,metadata:k?{...k}:void 0})}else if(ut==="text:tab")$+="	",B.push({type:"text",text:"	",formatting:L,metadata:k?{...k}:void 0});else if(ut==="text:line-break")$+=`
`,B.push({type:"text",text:`
`,formatting:L,metadata:k?{...k}:void 0});else if(ut==="text:span"){let V=it.getAttribute("text:style-name"),K=V?{...L,...ct[V]}:L,ot=E(it,ct,J,R,T,K,k);$+=ot.text,B.push(...ot.children)}else if(ut==="text:a"){let V=it.getAttribute("xlink:href")||"",K=V.startsWith("#")?"internal":"external",yt=E(it,ct,J,R,T,L,{link:V,linkType:K});$+=yt.text,B.push(...yt.children)}else if(ut==="text:note"&&!J.ignoreNotes){let V=it.getAttribute("text:note-class")||"footnote",K=it.getAttribute("text:id")||it.getAttribute("xml:id")||void 0,ot=pt(it,"text:note-body")[0];if(ot){let yt=pt(ot,"text:p"),mt=[],j="";for(let ft of yt){let vt=D(ft,T,ct,J);j+=(j?" ":"")+vt.text;let _t={type:"paragraph",text:vt.text,children:vt.children,metadata:vt.alignment?{alignment:vt.alignment}:void 0};mt.push(_t)}let z={type:"note",text:j,children:mt,metadata:{noteType:V,noteId:K}};J.putNotesAtLast?R.push(z):B.push(z)}}else if(ut==="draw:frame"){let V=it,K="",ot=pt(V,"svg:title")[0],yt=pt(V,"svg:desc")[0];ot&&ot.textContent?K=ot.textContent:yt&&yt.textContent&&(K=yt.textContent);let mt="",j=pt(V,"draw:image");if(j.length>0&&(mt=j[0].getAttribute("xlink:href")||"",mt)){let ft=mt.split("/");mt=ft[ft.length-1]}let z={type:"image",text:"",children:[],metadata:{attachmentName:mt,...K?{altText:K}:{}}};J.includeRawContent&&(z.rawContent=V.toString()),B.push(z)}}}return{text:$,children:B}},D=(X,ct,J,R)=>{let T=X.getAttribute("text:style-name"),L=T?ct[T]:void 0,k=L?.alignment,B=L?.dropCap,$=E(X,J,R,y,ct);if(T&&$.children.forEach(H=>{if(H.type==="text"){H.metadata||(H.metadata={});let tt=H.metadata;tt.style||(tt.style=T)}}),$.children.length===0&&X.textContent){let H=X.textContent;H.trim()&&($.text=H,$.children.push({type:"text",text:H}))}if(B&&$.children.length>0){let H=$.children[0];if(H.type==="text"&&H.text)if(H.text.length===1)H.formatting={...H.formatting,size:"58.5pt"};else{let tt=H.text[0],it=H.text.substring(1),ut={type:"text",text:tt,formatting:{...H.formatting,size:"58.5pt"},metadata:H.metadata};H.text=it,$.children.unshift(ut)}}return{text:$.text,children:$.children,alignment:k,style:T||void 0}},_=(X,ct,J,R)=>{let T=[],L=Ur(X,"table:table-row"),k=0;for(let B of L){let $=[],H=Ur(B,"table:table-cell"),tt=parseInt(B.getAttribute("table:number-rows-repeated")||"1"),it=0;for(let ut of H){let V=[],K={value:""},ot=parseInt(ut.getAttribute("table:number-columns-repeated")||"1"),yt=parseInt(ut.getAttribute("table:number-columns-spanned")||"1"),mt=parseInt(ut.getAttribute("table:number-rows-spanned")||"1"),j=ft=>{if(ft.childNodes)for(let vt=0;vt<ft.childNodes.length;vt++){let _t=ft.childNodes[vt];if(_t.nodeType===1){let gt=_t;if(gt.tagName==="text:p"||gt.tagName==="text:h"){let Et=D(gt,ct,J,R),Rt={type:gt.tagName==="text:h"?"heading":"paragraph",text:Et.text,children:Et.children,metadata:{...Et.alignment?{alignment:Et.alignment}:{},...Et.style?{style:Et.style}:{}}};Object.keys(Rt.metadata||{}).length===0&&delete Rt.metadata,gt.tagName==="text:h"&&(Rt.metadata||(Rt.metadata={}),Rt.metadata.level=parseInt(gt.getAttribute("text:outline-level")||"1")),R.includeRawContent&&(Rt.rawContent=gt.toString()),V.push(Rt),K.value+=Et.text,K.value&&!K.value.endsWith(`
`)&&(K.value+=`
`)}else if(gt.tagName==="table:table"){let Et=_(gt,ct,J,R);V.push(Et)}else(gt.tagName==="draw:frame"||gt.tagName==="draw:text-box")&&j(gt)}}};j(ut);let z=K.value;z.endsWith(`
`)&&(z=z.slice(0,-1));for(let ft=0;ft<ot;ft++){let vt={type:"cell",text:z,children:V.length>0?ft===0?V:JSON.parse(JSON.stringify(V)):[],metadata:{row:k,col:it}},_t=vt.metadata;yt>1&&(_t.colSpan=yt),mt>1&&(_t.rowSpan=mt),R.includeRawContent&&(vt.rawContent=ut.toString()),$.push(vt),it++}}for(let ut=0;ut<tt;ut++){let V={type:"row",children:ut===0?$:JSON.parse(JSON.stringify($))};ut>0&&V.children?.forEach(K=>{K.metadata&&"row"in K.metadata&&(K.metadata.row=k)}),R.includeRawContent&&(V.rawContent=B.toString()),T.push(V),k++}}return{type:"table",children:T}};f&&(X=>{let ct=me(X),J=pt(ct,"office:body")[0],R=pt(ct,"office:automatic-styles")[0];if(R){let L=pt(R,"style:style");for(let k of L){let B=k.getAttribute("style:name");if(!B)continue;let $=pt(k,"style:paragraph-properties")[0],H={};if($){let it=$.getAttribute("fo:text-align");if(it){let V={start:"left",left:"left",center:"center",end:"right",right:"right",justify:"justify"};V[it]&&(H.alignment=V[it])}pt($,"style:drop-cap")[0]&&(H.dropCap=!0)}Object.keys(H).length>0&&(v[B]=H);let tt=pt(k,"style:text-properties")[0];if(tt){let it={};(tt.getAttribute("fo:font-weight")==="bold"||tt.getAttribute("style:font-weight-asian")==="bold")&&(it.bold=!0),(tt.getAttribute("fo:font-style")==="italic"||tt.getAttribute("style:font-style-asian")==="italic")&&(it.italic=!0),tt.getAttribute("style:text-underline-style")==="solid"&&(it.underline=!0),tt.getAttribute("style:text-line-through-style")==="solid"&&(it.strikethrough=!0);let ut=tt.getAttribute("fo:font-size")||tt.getAttribute("style:font-size-asian");ut&&(it.size=ut);let V=tt.getAttribute("fo:color");V&&(it.color=V);let K=tt.getAttribute("fo:background-color");K&&K!=="transparent"&&(it.backgroundColor=K);let ot=tt.getAttribute("style:font-name")||tt.getAttribute("fo:font-family");ot&&(it.font=ot);let yt=tt.getAttribute("style:text-position");yt&&(yt.startsWith("sub")&&(it.subscript=!0),yt.startsWith("super")&&(it.superscript=!0)),Object.keys(it).length>0&&(b[B]=it)}}}let T=(L,k,B=!1)=>{if(L.tagName==="text:p"){let $=D(L,v,b,t),H=B||(L.getAttribute("text:style-name")||"").toLowerCase().includes("title")?"heading":"paragraph",tt={type:H,text:$.text,children:$.children,metadata:{...$.alignment?{alignment:$.alignment}:{},...$.style?{style:$.style}:{}}};H==="heading"&&tt.metadata&&(tt.metadata.level=tt.metadata.level||1),Object.keys(tt.metadata||{}).length===0&&delete tt.metadata,t.includeRawContent&&(tt.rawContent=L.toString()),k.push(tt)}else if(L.tagName==="text:h"){let $=parseInt(L.getAttribute("text:outline-level")||"1"),H=D(L,v,b,t),tt={type:"heading",text:H.text,children:H.children,metadata:{level:$,...H.alignment?{alignment:H.alignment}:{},...H.style?{style:H.style}:{}}};t.includeRawContent&&(tt.rawContent=L.toString()),k.push(tt)}else if(L.tagName==="table:table"){let $=_(L,v,b,t);t.includeRawContent&&($.rawContent=L.toString()),k.push($)}else if(L.tagName==="text:list"){let $=Ur(L,"text:list-item"),H=L.getAttribute("text:style-name")||L.getAttribute("xml:id"),tt=H||`list-${k.length}`,it="unordered",ut=!1,V=H;if(!V){let mt=L.parentNode;for(;mt&&!V&&!(mt.nodeName==="text:list"&&(V=mt.getAttribute("text:style-name"),V));)mt=mt.parentNode}if(V){let mt=pt(me(f?.content.toString()||""),"office:automatic-styles")[0];if(mt){let j=pt(mt,"text:list-style");for(let z of j)if(z.getAttribute("style:name")===V){let ft=pt(z,"text:list-level-style-bullet"),vt=pt(z,"text:list-level-style-number"),_t=pt(z,"text:list-level-style-image");vt.length>0?(it="ordered",ut=vt.some(gt=>!!gt.getAttribute("style:num-format"))):ft.length>0&&(it="unordered",ut=ft.some(gt=>!!gt.getAttribute("text:bullet-char"))),_t.length>0&&(ut=!0);break}}if(g&&!ut){let j=me(g.content.toString()),z=pt(j,"text:list-style");for(let ft of z)if(ft.getAttribute("style:name")===V){let vt=pt(ft,"text:list-level-style-bullet"),_t=pt(ft,"text:list-level-style-number"),gt=pt(ft,"text:list-level-style-image");_t.length>0?(it="ordered",ut=_t.some(Et=>!!Et.getAttribute("style:num-format"))):vt.length>0&&(it="unordered",ut=vt.some(Et=>!!Et.getAttribute("text:bullet-char"))),gt.length>0&&(ut=!0);break}}}if(!ut){for(let mt=0;mt<$.length;mt++){let j=$[mt];if(j.childNodes)for(let z=0;z<j.childNodes.length;z++){let ft=j.childNodes[z];ft.nodeType===1&&T(ft,k,B)}}return}let K=0,ot=L.parentNode;for(;ot;)ot.nodeName==="text:list"&&K++,ot=ot.parentNode;w[tt]||(w[tt]={});let yt=K.toString();w[tt][yt]===void 0&&(w[tt][yt]=-1);for(let mt=0;mt<$.length;mt++){let j=$[mt];w[tt][yt]++;let z=w[tt][yt];for(let ft=K+1;ft<10;ft++)w[tt][ft.toString()]!==void 0&&(w[tt][ft.toString()]=-1);if(j.childNodes)for(let ft=0;ft<j.childNodes.length;ft++){let vt=j.childNodes[ft];if(vt.nodeType===1){let _t=vt;if(_t.tagName==="text:p"){let gt=D(_t,v,b,t),Et={type:"list",text:gt.text,children:gt.children,metadata:{listType:it,indentation:K,itemIndex:z,listId:tt,alignment:gt.alignment||"left",style:gt.style}};t.includeRawContent&&(Et.rawContent=_t.toString()),k.push(Et)}else if(_t.tagName==="text:h"){let gt=parseInt(_t.getAttribute("text:outline-level")||"1"),Et=D(_t,v,b,t),Rt={type:"list",text:Et.text,children:Et.children,metadata:{listType:it,indentation:K,itemIndex:z,listId:tt,...Et.alignment?{alignment:Et.alignment}:{},style:Et.style}};t.includeRawContent&&(Rt.rawContent=_t.toString()),k.push(Rt)}else _t.tagName==="text:list"&&T(_t,k,B)}}}}else if(L.tagName==="draw:frame"){let $=L.getAttribute("presentation:class"),H=$==="title"||$==="sub-title",tt=pt(L,"draw:text-box")[0],it=pt(L,"draw:image")[0],ut=pt(L,"table:table")[0],V=pt(L,"draw:object")[0];if(tt)T(tt,k,H||B);else if(ut){let K=_(ut,v,b,t);t.includeRawContent&&(K.rawContent=ut.toString()),k.push(K)}else if(it){let K="",ot=pt(L,"svg:title")[0],yt=pt(L,"svg:desc")[0];ot&&ot.textContent?K=ot.textContent:yt&&yt.textContent&&(K=yt.textContent);let mt=it.getAttribute("xlink:href")||"";if(mt){let z=mt.split("/");mt=z[z.length-1]}let j={type:"image",text:"",children:[],metadata:{attachmentName:mt,...K?{altText:K}:{}}};t.includeRawContent&&(j.rawContent=L.toString()),k.push(j)}else if(V){let K=V.getAttribute("xlink:href");if(K){let ot=K.split("/")[0],yt=`${ot}/content.xml`,mt=c.find(j=>j.path===yt||j.path.endsWith(yt));if(mt){let j=Kl(mt.content),z={type:"chart",text:j.rawTexts.join(" "),metadata:{attachmentName:ot,chartData:j}};t.includeRawContent&&(z.rawContent=L.toString()),k.push(z)}else{let j={type:"chart",text:"",metadata:{attachmentName:ot}};t.includeRawContent&&(j.rawContent=L.toString()),k.push(j)}}}}else if(L.childNodes)for(let $=0;$<L.childNodes.length;$++){let H=L.childNodes[$];H.nodeType===1&&T(H,k,B)}};if(h==="ods"){let L=pt(J,"office:spreadsheet")[0];if(L){let k=pt(L,"table:table");for(let B=0;B<k.length;B++){let $=k[B],H=$.getAttribute("table:name")||`Sheet${B+1}`,tt=[],it=pt($,"table:table-row"),ut=0;for(let K=0;K<it.length;K++){let ot=it[K],yt=[],mt=pt(ot,"table:table-cell"),j=0,z=parseInt(ot.getAttribute("table:number-rows-repeated")||"1");for(let ft=0;ft<mt.length;ft++){let vt=mt[ft],_t=parseInt(vt.getAttribute("table:number-columns-repeated")||"1"),gt="",Et=[],Rt=pt(vt,"text:p");for(let Ft=0;Ft<Rt.length;Ft++){let Xt=Rt[Ft],Bt=pt(Xt,"text:span");if(Bt.length>0)for(let Mt of Bt){let Vt=Mt.getAttribute("text:style-name"),A=Vt?b[Vt]:{},p=Mt.textContent||"";gt+=p;let d={type:"text",text:p,formatting:A};Et.push(d)}else{let Mt=Xt.textContent||"";if(gt+=Mt,Mt.trim()){let Vt={type:"text",text:Mt,formatting:{}};Et.push(Vt)}}Ft<Rt.length-1&&(gt+=`
`)}let Ht=pt(vt,"draw:frame");for(let Ft of Ht){let Xt="",Bt=pt(Ft,"svg:title")[0],Mt=pt(Ft,"svg:desc")[0];Bt&&Bt.textContent?Xt=Bt.textContent:Mt&&Mt.textContent&&(Xt=Mt.textContent);let Vt="",A=pt(Ft,"draw:image");if(A.length>0){let S=A[0].getAttribute("xlink:href");if(S){let M=S.split("/");Vt=M[M.length-1]}}let p="",d=pt(Ft,"draw:object");if(d.length>0){let S=d[0].getAttribute("xlink:href");S&&(p=S.split("/")[0])}if(A.length>0){let S={type:"image",text:"",children:[],metadata:{attachmentName:Vt,...Xt?{altText:Xt}:{}}};t.includeRawContent&&(S.rawContent=Ft.toString()),Et.push(S)}else if(p){let S={type:"chart",text:"",children:[],metadata:{attachmentName:p}};Et.push(S)}}for(let Ft=0;Ft<_t;Ft++){if(gt||Et.length>0||h!=="ods"){let Xt={type:"cell",text:gt,children:Et,metadata:{row:ut,col:j}};t.includeRawContent&&(Xt.rawContent=vt.toString()),yt.push(Xt)}j++}}if(yt.length>0)for(let ft=0;ft<z;ft++){let vt={type:"row",children:JSON.parse(JSON.stringify(yt)),metadata:void 0};ft>0&&vt.children?.forEach(_t=>{_t.metadata&&"row"in _t.metadata&&(_t.metadata.row=ut)}),t.includeRawContent&&(vt.rawContent=ot.toString()),tt.push(vt),ut++}else ut+=z}let V={type:"sheet",children:tt,metadata:{sheetName:H}};t.includeRawContent&&(V.rawContent=$.toString()),m.push(V)}}}else if(h==="odp"){let L=pt(J,"office:presentation")[0];if(L){let k=Ur(L,"draw:page"),B=[];for(let $=0;$<k.length;$++){let H=k[$],tt={type:"slide",children:[],metadata:{slideNumber:$+1}},it,ut=H.childNodes;if(ut)for(let V=0;V<ut.length;V++){let K=ut[V];if(K.nodeType===1){let ot=K;if(ot.tagName==="presentation:notes"){t.ignoreNotes||(it={type:"note",children:[],metadata:{slideNumber:$+1,noteId:`slide-note-${$+1}`}},T(ot,it.children));continue}T(ot,tt.children)}}t.includeRawContent&&(tt.rawContent=H.toString()),m.push(tt),it&&it.children&&it.children.length>0&&(t.putNotesAtLast?B.push(it):m.push(it))}B.length>0&&m.push(...B)}}else{let L=pt(J,"office:text")[0];L&&T(L,m)}})(f.content.toString());let N=[],rt=c.filter(X=>X.path.match(/(Pictures|media)\/.*/));if(t.extractAttachments){let X=c.filter(ct=>ct.path.match(/Object \d+\/content\.xml/));for(let ct of X){let J=me(ct.content.toString());if(pt(J,"chart:chart").length>0){let T=ct.path.split("/")[0],L={type:"chart",mimeType:"application/vnd.oasis.opendocument.chart",data:ct.content.toString("base64"),name:T,extension:"xml"},k=Kl(ct.content);k.rawTexts.length>0&&(L.chartData=k),N.push(L)}}}if(t.extractAttachments)for(let X of rt){let ct=Wi(X.path.split("/").pop()||"image",X.content);if(N.push(ct),t.ocr&&ct.mimeType.startsWith("image/"))try{ct.ocrText=(await bi(X.content,t.ocrLanguage)).trim()}catch(J){Tn(`OCR failed for ${ct.name}:`,t,J)}}let Y=c.find(X=>X.path.match(o)),et=Y?Ca(Y.content.toString()):{},st=(X,ct)=>{let J=T=>{let L=T.replace(/^\[|\]$/g,""),[k,B]=L.split(":"),$=k.lastIndexOf(".");if($===-1)return[T];let H=k.substring(0,$).replace(/^'|'$/g,""),tt=k.substring($+1).replace(/\$/g,""),it=tt;if(B)if(B.startsWith("."))it=B.substring(1).replace(/\$/g,"");else{let mt=B.lastIndexOf(".");it=B.substring(mt+1).replace(/\$/g,"")}let ut=mt=>{let j=mt.match(/[A-Z]+/),z=mt.match(/\d+/);if(!j||!z)return null;let ft=j[0],vt=0;for(let gt=0;gt<ft.length;gt++)vt=vt*26+(ft.charCodeAt(gt)-65+1);return vt-=1,{r:parseInt(z[0])-1,c:vt}},V=ut(tt),K=ut(it);if(!V||!K)return[T];let ot=ct.find(mt=>mt.type==="sheet"&&mt.metadata?.sheetName===H);if(!ot||!ot.children)return[T];let yt=[];for(let mt of ot.children)if(mt.children)for(let j of mt.children){let z=j.metadata;z&&z.row>=V.r&&z.row<=K.r&&z.col>=V.c&&z.col<=K.c&&yt.push(j.text||"")}return yt.length>0?yt:[]};for(let T of X.dataSets){let L=[];for(let k of T.values)k.startsWith("[")?L.push(...J(k)):L.push(k);T.values=L}let R=[];for(let T of X.labels)T.startsWith("[")?R.push(...J(T)):R.push(T);X.labels=R,X.rawTexts=[],X.title&&X.rawTexts.push(X.title);for(let T of X.dataSets)T.name&&X.rawTexts.push(T.name),X.rawTexts.push(...X.labels),X.rawTexts.push(...T.values)};for(let X of N)X.type==="chart"&&X.chartData&&st(X.chartData,m);(X=>{let ct=new Set,J=k=>{for(let B of k){if(B.metadata&&"attachmentName"in B.metadata){let $=B.metadata.attachmentName;$&&ct.add($)}B.children&&J(B.children)}};J(X);let R=N.filter(k=>k.type==="image"&&k.name&&!ct.has(k.name)),T=0,L=k=>{if((k.type==="image"||k.type==="chart")&&k.metadata&&"attachmentName"in k.metadata){let B=k.metadata.attachmentName;if(!B&&k.type==="image"&&T<R.length&&(B=R[T++].name,k.metadata.attachmentName=B),B){let $=N.find(H=>H.name===B);$&&($.ocrText&&(k.text=$.ocrText),$.chartData&&k.type==="chart"&&(k.text=$.chartData.rawTexts.join(t.newlineDelimiter??`
`)))}}k.children&&k.children.forEach(L)};X.forEach(L)})(m);let at={};for(let X in b)at[X]={formatting:b[X],alignment:v[X]?.alignment};for(let X in v)at[X]||(at[X]={formatting:{},alignment:v[X]?.alignment});return t.putNotesAtLast&&y.length>0&&m.push(...y),{type:h,metadata:{...et,styleMap:at},content:m,attachments:N,toText:()=>m.map(X=>{let ct=J=>{let R="";if(J.children&&J.children.length>0){let L=J.children.some(k=>k.children&&k.children.length>0)?t.newlineDelimiter??`
`:"";R+=J.children.map(ct).filter(k=>k!="").join(L)}else R+=J.text||"";return R};return ct(X)}).filter(X=>X!="").join(t.newlineDelimiter??`
`)}};wt();xt();At();function bP(n){if(n)try{let t=n.startsWith("D:")?n.slice(2):n,e=parseInt(t.slice(0,4),10),r=parseInt(t.slice(4,6),10)-1,i=parseInt(t.slice(6,8),10)||1,o=parseInt(t.slice(8,10),10)||0,s=parseInt(t.slice(10,12),10)||0,a=parseInt(t.slice(12,14),10)||0,c=t.slice(14).match(/([+-Z])(\d{2})'?(\d{2})?'?/);if(c){let u=c[1]==="-"?-1:1,h=parseInt(c[2],10)||0,f=parseInt(c[3],10)||0,g=u*(h*60+f),m=Date.UTC(e,r,i,o,s,a);return new Date(m-g*6e4)}return new Date(e,r,i,o,s,a)}catch{try{return new Date(n)}catch{return}}}function h5(n){let t=[];for(let i of n)for(let o of i)o.type==="text"&&o.height>0&&t.push(o.height);if(t.length===0)return{median:12,max:12};t.sort((i,o)=>i-o);let e=t[Math.floor(t.length/2)],r=t[t.length-1];return{median:e,max:r}}function f5(n,t){if(n<=t.median*1.2)return 0;let e=n/t.median;return e>=2?1:e>=1.7?2:e>=1.5?3:e>=1.35?4:e>=1.2?5:0}function d5(n,t){let e=n.x+n.width/2,r=n.y+n.height/2;for(let i of t){let[o,s,a,c]=i.rect,u=Math.min(o,a),h=Math.max(o,a),f=Math.min(s,c),g=Math.max(s,c);if(e>=u&&e<=h&&r>=f&&r<=g)return i}}function p5(n,t,e){let r=Math.floor((24*n+31)/32)*4,i=r-n*3,o=54,s=r*t,a=o+s,c=Buffer.alloc(a);c.write("BM",0),c.writeUInt32LE(a,2),c.writeUInt32LE(0,6),c.writeUInt32LE(o,10),c.writeUInt32LE(40,14),c.writeInt32LE(n,18),c.writeInt32LE(-t,22),c.writeUInt16LE(1,26),c.writeUInt16LE(24,28),c.writeUInt32LE(0,30),c.writeUInt32LE(s,34),c.writeInt32LE(2835,38),c.writeInt32LE(2835,42),c.writeUInt32LE(0,46),c.writeUInt32LE(0,50);let u=o;for(let h=0;h<t;h++){for(let f=0;f<n;f++){let g=(h*n+f)*4,m=e[g+0],y=e[g+1],b=e[g+2],w=e[g+3]/255,x=Math.round(m*w+255*(1-w)),E=Math.round(y*w+255*(1-w)),D=Math.round(b*w+255*(1-w));c[u+0]=D,c[u+1]=E,c[u+2]=x,u+=3}for(let f=0;f<i;f++)c[u]=0,u++}return c}function g5(n,t,e,r){let i;if(r===1){i=new Uint8ClampedArray(t*e*4);for(let o=0;o<t*e;o++){let s=n[o];i[o*4]=s,i[o*4+1]=s,i[o*4+2]=s,i[o*4+3]=255}}else if(r===2||n.length===t*e*3){i=new Uint8ClampedArray(t*e*4);for(let o=0;o<t*e;o++)i[o*4]=n[o*3],i[o*4+1]=n[o*3+1],i[o*4+2]=n[o*3+2],i[o*4+3]=255}else i=n instanceof Uint8ClampedArray?n:new Uint8ClampedArray(n);return Buffer.from(i.buffer,i.byteOffset,i.byteLength)}var wP=async(n,t)=>{let e;if(typeof window>"u"){let b=new Function("specifier","return import(specifier)");try{e=await b("pdfjs-dist/legacy/build/pdf.mjs")}catch{e=await b("pdfjs-dist")}}else e=await Promise.resolve().then(()=>(vP(),yP));if(t.pdfWorkerSrc)e.GlobalWorkerOptions.workerSrc=t.pdfWorkerSrc;else if(typeof window<"u")e.GlobalWorkerOptions.workerSrc="https://unpkg.com/pdfjs-dist@5.4.530/build/pdf.worker.min.mjs";else try{let b=_l.resolve("pdfjs-dist/legacy/build/pdf.worker.mjs");e.GlobalWorkerOptions.workerSrc=b}catch(b){t.outputErrorToConsole&&console.warn("[PdfParser] Could not auto-resolve local worker path:",b)}let r=new Uint8Array(n),i=e.getDocument({data:r,verbosity:0}),o;try{o=await i.promise}catch(b){throw b.message?.includes("workerSrc")||b.message?.includes('No "GlobalWorkerOptions.workerSrc" specified')?yo("PDF_WORKER_MISSING",t):b}let s=[],a=[],c=o.numPages,u=[],f=(await o.getMetadata().catch(()=>({info:{}}))).info,g={pages:c,title:f?.Title||void 0,author:f?.Author||void 0,subject:f?.Subject||void 0,description:f?.Keywords||void 0,created:bP(f?.CreationDate),modified:bP(f?.ModDate)},m=new Set(["Title","Author","Subject","Keywords","Creator","Producer","CreationDate","ModDate","Trapped","IsAcroFormPresent","IsXFAPresent","IsCollectionPresent","IsSignaturesPresent","PDFFormatVersion"]);if(f){let b={};for(let v of Object.keys(f)){if(m.has(v))continue;let w=f[v];if(w!=null){if(v==="Custom"&&typeof w=="object"&&!Array.isArray(w)&&!(w instanceof Date)){for(let[x,E]of Object.entries(w))E!=null&&(typeof E=="string"||typeof E=="number"||typeof E=="boolean"||E instanceof Date)&&(b[x]=E);continue}(typeof w=="string"||typeof w=="number"||typeof w=="boolean"||w instanceof Date)&&(b[v]=w)}}Object.keys(b).length>0&&(g.customProperties=b)}try{let b=await o.getAttachments();if(b&&t.extractAttachments)for(let v in b){let w=b[v],x=Buffer.from(w.content),E=Wi(w.filename,x);a.push(E)}}catch(b){t.outputErrorToConsole&&console.error("Error extracting embedded attachments:",b)}for(let b=1;b<=c;b++){let v,w,x=[];try{v=await o.getPage(b),w=await v.getTextContent()}catch(D){t.outputErrorToConsole&&console.warn(`[PdfParser] Error loading page ${b}:`,D),u.push(x);continue}let E=v.commonObjs;for(let D of w.items){let _=D.transform,q=_[4],N=_[5],rt=D.width||0,Y=D.height||Math.abs(_[3])||12,et={},st;if(D.fontName&&E)try{if(E.has(D.fontName)){let lt=await new Promise(at=>{E.get(D.fontName,X=>at(X))});if(lt?.name){st=lt.name.replace(/^[A-Z]{6}\+/,""),et.font=st;let at=lt.name.toLowerCase();at.includes("bold")&&(et.bold=!0),(at.includes("italic")||at.includes("oblique"))&&(et.italic=!0)}}}catch{}Y>0&&(et.size=Math.round(Y).toString()),x.push({type:"text",x:q,y:N,width:rt,height:Y,text:D.str,fontName:st,formatting:et})}if(t.extractAttachments||t.ocr)try{let D=await v.getOperatorList(),_=D.fnArray,q=D.argsArray;for(let N=0;N<_.length;N++){let rt=_[N];if(rt===e.OPS.dependency){let Y=q[N];for(let et of Y)try{if(v.objs.has(et))continue;await new Promise(st=>{let lt=setTimeout(()=>{st()},500);v.objs.get(et,at=>{clearTimeout(lt),st()})})}catch(st){t.outputErrorToConsole&&console.error(`[PdfParser] Failed to load dependency ${et}:`,st)}}if(rt===e.OPS.paintImageXObject||rt===e.OPS.paintXObject){let Y=q[N][0];try{let et=v.objs.has(Y),st=v.objs;if(!et&&v.commonObjs.has(Y)&&(et=!0,st=v.commonObjs),et){let at=await new Promise(X=>{st.get(Y,ct=>X(ct))});if(typeof window<"u"&&!at.data&&at.bitmap)try{let X=document.createElement("canvas");X.width=at.width,X.height=at.height;let ct=X.getContext("2d");ct&&(ct.drawImage(at.bitmap,0,0),at.data=ct.getImageData(0,0,at.width,at.height).data,at.kind=3)}catch(X){t.outputErrorToConsole&&console.error("[PdfParser] Failed to extract from ImageBitmap:",X)}if(at?.data&&at.width>0&&at.height>0){let X=0,ct=0;for(let J=N-1;J>=0;J--)if(_[J]===e.OPS.transform){X=q[J][4],ct=q[J][5];break}x.push({type:"image",x:X,y:ct,name:Y,data:at.data,width:at.width,height:at.height,kind:at.kind})}}}catch{}}}}catch(D){t.outputErrorToConsole&&console.error(`Error extracting images from page ${b}:`,D)}u.push(x)}let y=h5(u);for(let b=0;b<u.length;b++){let v=b+1,w;try{w=await o.getPage(v)}catch(Y){t.outputErrorToConsole&&console.warn(`[PdfParser] Error loading page ${v} in second pass:`,Y);continue}let x=u[b],E=[],D=[];try{let Y=await w.getAnnotations();for(let et of Y)et.subtype==="Link"&&et.rect&&D.push({rect:et.rect,url:et.url,dest:et.dest})}catch(Y){t.outputErrorToConsole&&console.error(`Error extracting annotations from page ${v}:`,Y)}x.sort((Y,et)=>Math.abs(et.y-Y.y)>5?et.y-Y.y:Y.x-et.x);let _=null,q=0,N=-1,rt=0;for(let Y of x)if(Y.type==="text"){let et=Y.text;if(!et)continue;if(N!==-1&&Math.abs(Y.y-N)>5&&_&&((_.text||"").trim().length>0&&E.push(_),_=null),!_&&et.trim().length===0){N=Y.y;continue}let lt=f5(Y.height,y);if(_||(lt>0?_={type:"heading",text:"",children:[],metadata:{level:lt}}:_={type:"paragraph",text:"",children:[]},q=Y.height),et.trim().length===0){if(_.children&&_.children.length>0){let J=_.children[_.children.length-1];J.type==="text"&&J.text&&(J.text+=et,_.text+=et)}N=Y.y;continue}if(_.text&&_.text.length>0&&!_.text.endsWith(" ")&&(_.text+=" ",_.children&&_.children.length>0)){let J=_.children[_.children.length-1];J.type==="text"&&J.text&&(J.text+=" ")}_.text+=et;let at=d5(Y,D),X;at&&(at.url?X={link:at.url,linkType:at.url.startsWith("#")?"internal":"external"}:at.dest&&(X={link:typeof at.dest=="string"?`#${at.dest}`:"#internal",linkType:"internal"}));let ct=!1;if(_.children&&_.children.length>0&&!X){let J=_.children[_.children.length-1];J.type==="text"&&m5(J.formatting,Y.formatting)&&!J.metadata&&(J.text=(J.text||"")+et,ct=!0)}if(!ct){let J={type:"text",text:et,formatting:Object.keys(Y.formatting).length>0?Y.formatting:void 0};X&&(J.metadata=X),_.children?.push(J)}N=Y.y}else if(Y.type==="image"){_&&((_.text||"").trim().length>0&&E.push(_),_=null),rt++;let et=`pdf_image_p${v}_${rt}.bmp`;if(t.extractAttachments)try{let st=g5(Y.data,Y.width,Y.height,Y.kind),lt=p5(Y.width,Y.height,new Uint8Array(st)),at=Wi(et,lt);if(at.mimeType="image/bmp",t.ocr)try{Y.width>=10&&Y.height>=10&&(at.ocrText=(await bi(lt,t.ocrLanguage)).trim())}catch(ct){t.outputErrorToConsole&&console.error(`OCR failed for ${et}:`,ct)}a.push(at);let X={attachmentName:et};E.push({type:"image",text:at.ocrText||"",metadata:{...X}})}catch(st){Tn(`Failed to process image ${et}:`,t,st)}}_&&(_.text||"").trim().length>0&&E.push(_),s.push({type:"page",children:E,text:E.map(Y=>Y.text).join(t.newlineDelimiter??`

`),metadata:{pageNumber:v}})}return{type:"pdf",metadata:g,content:s,attachments:a,toText:()=>s.map(b=>b.text).join(t.newlineDelimiter??`

`)}};function m5(n,t){if(!n&&!t)return!0;if(!n||!t)return!1;let e=Object.keys(n).sort(),r=Object.keys(t).sort();if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++){let o=e[i];if(e[i]!==r[i]||n[o]!==t[o])return!1}return!0}wt();xt();At();var AP=dd(Z0());var xP=async(n,t)=>{let e=/ppt\/(notesSlides|slides)\/(notesSlide|slide)\d+.xml/g,r=/ppt\/slides\/slide\d+.xml/g,i=/ppt\/slides\/_rels\/slide\d+\.xml\.rels/,o=/lide(\d+)\.xml/,s=/ppt\/media\/.*/,a=/ppt\/charts\/chart\d+\.xml/,c=/docProps\/core\.xml/,u=/docProps\/custom\.xml/,h=new AP.XMLSerializer,f=await Ta(n,R=>!!R.match(t.ignoreNotes?r:e)||!!R.match(c)||!!R.match(u)||!!R.match(i)||!!t.extractAttachments&&(!!R.match(s)||!!R.match(a))),g=f.find(R=>R.path.match(c)),m=g?Ca(g.content.toString()):{},y=f.find(R=>R.path.match(u));if(y){let R=lh(y.content.toString());Object.keys(R).length>0&&(m.customProperties=R)}f.sort((R,T)=>{let L=R.path.match(o),k=T.path.match(o),B=L?parseInt(L[1]):0,$=k?parseInt(k[1]):0;return B-$});let b=[],v=[],w={},x=0,E=0,D=!1,_=null,q=0,N={},rt=R=>{let T=[],L=pt(R,"a:tr");for(let k=0;k<L.length;k++){let B=L[k],$=[],H=pt(B,"a:tc");for(let it=0;it<H.length;it++){let ut=H[it],V=[],K="",ot=pt(ut,"a:txBody")[0];if(ot){let mt=pt(ot,"a:p");for(let j of mt){let z={type:"paragraph",text:"",children:[],metadata:{}};t.includeRawContent&&(z.rawContent=j.toString());let ft=pt(j,"a:r");for(let vt of ft){let _t=pt(vt,"a:t")[0];if(_t&&_t.childNodes[0]){let gt=_t.childNodes[0].nodeValue||"";z.text+=gt;let Et=pt(vt,"a:rPr")[0],Rt={};if(Et){Et.getAttribute("b")==="1"&&(Rt.bold=!0),Et.getAttribute("i")==="1"&&(Rt.italic=!0),Et.getAttribute("u")==="sng"&&(Rt.underline=!0),Et.getAttribute("strike")==="sngStrike"&&(Rt.strikethrough=!0);let Ht=Et.getAttribute("sz");Ht&&(Rt.size=(parseInt(Ht)/100).toString()+"pt");let Ft=pt(Et,"a:solidFill")[0];if(Ft){let Bt=pt(Ft,"a:srgbClr")[0];if(Bt){let Mt=Bt.getAttribute("val");Mt&&(Rt.color="#"+Mt)}}let Xt=pt(Et,"a:latin")[0];if(Xt){let Bt=Xt.getAttribute("typeface");Bt&&(Rt.font=Bt)}}z.children?.push({type:"text",text:gt,formatting:Rt})}}V.push(z),K+=z.text}}let yt={type:"cell",text:K,children:V,metadata:{row:k,col:it}};$.push(yt)}let tt={type:"row",children:$};T.push(tt)}return{type:"table",children:T}},Y=(R,T)=>{let L=pt(R,"a:blip")[0];if(!L)return null;let k=L.getAttribute("r:embed");if(!k)return null;let B=w[T]?.[k];if(!B||B.type!=="image")return null;let $=B.target,H=pt(R,"p:nvPicPr")[0],it=(H?pt(H,"p:cNvPr")[0]:null)?.getAttribute("descr")||void 0;return{type:"image",text:"",metadata:{attachmentName:$,altText:it}}},et=(R,T)=>{let L=pt(R,"a:graphicData")[0];if(!L||!(L.getAttribute("uri")==="http://schemas.openxmlformats.org/drawingml/2006/chart"))return null;let $=pt(L,"c:chart")[0];if(!$)return null;let H=$.getAttribute("r:id");if(!H)return null;let tt=w[T]?.[H];if(!tt||tt.type!=="chart")return null;let ut={type:"chart",text:"",metadata:{attachmentName:tt.target}};return t.includeRawContent&&(ut.rawContent=h.serializeToString(R)),ut},st=(R,T)=>{let L=pt(R,"a:tbl")[0];if(L){let k=rt(L);if(t.includeRawContent&&(k.rawContent=h.serializeToString(R)),k.children&&k.children.length>0)return k}if(R.getElementsByTagName("c:chart").length>0){let k=et(R,T);if(k)return k}return null},lt=(R,T)=>{let L=[],k=pt(R,"p:nvSpPr")[0],B=k?pt(k,"p:nvPr")[0]:null,$=B?pt(B,"p:ph")[0]:null,H=$?$.getAttribute("type"):"body",tt=H==="title"||H==="ctrTitle",it=pt(R,"p:txBody")[0];if(it){let ut=pt(it,"a:p");for(let V=0;V<ut.length;V++){let K=ut[V],ot={type:tt?"heading":"paragraph",text:"",children:[],metadata:tt?{level:1}:{}},yt=pt(K,"a:pPr")[0],mt=!1,j="unordered",z=0;if(yt){let vt=yt.getAttribute("lvl");vt&&(z=parseInt(vt));let _t=pt(yt,"a:buAutoNum")[0],gt=pt(yt,"a:buChar")[0],Et=pt(yt,"a:buBlip")[0],Rt=pt(yt,"a:bu")[0];_t?(mt=!0,j="ordered"):(gt||Et||Rt)&&(mt=!0,j="unordered");let Ht=yt.getAttribute("algn");if(Ht){let Ft={l:"left",ctr:"center",r:"right",just:"justify"};Ft[Ht]&&(ot.metadata.alignment=Ft[Ht])}}if(mt){ot.type="list";let vt=z;if(!D||j!==_){x++;for(let gt in N)delete N[gt];E=0,N[vt]=0}else if(vt>q)E=0,N[vt]=0;else if(vt<q){for(let Et in N){let Rt=parseInt(Et);Rt>vt&&delete N[Rt]}E=(N[vt]||0)+1,N[vt]=E}else E=(N[vt]||0)+1,N[vt]=E;D=!0,_=j,q=vt,ot.metadata={...ot.metadata,listType:j,indentation:vt,listId:x.toString(),itemIndex:E,alignment:ot.metadata?.alignment||"left"}}else D=!1,_=null,q=0;tt&&(ot.metadata={...ot.metadata,level:1}),t.includeRawContent&&(ot.rawContent=K.toString());let ft=pt(K,"a:r");for(let vt=0;vt<ft.length;vt++){let _t=ft[vt],gt=pt(_t,"a:t")[0];if(gt&&gt.childNodes[0]){let Et=gt.childNodes[0].nodeValue||"";ot.text+=Et;let Rt=pt(_t,"a:rPr")[0],Ht={};if(Rt){Rt.getAttribute("b")==="1"&&(Ht.bold=!0),Rt.getAttribute("i")==="1"&&(Ht.italic=!0),Rt.getAttribute("u")==="sng"&&(Ht.underline=!0),Rt.getAttribute("strike")==="sngStrike"&&(Ht.strikethrough=!0);let Bt=Rt.getAttribute("sz");Bt&&(Ht.size=(parseInt(Bt)/100).toString()+"pt");let Mt=pt(Rt,"a:solidFill")[0];if(Mt){let d=pt(Mt,"a:srgbClr")[0];if(d){let S=d.getAttribute("val");S&&(Ht.color="#"+S)}}let Vt=pt(Rt,"a:highlight")[0];if(Vt){let d=pt(Vt,"a:srgbClr")[0];if(d){let S=d.getAttribute("val");S&&(Ht.backgroundColor="#"+S)}}let A=pt(Rt,"a:latin")[0];if(A){let d=A.getAttribute("typeface");d&&(Ht.font=d)}let p=Rt.getAttribute("baseline");if(p){let d=parseInt(p);d<0&&(Ht.subscript=!0),d>0&&(Ht.superscript=!0)}}let Ft={type:"text",text:Et,formatting:Ht},Xt=pt(_t,"a:hlinkClick")[0];if(Xt){let Bt=Xt.getAttribute("r:id"),Mt=Xt.getAttribute("action"),Vt,A;Bt&&w[T]&&w[T][Bt]&&w[T][Bt].type==="hyperlink"?(Vt=w[T][Bt].target,A="external"):Bt&&w[T]&&w[T][Bt]&&w[T][Bt].type==="slide"?(Vt=w[T][Bt].target,A="internal"):Mt&&(Vt=Mt,A="internal"),Vt&&(Ft.metadata={link:Vt,linkType:A})}ot.children?.push(Ft)}}ot.text&&L.push(ot)}}return L};function at(R,T){let L=[];for(let k of Array.from(R?.childNodes||[])){if(k.nodeType!==1)continue;let B=k,$=B.tagName;if($==="p:sp")L.push(...lt(B,T));else if($==="p:pic"){let H=Y(B,T);H&&L.push(H)}else if($==="p:graphicFrame"){let H=st(B,T);H&&L.push(H)}else if($==="p:grpSp"){let H=B.getElementsByTagName("p:spTree")[0];L.push(...at(H,T))}}return L}for(let R of f)if(R.path.match(i)){let T=R.path.match(/slide(\d+)\.xml\.rels/);if(T){let L=parseInt(T[1]);w[L]={};let k=me(R.content.toString()),B=pt(k,"Relationship");for(let $=0;$<B.length;$++){let H=B[$].getAttribute("Id"),tt=B[$].getAttribute("Type"),it=B[$].getAttribute("Target");if(H&&tt&&it){let ut="other";tt.includes("relationships/image")?ut="image":tt.includes("relationships/hyperlink")?ut="hyperlink":tt.includes("relationships/chart")?ut="chart":tt.includes("relationships/slide")?ut="slide":tt.includes("relationships/notesSlide")&&(ut="notes");let V=it;it.startsWith("http://")||it.startsWith("https://")||(V=V.split("/").pop()||""),w[L][H]={type:ut,target:V}}}}}for(let R of f){if(R.path.match(s)||R.path.match(a)||R.path.match(i)||R.path.match(c))continue;let T=R.content.toString(),L=me(T);t.includeRawContent&&v.push(T);let k=R.path.match(o),B=k?parseInt(k[1]):0,$=R.path.includes("notesSlide"),H={type:$?"note":"slide",children:[],metadata:{slideNumber:B,...$?{noteId:`slide-note-${B}`}:{}}};t.includeRawContent&&(H.rawContent=R.content.toString());let tt=pt(L,"p:spTree")[0];tt&&H.children?.push(...at(tt,B)),H.children&&H.children.length>0&&b.push(H)}let X=[],ct=f.filter(R=>R.path.match(/ppt\/media\/.*/)),J=f.filter(R=>R.path.match(/ppt\/charts\/chart\d+\.xml/));if(t.extractAttachments){for(let T of ct){let L=Wi(T.path.split("/").pop()||"image",T.content);if(X.push(L),t.ocr&&L.mimeType.startsWith("image/"))try{L.ocrText=(await bi(T.content,t.ocrLanguage)).trim()}catch(k){Tn(`OCR failed for ${L.name}:`,t,k)}}for(let T of J){let L={type:"chart",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",data:T.content.toString("base64"),name:T.path.split("/").pop()||"",extension:"xml"};X.push(L);try{let k=await Kl(T.content);L.chartData=k}catch(k){Tn(`Failed to extract text from chart ${T.path}:`,t,k)}}let R=T=>{for(let L of T){if("attachmentName"in(L.metadata||{})){let k=L.metadata,B=X.find($=>$.name===k.attachmentName);B&&(L.type==="image"&&(B.altText=k.altText,B.ocrText&&(L.text=B.ocrText)),L.type==="chart"&&(L.text=B.chartData?.rawTexts.join(t.newlineDelimiter||`
`)))}L.children&&R(L.children)}};R(b)}return!t.ignoreNotes&&t.putNotesAtLast&&b.sort((R,T)=>{let L=R.type==="note"?1:0,k=T.type==="note"?1:0;return L-k}),{type:"pptx",metadata:m,content:b,attachments:X,toText:()=>b.map(R=>{let T=L=>{let k="";return L.children?k+=L.children.map(T).filter(B=>B!="").join(L.children[0]?.children?t.newlineDelimiter??`
`:""):k+=L.text||"",k};return T(R)}).filter(R=>R!="").join(t.newlineDelimiter??`
`)}};wt();xt();At();var y5={pngblip:"png",jpegblip:"jpeg",gifblip:"gif",tiffblip:"tiff",dibitmap:"bmp",wbitmap:"bmp"},v5={png:"image/png",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",bmp:"image/bmp"},tE=class{constructor(t){this.index=0;this.buffer=t,this.length=t.length}parse(){let t={type:"group",content:[]},e=[t];for(;this.index<this.length;){let r=this.buffer[this.index],i=e[e.length-1];if(r===123){this.index++;let o={type:"group",content:[]};i.content.push(o),e.push(o)}else r===125?(this.index++,e.length>1&&e.pop()):r===92?(this.index++,this.parseControl(i)):r===13||r===10?this.index++:this.parseText(i)}return t}parseControl(t){if(this.index>=this.length)return;let e=this.buffer[this.index];if(e===123||e===125||e===92){t.content.push({type:"text",value:String.fromCharCode(e)}),this.index++;return}if(e===39){if(this.index++,this.index+1<this.length){let a=this.buffer.toString("utf8",this.index,this.index+2),c=parseInt(a,16);if(!isNaN(c)){let h={128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}[c]||c;t.content.push({type:"text",value:String.fromCharCode(h)})}this.index+=2}return}if(e===42){t.content.push({type:"control",value:"*"}),this.index++;return}let r="";for(;this.index<this.length;){let a=this.buffer[this.index];if(a>=97&&a<=122||a>=65&&a<=90)r+=String.fromCharCode(a),this.index++;else break}let i,o=!1,s="";for(this.index<this.length&&this.buffer[this.index]===45&&(s+="-",this.index++);this.index<this.length;){let a=this.buffer[this.index];if(a>=48&&a<=57)s+=String.fromCharCode(a),this.index++,o=!0;else break}if(o&&(i=parseInt(s,10)),this.index<this.length&&this.buffer[this.index]===32&&this.index++,r==="bin"&&i!==void 0&&i>0){this.index+=i;return}t.content.push({type:"control",value:r,param:i}),(t.content.length===1&&t.type==="group"||t.content.length===2&&t.content[0].type==="control"&&t.content[0].value==="*")&&(t.destination=r)}parseText(t){let e="";for(;this.index<this.length;){let r=this.buffer[this.index];if(r===123||r===125||r===92||r===13||r===10)break;e+=String.fromCharCode(r),this.index++}e.length>0&&t.content.push({type:"text",value:e})}},EP=async(n,t)=>{try{let r=new tE(n).parse(),i=b5(r),o=w5(r),s=[],a=[],c=[],u="",h=[],f="",g="",m={},y=s,b=0,v="left",w=!1,x,E,D,_,q,N=[],rt=0,Y=0,et=()=>N.length>0?N[N.length-1]:void 0,st=()=>{N.length===0&&N.push({rows:[],currentCells:[],currentCellContent:[],rowIndex:0})},lt=!1,at=!1,X=0,ct=[],J={isMergedContinuation:!1},R=0,T=0,L={},k=!1,B=!1,$,H,tt={},it=!1,ut,V,K={},ot={},yt,mt=(d,S)=>d.bold!==S.bold||d.italic!==S.italic||d.underline!==S.underline||d.strikethrough!==S.strikethrough||d.size!==S.size||d.font!==S.font||d.color!==S.color||d.backgroundColor!==S.backgroundColor||d.subscript!==S.subscript||d.superscript!==S.superscript,j=()=>{if(g){let d={type:"text",text:g,formatting:{...m}};yt&&(d.metadata={link:yt,linkType:Rt(yt)}),h.push(d),u+=g,g=""}},z=!1,ft=()=>{j();let d=u||h.length>0;if(lt&&!at&&!z&&d){let S=u,M=[...h],G=f;u="",h=[],f="",gt(),u=S,h=M,f=G}if(d){let S="paragraph",M;if(E!==void 0&&E>0)S="heading",M={level:E},_=void 0,q=void 0;else if(w){S="list";let Q=D||_,nt=x||q||"unordered",ht=0;Q&&(ot[Q]||(ot[Q]={}),ot[Q][b]===void 0?ot[Q][b]=0:ot[Q][b]++,ht=ot[Q][b]),M={listType:nt,indentation:b,listId:Q||"",itemIndex:ht,alignment:v},Q&&(_=Q),nt&&(q=nt)}let G={type:S,text:u,children:h,formatting:void 0,metadata:M};t.includeRawContent&&f&&(G.rawContent=f),lt&&at?(st(),et().currentCellContent.push(G)):y.push(G),u="",h=[],f="",b=0,w=!1,x=void 0,E=void 0,D=void 0}},vt=d=>{ft();let S=d||et();if(!S)return;let M={type:"cell",text:S.currentCellContent.map(G=>G.text).join(`
`),children:[...S.currentCellContent],metadata:{row:S.rowIndex,col:S.currentCells.length}};return S.currentCellContent=[],M},_t=d=>{let S=d||et();if(!S)return;let M=vt(S);if(M&&(M.children&&M.children.length>0||M.text)&&S.currentCells.push(M),S.currentCells.length>0){let G={type:"row",text:S.currentCells.map(Q=>Q.text).filter(Q=>Q!=="").join(t.newlineDelimiter??`
`),children:[...S.currentCells]};S.rows.push(G),S.currentCells=[],S.rowIndex++}},gt=()=>{if(z)return;z=!0;let d=et();if(!d){z=!1;return}if(_t(d),d.rows.length>0){X++;let S={type:"table",text:d.rows.map(M=>M.text).join(`
`),children:[...d.rows]};N.length>1?N[N.length-2].currentCellContent.push(S):y.push(S)}N.pop(),N.length===0&&(lt=!1,at=!1),z=!1},Et=d=>{let S,M=G=>{if(G.type==="text"){let Q=G.value,nt=Q.match(/HYPERLINK\s+"([^"]+)"/i);if(nt)return nt[1];let ht=Q.match(/"(https?:\/\/[^"]+|mailto:[^"]+|#[^"]+)"/);if(ht)return ht[1]}else if(G.type==="group"){let Q=!1,nt;for(let ht of G.content)if(ht.type==="text"){ht.value.toUpperCase().includes("HYPERLINK")&&(Q=!0);let Nt=ht.value.match(/"([^"]+)"/);Nt&&Q&&(nt=Nt[1])}else if(ht.type==="group"){let It=M(ht);It&&(nt=It)}if(nt)return nt}};for(let G of d.content)if(G.type==="group"){let Q=M(G);if(Q)return Q}return S},Rt=d=>{let S=d.trim();return S.startsWith("#")||!/^[a-zA-Z][a-zA-Z0-9+.-]*:/.test(S)?"internal":"external"},Ht=d=>{let S="",M=G=>{if(G.type==="text")S+=G.value;else if(G.type==="group")for(let Q of G.content)M(Q)};for(let G of d.content)M(G);return S},Ft=d=>{let S,M="";for(let Q of d.content)if(Q.type==="control"){let nt=y5[Q.value];nt&&(S=nt)}else Q.type==="text"?M+=Q.value.replace(/[^0-9a-fA-F]/g,""):Q.type;if(!S||M.length===0)return;let G=v5[S];if(G)try{let Q=Buffer.from(M,"hex"),nt=S,ht=`image_${c.length+1}.${nt}`;return{type:"image",mimeType:G,data:Q.toString("base64"),name:ht,extension:nt}}catch{return}},Xt=d=>{if(!/^[a-zA-Z]/.test(d.value))return`\\${d.value}`;let S=`\\${d.value}`;return d.param!==void 0&&(S+=d.param),S+=" ",S},Bt=d=>d.value.replace(/([\\{}])/g,"\\$1"),Mt=(d,S,M=0)=>{if(d.type==="group"){let G=["fonttbl","colortbl","stylesheet","info","macpict","pmmetafile","wmetafile","dibitmap","bitmap","object","nextGenerator","header","footer","nonshppict","xml","private","upnp","ud","filetbl","operator","author","creatim","revtim","printim","comment","fldinst","listtext","pntext"],Q=!1,nt=!1,ht=!1,It=!1;if(d.destination){if(d.destination==="footnote")nt=!0;else if(d.destination==="field"){let Wt=Et(d);Wt&&(j(),ht=!0,yt=Wt)}else if(d.destination==="listtable")k=!0;else if(k&&d.destination==="list")B=!0,$=void 0,H=void 0;else if(d.destination==="listoverridetable")it=!0;else if(it&&d.destination==="listoverride")ut=void 0,V=void 0;else if(d.destination==="pict")t.extractAttachments?It=!0:Q=!0;else if(G.includes(d.destination))Q=!0;else if(d.content.length>0&&d.content[0].type==="control"&&d.content[0].value==="*"){let Wt=["fldinst","nesttableprops"];t.extractAttachments&&Wt.push("shppict","listpicture"),Wt.includes(d.destination||"")||(Q=!0)}}if(d.destination==="listtext"||d.destination==="pntext"){w||(b=0),w=!0;let Wt=Ht(d);if(Wt){let Se=Wt.trim();["\xB7","\u2022","o","\xA7","\u25A0","\u25A1","\u25CF","\u25CB","\u25C6","\u25C7","\u25BA","\u25B8","\xB7","\u2022","\u25CF","\u25CB"].some(mr=>Se.includes(mr))||Se.length===1&&!/[0-9a-zA-Z]/.test(Se)?x="unordered":(/^[0-9ivxlcdm]+[\.\)]/i.test(Se)||/^[a-z][\.\)]/i.test(Se))&&(x="ordered")}Q=!0}if(Q)return;if(f+="{",It){let Wt=Ft(d);Wt&&(c.push(Wt),!k&&!B&&(ft(),y.push({type:"image",text:"",metadata:{attachmentName:Wt.name||`image_${c.length}`}})));for(let Se of d.content)if(Se.type==="control")f+=Xt(Se);else if(Se.type==="text")f+=Bt(Se);else if(Se.type==="group"){let Fr=_e=>{for(let mr of _e.content)mr.type==="control"?f+=Xt(mr):mr.type==="text"?f+=Bt(mr):mr.type==="group"&&(f+="{",Fr(mr),f+="}")};Fr(d)}f+="}";return}let Nt=y;if(nt){if(t.ignoreNotes)return;ft(),rt++;let Wt="footnote";Y===1?Wt="endnote":Y===2&&(Wt=d.content.some(_e=>_e.type==="control"&&_e.value==="ftnalt")?"endnote":"footnote");let Se={type:"note",children:[],metadata:{noteId:rt.toString(),noteType:Wt}};a.push(Se),y=Se.children}let Ot={...S};for(let Wt of d.content){if(Wt.type==="group"&&Wt.destination==="fldinst"){f+="{";let Se=Fr=>{for(let _e of Fr.content)_e.type==="control"?f+=Xt(_e):_e.type==="text"?f+=Bt(_e):_e.type==="group"&&(f+="{",Se(_e),f+="}")};Se(Wt),f+="}";continue}Mt(Wt,Ot,M+1)}d.destination==="listtable"?k=!1:d.destination==="list"?(B=!1,$!==void 0&&H!==void 0&&(tt[$]=H)):d.destination==="listoverridetable"?it=!1:it&&d.destination==="listoverride"&&V!==void 0&&ut!==void 0&&(K[V]=ut),nt&&(ft(),y=Nt),ht&&(j(),yt=void 0),f+="}"}else if(d.type==="text"){if(k||it){f+=Bt(d);return}mt(m,S)&&(j(),m={...S}),g+=d.value,f+=Bt(d)}else if(d.type==="control"){if(f+=Xt(d),k){if(d.value==="listid")$=d.param;else if(d.value==="levelnfc"||d.value==="levelnfcn"){let G=d.param!==void 0&&(d.param===0||d.param>=0&&d.param<=4);(!H||H==="unordered"&&G)&&(H=G?"ordered":"unordered")}return}if(it){d.value==="listid"?ut=d.param:d.value==="ls"&&(V=d.param);return}if(d.value==="par")ft(),m={...S};else if(d.value==="trowd"){let G=et();lt&&G&&G.currentCellContent.length>0?(st(),N.push({rows:[],currentCells:[],currentCellContent:[],rowIndex:0})):lt||(lt=!0,st()),at=!0,ct=[],J={isMergedContinuation:!1},R=0}else if(d.value==="clvmrg")J.isMergedContinuation=!0;else if(d.value==="clmgf")J.isMergedContinuation=!1;else if(d.value==="cellx")ct.push({...J}),J={isMergedContinuation:!1};else if(d.value==="cell"){at=!0;let G=!1;R<ct.length&&(G=ct[R].isMergedContinuation),R++;let Q=vt();if(Q&&!G){let nt=et();nt&&nt.currentCells.push(Q)}m={...S}}else if(d.value==="nestcell"){if(N.length>1){let Q=et();Q&&(Q.rows.length>0||Q.currentCells.length>0)&&gt()}at=!0;let G=vt();if(G){let Q=et();Q&&Q.currentCells.push(G)}m={...S}}else if(d.value==="row")_t(),m={...S},R=0,at=!1;else if(d.value==="nestrow")N.length>1&&gt(),_t(),m={...S},R=0;else if(d.value==="intbl")lt=!0,at=!0,st();else if(d.value==="pard")at=!1,b=0,v="left",w=!1,x=void 0,E=void 0,D=void 0,S.backgroundColor=void 0;else if(d.value==="tab")mt(m,S)&&(j(),m={...S}),g+="	";else if(d.value==="line")mt(m,S)&&(j(),m={...S}),g+=`
`;else if(d.value==="lquote")mt(m,S)&&(j(),m={...S}),g+="\u2018";else if(d.value==="rquote")mt(m,S)&&(j(),m={...S}),g+="\u2019";else if(d.value==="ldblquote")mt(m,S)&&(j(),m={...S}),g+="\u201C";else if(d.value==="rdblquote")mt(m,S)&&(j(),m={...S}),g+="\u201D";else if(d.value==="u"){if(d.param!==void 0){let G=d.param;G<0&&(G+=65536),mt(m,S)&&(j(),m={...S}),g+=String.fromCharCode(G)}}else if(d.value==="b")S.bold=d.param!==0;else if(d.value==="i")S.italic=d.param!==0;else if(d.value==="ul")S.underline=d.param!==0;else if(d.value==="ulnone")S.underline=!1;else if(d.value==="strike")S.strikethrough=d.param!==0;else if(d.value==="plain")S.bold=!1,S.italic=!1,S.underline=!1,S.strikethrough=!1,S.subscript=!1,S.superscript=!1,S.size=void 0,S.font=void 0,S.color=void 0,S.backgroundColor=void 0;else if(d.value==="fs")d.param!==void 0&&(S.size=(d.param/2).toString()+"pt");else if(d.value==="f")d.param!==void 0&&i[d.param]&&(S.font=i[d.param]);else if(d.value==="cf")d.param!==void 0&&o[d.param]&&(S.color=o[d.param]);else if(d.value==="fet")d.param!==void 0&&(Y=d.param);else if(d.value==="cb"||d.value==="highlight"||d.value==="chcbpat"||d.value==="cbpat")d.param!==void 0&&o[d.param]&&(S.backgroundColor=o[d.param]);else if(d.value==="sub")S.subscript=!0,S.superscript=!1;else if(d.value==="super")S.superscript=!0,S.subscript=!1;else if(d.value==="nosupersub")S.subscript=!1,S.superscript=!1;else if(d.value==="li")d.param!==void 0&&(b=Math.floor(d.param/360));else if(d.value==="ls"){if(d.param!==void 0){w||(b=0),w=!0,L[d.param]||(T++,L[d.param]=`rtf-list-${T}`),D=L[d.param];let G=K[d.param]!==void 0?K[d.param]:d.param;tt[G]&&(x=tt[G])}}else d.value==="ilvl"?d.param!==void 0&&(w=!0,b=d.param):d.value==="pnlvl"?(w=!0,d.param!==void 0&&(b=d.param)):d.value==="levelnfc"||d.value==="pnf"?d.param!==void 0&&(w=!0,d.param===23?x="unordered":x="ordered"):d.value==="pndec"||d.value==="pnord"||d.value==="pnlcltr"||d.value==="pnucltr"?(w||(b=0),w=!0,x="ordered"):d.value==="pnbullet"||d.value==="pncard"?(w||(b=0),w=!0,x="unordered"):d.value==="s"?d.param!==void 0&&d.param>=1&&d.param<=9&&(E=d.param):d.value==="ql"?v="left":d.value==="qc"?v="center":d.value==="qr"?v="right":d.value==="qj"&&(v="justify")}};Mt(r,{});let Vt=et();if((lt||Vt&&(Vt.rows.length>0||Vt.currentCells.length>0))&&gt(),ft(),!t.putNotesAtLast&&a.length>0&&(s.push(...a),a.length=0),t.ocr&&t.extractAttachments){for(let S of c)if(S.mimeType.startsWith("image/"))try{let M=Buffer.from(S.data,"base64");S.ocrText=(await bi(M,t.ocrLanguage)).trim()}catch(M){Tn(`OCR failed for ${S.name}:`,t,M)}let d=S=>{for(let M of S){if(M.type==="image"&&M.metadata&&"attachmentName"in M.metadata){let G=M.metadata,Q=c.find(nt=>nt.name===G.attachmentName);Q&&(Q.ocrText&&(M.text=Q.ocrText),Q.altText&&(G.altText=Q.altText))}M.children&&d(M.children)}};d(s)}let A=d=>{for(let S of d){if(S.type==="note"&&S.children){let M=G=>G.children&&G.children.length>0?G.children.map(M).join(""):G.text||"";S.text=S.children.map(M).join("").trim()}S.children&&A(S.children)}};A(s),A(a);let p={type:"rtf",metadata:{},content:s,attachments:c,toText:()=>{let d=s.map(S=>S.text).join(t.newlineDelimiter??`
`);return t.putNotesAtLast&&a.length>0&&(d+=(t.newlineDelimiter??`
`)+a.map(S=>S.text).join(t.newlineDelimiter??`
`)),d}};return t.putNotesAtLast&&a.length>0&&s.push(...a),p}catch(e){throw e}};function b5(n){let t={},e=r=>{for(let i of r.content)if(i.type==="group"){if(i.destination==="fonttbl"){for(let o of i.content)if(o.type==="group"){let s,a="";for(let c of o.content)c.type==="control"&&c.value==="f"?s=c.param:c.type==="text"&&(a+=c.value);s!==void 0&&a&&(a=a.replace(/;$/,"").trim(),t[s]=a)}return!0}if(e(i))return!0}return!1};return e(n),t}function w5(n){let t={},e=r=>{for(let i of r.content)if(i.type==="group"){if(i.destination==="colortbl"){let o=0,s=0,a=0,c=0;for(let u of i.content)if(u.type==="control")u.value==="red"&&u.param!==void 0?s=u.param:u.value==="green"&&u.param!==void 0?a=u.param:u.value==="blue"&&u.param!==void 0&&(c=u.param);else if(u.type==="text"&&u.value===";"){let h=`#${s.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}${c.toString(16).padStart(2,"0")}`;t[o]=h,o++,s=0,a=0,c=0}return!0}if(e(i))return!0}return!1};return e(n),t}wt();xt();At();var SP=dd(Z0());var _P=async(n,t)=>{let e=/word\/document[\d+]?.xml/,r=/word\/footnotes[\d+]?.xml/,i=/word\/endnotes[\d+]?.xml/,o=/word\/numbering[\d+]?.xml/,s=/(word\/)?media\/.*/,a=/docProps\/core[\d+]?.xml/,c=/docProps\/custom\.xml/,u=/word\/_rels\/document[\d+]?.xml\.rels/,h=/word\/styles[\d+]?.xml/,f=new SP.XMLSerializer,g=k=>{let B={},$=f.serializeToString(k),H=(vt,_t)=>{let gt=new RegExp(`<${_t}(?:\\s+w:val="([^"]+)")?\\s*\\/?>`),Et=vt.match(gt);if(Et){let Rt=Et[1];return Rt===void 0?!0:Rt==="1"||Rt==="true"||Rt==="on"}return null},tt=H($,"w:b");tt!==null&&(B.bold=tt);let it=H($,"w:i");it!==null&&(B.italic=it);let ut=$.match(/<w:u(?: w:val="([^"]+)")?\/?>/);if(ut){let vt=ut[1];(!vt||vt!=="none")&&(B.underline=!0)}let V=H($,"w:strike"),K=H($,"w:dstrike");V!==null?B.strikethrough=V:K!==null&&(B.strikethrough=K);let ot=$.match(/<w:sz w:val="(\d+)"/);ot&&(B.size=(parseInt(ot[1])/2).toString()+"pt");let yt=$.match(/<w:color w:val="([^"]+)"/);yt&&yt[1]!=="auto"&&(B.color="#"+yt[1]);let mt=$.match(/<w:shd[^>]*w:fill="([^"]+)"/);mt&&mt[1]!=="auto"&&(B.backgroundColor="#"+mt[1]);let j=$.match(/<w:highlight w:val="([^"]+)"/);if(j&&j[1]!=="none"){let vt={yellow:"#FFFF00",green:"#00FF00",cyan:"#00FFFF",magenta:"#FF00FF",blue:"#0000FF",red:"#FF0000",darkBlue:"#00008B",darkCyan:"#008B8B",darkGreen:"#006400",darkMagenta:"#8B008B",darkRed:"#8B0000",darkYellow:"#808000",darkGray:"#A9A9A9",lightGray:"#D3D3D3",black:"#000000"};B.backgroundColor=vt[j[1]]||j[1]}let z=$.match(/<w:rFonts[^>]*w:ascii="([^"]+)"/);if(z)B.font=z[1];else{let vt=$.match(/<w:rFonts[^>]*w:hAnsi="([^"]+)"/);vt&&(B.font=vt[1])}let ft=$.match(/<w:vertAlign w:val="([^"]+)"/);return ft&&(ft[1]==="subscript"&&(B.subscript=!0),ft[1]==="superscript"&&(B.superscript=!0)),B},m=await Ta(n,k=>!!k.match(e)||!!k.match(r)||!!k.match(i)||!!k.match(o)||!!k.match(a)||!!k.match(c)||!!k.match(u)||!!k.match(h)||!!t.extractAttachments&&!!k.match(s)),y=m.find(k=>k.path.match(a)),b=y?Ca(y.content.toString()):{},v=m.find(k=>k.path.match(c));if(v){let k=lh(v.content.toString());Object.keys(k).length>0&&(b.customProperties=k)}let w=new Map,x=new Map,E=[],D=[],_=m.filter(k=>k.path.match(s)),q=m.find(k=>k.path.match(u)),N={};if(q){let k=me(q.content.toString()),B=pt(k,"Relationship");for(let $=0;$<B.length;$++){let H=B[$].getAttribute("Id"),tt=B[$].getAttribute("Target");H&&tt&&(N[H]=tt)}}let rt=m.find(k=>k.path.match(o)),Y={};if(rt){let k=me(rt.content.toString()),B=pt(k,"w:num"),$=pt(k,"w:abstractNum"),H={};for(let tt=0;tt<$.length;tt++){let it=$[tt].getAttribute("w:abstractNumId");it&&(H[it]=$[tt])}for(let tt=0;tt<B.length;tt++){let it=B[tt].getAttribute("w:numId"),V=pt(B[tt],"w:abstractNumId")[0]?.getAttribute("w:val");if(it&&V&&H[V]){Y[it]={};let K=pt(H[V],"w:lvl");for(let ot=0;ot<K.length;ot++){let yt=K[ot].getAttribute("w:ilvl"),mt=pt(K[ot],"w:numFmt")[0],j=pt(K[ot],"w:lvlText")[0];yt&&(Y[it][yt]={numFmt:mt?.getAttribute("w:val")||"decimal",lvlText:j?.getAttribute("w:val")||""})}}}}let et=m.find(k=>k.path.match(h)),st={};if(et){let k=me(et.content.toString()),B=pt(k,"w:style");for(let $=0;$<B.length;$++){let H=B[$].getAttribute("w:styleId");if(H){let tt=pt(B[$],"w:rPr")[0],it=pt(B[$],"w:pPr")[0],ut=tt?g(tt):{},V,K;if(it){let ot=pt(it,"w:jc")[0];if(ot){let mt=ot.getAttribute("w:val");(mt==="left"||mt==="center"||mt==="right"||mt==="justify")&&(V=mt)}let yt=pt(it,"w:shd")[0];if(yt){let mt=yt.getAttribute("w:fill");mt&&mt!=="auto"&&(K="#"+mt)}}st[H]={formatting:ut,alignment:V,backgroundColor:K}}}}let lt={};if(et){let k=me(et.content.toString()),B=pt(k,"w:docDefaults")[0];if(B){let $=pt(B,"w:rPrDefault")[0];if($){let H=pt($,"w:rPr")[0];H&&(lt=g(H))}}}let at;if(et){let k=me(et.content.toString()),B=pt(k,"w:style");for(let $=0;$<B.length;$++){let H=B[$].getAttribute("w:type"),tt=B[$].getAttribute("w:default"),it=B[$].getAttribute("w:styleId");if(H==="paragraph"&&tt==="1"&&it){at=it;break}}!at&&st.Normal&&(at="Normal")}let X=[],ct=[],J={},R={},T=k=>{let B=f.serializeToString(k),$=pt(k,"w:numPr")[0],H=!!$,tt=pt(k,"w:pPr")[0],it=tt?pt(tt,"w:pStyle")[0]:null,ut=it?it.getAttribute("w:val"):null,V=ut?ut.startsWith("Heading")||ut==="Title":!1,K=ut&&st[ut]?st[ut]:{formatting:{}},ot=K.alignment;if(tt){let _t=pt(tt,"w:jc")[0];if(_t){let gt=_t.getAttribute("w:val");(gt==="left"||gt==="center"||gt==="right"||gt==="justify")&&(ot=gt)}}let yt=K.backgroundColor;if(tt){let _t=pt(tt,"w:shd")[0];if(_t){let gt=_t.getAttribute("w:fill");gt&&gt!=="auto"&&(yt="#"+gt)}}let mt={...K.formatting};if(tt){let _t=pt(tt,"w:rPr")[0];if(_t){let gt=g(_t);for(let Et in gt){let Rt=gt[Et];Rt===!1?delete mt[Et]:Rt!==void 0&&(mt[Et]=Rt)}}}let j="",z=[],ft=_t=>{if(_t.nodeName==="w:r"){let gt=_t,Et=pt(gt,"w:rPr")[0],Rt={};for(let Bt in mt)Rt[Bt]=mt[Bt];let Ht=Et?pt(Et,"w:rStyle")[0]:null,Ft=Ht?Ht.getAttribute("w:val"):ut;if(Ft&&st[Ft])for(let Bt in st[Ft].formatting)Rt[Bt]=st[Ft].formatting[Bt];if(Et){let Bt=g(Et);for(let Mt in Bt){let Vt=Bt[Mt];Vt===!1?delete Rt[Mt]:Vt!==void 0&&(Rt[Mt]=Vt)}}!Rt.backgroundColor&&yt&&(Rt.backgroundColor=yt);let Xt=pt(gt,"w:t");for(let Bt of Xt){let Mt=Bt.textContent||"";j+=Mt;let Vt={type:"text",text:Mt,formatting:Rt};t.includeRawContent&&(Vt.rawContent=f.serializeToString(Bt));let A=Ft||ut||at;A&&(Vt.metadata={style:A}),z.push(Vt)}if(t.extractAttachments){let Bt=pt(gt,"w:drawing"),Mt=pt(gt,"w:pict"),Vt=[...Bt,...Mt];for(let A of Vt){let p=f.serializeToString(A),d="",S=pt(A,"wp:docPr")[0];S&&(d=S.getAttribute("descr")||S.getAttribute("title")||"");let M="",G=pt(A,"a:blip")[0];if(G)M=G.getAttribute("r:embed")||"";else{let Q=pt(A,"v:imagedata")[0];Q&&(M=Q.getAttribute("r:id")||"")}if(M&&N[M]){let nt=N[M].split("/").pop();if(nt){let ht={type:"image",text:"",metadata:{attachmentName:nt,altText:d}};t.includeRawContent&&(ht.rawContent=p),z.push(ht)}}else{let Q={type:"image",text:""};t.includeRawContent&&(Q.rawContent=p),z.push(Q)}}}if(!t.ignoreNotes){let Bt=pt(gt,"w:footnoteReference")[0];if(Bt){let Vt=Bt.getAttribute("w:id");if(Vt&&w.has(Vt)){let A=w.get(Vt),p={type:"note",text:A.map(d=>d.text).join(" "),children:A,metadata:{noteType:"footnote",noteId:Vt}};t.putNotesAtLast?E.push(p):z.push(p)}}let Mt=pt(gt,"w:endnoteReference")[0];if(Mt){let Vt=Mt.getAttribute("w:id");if(Vt&&x.has(Vt)){let A=x.get(Vt),p={type:"note",text:A.map(d=>d.text).join(" "),children:A,metadata:{noteType:"endnote",noteId:Vt}};t.putNotesAtLast?E.push(p):z.push(p)}}}}else if(_t.nodeName==="w:hyperlink"){let gt=_t,Et=gt.getAttribute("r:id"),Rt=gt.getAttribute("w:anchor"),Ht;Rt?Ht={link:"#"+Rt,linkType:"internal"}:Et&&N[Et]&&(Ht={link:N[Et],linkType:"external"});let Ft=Array.from(gt.childNodes);for(let Xt of Ft){let Bt=z.length;if(ft(Xt),Ht)for(let Mt=Bt;Mt<z.length;Mt++)z[Mt].type==="text"&&(z[Mt].metadata={...z[Mt].metadata??{},...Ht})}}},vt=Array.from(k.childNodes);for(let _t of vt)ft(_t);if(H){let _t=pt($,"w:numId")[0],gt=pt($,"w:ilvl")[0],Et=_t&&_t.getAttribute("w:val")||"0",Rt=gt?parseInt(gt.getAttribute("w:val")||"0"):0,Ht="ordered",Ft=0;if(Et&&Y[Et]){let Bt=Rt.toString();J[Et]||(J[Et]={}),J[Et][Bt]||(J[Et][Bt]=0),J[Et][Bt]++;for(let Vt=Rt+1;Vt<10;Vt++)J[Et][Vt.toString()]&&(J[Et][Vt.toString()]=0);Ht=(Y[Et][Bt]?.numFmt||"decimal")==="bullet"?"unordered":"ordered",R[Et]||(R[Et]={}),R[Et][Bt]===void 0?R[Et][Bt]=0:R[Et][Bt]++,Ft=R[Et][Bt]}let Xt={type:"list",text:j,children:z,metadata:{listType:Ht,indentation:Rt,alignment:ot||"left",listId:Et,itemIndex:Ft,style:ut}};return t.includeRawContent&&(Xt.rawContent=B),Xt}else if(V){let _t=ut&&parseInt(ut.replace("Heading",""))||1,gt={type:"heading",text:j,children:z,metadata:{level:_t,alignment:ot,style:ut??void 0}};return t.includeRawContent&&(gt.rawContent=B),gt}else{let _t={type:"paragraph",text:j,children:z,metadata:{alignment:ot,style:ut??void 0}};return t.includeRawContent&&(_t.rawContent=B),_t}},L=k=>{let B=[],$=Ur(k,"w:tr");for(let H=0;H<$.length;H++){let tt=$[H],it=[],ut=Ur(tt,"w:tc");for(let K=0;K<ut.length;K++){let ot=ut[K],yt=[],mt="",j=Array.from(ot.childNodes);for(let ft of j)if(ft.nodeName==="w:p"){let vt=T(ft);yt.push(vt),mt+=vt.text}else if(ft.nodeName==="w:tbl"){let vt=L(ft);yt.push(vt)}let z={type:"cell",text:mt,children:yt,metadata:{row:H,col:K}};it.push(z)}let V={type:"row",children:it};B.push(V)}return{type:"table",children:B}};if(!t.ignoreNotes){let k=m.find($=>$.path.match(r));if(k){let $=me(k.content.toString()),H=pt($,"w:footnote");for(let tt of H){let it=tt.getAttribute("w:id");if(!it||it==="-1"||it==="0")continue;let ut=pt(tt,"w:p");w.set(it,ut.map(V=>T(V)))}}let B=m.find($=>$.path.match(i));if(B){let $=me(B.content.toString()),H=pt($,"w:endnote");for(let tt of H){let it=tt.getAttribute("w:id");if(!it||it==="-1"||it==="0")continue;let ut=pt(tt,"w:p");x.set(it,ut.map(V=>T(V)))}}}for(let k of m){if(k.path.match(s)||k.path.match(o)||k.path.match(u)||k.path.match(h)||k.path.match(r)||k.path.match(i))continue;let B=k.content.toString();t.includeRawContent&&ct.push(B);let $=me(B),H=pt($,"w:body")[0];if(H){let tt=Array.from(H.childNodes);for(let it of tt)it.nodeName==="w:p"?X.push(T(it)):it.nodeName==="w:tbl"&&X.push(L(it))}}if(t.extractAttachments){for(let k of _){let B=Wi(k.path.split("/").pop()||"image",k.content);if(D.push(B),t.ocr&&B.mimeType.startsWith("image/"))try{B.ocrText=(await bi(k.content,t.ocrLanguage)).trim()}catch($){Tn(`OCR failed for ${B.name}:`,t,$)}}if(t.ocr){let k=B=>{for(let $ of B){if($.type==="image"&&"attachmentName"in($.metadata||{})){let H=$.metadata,tt=D.find(it=>it.name===H.attachmentName);tt&&tt.ocrText&&($.text=tt.ocrText,tt.altText=H.altText)}$.children&&k($.children)}};k(X)}}return t.putNotesAtLast&&E.length>0&&X.push(...E),{type:"docx",metadata:{...b,formatting:lt,styleMap:st},content:X,attachments:D,toText:()=>X.map(k=>{let B=$=>{let H="";return $.children?H+=$.children.map(B).filter(tt=>tt!="").join($.children[0]?.children?t.newlineDelimiter??`
`:""):H+=$.text||"",H};return B(k)}).filter(k=>k!="").join(t.newlineDelimiter??`
`)}};var Du=class{static async parseOffice(t,e,r){let i,o={};typeof e=="function"?(i=e,o=r||{}):o=e||{};let s={ignoreNotes:!1,newlineDelimiter:`
`,putNotesAtLast:!1,outputErrorToConsole:!1,extractAttachments:!1,ocr:!1,ocrLanguage:"eng",includeRawContent:!1,pdfWorkerSrc:"",...o},a=Buffer.alloc(0),c="",u;try{if(!t)throw yo("IMPROPER_ARGUMENTS",s);if(t instanceof ArrayBuffer)a=Buffer.from(t);else if(Buffer.isBuffer(t))a=t;else if(typeof t=="string"){if(u=t,!T0(t))throw yo("FILE_DOES_NOT_EXIST",s,t);if(m2(t).isDirectory())throw yo("LOCATION_NOT_FOUND",s,t);a=y2(t),c=t.split(".").pop()?.toLowerCase()||""}else throw yo("INVALID_INPUT",s);if(!c){let f=await CP.fromBuffer(a);if(f)c=f.ext.toLowerCase();else throw yo("IMPROPER_BUFFERS",s)}let h;switch(c){case"docx":h=await _P(a,s);break;case"pptx":h=await xP(a,s);break;case"xlsx":h=await YI(a,s);break;case"odt":case"odp":case"ods":h=await KI(a,s);break;case"pdf":h=await wP(a,s);break;case"rtf":h=await EP(a,s);break;default:throw yo("EXTENSION_UNSUPPORTED",s,c)}return i&&i(h),h}catch(h){let f=jR(h,s,u);throw i&&i(void 0,f),f}}};var A5=Du.parseOffice;var x5=Du;if(typeof _l<"u"&&typeof module<"u"&&_l.main===module){let i=function(o){return o.startsWith("--")&&o.includes("=")};E5=i;let n=process.argv.slice(2),t,e=!1,r=[];if(n.forEach(o=>{i(o)?r.push(o):t||(t=o)}),t){let o={};r.forEach(s=>{let[a,c]=s.split("="),u=a.replace("--","");u==="toText"?c.toLowerCase()==="true"?e=!0:c.toLowerCase()==="false"?e=!1:console.log(`Invalid value for toText: ${c}`):c.toLowerCase()==="true"?o[u]=!0:c.toLowerCase()==="false"?o[u]=!1:o[u]=c}),Du.parseOffice(t,o).then(s=>{console.log(e?s.toText():JSON.stringify(s,null,2))}).catch(console.error)}else console.log("Usage: node officeparser [file] [--option=value]")}var E5;return aE(S5);})();
/*! Bundled license information:

@jspm/core/nodelibs/browser/chunk-DtuTasat.js:
@jspm/core/nodelibs/browser/chunk-B738Er4n.js:
ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@jspm/core/nodelibs/browser/chunk-CjPlbOtt.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   *)
*/
//# sourceMappingURL=officeparser.browser.js.map
